const {
    useState: useState,
    useEffect: useEffect
} = React, API_URL = "https://tutts-backend-production.up.railway.app/api";

// ==================== API KEY OPENROUTESERVICE (ROTEIRIZADOR) ====================
const ORS_API_KEY = 'eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6IjM5MTI2ZjMwMTMxOTQ3OTU5Mjc2YWM5OGNjNGZiZWEwIiwiaCI6Im11cm11cjY0In0=';

// ==================== SISTEMA DE VERS√ÉO E CACHE ====================
const APP_VERSION = "2.1.0"; // Incrementar a cada deploy importante
const VERSION_KEY = "tutts_app_version";

// Verificar se precisa limpar cache (vers√£o diferente)
(function checkVersion() {
    const savedVersion = localStorage.getItem(VERSION_KEY);
    if (savedVersion !== APP_VERSION) {
        console.log(`üîÑ Atualizando de ${savedVersion || 'inicial'} para ${APP_VERSION}`);
        
        // Limpar caches
        if ('caches' in window) {
            caches.keys().then(names => {
                names.forEach(name => {
                    caches.delete(name);
                    console.log(`üóëÔ∏è Cache ${name} limpo`);
                });
            });
        }
        
        // Limpar localStorage antigo (exceto dados importantes)
        const keysToKeep = ['tutts_user', 'tutts_token', VERSION_KEY];
        Object.keys(localStorage).forEach(key => {
            if (!keysToKeep.includes(key) && !key.startsWith('tutts_tutorial')) {
                localStorage.removeItem(key);
            }
        });
        
        // Salvar nova vers√£o
        localStorage.setItem(VERSION_KEY, APP_VERSION);
        
        // For√ßar reload se tinha vers√£o anterior (n√£o no primeiro acesso)
        if (savedVersion) {
            console.log('üîÑ Recarregando para aplicar atualiza√ß√µes...');
            window.location.reload(true);
        }
    }
})();

// For√ßar atualiza√ß√£o do Service Worker se existir
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.getRegistrations().then(registrations => {
        registrations.forEach(registration => {
            registration.update();
        });
    });
}

// ==================== FIM SISTEMA DE VERS√ÉO ====================

// ==================== FUN√á√ïES DE AUTENTICA√á√ÉO ====================

// Obter token JWT armazenado
const getToken = () => {
    return sessionStorage.getItem("tutts_token");
};

// Salvar token JWT
const setToken = (token) => {
    if (token) {
        sessionStorage.setItem("tutts_token", token);
    } else {
        sessionStorage.removeItem("tutts_token");
    }
};

// Fun√ß√£o para fazer requisi√ß√µes autenticadas
const fetchAuth = async (url, options = {}) => {
    const token = getToken();
    const headers = {
        'Content-Type': 'application/json',
        ...options.headers
    };
    
    if (token) {
        headers['Authorization'] = `Bearer ${token}`;
    }
    
    try {
        const response = await fetch(url, {
            ...options,
            headers
        });
        
        // Se token expirou, fazer logout (apenas se tinha token)
        if (response.status === 401 && token) {
            const data = await response.json().catch(() => ({}));
            if (data.expired) {
                sessionStorage.removeItem("tutts_user");
                sessionStorage.removeItem("tutts_token");
                window.location.reload();
            }
        }
        
        return response;
    } catch (error) {
        console.error('Erro na requisi√ß√£o:', error);
        throw error;
    }
};

// ==================== FIM FUN√á√ïES DE AUTENTICA√á√ÉO ====================

// Fun√ß√£o helper para verificar permiss√µes de m√≥dulo
// Retorna true se o usu√°rio tem acesso ao m√≥dulo
function hasModuleAccess(user, moduleId) {
    if (!user) return false;
    
    // Admin master tem acesso a tudo
    if (user.role === "admin_master") return true;
    
    // Admin financeiro tem acesso apenas ao financeiro e solicita√ß√µes
    if (user.role === "admin_financeiro") {
        return ["financeiro", "solicitacoes", "disponibilidade"].includes(moduleId);
    }
    
    // User comum n√£o tem acesso a m√≥dulos admin
    if (user.role === "user") return false;
    
    // Admin normal - verificar permiss√µes
    if (user.role === "admin") {
        // Se n√£o tem permiss√µes configuradas, dar acesso a tudo
        if (!user.permissions || !user.permissions.modulos) return true;
        
        // Se hasConfig √© false, significa que nunca foi configurado
        if (user.permissions.hasConfig === false) return true;
        
        // Verificar permiss√£o espec√≠fica do m√≥dulo
        const perm = user.permissions.modulos[moduleId];
        // Se a permiss√£o √© undefined ou true, tem acesso
        // Se √© false, n√£o tem acesso
        return perm !== false;
    }
    
    return false;
}

// Fun√ß√£o helper para encontrar a primeira aba permitida de um m√≥dulo
function getFirstAllowedTab(user, moduleId, defaultTab) {
    if (!user) return defaultTab;
    
    // Admin master tem acesso a tudo
    if (user.role === "admin_master") return defaultTab;
    
    // Encontrar configura√ß√£o do m√≥dulo
    const moduloConfig = SISTEMA_MODULOS_CONFIG.find(m => m.id === moduleId);
    if (!moduloConfig || !moduloConfig.abas) return defaultTab;
    
    // Se n√£o tem permiss√µes de abas configuradas, retorna o default
    const abas = user.permissions && user.permissions.abas ? user.permissions.abas : {};
    if (Object.keys(abas).length === 0) return defaultTab;
    
    // Procurar primeira aba permitida
    for (let i = 0; i < moduloConfig.abas.length; i++) {
        const aba = moduloConfig.abas[i];
        const abaKey = moduleId + "_" + aba.id.replace("-", "");
        if (abas[abaKey] !== false) {
            return aba.id;
        }
    }
    
    // Se nenhuma aba permitida, retorna o default
    return defaultTab;
}

// CONFIGURA√á√ÉO GLOBAL DE M√ìDULOS E ABAS - Edite aqui para adicionar novos m√≥dulos/abas
const SISTEMA_MODULOS_CONFIG = [
    { id: "solicitacoes", label: "Solicita√ß√µes", icon: "üìã",
      abas: [{id: "dashboard", label: "Dashboard"}, {id: "search", label: "Busca"}, {id: "ranking", label: "Ranking"}, {id: "relatorios", label: "Relat√≥rios"}]
    },
    { id: "financeiro", label: "Financeiro", icon: "üí∞",
      abas: [{id: "solicitacoes", label: "Solicita√ß√µes"}, {id: "validacao", label: "Valida√ß√£o"}, {id: "conciliacao", label: "Concilia√ß√£o"}, {id: "resumo", label: "Resumo"}, {id: "gratuidades", label: "Gratuidades"}, {id: "restritos", label: "Restritos"}, {id: "indicacoes", label: "Indica√ß√µes"}, {id: "promo-novatos", label: "Promo Novatos"}, {id: "loja", label: "Loja"}, {id: "relatorios", label: "Relat√≥rios"}, {id: "horarios", label: "Hor√°rios"}, {id: "avisos", label: "Avisos"}, {id: "backup", label: "Backup"}, {id: "saldo-plific", label: "Saldo Plific"}]
    },
    { id: "operacional", label: "Operacional", icon: "‚öôÔ∏è",
      abas: [{id: "indicacoes", label: "Indica√ß√µes"}, {id: "promo-novatos", label: "Promo Novatos"}, {id: "avisos", label: "Avisos"}, {id: "novas-operacoes", label: "Novas Opera√ß√µes"}, {id: "recrutamento", label: "Recrutamento"}, {id: "localizacao-clientes", label: "Localiza√ß√£o Clientes"}, {id: "relatorio-diario", label: "Relat√≥rio Di√°rio"}, {id: "score-prof", label: "Score Prof"}]
    },
    { id: "disponibilidade", label: "Disponibilidade", icon: "üìÖ",
      abas: [{id: "panorama", label: "Panorama"}, {id: "principal", label: "Principal"}, {id: "faltosos", label: "Faltosos"}, {id: "espelho", label: "Espelho"}, {id: "relatorios", label: "Relat√≥rios"}, {id: "motoboys", label: "Motoboys"}, {id: "restricoes", label: "Restri√ß√µes"}, {id: "config", label: "Configura√ß√µes"}]
    },
    { id: "bi", label: "BI", icon: "üìä",
      abas: [{id: "dashboard", label: "Dashboard"}, {id: "acompanhamento", label: "Acompanhamento"}, {id: "profissionais", label: "Por Profissional"}, {id: "garantido", label: "Garantido"}, {id: "os", label: "An√°lise por OS"}, {id: "upload", label: "Upload"}, {id: "config", label: "Configura√ß√µes"}]
    },
    { id: "todo", label: "TO-DO", icon: "üìù",
      abas: [{id: "tarefas", label: "Tarefas"}, {id: "metricas", label: "M√©tricas"}]
    },
    { id: "social", label: "Social", icon: "üíú",
      abas: [{id: "perfil", label: "Meu Perfil"}, {id: "comunidade", label: "Comunidade"}, {id: "mensagens", label: "Mensagens"}]
    },
    { id: "config", label: "Configura√ß√µes", icon: "üîß",
      abas: [{id: "usuarios", label: "Usu√°rios"}, {id: "permissoes", label: "Permiss√µes ADM"}, {id: "auditoria", label: "Auditoria"}, {id: "sistema", label: "Sistema"}]
    }
];

// MENSAGENS DE GENTILEZA - Uma ser√° exibida aleatoriamente a cada acesso
const MENSAGENS_GENTILEZA = [
    "Pequenos gestos de gentileza fazem grandes diferen√ßas.",
    "Gentileza √© a linguagem que o cora√ß√£o entende.",
    "Ser gentil √© um ato de coragem e de amor.",
    "Espalhe amor onde quer que v√°. O mundo precisa disso.",
    "A gentileza √© o que torna o mundo um lugar melhor.",
    "Uma palavra amiga pode mudar o dia de algu√©m.",
    "Seja a gentileza que voc√™ deseja ver no mundo.",
    "Atitudes gentis n√£o custam nada, mas valem muito.",
    "A bondade em palavras cria confian√ßa.",
    "Sorria! √Äs vezes, √© o que o outro precisa.",
    "A verdadeira gentileza √© ajudar sem esperar nada em troca.",
    "Palavras gentis s√£o como abra√ßos silenciosos.",
    "Ser gentil √© uma escolha di√°ria.",
    "A gentileza √© a chave para abrir cora√ß√µes.",
    "A verdadeira for√ßa est√° em ser gentil.",
    "Seja luz na vida de algu√©m hoje.",
    "Pequenos gestos, grandes mudan√ßas.",
    "Gentileza √© amor em a√ß√£o.",
    "A gratid√£o √© o primeiro passo para a gentileza.",
    "Ser gentil √© um ato de esperan√ßa.",
    "Gentileza gera gentileza, sempre.",
    "A generosidade √© o reflexo de um cora√ß√£o gentil.",
    "Cada sorriso conta uma hist√≥ria de bondade.",
    "Compartilhar gentileza √© como plantar sementes de paz.",
    "As melhores pessoas s√£o aquelas que espalham amor.",
    "Gentileza √© o perfume que deixamos pelo caminho.",
    "Deixe a gentileza ser sua marca registrada.",
    "A simplicidade dos atos gentis √© poderosa.",
    "Trate os outros com a mesma bondade que voc√™ deseja receber.",
    "A bondade √© o tesouro mais precioso de todos."
];

// Fun√ß√£o para obter sauda√ß√£o baseada no hor√°rio
const getSaudacao = () => {
    const hora = new Date().getHours();
    if (hora >= 5 && hora < 12) return "Bom dia";
    if (hora >= 12 && hora < 18) return "Boa tarde";
    return "Boa noite";
};

// Fun√ß√£o para obter mensagem aleat√≥ria
const getMensagemGentileza = () => {
    const index = Math.floor(Math.random() * MENSAGENS_GENTILEZA.length);
    return MENSAGENS_GENTILEZA[index];
};

fetch(`${API_URL.replace("/api","")}/health`).catch(() => {});
const hideLoadingScreen = () => {
        const e = document.getElementById("loading-screen");
        e && (e.classList.add("fade-out"), setTimeout(() => e.remove(), 500))
    },
    Toast = ({
        message: e,
        type: t
    }) => React.createElement("div", {
        className: `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-2xl toast ${"success"===t?"bg-green-600":"bg-red-600"} text-white font-semibold flex items-center gap-3`
    }, React.createElement("span", {
        className: "text-2xl"
    }, "success" === t ? "‚úì" : "‚úó"), React.createElement("span", null, e)),
    LoadingOverlay = ({
        message: e = "Carregando..."
    }) => React.createElement("div", {
        className: "fixed inset-0 bg-black bg-opacity-30 z-50 flex items-center justify-center"
    }, React.createElement("div", {
        className: "bg-white rounded-xl p-6 shadow-2xl flex flex-col items-center gap-3"
    }, React.createElement("div", {
        className: "w-10 h-10 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"
    }), React.createElement("p", {
        className: "text-gray-700 font-semibold"
    }, e))),
    ImageModal = ({
        imageUrl: e,
        onClose: t
    }) => React.createElement("div", {
        className: "fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",
        onClick: t
    }, React.createElement("div", {
        className: "relative max-w-4xl max-h-screen"
    }, React.createElement("button", {
        onClick: t,
        className: "absolute -top-10 right-0 text-white text-3xl hover:text-gray-300"
    }, "‚úï"), React.createElement("img", {
        src: e,
        alt: "Expandido",
        className: "max-w-full max-h-screen rounded-lg shadow-2xl",
        onClick: e => e.stopPropagation()
    }))),
    calcularCRC16 = e => {
        let t = 65535;
        for (let a = 0; a < e.length; a++) {
            t ^= e.charCodeAt(a) << 8;
            for (let e = 0; e < 8; e++) t = 32768 & t ? 65535 & (t << 1 ^ 4129) : t << 1 & 65535
        }
        return t.toString(16).toUpperCase().padStart(4, "0")
    },
    montarCampo = (e, t) => `${e}${t.length.toString().padStart(2,"0")}${t}`,
    formatarChavePix = e => {
        let t = e.trim();
        if (t.includes("@")) return t.toLowerCase().trim();
        if (/[a-zA-Z]/.test(t)) return t;
        const a = t.replace(/\D/g, "");
        return t.includes("(") || t.includes(")") ? "+55" + a : 14 === a.length ? a : 13 === a.length && a.startsWith("55") ? "+" + a : 10 === a.length ? "+55" + a : 11 === a.length ? t.includes(".") && t.includes("-") ? a : "9" === a.charAt(2) ? "+55" + a : a : t.startsWith("+") ? "+" + a : a || t
    },
    generatePixCode = (e, t, a, l = "BRASILIA") => {
        const r = formatarChavePix(e),
            o = a.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^a-zA-Z0-9 ]/g, "").toUpperCase().substring(0, 25).trim(),
            c = l.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^a-zA-Z0-9 ]/g, "").toUpperCase().substring(0, 15).trim(),
            s = parseFloat(t).toFixed(2),
            n = montarCampo("00", "br.gov.bcb.pix") + montarCampo("01", r),
            m = montarCampo("05", "***");
        let i = "";
        i += montarCampo("00", "01"), i += montarCampo("26", n), i += montarCampo("52", "0000"), i += montarCampo("53", "986"), i += montarCampo("54", s), i += montarCampo("58", "BR"), i += montarCampo("59", o), i += montarCampo("60", c), i += montarCampo("62", m), i += "6304";
        return i += calcularCRC16(i), i
    },
    PixQRCodeModal = ({
        withdrawal: e,
        onClose: t,
        showToast: a
    }) => {
        const [l, r] = React.useState(""), [o, c] = React.useState(""), [s, n] = React.useState(!1), [m, i] = React.useState(!0), [d, p] = React.useState("");
        React.useRef(null);
        React.useEffect(() => {
            if (e) try {
                const t = generatePixCode(e.pix_key, e.final_amount, e.user_name);
                if (c(t), "undefined" != typeof QRCode && QRCode.toDataURL) QRCode.toDataURL(t, {
                    errorCorrectionLevel: "M",
                    type: "image/png",
                    width: 300,
                    margin: 2,
                    color: {
                        dark: "#000000",
                        light: "#FFFFFF"
                    }
                }).then(e => {
                    r(e), i(!1)
                }).catch(e => {
                    console.error("Erro QRCode.toDataURL:", e);
                    const a = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(t)}`;
                    r(a), i(!1)
                });
                else {
                    const e = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(t)}`;
                    r(e), i(!1)
                }
            } catch (e) {
                console.error("Erro ao gerar PIX:", e), p("Erro ao gerar c√≥digo PIX"), i(!1)
            }
        }, [e]);
        return e ? React.createElement("div", {
            className: "fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",
            onClick: t
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",
            onClick: e => e.stopPropagation()
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-green-600 to-green-700 text-white p-4"
        }, React.createElement("div", {
            className: "flex items-center justify-between"
        }, React.createElement("div", {
            className: "flex items-center gap-3"
        }, React.createElement("span", {
            className: "text-3xl"
        }, "üí∞"), React.createElement("div", null, React.createElement("h2", {
            className: "text-lg font-bold"
        }, "PIX Copia e Cola"), React.createElement("p", {
            className: "text-green-200 text-sm"
        }, "Escaneie ou copie o c√≥digo"))), React.createElement("button", {
            onClick: t,
            className: "text-white/80 hover:text-white text-2xl font-bold"
        }, "‚úï"))), React.createElement("div", {
            className: "p-6"
        }, React.createElement("div", {
            className: "bg-gray-50 rounded-xl p-4 mb-4"
        }, React.createElement("div", {
            className: "grid grid-cols-2 gap-3 text-sm"
        }, React.createElement("div", null, React.createElement("p", {
            className: "text-gray-500 text-xs"
        }, "Benefici√°rio"), React.createElement("p", {
            className: "font-semibold text-gray-800 truncate"
        }, e.user_name)), React.createElement("div", null, React.createElement("p", {
            className: "text-gray-500 text-xs"
        }, "C√≥digo"), React.createElement("p", {
            className: "font-semibold text-gray-800"
        }, e.user_cod)), React.createElement("div", {
            className: "col-span-2"
        }, React.createElement("p", {
            className: "text-gray-500 text-xs"
        }, "Chave PIX (original)"), React.createElement("p", {
            className: "font-semibold text-gray-800 text-sm break-all"
        }, e.pix_key)), React.createElement("div", {
            className: "col-span-2"
        }, React.createElement("p", {
            className: "text-gray-500 text-xs"
        }, "Chave PIX (formatada para envio)"), React.createElement("p", {
            className: "font-semibold text-blue-600 text-sm break-all font-mono"
        }, formatarChavePix(e.pix_key))), React.createElement("div", {
            className: "col-span-2"
        }, React.createElement("p", {
            className: "text-gray-500 text-xs"
        }, "Valor a Transferir"), React.createElement("p", {
            className: "font-bold text-green-600 text-2xl"
        }, "R$ ", parseFloat(e.final_amount).toFixed(2).replace(".", ","))))), React.createElement("div", {
            className: "flex flex-col items-center mb-4"
        }, m ? React.createElement("div", {
            className: "w-64 h-64 bg-gray-100 rounded-xl flex items-center justify-center"
        }, React.createElement("div", {
            className: "text-center"
        }, React.createElement("div", {
            className: "w-10 h-10 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"
        }), React.createElement("p", {
            className: "text-gray-500 text-sm"
        }, "Gerando QR Code..."))) : d ? React.createElement("div", {
            className: "w-64 h-64 bg-red-50 rounded-xl flex items-center justify-center"
        }, React.createElement("p", {
            className: "text-red-500 text-center p-4"
        }, d)) : l ? React.createElement("img", {
            src: l,
            alt: "QR Code PIX",
            className: "w-64 h-64 border-4 border-green-200 rounded-xl shadow-lg",
            onError: () => {
                const e = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encodeURIComponent(o)}`;
                r(e)
            }
        }) : null), React.createElement("div", {
            className: "mb-4"
        }, React.createElement("p", {
            className: "text-xs text-gray-500 mb-2 font-semibold"
        }, "C√≥digo Copia e Cola:"), React.createElement("div", {
            className: "bg-gray-100 rounded-lg p-3 text-[10px] font-mono text-gray-600 break-all max-h-24 overflow-y-auto border"
        }, o)), React.createElement("button", {
            onClick: async () => {
                try {
                    await navigator.clipboard.writeText(o), n(!0), a("‚úÖ C√≥digo PIX copiado!", "success"), setTimeout(() => n(!1), 3e3)
                } catch (e) {
                    const t = document.createElement("textarea");
                    t.value = o, t.style.position = "fixed", t.style.left = "-9999px", document.body.appendChild(t), t.select();
                    try {
                        document.execCommand("copy"), n(!0), a("‚úÖ C√≥digo PIX copiado!", "success"), setTimeout(() => n(!1), 3e3)
                    } catch (e) {
                        a("‚ùå Erro ao copiar", "error")
                    }
                    document.body.removeChild(t)
                }
            },
            className: "w-full py-4 rounded-xl font-bold text-white transition-all flex items-center justify-center gap-2 text-lg " + (s ? "bg-green-500" : "bg-green-600 hover:bg-green-700 active:scale-95")
        }, s ? React.createElement(React.Fragment, null, "‚úÖ C√≥digo Copiado!") : React.createElement(React.Fragment, null, "üìã Copiar C√≥digo PIX")), React.createElement("p", {
            className: "text-xs text-gray-400 text-center mt-3"
        }, "‚ö†Ô∏è Confira os dados antes de efetuar o pagamento")))) : null
    },
    PieChart = ({
        data: e,
        title: t
    }) => {
        const a = e.reduce((e, t) => e + t.value, 0);
        if (0 === a) return React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h3", {
            className: "text-lg font-semibold mb-4"
        }, t), React.createElement("p", {
            className: "text-gray-500 text-center py-8"
        }, "Sem dados dispon√≠veis"));
        let l = 0;
        const r = e.map((e, t) => {
            const r = e.value / a * 100,
                o = r / 100 * 360,
                c = l;
            l += o;
            const s = 100 + 90 * Math.cos((c - 90) * Math.PI / 180),
                n = 100 + 90 * Math.sin((c - 90) * Math.PI / 180),
                m = 100 + 90 * Math.cos((l - 90) * Math.PI / 180),
                i = 100 + 90 * Math.sin((l - 90) * Math.PI / 180),
                d = o > 180 ? 1 : 0;
            return {
                ...e,
                path: `M 100 100 L ${s} ${n} A 90 90 0 ${d} 1 ${m} ${i} Z`,
                percentage: r.toFixed(1)
            }
        });
        return React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h3", {
            className: "text-lg font-semibold mb-4"
        }, t), React.createElement("div", {
            className: "flex flex-col md:flex-row items-center gap-6"
        }, React.createElement("svg", {
            viewBox: "0 0 200 200",
            className: "w-48 h-48"
        }, r.map((e, t) => React.createElement("path", {
            key: t,
            d: e.path,
            fill: e.color,
            className: "hover:opacity-80 transition-opacity cursor-pointer"
        }))), React.createElement("div", {
            className: "flex-1 space-y-2"
        }, r.map((e, t) => React.createElement("div", {
            key: t,
            className: "flex items-center gap-2"
        }, React.createElement("div", {
            className: "w-4 h-4 rounded",
            style: {
                backgroundColor: e.color
            }
        }), React.createElement("span", {
            className: "text-sm flex-1"
        }, e.label), React.createElement("span", {
            className: "font-semibold"
        }, e.value), React.createElement("span", {
            className: "text-gray-500 text-sm"
        }, "(", e.percentage, "%)"))))))
    },
    StatusPieChart = ({
        submissions: e
    }) => {
        const t = {
                pendente: e.filter(e => "pendente" === e.status).length,
                aprovada: e.filter(e => "aprovada" === e.status).length,
                rejeitada: e.filter(e => "rejeitada" === e.status).length
            },
            a = e.length,
            l = [{
                label: "Pendentes",
                value: t.pendente,
                color: "#eab308"
            }, {
                label: "Aprovadas",
                value: t.aprovada,
                color: "#22c55e"
            }, {
                label: "Rejeitadas",
                value: t.rejeitada,
                color: "#ef4444"
            }].filter(e => e.value > 0);
        let r = 0;
        return React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-semibold mb-4"
        }, "üìà Distribui√ß√£o por Status"), 0 === a ? React.createElement("p", {
            className: "text-gray-500"
        }, "Nenhuma solicita√ß√£o") : React.createElement("div", {
            className: "flex flex-col md:flex-row items-center gap-6"
        }, React.createElement("svg", {
            viewBox: "0 0 200 200",
            className: "w-48 h-48"
        }, l.map((e, t) => {
            const l = e.value / a * 360,
                o = r;
            r += l;
            const c = 100 + 90 * Math.cos((o - 90) * Math.PI / 180),
                s = 100 + 90 * Math.sin((o - 90) * Math.PI / 180),
                n = 100 + 90 * Math.cos((o + l - 90) * Math.PI / 180),
                m = 100 + 90 * Math.sin((o + l - 90) * Math.PI / 180),
                i = l > 180 ? 1 : 0;
            return React.createElement("path", {
                key: t,
                d: `M 100 100 L ${c} ${s} A 90 90 0 ${i} 1 ${n} ${m} Z`,
                fill: e.color,
                stroke: "white",
                strokeWidth: "2"
            })
        }), React.createElement("circle", {
            cx: "100",
            cy: "100",
            r: "50",
            fill: "white"
        }), React.createElement("text", {
            x: "100",
            y: "95",
            textAnchor: "middle",
            className: "text-2xl font-bold",
            fill: "#1f2937"
        }, a), React.createElement("text", {
            x: "100",
            y: "110",
            textAnchor: "middle",
            className: "text-xs",
            fill: "#6b7280"
        }, "Total")), React.createElement("div", {
            className: "flex-1 space-y-2"
        }, l.map((e, t) => React.createElement("div", {
            key: t,
            className: "flex items-center gap-2"
        }, React.createElement("div", {
            className: "w-4 h-4 rounded",
            style: {
                backgroundColor: e.color
            }
        }), React.createElement("span", {
            className: "text-sm flex-1"
        }, e.label), React.createElement("span", {
            className: "font-semibold"
        }, e.value), React.createElement("span", {
            className: "text-gray-500 text-sm"
        }, "(", (e.value / a * 100).toFixed(1), "%)"))))))
    },
    MotivosPieChart = ({
        submissions: e
    }) => {
        const t = {};
        e.forEach(e => {
            t[e.motivo] = (t[e.motivo] || 0) + 1
        });
        const a = ["#7c3aed", "#2563eb", "#059669", "#dc2626", "#ea580c", "#8b5cf6"],
            l = e.length,
            r = Object.entries(t).map(([e, t], r) => ({
                motivo: e,
                count: t,
                percentage: (t / l * 100).toFixed(1),
                color: a[r % a.length]
            }));
        let o = 0;
        return React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-semibold mb-4"
        }, "üìä Distribui√ß√£o por Motivo"), 0 === l ? React.createElement("p", {
            className: "text-gray-500"
        }, "Nenhuma solicita√ß√£o") : React.createElement("div", {
            className: "flex flex-col md:flex-row items-center gap-6"
        }, React.createElement("svg", {
            viewBox: "0 0 200 200",
            className: "w-48 h-48"
        }, r.map((e, t) => {
            const a = e.count / l * 360,
                r = o;
            o += a;
            const c = 100 + 90 * Math.cos((r - 90) * Math.PI / 180),
                s = 100 + 90 * Math.sin((r - 90) * Math.PI / 180),
                n = 100 + 90 * Math.cos((r + a - 90) * Math.PI / 180),
                m = 100 + 90 * Math.sin((r + a - 90) * Math.PI / 180),
                i = a > 180 ? 1 : 0;
            return React.createElement("path", {
                key: t,
                d: `M 100 100 L ${c} ${s} A 90 90 0 ${i} 1 ${n} ${m} Z`,
                fill: e.color,
                stroke: "white",
                strokeWidth: "2"
            })
        }), React.createElement("circle", {
            cx: "100",
            cy: "100",
            r: "50",
            fill: "white"
        }), React.createElement("text", {
            x: "100",
            y: "95",
            textAnchor: "middle",
            className: "text-2xl font-bold",
            fill: "#1f2937"
        }, l), React.createElement("text", {
            x: "100",
            y: "110",
            textAnchor: "middle",
            className: "text-xs",
            fill: "#6b7280"
        }, "Total")), React.createElement("div", {
            className: "flex-1 space-y-2"
        }, r.map((e, t) => React.createElement("div", {
            key: t,
            className: "flex items-center gap-3"
        }, React.createElement("div", {
            className: "w-4 h-4 rounded",
            style: {
                backgroundColor: e.color
            }
        }), React.createElement("div", {
            className: "flex-1"
        }, React.createElement("p", {
            className: "text-sm font-medium text-gray-800 truncate"
        }, e.motivo), React.createElement("p", {
            className: "text-xs text-gray-500"
        }, e.count, " (", e.percentage, "%)")))))))
    },
    TechRanking = ({
        submissions: e
    }) => {
        const t = {};
        e.forEach(e => {
            const a = e.fullName || "Desconhecido";
            t[a] || (t[a] = {
                total: 0,
                aprovadas: 0,
                rejeitadas: 0,
                pendentes: 0
            }), t[a].total++, "aprovada" === e.status ? t[a].aprovadas++ : "rejeitada" === e.status ? t[a].rejeitadas++ : t[a].pendentes++
        });
        const a = Object.entries(t).map(([e, t]) => ({
            name: e,
            ...t,
            aprovacao: t.total > 0 ? (t.aprovadas / t.total * 100).toFixed(1) : 0
        })).sort((e, t) => t.total - e.total);
        return React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h3", {
            className: "text-lg font-semibold mb-4"
        }, "üèÜ Ranking de Profissionais"), 0 === a.length ? React.createElement("p", {
            className: "text-gray-500 text-center py-8"
        }, "Sem dados") : React.createElement("div", {
            className: "space-y-3"
        }, a.map((e, t) => React.createElement("div", {
            key: t,
            className: "flex items-center gap-4 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition"
        }, React.createElement("div", {
            className: "text-2xl font-bold w-8 " + (0 === t ? "text-yellow-500" : 1 === t ? "text-gray-400" : 2 === t ? "text-orange-600" : "text-gray-400")
        }, t + 1, "¬∫"), React.createElement("div", {
            className: "flex-1"
        }, React.createElement("p", {
            className: "font-semibold text-gray-800"
        }, e.name), React.createElement("div", {
            className: "flex gap-4 text-sm text-gray-600 mt-1"
        }, React.createElement("span", null, "Total: ", React.createElement("b", null, e.total)), React.createElement("span", {
            className: "text-green-600"
        }, "‚úì ", e.aprovadas), React.createElement("span", {
            className: "text-red-600"
        }, "‚úó ", e.rejeitadas), React.createElement("span", {
            className: "text-yellow-600"
        }, "‚è≥ ", e.pendentes))), React.createElement("div", {
            className: "text-right"
        }, React.createElement("div", {
            className: "text-2xl font-bold text-purple-600"
        }, e.aprovacao, "%"), React.createElement("div", {
            className: "text-xs text-gray-500"
        }, "aprova√ß√£o"))))))
    },
    PaginaIndicacao = ({
        token: e
    }) => {
        const [t, a] = useState(!0), [l, r] = useState(null), [o, c] = useState(null), [s, n] = useState(!1), [m, i] = useState(!1), [d, p] = useState({
            nome: "",
            telefone: ""
        }), x = e => {
            const t = e.replace(/\D/g, "");
            return t.length <= 2 ? `(${t}` : t.length <= 7 ? `(${t.slice(0,2)}) ${t.slice(2)}` : t.length <= 11 ? `(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7)}` : `(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`
        };
        React.useEffect(() => {
            if (!e || "undefined" === e || "null" === e) return c("Link inv√°lido"), void a(!1);
            (async () => {
                try {
                    const t = await fetch(`${API_URL}/indicacao-link/validar/${e}`);
                    if (!t.ok) return c("Link inv√°lido ou expirado"), void a(!1);
                    const l = await t.json();
                    r(l.indicador)
                } catch (e) {
                    c("Erro ao validar link")
                }
                a(!1)
            })()
        }, [e]);
        return t ? React.createElement("div", {
            className: "min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center"
        }, React.createElement("div", {
            className: "text-white text-center"
        }, React.createElement("div", {
            className: "animate-spin text-6xl mb-4"
        }, "‚è≥"), React.createElement("p", {
            className: "text-xl"
        }, "Validando link..."))) : o ? React.createElement("div", {
            className: "min-h-screen bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center"
        }, React.createElement("div", {
            className: "text-6xl mb-4"
        }, "‚ùå"), React.createElement("h1", {
            className: "text-2xl font-bold text-red-600 mb-2"
        }, "Link Inv√°lido"), React.createElement("p", {
            className: "text-gray-600 mb-6"
        }, o), React.createElement("p", {
            className: "text-sm text-gray-500"
        }, "Pe√ßa um novo link para quem te indicou."))) : s ? React.createElement("div", {
            className: "min-h-screen bg-gradient-to-br from-green-500 to-green-700 flex items-center justify-center p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center"
        }, React.createElement("div", {
            className: "text-6xl mb-4"
        }, "üéâ"), React.createElement("h1", {
            className: "text-2xl font-bold text-green-600 mb-2"
        }, "Cadastro Realizado!"), React.createElement("p", {
            className: "text-gray-600 mb-4"
        }, "Seu cadastro foi enviado com sucesso."), React.createElement("div", {
            className: "bg-green-50 border border-green-200 rounded-lg p-4"
        }, React.createElement("p", {
            className: "text-green-800 text-sm"
        }, "Em breve entraremos em contato pelo n√∫mero informado.")))) : React.createElement("div", {
            className: "min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"
        }, React.createElement("div", {
            className: "text-center mb-6"
        }, React.createElement("div", {
            className: "text-5xl mb-3"
        }, "üöÄ"), React.createElement("h1", {
            className: "text-2xl font-bold text-gray-800"
        }, "Seja um Entregador!"), React.createElement("p", {
            className: "text-gray-600 mt-2"
        }, "Voc√™ foi indicado por ", React.createElement("span", {
            className: "font-bold text-purple-600"
        }, l?.user_name))), React.createElement("form", {
            onSubmit: async t => {
                if (t.preventDefault(), !d.nome.trim() || !d.telefone.trim()) return void alert("Preencha todos os campos");
                const a = d.telefone.replace(/\D/g, "");
                if (a.length < 10 || a.length > 11) alert("Telefone inv√°lido. Use o formato (DD) 99999-9999");
                else {
                    i(!0);
                    try {
                        const t = await fetch(`${API_URL}/indicacao-link/cadastrar`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                token: e,
                                nome: d.nome.trim(),
                                telefone: d.telefone
                            })
                        });
                        if (!t.ok) {
                            const e = await t.json();
                            throw new Error(e.error || "Erro ao cadastrar")
                        }
                        n(!0)
                    } catch (e) {
                        alert(e.message)
                    }
                    i(!1)
                }
            },
            className: "space-y-4"
        }, React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold text-gray-700 mb-1"
        }, "Nome Completo *"), React.createElement("input", {
            type: "text",
            value: d.nome,
            onChange: e => p({
                ...d,
                nome: e.target.value
            }),
            className: "w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors",
            placeholder: "Seu nome completo",
            required: !0
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold text-gray-700 mb-1"
        }, "WhatsApp *"), React.createElement("input", {
            type: "tel",
            value: d.telefone,
            onChange: e => p({
                ...d,
                telefone: x(e.target.value)
            }),
            className: "w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors",
            placeholder: "(62) 99999-9999",
            maxLength: 15,
            required: !0
        }), React.createElement("p", {
            className: "text-xs text-gray-500 mt-1"
        }, "Entraremos em contato por este n√∫mero")), React.createElement("button", {
            type: "submit",
            disabled: m,
            className: "w-full py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-lg hover:from-purple-700 hover:to-blue-700 transition-all disabled:opacity-50"
        }, m ? "‚è≥ Enviando..." : "üì§ Enviar Cadastro")), React.createElement("div", {
            className: "mt-6 text-center"
        }, React.createElement("p", {
            className: "text-xs text-gray-400"
        }, "Ao enviar, voc√™ concorda em ser contatado sobre oportunidades de trabalho."))))
    },

    // ==================== FUN√á√ïES AUXILIARES DE GEOCODIFICA√á√ÉO ====================
    // Extrair CEP de um texto
    extrairCEP = function(texto) {
        if (!texto) return null;
        var match = texto.match(/(?:CEP[:\s]*)?(\d{5})-?(\d{3})/i);
        if (match) return match[1] + match[2];
        return null;
    },
    
    // Extrair n√∫mero do endere√ßo
    extrairNumero = function(endereco) {
        if (!endereco) return null;
        var patterns = [
            /,\s*n[¬∫¬∞]?\s*(\d+)/i,
            /,\s*(\d+)(?:\s|$|-|,)/,
            /\s+n[¬∫¬∞]?\s*(\d+)/i,
            /\s+(\d{2,5})(?:\s|$|-|,)/
        ];
        for (var i = 0; i < patterns.length; i++) {
            var match = endereco.match(patterns[i]);
            if (match) return match[1];
        }
        return null;
    },
    
    // Limpar rua (remover n√∫mero para busca)
    limparRuaGeo = function(endereco) {
        if (!endereco) return '';
        return endereco
            .replace(/,\s*n[¬∫¬∞]?\s*\d+/gi, '')
            .replace(/,\s*\d+(?:\s|$|-|,)/g, ' ')
            .replace(/\s+n[¬∫¬∞]?\s*\d+/gi, '')
            .replace(/\s+\d{2,5}(?:\s|$|-|,)/g, ' ')
            .replace(/\s+/g, ' ')
            .trim();
    },
    
    // Normalizar texto (remover acentos)
    normalizarTexto = function(texto) {
        return (texto || '').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '');
    },

    // ==================== COMPONENTE ROTEIRIZADOR ====================
    RoteirizadorModule = ({ enderecosBi, onClose, showToast }) => {
        const [enderecosSelecionados, setEnderecosSelecionados] = useState([]);
        const [termoBusca, setTermoBusca] = useState('');
        const [sugestoes, setSugestoes] = useState([]);
        const [buscando, setBuscando] = useState(false);
        const [loading, setLoading] = useState(false);
        const [resultado, setResultado] = useState(null);
        const [retornarInicio, setRetornarInicio] = useState(false);
        const [mapaRoteirizador, setMapaRoteirizador] = useState(null);
        const [markersLayer, setMarkersLayer] = useState(null);
        const [routeLayer, setRouteLayer] = useState(null);
        const [enderecosBI, setEnderecosBI] = useState([]);
        const [carregandoBI, setCarregandoBI] = useState(true);
        const [pontoPartidaPadrao, setPontoPartidaPadrao] = useState(null);
        const [mostrarConfigPartida, setMostrarConfigPartida] = useState(false);

        const limparPonto = function(end) {
            if (!end) return '';
            return end.replace(/^Ponto\s*\d+\s*[-‚Äì]\s*/i, '').trim();
        };

        useEffect(() => {
            try {
                var salvo = localStorage.getItem('roteirizador_partida_padrao');
                if (salvo) {
                    var partida = JSON.parse(salvo);
                    setPontoPartidaPadrao(partida);
                    setEnderecosSelecionados([Object.assign({}, partida, { id: Date.now() })]);
                }
            } catch(e) {}
        }, []);

        // Carregar TODOS os endere√ßos do BI - sem agrupamento agressivo
        useEffect(() => {
            const carregarEnderecosBI = async () => {
                try {
                    setCarregandoBI(true);
                    const response = await fetch(`${API_URL}/bi/entregas-lista?`);
                    const data = await response.json();
                    if (Array.isArray(data)) {
                        // Agrupar apenas endere√ßos ID√äNTICOS (mesmo endere√ßo + cidade)
                        const map = new Map();
                        data.forEach(e => {
                            if (!e.endereco) return;
                            var endLimpo = limparPonto(e.endereco);
                            // Chave: endere√ßo limpo + cidade (para n√£o misturar cidades)
                            const chave = (endLimpo + '|' + (e.cidade || '')).toLowerCase();
                            
                            if (!map.has(chave)) {
                                map.set(chave, { 
                                    endereco: endLimpo, 
                                    bairro: e.bairro, 
                                    cidade: e.cidade, 
                                    estado: e.estado, 
                                    latitude: e.latitude, 
                                    longitude: e.longitude, 
                                    contagem: 1 
                                });
                            } else {
                                const x = map.get(chave); 
                                x.contagem++;
                                if (!x.latitude && e.latitude) { 
                                    x.latitude = e.latitude; 
                                    x.longitude = e.longitude; 
                                }
                                if (!x.bairro && e.bairro) x.bairro = e.bairro;
                                if (!x.estado && e.estado) x.estado = e.estado;
                            }
                        });
                        var enderecosUnicos = Array.from(map.values());
                        console.log('üó∫Ô∏è Endere√ßos carregados:', data.length, '-> √∫nicos:', enderecosUnicos.length);
                        setEnderecosBI(enderecosUnicos);
                    }
                } catch (err) { console.error(err); }
                setCarregandoBI(false);
            };
            carregarEnderecosBI();
        }, []);

        useEffect(() => {
            let mapInstance = null;
            const initMap = () => {
                if (typeof L !== 'undefined') {
                    const container = document.getElementById('mapa-roteirizador');
                    if (container && !mapInstance) {
                        container.innerHTML = ''; container._leaflet_id = null;
                        mapInstance = L.map('mapa-roteirizador').setView([-16.6869, -49.2648], 4);
                        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OSM' }).addTo(mapInstance);
                        setMapaRoteirizador(mapInstance);
                        setMarkersLayer(L.layerGroup().addTo(mapInstance));
                        navigator.geolocation && navigator.geolocation.getCurrentPosition(function(pos) { mapInstance && mapInstance.setView([pos.coords.latitude, pos.coords.longitude], 12); }, function() {});
                    }
                }
            };
            setTimeout(initMap, 200);
            return function() { if (mapInstance) try { mapInstance.remove(); } catch(e) {} };
        }, []);

        useEffect(() => {
            if (!mapaRoteirizador || !markersLayer) return;
            markersLayer.clearLayers();
            if (routeLayer) { mapaRoteirizador.removeLayer(routeLayer); setRouteLayer(null); }
            
            var pontosValidos = enderecosSelecionados.filter(function(e) { return e.latitude && e.longitude; });
            pontosValidos.forEach(function(p, i) {
                var icon = L.divIcon({ className: '', html: '<div style="background:' + (i === 0 ? '#10b981' : '#7c3aed') + ';color:#fff;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:12px;border:2px solid #fff;box-shadow:0 2px 4px rgba(0,0,0,0.3)">' + (i === 0 ? 'üö©' : i) + '</div>', iconSize: [28, 28], iconAnchor: [14, 14] });
                L.marker([p.latitude, p.longitude], { icon: icon }).addTo(markersLayer).bindPopup('<b>' + (i === 0 ? 'PARTIDA' : 'Parada ' + i) + '</b><br>' + (p.endereco || '').substring(0, 50));
            });
            
            if (pontosValidos.length > 0) {
                var bounds = L.latLngBounds(pontosValidos.map(function(p) { return [p.latitude, p.longitude]; }));
                mapaRoteirizador.fitBounds(bounds, { padding: [50, 50], maxZoom: 14 });
            }
        }, [enderecosSelecionados, mapaRoteirizador, markersLayer]);

        // Buscar sugest√µes - busca mais abrangente
        useEffect(() => {
            const buscar = async () => {
                if (!termoBusca || termoBusca.length < 2) { setSugestoes([]); return; }
                setBuscando(true);
                var termo = termoBusca.toLowerCase().trim();
                var termos = termo.split(/\s+/); // Dividir em palavras
                
                var resultadosBI = enderecosBI.filter(function(e) {
                    var endLower = (e.endereco || '').toLowerCase();
                    var bairroLower = (e.bairro || '').toLowerCase();
                    var cidadeLower = (e.cidade || '').toLowerCase();
                    var textoCompleto = endLower + ' ' + bairroLower + ' ' + cidadeLower;
                    
                    // Todas as palavras devem estar presentes
                    return termos.every(function(t) { return textoCompleto.includes(t); });
                }).sort(function(a, b) { 
                    // Priorizar os que t√™m coordenadas
                    if (a.latitude && !b.latitude) return -1;
                    if (!a.latitude && b.latitude) return 1;
                    // Depois por contagem (mais usados primeiro)
                    return (b.contagem || 0) - (a.contagem || 0);
                }).slice(0, 15).map(function(e) { 
                    return { 
                        endereco: e.endereco, 
                        bairro: e.bairro, 
                        cidade: e.cidade, 
                        estado: e.estado, 
                        latitude: e.latitude, 
                        longitude: e.longitude,
                        contagem: e.contagem,
                        fonte: 'bi'
                    }; 
                });
                
                // CEP - Busca via backend (evita CORS)
                var resultadosCEP = [];
                var cepMatch = termoBusca.match(/(\d{5})-?(\d{3})/);
                if (cepMatch) {
                    var cepLimpo = cepMatch[1] + cepMatch[2];
                    try {
                        var resp = await fetch(API_URL + '/geocode/cep/' + cepLimpo);
                        if (resp.ok) {
                            var data = await resp.json();
                            resultadosCEP.push({ 
                                endereco: data.endereco,
                                bairro: data.bairro, 
                                cidade: data.cidade, 
                                estado: data.estado, 
                                cep: data.cep,
                                latitude: data.latitude,
                                longitude: data.longitude,
                                fonte: data.fonte,
                                precisaGeo: !data.latitude
                            });
                        }
                    } catch(e) {
                        console.log('‚ö†Ô∏è Geocode CEP falhou:', e.message);
                    }
                }
                setSugestoes([].concat(resultadosBI, resultadosCEP));
                setBuscando(false);
            };
            var timer = setTimeout(buscar, 200);
            return function() { clearTimeout(timer); };
        }, [termoBusca, enderecosBI]);

        // ==================== GEOCODIFICA√á√ÉO EM CASCATA ====================
        // Ordem: CEP (BrasilAPI) ‚Üí Nominatim ‚Üí OpenRouteService ‚Üí Photon ‚Üí Centro da cidade
        const geocodificarPreciso = async function(sug) {
            // Se j√° tem coordenadas v√°lidas, retorna direto
            if (sug.latitude && sug.longitude && 
                Math.abs(sug.latitude) > 0.1 && Math.abs(sug.longitude) > 0.1) {
                console.log('üìç Coordenadas j√° existentes:', sug.latitude, sug.longitude);
                return sug;
            }
            
            var endereco = sug.endereco || '';
            var bairro = sug.bairro || '';
            var cidade = sug.cidade || '';
            var estado = sug.estado || 'GO';
            
            console.log('üîç Geocodificando em cascata:', { endereco, bairro, cidade, estado });
            
            // ========================================
            // ETAPA 1: Tentar por CEP (via backend)
            // ========================================
            var cep = extrairCEP(endereco) || sug.cep;
            if (cep) {
                console.log('üìÆ CEP detectado:', cep);
                try {
                    var resp = await fetch(API_URL + '/geocode/cep/' + cep.replace(/\D/g, ''));
                    if (resp.ok) {
                        var data = await resp.json();
                        if (data.latitude && data.longitude) {
                            console.log('‚úÖ Backend CEP sucesso:', data.latitude, data.longitude);
                            return Object.assign({}, sug, {
                                latitude: data.latitude,
                                longitude: data.longitude,
                                bairro: sug.bairro || data.bairro,
                                cidade: sug.cidade || data.cidade,
                                estado: sug.estado || data.estado,
                                fonte: data.fonte
                            });
                        }
                    }
                } catch (e) {
                    console.log('‚ö†Ô∏è Backend CEP falhou:', e.message);
                }
            }
            
            // ========================================
            // ETAPA 2: Nominatim (OpenStreetMap) - Estruturado
            // ========================================
            var queries = [];
            var numero = extrairNumero(endereco);
            var ruaLimpa = limparRuaGeo(endereco);
            var cidadeLower = normalizarTexto(cidade);
            
            // Query mais espec√≠fica primeiro
            if (ruaLimpa && cidade) {
                if (numero) {
                    queries.push(ruaLimpa + ', ' + numero + ', ' + (bairro ? bairro + ', ' : '') + cidade + ', ' + estado + ', Brasil');
                }
                queries.push(ruaLimpa + ', ' + (bairro ? bairro + ', ' : '') + cidade + ', ' + estado + ', Brasil');
            }
            if (bairro && cidade) {
                queries.push(bairro + ', ' + cidade + ', ' + estado + ', Brasil');
            }
            
            // ========================================
            // ETAPA 2A: Tentar via Backend (evita CORS)
            // ========================================
            try {
                console.log('üîå Backend geocode tentando...');
                var params = new URLSearchParams({
                    endereco: ruaLimpa || '',
                    bairro: bairro || '',
                    cidade: cidade || '',
                    estado: estado || 'GO'
                });
                var resp = await fetch(API_URL + '/geocode/endereco?' + params.toString());
                if (resp.ok) {
                    var data = await resp.json();
                    if (data.latitude && data.longitude) {
                        console.log('‚úÖ Backend geocode sucesso:', data.latitude, data.longitude);
                        return Object.assign({}, sug, {
                            latitude: data.latitude,
                            longitude: data.longitude,
                            fonte: data.fonte
                        });
                    }
                }
            } catch (e) {
                console.log('‚ö†Ô∏è Backend geocode falhou, tentando APIs diretas:', e.message);
            }
            
            // ========================================
            // ETAPA 2B: Nominatim direto (fallback)
            // ========================================
            for (var i = 0; i < queries.length; i++) {
                try {
                    console.log('üåç Nominatim tentando:', queries[i]);
                    var resp = await fetch(
                        'https://nominatim.openstreetmap.org/search?format=json&q=' + 
                        encodeURIComponent(queries[i]) + 
                        '&limit=3&countrycodes=br&addressdetails=1',
                        { headers: { 'User-Agent': 'TuttsRoteirizador/2.0' } }
                    );
                    var data = await resp.json();
                    
                    if (data && data.length > 0) {
                        for (var j = 0; j < data.length; j++) {
                            var displayName = normalizarTexto(data[j].display_name);
                            if (displayName.includes(cidadeLower) || !cidade) {
                                console.log('‚úÖ Nominatim sucesso:', data[j].lat, data[j].lon);
                                return Object.assign({}, sug, {
                                    latitude: parseFloat(data[j].lat),
                                    longitude: parseFloat(data[j].lon),
                                    fonte: 'nominatim'
                                });
                            }
                        }
                    }
                } catch (e) {
                    console.log('‚ö†Ô∏è Nominatim falhou:', e.message);
                }
                // Rate limit Nominatim
                await new Promise(function(r) { setTimeout(r, 1100); });
            }
            
            // ========================================
            // ETAPA 3: OpenRouteService (fallback)
            // ========================================
            for (var i = 0; i < Math.min(queries.length, 2); i++) {
                try {
                    console.log('üó∫Ô∏è ORS tentando:', queries[i]);
                    var resp = await fetch(
                        'https://api.openrouteservice.org/geocode/search?api_key=' + ORS_API_KEY + 
                        '&text=' + encodeURIComponent(queries[i]) + 
                        '&boundary.country=BR&size=3'
                    );
                    var data = await resp.json();
                    
                    if (data.features && data.features.length > 0) {
                        for (var j = 0; j < data.features.length; j++) {
                            var props = data.features[j].properties || {};
                            var featureCidade = normalizarTexto(props.locality || props.county || '');
                            
                            if (featureCidade.includes(cidadeLower) || cidadeLower.includes(featureCidade) || !cidade) {
                                var coords = data.features[j].geometry.coordinates;
                                console.log('‚úÖ ORS sucesso:', coords[1], coords[0]);
                                return Object.assign({}, sug, {
                                    latitude: coords[1],
                                    longitude: coords[0],
                                    fonte: 'openrouteservice'
                                });
                            }
                        }
                    }
                } catch (e) {
                    console.log('‚ö†Ô∏è ORS falhou:', e.message);
                }
            }
            
            // ========================================
            // ETAPA 4: Photon (√∫ltimo recurso OSM)
            // ========================================
            var queryPhoton = (ruaLimpa || bairro) + ', ' + cidade + ', ' + estado;
            try {
                console.log('üí° Photon tentando:', queryPhoton);
                var resp = await fetch(
                    'https://photon.komoot.io/api/?q=' + 
                    encodeURIComponent(queryPhoton) + 
                    '&limit=3&lang=pt'
                );
                var data = await resp.json();
                
                if (data.features && data.features.length > 0) {
                    for (var j = 0; j < data.features.length; j++) {
                        var props = data.features[j].properties || {};
                        var featureCidade = normalizarTexto(props.city || props.county || props.name || '');
                        
                        if (featureCidade.includes(cidadeLower) || cidadeLower.includes(featureCidade) || !cidade) {
                            var coords = data.features[j].geometry.coordinates;
                            console.log('‚úÖ Photon sucesso:', coords[1], coords[0]);
                            return Object.assign({}, sug, {
                                latitude: coords[1],
                                longitude: coords[0],
                                fonte: 'photon'
                            });
                        }
                    }
                }
            } catch (e) {
                console.log('‚ö†Ô∏è Photon falhou:', e.message);
            }
            
            // ========================================
            // FALLBACK: Centralizar na cidade
            // ========================================
            if (cidade) {
                try {
                    console.log('üèôÔ∏è Fallback: centro da cidade');
                    var resp = await fetch(
                        'https://nominatim.openstreetmap.org/search?format=json&q=' + 
                        encodeURIComponent(cidade + ', ' + estado + ', Brasil') + 
                        '&limit=1&countrycodes=br',
                        { headers: { 'User-Agent': 'TuttsRoteirizador/2.0' } }
                    );
                    var data = await resp.json();
                    
                    if (data[0]) {
                        console.log('‚ö†Ô∏è Usando centro da cidade:', data[0].lat, data[0].lon);
                        showToast && showToast('üìç Localiza√ß√£o aproximada', 'warning');
                        return Object.assign({}, sug, {
                            latitude: parseFloat(data[0].lat),
                            longitude: parseFloat(data[0].lon),
                            fonte: 'cidade-centro',
                            precisaoAproximada: true
                        });
                    }
                } catch (e) {}
            }
            
            console.log('‚ùå Geocodifica√ß√£o falhou para:', endereco);
            return null;
        };

        const adicionar = function(sug) {
            if (enderecosSelecionados.length >= 15) { showToast && showToast('M√°ximo 15', 'error'); return; }
            
            var endLimpo = limparPonto(sug.endereco);
            var chaveNova = (endLimpo + '|' + (sug.cidade || '')).toLowerCase();
            if (enderecosSelecionados.some(function(e) { return (e.endereco + '|' + (e.cidade || '')).toLowerCase() === chaveNova; })) { 
                showToast && showToast('J√° adicionado', 'error'); 
                return; 
            }
            
            if (sug.latitude && sug.longitude) {
                setEnderecosSelecionados(function(prev) { 
                    return prev.concat([{ id: Date.now(), endereco: endLimpo, bairro: sug.bairro, cidade: sug.cidade, estado: sug.estado, latitude: sug.latitude, longitude: sug.longitude, fonte: sug.fonte }]); 
                });
                setTermoBusca(''); setSugestoes([]);
                return;
            }
            
            showToast && showToast('Localizando...', 'info');
            geocodificarPreciso(sug).then(function(end) {
                if (!end) { showToast && showToast('N√£o localizado', 'error'); return; }
                setEnderecosSelecionados(function(prev) { 
                    return prev.concat([{ id: Date.now(), endereco: limparPonto(end.endereco), bairro: end.bairro, cidade: end.cidade, estado: end.estado, latitude: end.latitude, longitude: end.longitude, fonte: end.fonte }]); 
                });
            });
            setTermoBusca(''); setSugestoes([]);
        };

        const remover = function(id) { setEnderecosSelecionados(function(prev) { return prev.filter(function(e) { return e.id !== id; }); }); };
        const mover = function(idx, dir) { var l = enderecosSelecionados.slice(), n = idx + dir; if (n < 0 || n >= l.length) return; var t = l[idx]; l[idx] = l[n]; l[n] = t; setEnderecosSelecionados(l); };

        const definirPartidaPadrao = function(end) {
            var partida = { endereco: end.endereco, bairro: end.bairro, cidade: end.cidade, estado: end.estado, latitude: end.latitude, longitude: end.longitude };
            localStorage.setItem('roteirizador_partida_padrao', JSON.stringify(partida));
            setPontoPartidaPadrao(partida);
            showToast && showToast('Partida salva!', 'success');
            setMostrarConfigPartida(false);
        };

        const removerPartidaPadrao = function() {
            localStorage.removeItem('roteirizador_partida_padrao');
            setPontoPartidaPadrao(null);
            showToast && showToast('Removida', 'info');
            setMostrarConfigPartida(false);
        };

        const otimizarRota = async function(pontos) {
            var vehicle = { id: 1, profile: 'driving-car', start: [pontos[0].longitude, pontos[0].latitude] };
            if (retornarInicio) vehicle.end = [pontos[0].longitude, pontos[0].latitude];
            var resp = await fetch('https://api.openrouteservice.org/optimization', { method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': ORS_API_KEY }, body: JSON.stringify({ jobs: pontos.slice(1).map(function(p, i) { return { id: i + 1, location: [p.longitude, p.latitude] }; }), vehicles: [vehicle] }) });
            if (!resp.ok) throw new Error('Erro na otimiza√ß√£o');
            return resp.json();
        };

        const obterGeometria = async function(pontos) {
            var resp = await fetch('https://api.openrouteservice.org/v2/directions/driving-car/geojson', { method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': ORS_API_KEY }, body: JSON.stringify({ coordinates: pontos.map(function(p) { return [p.longitude, p.latitude]; }) }) });
            return resp.ok ? resp.json() : null;
        };

        const atualizarMapaComRota = function(pontos, geo) {
            if (!mapaRoteirizador || !markersLayer) return;
            markersLayer.clearLayers();
            if (routeLayer) { mapaRoteirizador.removeLayer(routeLayer); setRouteLayer(null); }
            pontos.filter(function(p) { return !p.isRetorno; }).forEach(function(p, i) {
                var icon = L.divIcon({ className: '', html: '<div style="background:' + (i === 0 ? '#10b981' : '#7c3aed') + ';color:#fff;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:12px;border:2px solid #fff;box-shadow:0 2px 4px rgba(0,0,0,0.3)">' + (i === 0 ? 'üö©' : i) + '</div>', iconSize: [28, 28], iconAnchor: [14, 14] });
                L.marker([p.latitude, p.longitude], { icon: icon }).addTo(markersLayer).bindPopup('<b>' + (i === 0 ? 'PARTIDA' : 'Parada ' + i) + '</b><br>' + (p.endereco || '').substring(0, 50));
            });
            if (geo && geo.features) { var layer = L.geoJSON(geo, { style: { color: '#7c3aed', weight: 5, opacity: 0.8 } }).addTo(mapaRoteirizador); setRouteLayer(layer); }
            if (pontos.length > 0) mapaRoteirizador.fitBounds(L.latLngBounds(pontos.filter(function(p) { return !p.isRetorno; }).map(function(p) { return [p.latitude, p.longitude]; })), { padding: [50, 50] });
        };

        const roteirizar = async function() {
            if (enderecosSelecionados.length < 2) { showToast && showToast('M√≠nimo 2 endere√ßos', 'error'); return; }
            setLoading(true); setResultado(null);
            try {
                var pontos = enderecosSelecionados.map(function(e) { return { latitude: e.latitude, longitude: e.longitude, endereco: e.endereco, bairro: e.bairro, cidade: e.cidade }; });
                if (pontos.some(function(p) { return !p.latitude || !p.longitude; })) throw new Error('Endere√ßo sem coordenadas');
                var otimizacao = await otimizarRota(pontos);
                var ordem = [pontos[0]];
                if (otimizacao.routes && otimizacao.routes[0]) otimizacao.routes[0].steps.filter(function(s) { return s.type === 'job'; }).forEach(function(s) { ordem.push(pontos[s.job]); });
                if (retornarInicio) ordem.push(Object.assign({}, pontos[0], { isRetorno: true }));
                var geo = await obterGeometria(ordem);
                var km = 0, min = 0;
                if (geo && geo.features && geo.features[0] && geo.features[0].properties.segments) geo.features[0].properties.segments.forEach(function(s) { km += s.distance || 0; min += s.duration || 0; });
                setResultado({ ordemOtimizada: ordem, distanciaKm: (km / 1000).toFixed(1), tempoMin: Math.round(min / 60), geometria: geo });
                atualizarMapaComRota(ordem, geo);
                showToast && showToast('Rota calculada!', 'success');
            } catch (err) { showToast && showToast(err.message, 'error'); }
            setLoading(false);
        };

        const abrirWaze = function() { if (resultado) { var p = resultado.ordemOtimizada.filter(function(x) { return !x.isRetorno; }); if (p.length) window.open('https://waze.com/ul?ll=' + p[p.length-1].latitude + ',' + p[p.length-1].longitude + '&navigate=yes', '_blank'); } };
        const abrirMaps = function() { if (resultado) { var p = resultado.ordemOtimizada.filter(function(x) { return !x.isRetorno; }); if (p.length) window.open('https://www.google.com/maps/dir/' + p.map(function(x) { return x.latitude + ',' + x.longitude; }).join('/'), '_blank'); } };
        const limpar = function() { 
            if (pontoPartidaPadrao) {
                setEnderecosSelecionados([Object.assign({}, pontoPartidaPadrao, { id: Date.now() })]);
            } else {
                setEnderecosSelecionados([]);
            }
            setResultado(null); setTermoBusca(''); setSugestoes([]);
            if (routeLayer && mapaRoteirizador) { mapaRoteirizador.removeLayer(routeLayer); setRouteLayer(null); }
        };

        return React.createElement('div', { className: 'fixed inset-0 z-[9999] flex flex-col', style: { background: '#1e1b4b' } },
            React.createElement('div', { className: 'bg-purple-900 text-white px-4 py-2 flex items-center justify-between' },
                React.createElement('div', { className: 'flex items-center gap-3' },
                    React.createElement('button', { onClick: onClose, className: 'px-3 py-1 bg-white/10 hover:bg-white/20 rounded text-sm' }, '‚Üê Voltar'),
                    React.createElement('span', { className: 'font-bold' }, 'üó∫Ô∏è Roteirizador')
                ),
                React.createElement('div', { className: 'flex items-center gap-3' },
                    resultado && React.createElement('div', { className: 'flex items-center gap-3 bg-white/10 rounded px-3 py-1 text-sm' },
                        React.createElement('span', { className: 'text-green-400 font-bold' }, resultado.distanciaKm + ' km'),
                        React.createElement('span', { className: 'text-cyan-400 font-bold' }, resultado.tempoMin + ' min')
                    ),
                    resultado && React.createElement('button', { onClick: abrirWaze, className: 'px-3 py-1 bg-cyan-500 rounded text-sm font-medium' }, 'Waze'),
                    resultado && React.createElement('button', { onClick: abrirMaps, className: 'px-3 py-1 bg-blue-500 rounded text-sm font-medium' }, 'Maps')
                )
            ),
            React.createElement('div', { className: 'flex-1 flex overflow-hidden' },
                React.createElement('div', { className: 'w-[360px] bg-white flex flex-col' },
                    React.createElement('div', { className: 'p-3 border-b bg-purple-50' },
                        React.createElement('div', { className: 'relative' },
                            React.createElement('input', { type: 'text', value: termoBusca, onChange: function(e) { setTermoBusca(e.target.value); }, placeholder: 'üîç Buscar endere√ßo, bairro, cidade...', className: 'w-full px-3 py-2 border border-purple-200 rounded-lg text-sm focus:border-purple-500 focus:outline-none', autoComplete: 'off' }),
                            buscando && React.createElement('div', { className: 'absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 border-2 border-purple-500 border-t-transparent rounded-full animate-spin' })
                        ),
                        React.createElement('div', { className: 'flex items-center justify-between mt-1' },
                            React.createElement('p', { className: 'text-xs text-purple-600' }, carregandoBI ? '‚è≥ Carregando...' : '‚úÖ ' + enderecosBI.length + ' endere√ßos √∫nicos'),
                            pontoPartidaPadrao && React.createElement('span', { className: 'text-xs text-green-600' }, 'üö© Partida salva')
                        ),
                        sugestoes.length > 0 && React.createElement('div', { className: 'mt-2 bg-white border border-purple-200 rounded-lg shadow-lg max-h-[250px] overflow-y-auto' },
                            sugestoes.map(function(sug, idx) {
                                var temCoord = sug.latitude && sug.longitude;
                                return React.createElement('div', { key: idx, onClick: function() { adicionar(sug); }, className: 'px-3 py-2 hover:bg-purple-50 cursor-pointer border-b last:border-b-0' },
                                    React.createElement('div', { className: 'flex items-center gap-2' },
                                        React.createElement('span', { className: 'text-sm' }, sug.fonte === 'bi' ? (temCoord ? 'üì¶' : 'üì¶‚ùì') : 'üìÆ'),
                                        React.createElement('div', { className: 'flex-1 min-w-0' },
                                            React.createElement('div', { className: 'font-medium text-gray-800 truncate text-xs' }, sug.endereco),
                                            React.createElement('div', { className: 'text-xs text-gray-500 truncate' }, [sug.bairro, sug.cidade, sug.estado].filter(Boolean).join(' - '))
                                        ),
                                        temCoord && React.createElement('span', { className: 'text-green-500 text-xs' }, '‚úì')
                                    )
                                );
                            })
                        )
                    ),
                    React.createElement('div', { className: 'flex-1 overflow-y-auto p-2' },
                        React.createElement('div', { className: 'flex items-center justify-between mb-2' },
                            React.createElement('span', { className: 'text-xs font-bold text-gray-600' }, 'Rota (' + enderecosSelecionados.length + '/15)'),
                            enderecosSelecionados.length > 0 && React.createElement('button', { onClick: limpar, className: 'text-xs text-red-500' }, 'Limpar')
                        ),
                        enderecosSelecionados.length === 0
                            ? React.createElement('div', { className: 'text-center py-8 text-gray-400 text-sm' }, 'üìç Adicione endere√ßos')
                            : React.createElement('div', { className: 'space-y-1' },
                                enderecosSelecionados.map(function(end, idx) {
                                    return React.createElement('div', { key: end.id, className: 'p-2 rounded border text-xs ' + (idx === 0 ? 'bg-green-50 border-green-200' : 'bg-white border-gray-200') },
                                        React.createElement('div', { className: 'flex items-center gap-2' },
                                            React.createElement('span', { className: 'w-6 h-6 rounded-full flex items-center justify-center font-bold text-white text-xs ' + (idx === 0 ? 'bg-green-500' : 'bg-purple-600') }, idx === 0 ? 'üö©' : idx),
                                            React.createElement('div', { className: 'flex-1 min-w-0' },
                                                React.createElement('div', { className: 'font-medium text-gray-800 truncate' }, end.endereco),
                                                React.createElement('div', { className: 'text-gray-500 truncate' }, [end.bairro, end.cidade].filter(Boolean).join(' - '))
                                            ),
                                            React.createElement('div', { className: 'flex gap-1' },
                                                idx === 0 && React.createElement('button', { onClick: function() { setMostrarConfigPartida(!mostrarConfigPartida); }, className: 'text-gray-400 hover:text-green-600' }, '‚öôÔ∏è'),
                                                idx > 0 && React.createElement('button', { onClick: function() { mover(idx, -1); }, className: 'text-gray-400 hover:text-purple-600' }, '‚ñ≤'),
                                                idx < enderecosSelecionados.length - 1 && React.createElement('button', { onClick: function() { mover(idx, 1); }, className: 'text-gray-400 hover:text-purple-600' }, '‚ñº'),
                                                React.createElement('button', { onClick: function() { remover(end.id); }, className: 'text-gray-400 hover:text-red-600' }, '‚úï')
                                            )
                                        ),
                                        idx === 0 && mostrarConfigPartida && React.createElement('div', { className: 'mt-2 pt-2 border-t border-green-200 flex gap-2' },
                                            React.createElement('button', { onClick: function() { definirPartidaPadrao(end); }, className: 'flex-1 px-2 py-1 bg-green-500 text-white rounded text-xs font-medium' }, '‚úì Salvar padr√£o'),
                                            pontoPartidaPadrao && React.createElement('button', { onClick: removerPartidaPadrao, className: 'px-2 py-1 bg-red-100 text-red-600 rounded text-xs' }, 'Remover')
                                        )
                                    );
                                })
                            )
                    ),
                    React.createElement('div', { className: 'p-3 border-t bg-gray-50' },
                        React.createElement('label', { className: 'flex items-center gap-2 mb-2 cursor-pointer text-sm' },
                            React.createElement('input', { type: 'checkbox', checked: retornarInicio, onChange: function(e) { setRetornarInicio(e.target.checked); }, className: 'w-4 h-4' }),
                            React.createElement('span', null, '‚Ü©Ô∏è Retornar ao in√≠cio')
                        ),
                        React.createElement('button', { onClick: roteirizar, disabled: loading || enderecosSelecionados.length < 2, className: 'w-full py-2 bg-purple-600 text-white rounded-lg font-bold text-sm hover:bg-purple-700 disabled:opacity-50' }, loading ? '‚è≥ Calculando...' : 'üöÄ Otimizar Rota')
                    )
                ),
                React.createElement('div', { className: 'flex-1 flex flex-col' },
                    React.createElement('div', { id: 'mapa-roteirizador', className: 'flex-1' }),
                    resultado && React.createElement('div', { className: 'bg-white border-t p-3' },
                        React.createElement('div', { className: 'text-xs font-bold text-gray-600 mb-2' }, '‚úÖ Ordem otimizada:'),
                        React.createElement('div', { className: 'flex flex-wrap gap-1' },
                            resultado.ordemOtimizada.map(function(p, idx) {
                                return React.createElement('span', { key: idx, className: 'px-2 py-1 rounded text-xs font-medium ' + (idx === 0 || p.isRetorno ? 'bg-green-100 text-green-700' : 'bg-purple-100 text-purple-700') },
                                    (idx === 0 ? 'üö©' : p.isRetorno ? '‚Ü©Ô∏è' : idx) + ' ' + (p.endereco || '').substring(0, 20)
                                );
                            })
                        )
                    )
                )
            )
        );
    },
    // ==================== FIM COMPONENTE ROTEIRIZADOR ====================

    App = () => {
        const [e, t] = useState(window.location.hash || "");
        React.useEffect(() => {
            const e = () => {
                t(window.location.hash || "")
            };
            return window.addEventListener("hashchange", e), () => window.removeEventListener("hashchange", e)
        }, []);
        const a = e.match(/#\/indicar\/([A-Za-z0-9]+)/);
        if (a && a[1]) return React.createElement(PaginaIndicacao, {
            token: a[1]
        });
        const [l, r] = useState(() => {
            try {
                const e = sessionStorage.getItem("tutts_user");
                return e ? JSON.parse(e) : null
            } catch {
                return null
            }
        }), o = e => {
            if (e) {
                sessionStorage.setItem("tutts_user", JSON.stringify(e));
            } else {
                sessionStorage.removeItem("tutts_user");
                sessionStorage.removeItem("tutts_token"); // Limpar token JWT no logout
            }
            r(e);
        }, [c, s] = useState(!1), [n, m] = useState(!1), [i, d] = useState(null), [p, x] = useState({}), [u, g] = useState(null), [b, R] = useState(Date.now()), [E, h] = useState(null), [f, N] = useState(!1), [y, v] = useState({
            solicitacoes: 0,
            validacao: 0,
            loja: 0,
            gratuidades: 0
        }), [w, _] = useState({
            solicitacoes: [],
            validacao: [],
            loja: [],
            gratuidades: []
        }), [j, C] = useState([]), [A, S] = useState([]), [k, P] = useState(!1), [T, D] = useState(null), [L, I] = useState([]), [F, $] = useState(!1), [M, O] = useState([]), [q, U] = useState([]), [z, B] = useState([]), [V, J] = useState(null), [Q, H] = useState([]), [G, W] = useState([]), [Z, Y] = useState([]), [K, X] = useState({}), [ee, te] = useState([]), [ae, le] = useState([]), [re, oe] = useState([]), [ce, se] = useState([]), [ne, me] = useState([]), [ie, de] = useState([]), [pe, xe] = useState([]), [ue, ge] = useState(!1), [be, Re] = useState(null), [Ee, he] = useState("home"), [mensagemGentileza, setMensagemGentileza] = useState(() => getMensagemGentileza()), [elegibilidadeNovatos, setElegibilidadeNovatos] = useState({ elegivel: false, motivo: '', promocoes: [], carregando: true }), [regioesNovatos, setRegioesNovatos] = useState([]), [solicitacoesPagina, setSolicitacoesPagina] = useState(1), [acertoRealizado, setAcertoRealizado] = useState(() => { try { const saved = localStorage.getItem("tutts_acerto_realizado"); return saved !== null ? JSON.parse(saved) : true; } catch(e) { return true; } }), [solicitacoesPorPagina] = useState(120), [conciliacaoPagina, setConciliacaoPagina] = useState(1), [conciliacaoPorPagina] = useState(120), 
        
        // Helper para parse de saldo (aceita n√∫mero ou string brasileira)
        parseSaldoBR = (valor) => {
            if (typeof valor === "number") return valor;
            if (!valor) return 0;
            const str = String(valor);
            if (str.includes(",")) {
                return parseFloat(str.replace(/\./g, "").replace(",", ".")) || 0;
            }
            return parseFloat(str) || 0;
        },
        
        [fe, Ne] = useState({
            titulo: "Acerte os procedimentos e ganhe saque gratuito de R$ 500,00",
            imagens: [null, null, null, null],
            perguntas: [{
                texto: "",
                resposta: !0
            }, {
                texto: "",
                resposta: !0
            }, {
                texto: "",
                resposta: !0
            }, {
                texto: "",
                resposta: !0
            }, {
                texto: "",
                resposta: !0
            }],
            valor_gratuidade: 500,
            ativo: !1
        }), [ye, ve] = useState([]), [we, _e] = useState(!1), [je, Ce] = useState(null), [Ae, Se] = useState(0), [ke, Pe] = useState(0), [Te, De] = useState([null, null, null, null, null]), [Le, Ie] = useState(null), [Fe, $e] = useState(!1), [Me, Oe] = useState({
            horarios: [],
            especiais: [],
            loading: !0
        }), [qe, Ue] = useState({
            avisos: [],
            loading: !0
        }), [ze, Be] = useState(null), [Ve, Je] = useState(0), [Qe, He] = useState([]), [Ge, We] = useState(!1), [Ze, Ye] = useState([]), [Ke, Xe] = useState([]), [et, tt] = useState([]), [at, lt] = useState([]), [rt, ot] = useState(!0), [ct, st] = useState(0), [nt, mt] = useState("produtos"), [it, dt] = useState([]), [pt, xt] = useState("lista"), [ut, gt] = useState([]), [bt, Rt] = useState([]), [Et, ht] = useState("home-bi"), [ft, Nt] = useState(null), [yt, vt] = useState([]), [wt, _t] = useState([{
            km_min: 0,
            km_max: 15,
            prazo_minutos: 45
        }, {
            km_min: 15,
            km_max: 20,
            prazo_minutos: 50
        }, {
            km_min: 20,
            km_max: 30,
            prazo_minutos: 60
        }, {
            km_min: 30,
            km_max: null,
            prazo_minutos: 90
        }]), [jt, Ct] = useState([]), [At, St] = useState([]), [kt, Pt] = useState([]), [Tt, Dt] = useState({}), [Lt, It] = useState([]), [Ft, $t] = useState([]), [Mt, Ot] = useState([]), [qt, Ut] = useState([]), [zt, Bt] = useState([]), [Vt, Jt] = useState([]), [Qt, Ht] = useState({
            porTempo: [],
            porKm: []
        }), [Gt, Wt] = useState([]), [Zt, Yt] = useState([]), [Kt, Xt] = useState({}), [ea, ta] = useState([]), [aa, la] = useState([]), [ra, oa] = useState([]), [ca, sa] = useState({
            key: null,
            direction: "desc"
        }), [na, ma] = useState([]), [ia, da] = useState([]), [pa, xa] = useState([]), [ua, ga] = useState({
            data_inicio: "",
            data_fim: "",
            cod_cliente: [],
            centro_custo: [],
            categoria: "",
            status_prazo: "",
            status_prazo_prof: "",
            status_retorno: "",
            regiao: ""
        }), [ba, Ra] = useState(!1), [loadingMessage, setLoadingMessage] = useState("Carregando dados..."), [loadingProgress, setLoadingProgress] = useState(0), [Ea, ha] = useState(null), [driveImportando, setDriveImportando] = useState(null), [fa, Na] = useState([{
            km_min: 0,
            km_max: 15,
            prazo_minutos: 45
        }]), [ya, va] = useState([{
            km_min: 0,
            km_max: 15,
            prazo_minutos: 45
        }]), 
        // Estados para Prazo Profissional
        [prazoProfPadrao, setPrazoProfPadrao] = useState([{
            km_min: 0,
            km_max: 15,
            prazo_minutos: 60
        }]),
        [prazoProfNovo, setPrazoProfNovo] = useState([{
            km_min: 0,
            km_max: 15,
            prazo_minutos: 60
        }]),
        [prazosProfissionais, setPrazosProfissionais] = useState([]),
        [prazoProfConfigOS, setPrazoProfConfigOS] = useState([]), // Configura√ß√µes de prazo prof para aba OS
        [wa, _a] = useState(!1), [todoGrupos, setTodoGrupos] = useState([]), [todoTarefas, setTodoTarefas] = useState([]), [todoGrupoAtivo, setTodoGrupoAtivo] = useState(null), [todoMetricas, setTodoMetricas] = useState(null), [todoTab, setTodoTab] = useState("tarefas"), [todoFiltroStatus, setTodoFiltroStatus] = useState("todas"), [todoModal, setTodoModal] = useState(null), [todoLoading, setTodoLoading] = useState(false), [todoAdmins, setTodoAdmins] = useState([]),
        // Novos estados para TODO melhorado
        [todoMeuDia, setTodoMeuDia] = useState([]),
        [todoViewMode, setTodoViewMode] = useState("meudia"), // "meudia" ou "grupo"
        [todoFiltroCard, setTodoFiltroCard] = useState(null), // "pendentes", "atrasadas", "concluidas"
        [todoNotifModal, setTodoNotifModal] = useState(false),
        [todoPendentesNotif, setTodoPendentesNotif] = useState([]),
        [todoTarefasJaNotificadas, setTodoTarefasJaNotificadas] = useState([]), // IDs de tarefas j√° notificadas
        // NOVOS ESTADOS - Kanban, Subtarefas, Timer
        [todoViewType, setTodoViewType] = useState("lista"), // "lista" | "kanban"
        [todoSubtarefas, setTodoSubtarefas] = useState({}), // {tarefa_id: [subtarefas]}
        [todoTimerTarefa, setTodoTimerTarefa] = useState(null), // Tarefa com timer ativo
        [todoTimerSegundos, setTodoTimerSegundos] = useState(0),
        [todoTemplates, setTodoTemplates] = useState([]),
        [todoTarefaDetalhe, setTodoTarefaDetalhe] = useState(null),
        [acompDados, setAcompDados] = useState(null),
        [acompLoading, setAcompLoading] = useState(false),
        [acompFiltros, setAcompFiltros] = useState({os: false, entregas: false, noPrazo: false, foraPrazo: false, retornos: false, valorTotal: false, valorProf: false, faturamentoTotal: false, ticketMedio: false, tempoMedioEntrega: false, tempoMedioAlocacao: false, tempoMedioColeta: false, totalEntregadores: false, mediaEntProfissional: false, evolucaoSemanal: false}),
        [acompFiltrosOrdem, setAcompFiltrosOrdem] = useState([]),
        [acompClientes, setAcompClientes] = useState(null),
        [comparativoSemanal, setComparativoSemanal] = useState(null),
        [comparativoSemanalClientes, setComparativoSemanalClientes] = useState(null),
        // Estados do Cliente 767
        [cliente767Dados, setCliente767Dados] = useState(null),
        [cliente767Loading, setCliente767Loading] = useState(false),
        [cliente767ModalFiltro, setCliente767ModalFiltro] = useState(false),
        [cliente767Filtros, setCliente767Filtros] = useState({ data_inicio: '', data_fim: '', centros_custo: [] }),
        // Estados do Relat√≥rio IA (Gemini)
        [relatorioIATipos, setRelatorioIATipos] = useState([]), // Array de tipos selecionados
        [relatorioIALoading, setRelatorioIALoading] = useState(false),
        [relatorioIAResultado, setRelatorioIAResultado] = useState(null),
        [relatorioIAErro, setRelatorioIAErro] = useState(null),
        [relatorioIAHistorico, setRelatorioIAHistorico] = useState([]),
        [relatorioIAHistoricoDB, setRelatorioIAHistoricoDB] = useState([]),
        [relatorioIAPromptCustom, setRelatorioIAPromptCustom] = useState(''),
        [relatorioIAFiltros, setRelatorioIAFiltros] = useState({
            data_inicio: '',
            data_fim: '',
            cod_cliente: '',
            centro_custo: ''
        }),
        [relatorioIACentrosCusto, setRelatorioIACentrosCusto] = useState([]),
        // Estados de busca de cliente
        [buscaClienteModal, setBuscaClienteModal] = useState(''),
        [buscaClienteRelatorioIA, setBuscaClienteRelatorioIA] = useState(''),
        // Estados de pagina√ß√£o e OS dos profissionais
        [profPaginaAtual, setProfPaginaAtual] = useState(1),
        [profOsExpandido, setProfOsExpandido] = useState({}), // {cod_prof: [lista de OS]}
        [profOsLoading, setProfOsLoading] = useState(null), // cod_prof que est√° carregando
        // Estados do m√≥dulo Garantido (BI)
        [garantidoData, setGarantidoData] = useState([]),
        [garantidoLoading, setGarantidoLoading] = useState(false),
        [garantidoFiltros, setGarantidoFiltros] = useState({
            data_inicio: '',
            data_fim: '',
            cod_cliente: '',
            cod_prof: '',
            filtro_status: 'todos' // todos, abaixo, acima, nao_rodou, rodou
        }),
        [garantidoStats, setGarantidoStats] = useState(null),
        [garantidoSubTab, setGarantidoSubTab] = useState('analise'), // analise, semanal, cliente
        [garantidoSemanal, setGarantidoSemanal] = useState([]),
        [garantidoPorCliente, setGarantidoPorCliente] = useState([]),
        [garantidoStatusMap, setGarantidoStatusMap] = useState({}), // Mapa de status salvos
        [garantidoModalStatus, setGarantidoModalStatus] = useState(null), // Modal para alterar status
        [garantidoMotivoReprovado, setGarantidoMotivoReprovado] = useState(''), // Motivo quando reprovado
        // Estados do Mapa de Calor
        [mapaCalorDados, setMapaCalorDados] = useState(null),
        [mapaCalorLoading, setMapaCalorLoading] = useState(false),
        [mapaCalorVisivel, setMapaCalorVisivel] = useState(true),
        // Estado para datas com dados no BI
        [biDatasComDados, setBiDatasComDados] = useState(new Set()),
        // Estados para calend√°rio customizado
        [calDataInicioAberto, setCalDataInicioAberto] = useState(false),
        [calDataFimAberto, setCalDataFimAberto] = useState(false),
        [calMesAtual, setCalMesAtual] = useState(new Date()),
        // Estados do m√≥dulo Social
        [socialProfile, setSocialProfile] = useState(null),
        [socialUsers, setSocialUsers] = useState([]),
        [socialMessages, setSocialMessages] = useState([]),
        [socialUnread, setSocialUnread] = useState(0),
        [socialTab, setSocialTab] = useState("perfil"),
        [socialLoading, setSocialLoading] = useState(false),
        [socialModalUser, setSocialModalUser] = useState(null),
        // Estados para Mensagens da Lideran√ßa
        [liderancaMensagens, setLiderancaMensagens] = useState([]),
        [liderancaPendentes, setLiderancaPendentes] = useState([]),
        [liderancaHistorico, setLiderancaHistorico] = useState([]),
        [liderancaModal, setLiderancaModal] = useState(null), // {tipo: 'criar'|'visualizar'|'notificacao', dados: {...}}
        [liderancaVisualizacoes, setLiderancaVisualizacoes] = useState([]),
        [liderancaMensagensJaNotificadas, setLiderancaMensagensJaNotificadas] = useState([]),
        [liderancaVizPorMsg, setLiderancaVizPorMsg] = useState({}), // {msg_id: [{user_cod, user_foto, user_nome}]}
        [liderancaReacoes, setLiderancaReacoes] = useState({}), // {msg_id: [{user_cod, emoji}]}
        [liderancaImagemExpandida, setLiderancaImagemExpandida] = useState(null), // URL da imagem expandida
        // Estados para grava√ß√£o de √°udio
        [liderancaGravando, setLiderancaGravando] = useState(false),
        [liderancaMediaRecorder, setLiderancaMediaRecorder] = useState(null),
        [liderancaAudioChunks, setLiderancaAudioChunks] = useState([]),
        [liderancaAudioPreview, setLiderancaAudioPreview] = useState(null),
        // Estado para preview de imagem
        [liderancaImagemPreview, setLiderancaImagemPreview] = useState(null),
        // Estados do Editor de Foto de Perfil
        [photoEditorOpen, setPhotoEditorOpen] = useState(false),
        [photoEditorSrc, setPhotoEditorSrc] = useState(null),
        [photoEditorZoom, setPhotoEditorZoom] = useState(1),
        [photoEditorPosition, setPhotoEditorPosition] = useState({x: 0, y: 0}),
        [photoEditorDragging, setPhotoEditorDragging] = useState(false),
        [photoEditorDragStart, setPhotoEditorDragStart] = useState({x: 0, y: 0}),
        // Estados do m√≥dulo Avisos (usu√°rio)
        [avisoAtual, setAvisoAtual] = useState(null),
        [avisoCarregado, setAvisoCarregado] = useState(false),
        // Estados do m√≥dulo Avisos (admin)
        [avisosData, setAvisosData] = useState([]),
        [avisosRegioes, setAvisosRegioes] = useState([]),
        [avisoModal, setAvisoModal] = useState(false),
        [avisoEdit, setAvisoEdit] = useState(null),
        [avisoForm, setAvisoForm] = useState({
            titulo: '',
            regioes: [],
            todas_regioes: false,
            data_inicio: '',
            data_fim: '',
            recorrencia_tipo: 'uma_vez',
            recorrencia_intervalo: 24,
            imagem_url: ''
        }),
        // Estados do m√≥dulo Opera√ß√µes
        [operacoesData, setOperacoesData] = useState([]),
        [operacaoModal, setOperacaoModal] = useState(false),
        [operacaoEdit, setOperacaoEdit] = useState(null),
        [operacaoForm, setOperacaoForm] = useState({
            regiao: '',
            nome_cliente: '',
            endereco: '',
            modelo: 'nuvem',
            quantidade_motos: 1,
            obrigatoriedade_bau: false,
            possui_garantido: false,
            valor_garantido: '',
            data_inicio: '',
            observacoes: '',
            faixas_km: [
                { km_inicio: 1, km_fim: 10, valor_motoboy: '' },
                { km_inicio: 11, km_fim: 15, valor_motoboy: '' },
                { km_inicio: 16, km_fim: 20, valor_motoboy: '' },
                { km_inicio: 21, km_fim: 25, valor_motoboy: '' },
                { km_inicio: 26, km_fim: 30, valor_motoboy: '' },
                { km_inicio: 31, km_fim: 35, valor_motoboy: '' },
                { km_inicio: 36, km_fim: 40, valor_motoboy: '' },
                { km_inicio: 41, km_fim: 45, valor_motoboy: '' },
                { km_inicio: 46, km_fim: 50, valor_motoboy: '' },
                { km_inicio: 51, km_fim: 60, valor_motoboy: '' }
            ]
        }),
        // Estados para checklist de motos e expans√£o de cards
        [operacaoExpandida, setOperacaoExpandida] = useState(null),
        [checklistMotos, setChecklistMotos] = useState({}),
        [operacaoSubTab, setOperacaoSubTab] = useState('execucao'),
        // Estados para Recrutamento
        [recrutamentoData, setRecrutamentoData] = useState([]),
        [recrutamentoLoading, setRecrutamentoLoading] = useState(false),
        [recrutamentoModal, setRecrutamentoModal] = useState(false),
        [recrutamentoEdit, setRecrutamentoEdit] = useState(null),
        [recrutamentoForm, setRecrutamentoForm] = useState({
            nome_cliente: '',
            data_conclusao: '',
            quantidade_motos: 1,
            quantidade_backup: 0,
            observacao: ''
        }),
        [recrutamentoStats, setRecrutamentoStats] = useState(null),
        [recrutamentoCodBusca, setRecrutamentoCodBusca] = useState({}), // {necessidade_id_tipo: {codigo: '', nome: '', loading: false}}
        [recrutamentoSubTab, setRecrutamentoSubTab] = useState('em_andamento'),
        // Estados para Localiza√ß√£o de Clientes
        [localizacaoClientes, setLocalizacaoClientes] = useState([]),
        [localizacaoFiltro, setLocalizacaoFiltro] = useState(''),
        [localizacaoLoading, setLocalizacaoLoading] = useState(false),
        [localizacaoSubTab, setLocalizacaoSubTab] = useState('lista'), // 'lista' ou 'mapa'
        // Estados para Roteirizador
        [mostrarRoteirizador, setMostrarRoteirizador] = useState(false),
        // Estados para Relat√≥rio Di√°rio
        [relatoriosDiarios, setRelatoriosDiarios] = useState([]),
        [relatoriosLoading, setRelatoriosLoading] = useState(false),
        [showRelatorioModal, setShowRelatorioModal] = useState(false),
        [relatorioEdit, setRelatorioEdit] = useState(null),
        [relatorioImagemAmpliada, setRelatorioImagemAmpliada] = useState(null),
        [relatorioNaoLido, setRelatorioNaoLido] = useState(null), // Relat√≥rio para exibir no modal de ci√™ncia
        [relatoriosNaoLidos, setRelatoriosNaoLidos] = useState([]), // Lista de relat√≥rios n√£o lidos
        [relatorioForm, setRelatorioForm] = useState({
            titulo: '',
            conteudo: '',
            imagem: null,
            para_todos: true,
            setores_destino: []
        }),
        // Sistema de Setores
        [setores, setSetores] = useState([]),
        [setoresLoading, setSetoresLoading] = useState(false),
        [showSetorModal, setShowSetorModal] = useState(false),
        [setorEdit, setSetorEdit] = useState(null),
        [setorForm, setSetorForm] = useState({ nome: '', descricao: '', cor: '#6366f1' }),
        [setorExpandido, setSetorExpandido] = useState(null), // ID do setor expandido para ver usu√°rios
        // Tutorial do usu√°rio
        [tutorialAtivo, setTutorialAtivo] = useState(false),
        [tutorialPasso, setTutorialPasso] = useState(0),
        // Se√ß√£o Sobre a Tutts (landing page)
        [sobreTuttsAberto, setSobreTuttsAberto] = useState(false),
        [sobreTuttsSecao, setSobreTuttsSecao] = useState(0),
        // Estados para configura√ß√£o de regi√µes melhorada
        [regiaoNome, setRegiaoNome] = useState(""),
        [regiaoClienteSelecionado, setRegiaoClienteSelecionado] = useState([]), // array de cod_cliente selecionados
        [regiaoCentrosCusto, setRegiaoCentrosCusto] = useState({}), // {cod_cliente: [centros]}
        [regiaoItensAdicionados, setRegiaoItensAdicionados] = useState([]), // [{cod_cliente, nome_cliente, centro_custo}]
        [regiaoEditando, setRegiaoEditando] = useState(null), [plificState, setPlificState] = useState({ loading: false, loadingLote: false, consultaIndividual: null, consultaLote: [], idBusca: "", loadingDebito: false, pagina: 1, totalPaginas: 0, total: 0, somaTotal: 0 }), [modalDebitoPlific, setModalDebitoPlific] = useState(null), [debitoFormPlific, setDebitoFormPlific] = useState({ valor: "", descricao: "" }), [saldoPlificUser, setSaldoPlificUser] = useState({ saldo: null, loading: false, erro: null }),
        // Estados para dropdowns da aba Config
        [configSecaoAberta, setConfigSecaoAberta] = useState(""), // "" = todas fechadas
        ja = (e, t = "success") => {
            d({
                message: e,
                type: t
            }), setTimeout(() => d(null), 3e3)
        };
        
        // ==================== PORTAL DO ROTEIRIZADOR ====================
        useEffect(() => {
            if (mostrarRoteirizador) {
                console.log("üó∫Ô∏è useEffect - Criando modal portal");
                let portalDiv = document.getElementById('roteirizador-portal');
                if (!portalDiv) {
                    portalDiv = document.createElement('div');
                    portalDiv.id = 'roteirizador-portal';
                    document.body.appendChild(portalDiv);
                }
                ReactDOM.render(
                    React.createElement(RoteirizadorModule, {
                        enderecosBi: localizacaoClientes,
                        onClose: () => { 
                            console.log("üó∫Ô∏è Fechando modal via portal"); 
                            setMostrarRoteirizador(false); 
                        },
                        showToast: ja
                    }),
                    portalDiv
                );
            } else {
                const portalDiv = document.getElementById('roteirizador-portal');
                if (portalDiv) {
                    ReactDOM.unmountComponentAtNode(portalDiv);
                }
            }
        }, [mostrarRoteirizador, localizacaoClientes]);
        
        // ==================== TUTORIAL DO USU√ÅRIO ====================
        const TUTORIAL_PASSOS = [
            {
                titulo: "üëã Bem-vindo ao Sistema Tutts!",
                descricao: "Ol√°! Vamos te mostrar como usar o sistema de forma r√°pida e f√°cil. Em poucos passos voc√™ vai conhecer todas as funcionalidades dispon√≠veis para voc√™.",
                icone: "üéâ",
                destaque: null
            },
            {
                titulo: "üìã Solicitar Ajuste",
                descricao: "Precisa solicitar reembolso de retornos ou ped√°gios? √â aqui! Basta enviar o n√∫mero da OS e os valores ser√£o analisados pela equipe.",
                icone: "üìã",
                destaque: "solicitacoes"
            },
            {
                titulo: "üí∞ Saque Emergencial",
                descricao: "Precisa de dinheiro antes do pagamento regular? Solicite um saque emergencial! Uma taxa de 4,5% ser√° aplicada e o valor cai na sua conta em at√© 1 hora.",
                icone: "üíµ",
                destaque: "saque"
            },
            {
                titulo: "üë• Promo√ß√£o de Indica√ß√£o",
                descricao: "Indique amigos para trabalhar conosco e ganhe b√¥nus! Quanto mais indica√ß√µes aprovadas, mais voc√™ ganha. Compartilhe seu link de indica√ß√£o!",
                icone: "ü§ù",
                destaque: "indicacoes"
            },
            {
                titulo: "üõ°Ô∏è Seguro de Vida IZA",
                descricao: "Voc√™ tem um seguro de vida! Aqui voc√™ encontra informa√ß√µes sobre coberturas, valores e como acionar em caso de necessidade.",
                icone: "üõ°Ô∏è",
                destaque: "seguro"
            },
            {
                titulo: "üõí Lojinha Tutts",
                descricao: "Ofertas exclusivas para voc√™! Compre produtos com desconto e o valor √© abatido diretamente do seu saldo. Fique de olho nas promo√ß√µes!",
                icone: "üõçÔ∏è",
                destaque: "loja"
            },
            {
                titulo: "üìä Seus N√∫meros",
                descricao: "Na tela inicial voc√™ v√™ um resumo: ajustes pendentes, saques em an√°lise e indica√ß√µes. Tudo num s√≥ lugar para voc√™ acompanhar!",
                icone: "üìà",
                destaque: "numeros"
            },
            {
                titulo: "üîÑ Bot√µes do Menu",
                descricao: "Use o bot√£o üè† para voltar ao menu principal, o üîÑ para atualizar as informa√ß√µes e o ‚ùì para ver este tutorial novamente quando quiser!",
                icone: "‚öôÔ∏è",
                destaque: "botoes"
            },
            {
                titulo: "‚úÖ Tudo Pronto!",
                descricao: "Agora voc√™ j√° conhece o sistema! Se tiver d√∫vidas, clique no ‚ùì no menu para rever este tutorial. Bom trabalho e boas corridas! üèçÔ∏è",
                icone: "üéä",
                destaque: null
            }
        ];
        
        const iniciarTutorial = () => {
            setTutorialPasso(0);
            setTutorialAtivo(true);
        };
        
        const proximoPasso = () => {
            setTutorialPasso(atual => {
                if (atual < TUTORIAL_PASSOS.length - 1) {
                    return atual + 1;
                } else {
                    finalizarTutorial();
                    return atual;
                }
            });
        };
        
        const passoAnterior = () => {
            setTutorialPasso(atual => {
                if (atual > 0) {
                    return atual - 1;
                }
                return atual;
            });
        };
        
        const finalizarTutorial = () => {
            setTutorialAtivo(false);
            setTutorialPasso(0);
            // Salvar no localStorage que o tutorial foi visto
            localStorage.setItem('tutts_tutorial_visto_' + l?.codProfissional, 'true');
        };
        
        const pularTutorial = () => {
            finalizarTutorial();
        };
        
        // Verificar se deve mostrar tutorial ao logar
        React.useEffect(() => {
            if (l && l.role === "user" && l.codProfissional) {
                const tutorialVisto = localStorage.getItem('tutts_tutorial_visto_' + l.codProfissional);
                if (!tutorialVisto) {
                    // Aguardar um pouco para o sistema carregar
                    setTimeout(() => {
                        setTutorialAtivo(true);
                    }, 1500);
                }
            }
        }, [l?.codProfissional]);
        
        // Componente do Tutorial
        const TutorialOverlay = () => {
            if (!tutorialAtivo) return null;
            
            const passo = TUTORIAL_PASSOS[tutorialPasso];
            const progresso = ((tutorialPasso + 1) / TUTORIAL_PASSOS.length) * 100;
            
            const handleProximo = () => {
                if (tutorialPasso < TUTORIAL_PASSOS.length - 1) {
                    setTutorialPasso(tutorialPasso + 1);
                } else {
                    setTutorialAtivo(false);
                    setTutorialPasso(0);
                    localStorage.setItem('tutts_tutorial_visto_' + l?.codProfissional, 'true');
                }
            };
            
            const handleAnterior = () => {
                if (tutorialPasso > 0) {
                    setTutorialPasso(tutorialPasso - 1);
                }
            };
            
            const handlePular = () => {
                setTutorialAtivo(false);
                setTutorialPasso(0);
                localStorage.setItem('tutts_tutorial_visto_' + l?.codProfissional, 'true');
            };
            
            return React.createElement("div", {
                className: "fixed inset-0 z-[100] flex items-center justify-center p-4",
                style: { backgroundColor: "rgba(0,0,0,0.85)" },
                onClick: (e) => { if (e.target === e.currentTarget) handlePular(); }
            },
                // Card do Tutorial
                React.createElement("div", {
                    className: "bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden transform transition-all",
                    onClick: (e) => e.stopPropagation()
                },
                    // Header com gradiente
                    React.createElement("div", {
                        className: "bg-gradient-to-r from-purple-600 via-purple-700 to-indigo-700 p-6 text-white relative overflow-hidden"
                    },
                        // Decora√ß√£o de fundo
                        React.createElement("div", {
                            className: "absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"
                        }),
                        React.createElement("div", {
                            className: "absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"
                        }),
                        // Conte√∫do do header
                        React.createElement("div", {className: "relative"},
                            React.createElement("div", {className: "flex items-center justify-between mb-2"},
                                React.createElement("span", {className: "text-sm bg-white/20 px-3 py-1 rounded-full"}, 
                                    "Passo ", tutorialPasso + 1, " de ", TUTORIAL_PASSOS.length
                                ),
                                React.createElement("button", {
                                    type: "button",
                                    onClick: handlePular,
                                    className: "text-white/70 hover:text-white text-sm hover:bg-white/10 px-2 py-1 rounded transition-all cursor-pointer"
                                }, "Pular ‚úï")
                            ),
                            React.createElement("div", {className: "text-5xl mb-3"}, passo.icone),
                            React.createElement("h2", {className: "text-2xl font-bold"}, passo.titulo)
                        )
                    ),
                    
                    // Barra de progresso
                    React.createElement("div", {className: "h-1 bg-gray-200"},
                        React.createElement("div", {
                            className: "h-full bg-gradient-to-r from-purple-500 to-indigo-500 transition-all duration-500",
                            style: { width: progresso + "%" }
                        })
                    ),
                    
                    // Conte√∫do
                    React.createElement("div", {className: "p-6"},
                        React.createElement("p", {className: "text-gray-600 text-lg leading-relaxed"}, passo.descricao),
                        
                        // Indicadores de passos
                        React.createElement("div", {className: "flex justify-center gap-2 mt-6"},
                            TUTORIAL_PASSOS.map((_, idx) => 
                                React.createElement("div", {
                                    key: idx,
                                    className: "w-2 h-2 rounded-full transition-all " + (idx === tutorialPasso ? "bg-purple-600 w-6" : idx < tutorialPasso ? "bg-purple-300" : "bg-gray-300")
                                })
                            )
                        )
                    ),
                    
                    // Bot√µes de navega√ß√£o
                    React.createElement("div", {className: "flex gap-3 p-6 pt-0"},
                        tutorialPasso > 0 && React.createElement("button", {
                            type: "button",
                            onClick: handleAnterior,
                            className: "flex-1 px-6 py-3 border-2 border-purple-200 text-purple-700 rounded-xl font-semibold hover:bg-purple-50 transition-all cursor-pointer"
                        }, "‚Üê Anterior"),
                        React.createElement("button", {
                            type: "button",
                            onClick: handleProximo,
                            className: "flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl cursor-pointer"
                        }, tutorialPasso === TUTORIAL_PASSOS.length - 1 ? "Come√ßar! üöÄ" : "Pr√≥ximo ‚Üí")
                    )
                )
            );
        };
        
        // ==================== FUN√á√ïES DO M√ìDULO SOCIAL ====================
        const loadSocialProfile = async (userCod) => {
            try {
                const res = await fetch(`${API_URL}/social/profile/${userCod}`);
                if (res.ok) {
                    const profile = await res.json();
                    setSocialProfile(profile);
                }
            } catch (err) {
                console.error("Erro ao carregar perfil social:", err);
            }
        };
        
        const saveSocialProfile = async (displayName, photoBase64) => {
            try {
                setSocialLoading(true);
                console.log("üì∏ Salvando perfil:", { displayName, temFoto: !!photoBase64, tamanhoFoto: photoBase64?.length });
                const res = await fetch(`${API_URL}/social/profile/${l.codProfissional}`, {
                    method: "PUT",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({ 
                        display_name: displayName, 
                        profile_photo: photoBase64 
                    })
                });
                if (res.ok) {
                    const profile = await res.json();
                    console.log("üì∏ Perfil salvo:", profile);
                    setSocialProfile(profile);
                    ja("‚úÖ Perfil atualizado!", "success");
                } else {
                    const err = await res.text();
                    console.error("üì∏ Erro ao salvar:", err);
                    ja("Erro ao salvar perfil", "error");
                }
            } catch (err) {
                console.error("üì∏ Erro:", err);
                ja("Erro ao salvar perfil", "error");
            } finally {
                setSocialLoading(false);
            }
        };
        
        const updateOnlineStatus = async (isOnline) => {
            if (!l?.codProfissional) return;
            try {
                await fetch(`${API_URL}/social/status`, {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({ user_cod: l.codProfissional, is_online: isOnline })
                });
            } catch (err) {
                console.error("Erro ao atualizar status:", err);
            }
        };
        
        const loadSocialUsers = async () => {
            try {
                const res = await fetch(`${API_URL}/social/users`);
                if (res.ok) {
                    const users = await res.json();
                    setSocialUsers(users);
                }
            } catch (err) {
                console.error("Erro ao carregar usu√°rios:", err);
            }
        };
        
        const loadSocialMessages = async () => {
            if (!l?.codProfissional) return;
            try {
                const res = await fetch(`${API_URL}/social/messages/${l.codProfissional}`);
                if (res.ok) {
                    const msgs = await res.json();
                    setSocialMessages(msgs);
                }
                // Carregar contagem de n√£o lidas
                const unreadRes = await fetch(`${API_URL}/social/messages/unread/${l.codProfissional}`);
                if (unreadRes.ok) {
                    const data = await unreadRes.json();
                    setSocialUnread(data.count);
                }
            } catch (err) {
                console.error("Erro ao carregar mensagens:", err);
            }
        };
        
        const sendSocialMessage = async (toUserCod, type, content) => {
            try {
                const res = await fetch(`${API_URL}/social/messages`, {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({
                        from_user_cod: l.codProfissional,
                        from_user_name: socialProfile?.display_name || l.fullName,
                        to_user_cod: toUserCod,
                        message_type: type,
                        content: content
                    })
                });
                if (res.ok) {
                    ja("‚úÖ Enviado!", "success");
                    setSocialModalUser(null);
                }
            } catch (err) {
                ja("Erro ao enviar", "error");
            }
        };
        
        const markMessagesAsRead = async () => {
            if (!l?.codProfissional) return;
            try {
                await fetch(`${API_URL}/social/messages/read`, {
                    method: "PATCH",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({ user_cod: l.codProfissional })
                });
                setSocialUnread(0);
            } catch (err) {
                console.error("Erro ao marcar como lido:", err);
            }
        };
        // ==================== FIM FUN√á√ïES M√ìDULO SOCIAL ====================
        
        // ==================== FUN√á√ïES MENSAGENS DA LIDERAN√áA ====================
        
        // Carregar todas as mensagens (para admin_master gerenciar)
        const loadLiderancaMensagens = async () => {
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens`);
                if (res.ok) {
                    const msgs = await res.json();
                    setLiderancaMensagens(msgs);
                }
            } catch (err) {
                console.error("Erro ao carregar mensagens da lideran√ßa:", err);
            }
        };
        
        // Carregar mensagens pendentes (n√£o visualizadas)
        const loadLiderancaPendentes = async () => {
            if (!l?.codProfissional) return [];
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens/pendentes/${l.codProfissional}`);
                if (res.ok) {
                    const msgs = await res.json();
                    setLiderancaPendentes(msgs);
                    return msgs;
                }
            } catch (err) {
                console.error("Erro ao carregar mensagens pendentes:", err);
            }
            return [];
        };
        
        // Carregar hist√≥rico de mensagens visualizadas
        const loadLiderancaHistorico = async () => {
            if (!l?.codProfissional) return;
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens/historico/${l.codProfissional}`);
                if (res.ok) {
                    const msgs = await res.json();
                    setLiderancaHistorico(msgs);
                    // Carregar visualiza√ß√µes e rea√ß√µes de cada mensagem
                    for (const msg of msgs) {
                        loadVizPorMensagem(msg.id);
                        loadReacoesPorMensagem(msg.id);
                    }
                }
            } catch (err) {
                console.error("Erro ao carregar hist√≥rico:", err);
            }
        };
        
        // Carregar visualiza√ß√µes de uma mensagem espec√≠fica (para exibir fotos no rodap√©)
        const loadVizPorMensagem = async (msgId) => {
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens/${msgId}/visualizacoes`);
                if (res.ok) {
                    const viz = await res.json();
                    setLiderancaVizPorMsg(prev => ({...prev, [msgId]: viz}));
                }
            } catch (err) {
                console.error("Erro ao carregar visualiza√ß√µes:", err);
            }
        };
        
        // Carregar rea√ß√µes de uma mensagem
        const loadReacoesPorMensagem = async (msgId) => {
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens/${msgId}/reacoes`);
                if (res.ok) {
                    const reacoes = await res.json();
                    setLiderancaReacoes(prev => ({...prev, [msgId]: reacoes}));
                }
            } catch (err) {
                // Ignora se endpoint n√£o existir ainda
            }
        };
        
        // Enviar rea√ß√£o a uma mensagem
        const enviarReacaoLideranca = async (msgId, emoji) => {
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens/${msgId}/reagir`, {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({
                        user_cod: l.codProfissional,
                        user_nome: socialProfile?.display_name || l.fullName,
                        user_foto: socialProfile?.profile_photo || null,
                        emoji: emoji
                    })
                });
                if (res.ok) {
                    await loadReacoesPorMensagem(msgId);
                }
            } catch (err) {
                console.error("Erro ao enviar rea√ß√£o:", err);
            }
        };
        
        // Criar nova mensagem da lideran√ßa
        const criarLiderancaMensagem = async (dados) => {
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens`, {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({
                        ...dados,
                        criado_por_cod: l.codProfissional,
                        criado_por_nome: socialProfile?.display_name || l.fullName,
                        criado_por_foto: socialProfile?.profile_photo || null
                    })
                });
                if (res.ok) {
                    ja("‚úÖ Mensagem criada com sucesso!", "success");
                    setLiderancaModal(null);
                    setLiderancaImagemPreview(null);
                    setLiderancaAudioPreview(null);
                    await loadLiderancaMensagens();
                    return true;
                }
            } catch (err) {
                ja("Erro ao criar mensagem", "error");
            }
            return false;
        };
        
        // Marcar mensagem como visualizada
        const marcarLiderancaVisualizada = async (mensagemId) => {
            try {
                await fetch(`${API_URL}/lideranca/mensagens/${mensagemId}/visualizar`, {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({
                        user_cod: l.codProfissional,
                        user_nome: socialProfile?.display_name || l.fullName,
                        user_foto: socialProfile?.profile_photo || null
                    })
                });
            } catch (err) {
                console.error("Erro ao marcar como visualizado:", err);
            }
        };
        
        // Carregar visualiza√ß√µes de uma mensagem
        const loadVisualizacoes = async (mensagemId) => {
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens/${mensagemId}/visualizacoes`);
                if (res.ok) {
                    const viz = await res.json();
                    setLiderancaVisualizacoes(viz);
                }
            } catch (err) {
                console.error("Erro ao carregar visualiza√ß√µes:", err);
            }
        };
        
        // Deletar mensagem
        const deletarLiderancaMensagem = async (id) => {
            if (!confirm("Tem certeza que deseja excluir esta mensagem?")) return;
            try {
                const res = await fetch(`${API_URL}/lideranca/mensagens/${id}`, { method: "DELETE" });
                if (res.ok) {
                    ja("‚úÖ Mensagem exclu√≠da!", "success");
                    await loadLiderancaMensagens();
                }
            } catch (err) {
                ja("Erro ao excluir", "error");
            }
        };
        
        // Verificar mensagens pendentes (para notifica√ß√£o)
        const checkLiderancaPendentes = async (isInitialCheck = false) => {
            if (!l?.codProfissional) return;
            // S√≥ admins recebem mensagens da lideran√ßa
            if (!["admin", "admin_master", "admin_financeiro"].includes(l.role)) return;
            
            try {
                const pendentes = await loadLiderancaPendentes();
                
                if (isInitialCheck) {
                    // No login, mostra todas as pendentes
                    if (pendentes.length > 0) {
                        console.log(`üì¢ Login: ${pendentes.length} mensagem(ns) da lideran√ßa pendente(s)`);
                        setLiderancaModal({ tipo: 'notificacao', dados: pendentes[0], fila: pendentes });
                        setLiderancaMensagensJaNotificadas(pendentes.map(m => m.id));
                    }
                } else {
                    // No polling, s√≥ mostra novas
                    const novas = pendentes.filter(m => !liderancaMensagensJaNotificadas.includes(m.id));
                    if (novas.length > 0) {
                        console.log(`üì¢ Polling: ${novas.length} NOVA(S) mensagem(ns) da lideran√ßa!`);
                        setLiderancaModal({ tipo: 'notificacao', dados: novas[0], fila: novas });
                        setLiderancaMensagensJaNotificadas(prev => [...prev, ...novas.map(m => m.id)]);
                    }
                }
            } catch (err) {
                console.error("Erro ao verificar mensagens da lideran√ßa:", err);
            }
        };
        
        // Fun√ß√£o para iniciar grava√ß√£o de √°udio
        const iniciarGravacaoAudio = async () => {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                const mediaRecorder = new MediaRecorder(stream);
                const chunks = [];
                
                mediaRecorder.ondataavailable = (e) => {
                    if (e.data.size > 0) {
                        chunks.push(e.data);
                    }
                };
                
                mediaRecorder.onstop = () => {
                    const blob = new Blob(chunks, { type: 'audio/webm' });
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setLiderancaAudioPreview(reader.result);
                        setLiderancaModal(prev => ({
                            ...prev,
                            dados: { ...prev.dados, midia_url: reader.result, midia_tipo: 'audio' }
                        }));
                    };
                    reader.readAsDataURL(blob);
                    stream.getTracks().forEach(track => track.stop());
                };
                
                setLiderancaMediaRecorder(mediaRecorder);
                setLiderancaAudioChunks(chunks);
                mediaRecorder.start();
                setLiderancaGravando(true);
                ja("üéôÔ∏è Gravando...", "success");
            } catch (err) {
                console.error("Erro ao acessar microfone:", err);
                ja("‚ùå N√£o foi poss√≠vel acessar o microfone", "error");
            }
        };
        
        // Fun√ß√£o para parar grava√ß√£o de √°udio
        const pararGravacaoAudio = () => {
            if (liderancaMediaRecorder && liderancaGravando) {
                liderancaMediaRecorder.stop();
                setLiderancaGravando(false);
                ja("‚úÖ √Åudio gravado!", "success");
            }
        };
        
        // Fun√ß√£o para upload de imagem
        const handleLiderancaImagemUpload = (file) => {
            if (!file) return;
            if (file.size > 5 * 1024 * 1024) {
                ja("Imagem muito grande! M√°ximo 5MB", "error");
                return;
            }
            const reader = new FileReader();
            reader.onloadend = () => {
                setLiderancaImagemPreview(reader.result);
                setLiderancaModal(prev => ({
                    ...prev,
                    dados: { ...prev.dados, midia_url: reader.result, midia_tipo: 'imagem' }
                }));
            };
            reader.readAsDataURL(file);
        };
        
        // Limpar m√≠dia
        const limparLiderancaMidia = () => {
            setLiderancaImagemPreview(null);
            setLiderancaAudioPreview(null);
            setLiderancaModal(prev => ({
                ...prev,
                dados: { ...prev.dados, midia_url: null, midia_tipo: null }
            }));
        };
        
        // ==================== FIM FUN√á√ïES MENSAGENS DA LIDERAN√áA ====================
        
        // ==================== FUN√á√ïES DO EDITOR DE FOTO DE PERFIL ====================
        const handlePhotoEditorOpen = (file) => {
            if (!file) return;
            // Aumentado de 500KB para 10MB
            if (file.size > 10 * 1024 * 1024) {
                ja("Imagem muito grande! M√°ximo 10MB", "error");
                return;
            }
            const reader = new FileReader();
            reader.onload = ev => {
                setPhotoEditorSrc(ev.target.result);
                setPhotoEditorZoom(1);
                setPhotoEditorPosition({x: 0, y: 0});
                setPhotoEditorOpen(true);
            };
            reader.readAsDataURL(file);
        };
        
        const handlePhotoEditorSave = () => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            img.onload = () => {
                // Canvas de 400x400 para qualidade final
                const outputSize = 400;
                canvas.width = outputSize;
                canvas.height = outputSize;
                
                // Tamanho da √°rea de visualiza√ß√£o (256px)
                const viewSize = 256;
                
                // Calcular escala para cobrir todo o c√≠rculo (como object-fit: cover)
                const imgAspect = img.width / img.height;
                let baseWidth, baseHeight;
                
                if (imgAspect > 1) {
                    // Imagem mais larga que alta - altura preenche
                    baseHeight = viewSize;
                    baseWidth = viewSize * imgAspect;
                } else {
                    // Imagem mais alta que larga - largura preenche
                    baseWidth = viewSize;
                    baseHeight = viewSize / imgAspect;
                }
                
                // Aplicar zoom
                const zoomedWidth = baseWidth * photoEditorZoom;
                const zoomedHeight = baseHeight * photoEditorZoom;
                
                // Escala do viewSize para outputSize
                const scaleFactor = outputSize / viewSize;
                
                // Dimens√µes finais no canvas
                const finalWidth = zoomedWidth * scaleFactor;
                const finalHeight = zoomedHeight * scaleFactor;
                
                // Posi√ß√£o centralizada com offset do arraste
                const finalX = (outputSize - finalWidth) / 2 + (photoEditorPosition.x * scaleFactor);
                const finalY = (outputSize - finalHeight) / 2 + (photoEditorPosition.y * scaleFactor);
                
                // Criar clip circular
                ctx.beginPath();
                ctx.arc(outputSize / 2, outputSize / 2, outputSize / 2, 0, Math.PI * 2);
                ctx.closePath();
                ctx.clip();
                
                // Fundo
                ctx.fillStyle = '#7c3aed';
                ctx.fillRect(0, 0, outputSize, outputSize);
                
                // Desenhar imagem
                ctx.drawImage(img, finalX, finalY, finalWidth, finalHeight);
                
                // Converter para base64 com compress√£o
                const quality = 0.9;
                const base64 = canvas.toDataURL('image/png');
                
                // Atualizar preview
                x({...p, socialPhotoPreview: base64});
                setPhotoEditorOpen(false);
                ja("‚úÖ Foto ajustada! Clique em Salvar Perfil", "success");
            };
            img.src = photoEditorSrc;
        };
        
        const handlePhotoEditorMouseDown = (e) => {
            e.preventDefault();
            setPhotoEditorDragging(true);
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            setPhotoEditorDragStart({
                x: clientX - photoEditorPosition.x,
                y: clientY - photoEditorPosition.y
            });
        };
        
        const handlePhotoEditorMouseMove = (e) => {
            if (!photoEditorDragging) return;
            e.preventDefault();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            
            // Limitar movimento baseado no zoom
            const maxMove = 128 * (photoEditorZoom - 1);
            const newX = Math.max(-maxMove, Math.min(maxMove, clientX - photoEditorDragStart.x));
            const newY = Math.max(-maxMove, Math.min(maxMove, clientY - photoEditorDragStart.y));
            
            setPhotoEditorPosition({x: newX, y: newY});
        };
        
        const handlePhotoEditorMouseUp = () => {
            setPhotoEditorDragging(false);
        };
        // ==================== FIM FUN√á√ïES EDITOR DE FOTO ====================
        
        // Carregar perfil social e atualizar status online quando logar
        useEffect(() => {
            if (l?.codProfissional) {
                loadSocialProfile(l.codProfissional);
                updateOnlineStatus(true);
                loadSocialMessages();
                
                // Verificar tarefas pendentes (para usu√°rios com acesso ao To Do)
                const canAccessTodoEff = hasModuleAccess(l, "todo");
                if (canAccessTodoEff) {
                    setTimeout(() => checkTodoPendentes(true), 2000); // Aguarda 2s ap√≥s login - inicial
                }
                
                // Verificar mensagens da lideran√ßa (para admins)
                const isAdmin = ["admin", "admin_master", "admin_financeiro"].includes(l.role);
                if (isAdmin) {
                    setTimeout(() => checkLiderancaPendentes(true), 1000); // Aguarda 1s ap√≥s login
                }
                
                // Atualizar status online periodicamente
                const statusInterval = setInterval(() => {
                    updateOnlineStatus(true);
                    loadSocialMessages();
                }, 60000); // A cada 1 minuto
                
                // Polling: Verificar novas tarefas pendentes a cada 90 segundos
                let todoPollingInterval = null;
                if (canAccessTodoEff) {
                    todoPollingInterval = setInterval(() => {
                        console.log("üîî Polling: Verificando novas tarefas...");
                        checkTodoPendentes(false); // false = apenas novas tarefas
                    }, 90000); // A cada 1.5 minutos
                }
                
                // Polling: Verificar novas mensagens da lideran√ßa a cada 60 segundos
                let liderancaPollingInterval = null;
                if (isAdmin) {
                    liderancaPollingInterval = setInterval(() => {
                        console.log("üì¢ Polling: Verificando mensagens da lideran√ßa...");
                        checkLiderancaPendentes(false);
                    }, 60000); // A cada 1 minuto
                }
                
                // Marcar como offline ao fechar
                const handleBeforeUnload = () => updateOnlineStatus(false);
                window.addEventListener('beforeunload', handleBeforeUnload);
                
                return () => {
                    clearInterval(statusInterval);
                    if (todoPollingInterval) clearInterval(todoPollingInterval);
                    if (liderancaPollingInterval) clearInterval(liderancaPollingInterval);
                    window.removeEventListener('beforeunload', handleBeforeUnload);
                    updateOnlineStatus(false);
                };
            }
        }, [l?.codProfissional]);
        
        useEffect(() => {
            if (!l) return;
            const e = () => R(Date.now()),
                t = ["mousedown", "mousemove", "keydown", "scroll", "touchstart", "click"];
            t.forEach(t => window.addEventListener(t, e));
            const a = setInterval(() => {
                Date.now() - b > 9e5 && (ja("‚è∞ Sess√£o expirada", "error"), setTimeout(() => {
                    o(null), x({})
                }, 1500))
            }, 3e4);
            return () => {
                t.forEach(t => window.removeEventListener(t, e)), clearInterval(a)
            }
        }, [l, b]), useEffect(() => {
            l || "register" !== p.view || 0 !== pe.length || Ta()
        }, [p.view]), useEffect(() => (document.body.style.overflow = wa ? "hidden" : "auto", () => {
            document.body.style.overflow = "auto"
        }), [wa]), useEffect(() => {
            if ("register" === p.view && p.cod && pe.length > 0) {
                const e = Da(p.cod);
                x(e ? t => ({
                    ...t,
                    name: e,
                    codValido: !0
                }) : e => ({
                    ...e,
                    name: "",
                    codValido: !1
                }))
            }
        }, [p.cod, p.view, pe]), useEffect(() => {
            if (!l) return;
            const e = async e => {
                try {
                    await e()
                } catch (e) {
                    console.log("Background load error:", e)
                }
            }, t = () => {
                "user" === l.role && (e($a), e(qa), e(vl), e(_l), e(Al), e(kl), e(Dl), e(Il), e(Za), e(Ka)), "admin_financeiro" !== l.role && "admin_master" !== l.role || (e(za), e(Ba), e(gl), e(wl), e(Cl), e(Sl), e(Dl), e(Ll), e(Ia), e(Ja), e(Ha), e(Wa), e(Ya)), "admin" !== l.role && "admin_master" !== l.role || e(Ia), "admin" === l.role && hasModuleAccess(l, "financeiro") && (e(wl), e(gl), e(Cl), e(Sl), e(Ll)), e(La)
            };
            (async () => {
                "user" === l.role && await Promise.all([Oa(), Ga()]), "admin_financeiro" !== l.role && "admin_master" !== l.role || await Promise.all([Ua(), Va()])
            })().then(() => {
                setTimeout(t, 100)
            })
        }, [l]);
        const Ca = () => {
                try {
                    const e = new(window.AudioContext || window.webkitAudioContext),
                        t = e.createOscillator(),
                        a = e.createGain();
                    t.connect(a), a.connect(e.destination), t.frequency.value = 800, t.type = "sine", a.gain.value = .3, t.start(), setTimeout(() => {
                        t.frequency.value = 600
                    }, 150), setTimeout(() => {
                        t.frequency.value = 800
                    }, 300), setTimeout(() => {
                        t.stop()
                    }, 450)
                } catch (e) {
                    console.log("Audio n√£o suportado")
                }
            },
            Aa = React.useRef(0),
            Sa = React.useRef(0),
            ka = React.useRef({
                solicitacoes: new Set,
                loja: new Set,
                gratuidades: new Set
            }),
            Pa = e => {
                if ("solicitacoes" === e || "validacao" === e) {
                    const e = q.filter(e => "pending" === e.status).map(e => e.id);
                    ka.current.solicitacoes = new Set([...ka.current.solicitacoes, ...e]), v(e => ({
                        ...e,
                        solicitacoes: 0,
                        validacao: 0
                    }))
                } else if ("loja" === e) {
                    const e = et.filter(e => "pendente" === e.status).map(e => e.id);
                    ka.current.loja = new Set([...ka.current.loja, ...e]), v(e => ({
                        ...e,
                        loja: 0
                    }))
                } else if ("gratuidades" === e) {
                    const e = Q.filter(e => "pending" === e.status).map(e => e.id);
                    ka.current.gratuidades = new Set([...ka.current.gratuidades, ...e]), v(e => ({
                        ...e,
                        gratuidades: 0
                    }))
                }
            };
        useEffect(() => {
            const canAccessFinEff = hasModuleAccess(l, "financeiro");
            if (!l || (!canAccessFinEff || ("admin_master" === l.role && "financeiro" !== Ee))) return;
            const e = async () => {
                N(!0);
                const e = p.finTab || "home-fin";
                try {
                    // Requisi√ß√µes b√°sicas para contadores (sempre necess√°rias)
                    const [t, a, l] = await Promise.all([fetch(`${API_URL}/withdrawals`), fetch(`${API_URL}/loja/pedidos`), fetch(`${API_URL}/gratuities`)]), r = await t.json(), o = await a.json(), c = await l.json(), s = r.filter(e => "pending" === e.status && !ka.current.solicitacoes.has(e.id)), n = o.filter(e => "pendente" === e.status && !ka.current.loja.has(e.id)), m = c.filter(e => "pending" === e.status && !ka.current.gratuidades.has(e.id));
                    v({
                        solicitacoes: s.length,
                        validacao: s.length,
                        loja: n.length,
                        gratuidades: m.length
                    });
                    const i = Aa.current,
                        d = r.filter(e => "pending" === e.status).length;
                    d > i && i > 0 && (Ca(), ja("üîî Novo saque solicitado!", "info")), Aa.current = d;
                    const p = Sa.current,
                        x = o.filter(e => "pendente" === e.status).length;
                    x > p && p > 0 && (Ca(), ja("üõí Novo pedido na loja!", "info")), Sa.current = x, U(r), tt(o), H(c);
                    
                    // Requisi√ß√µes extras SOMENTE na primeira vez ou quando mudar de aba
                    // (n√£o a cada polling para evitar lentid√£o)
                    
                    "solicitacoes" === e || "validacao" === e ? Pa("solicitacoes") : "loja" === e ? Pa("loja") : "gratuidades" === e && Pa("gratuidades"), h(new Date)
                } catch (e) {
                    console.error("Erro no polling:", e)
                }
                N(!1)
            };
            e();
            // Polling a cada 30 segundos (antes era 10s - causava lentid√£o)
            const t = setInterval(e, 3e4);
            return () => clearInterval(t)
        }, [l, p.finTab, Ee]), 
        
        // useEffect separado para carregar dados espec√≠ficos da aba (s√≥ quando muda de aba)
        useEffect(() => {
            if (!l) return;
            const canAccessFinEff = hasModuleAccess(l, "financeiro");
            if (!canAccessFinEff) return;
            
            const e = p.finTab || "home-fin";
            const loadTabData = async () => {
                try {
                    switch (e) {
                        case "restritos":
                            await Ba();
                            break;
                        case "indicacoes":
                            await wl(), await vl(), await jl(), await _l();
                            break;
                        case "promo-novatos":
                            await verificarElegibilidadeNovatos(), await Cl(), await Sl(), await Ll(), await carregarRegioesNovatos();
                            break;
                        case "resumo":
                            await Va();
                            break;
                        case "loja":
                            await Ja(), await Ha();
                            break;
                    }
                } catch (err) {
                    console.error("Erro ao carregar aba:", err);
                }
            };
            loadTabData();
        }, [p.finTab]),
        
        useEffect(() => {
            if (!l || "admin" !== l.role) return;
            const e = setInterval(async () => {
                N(!0);
                try {
                    await La(), h(new Date)
                } catch (e) {
                    console.error("Erro no polling:", e)
                }
                N(!1)
            }, 6e4);
            return () => clearInterval(e)
        }, [l]), useEffect(() => {
            // Verificar elegibilidade para promo√ß√µes novatos quando usu√°rio logar
            // Aplica para qualquer usu√°rio que n√£o seja admin
            if (l && l.codProfissional && !['admin', 'admin_master', 'admin_financeiro'].includes(l.role)) {
                verificarElegibilidadeNovatos();
            }
        }, [l]), useEffect(() => {
            if (!l || !["admin", "admin_master"].includes(l.role)) return;
            if ("disponibilidade" !== p.adminTab) return;
            const e = setInterval(async () => {
                try {
                    const e = await fetch(`${API_URL}/disponibilidade`);
                    if (!e.ok) return;
                    const t = await e.json();
                    x(e => ({
                        ...e,
                        dispData: t
                    })), console.log("üîÑ Disponibilidade atualizada em tempo real")
                } catch (e) {
                    console.error("Erro no polling disponibilidade:", e)
                }
            }, 1e4);
            return () => clearInterval(e)
        }, [l, p.adminTab]), useEffect(() => {
            if (!l || !["admin", "admin_master", "admin_financeiro"].includes(l.role)) return;
            if ("horarios" !== p.finTab) return;
            (async () => {
                try {
                    const [e, t] = await Promise.all([fetch(`${API_URL}/horarios`).then(e => e.json()), fetch(`${API_URL}/horarios/especiais`).then(e => e.json())]);
                    console.log("Hor√°rios especiais recebidos:", t), Oe({
                        horarios: e,
                        especiais: t,
                        loading: !1
                    })
                } catch (e) {
                    console.error("Erro ao carregar hor√°rios:", e), Oe(e => ({
                        ...e,
                        loading: !1
                    }))
                }
            })()
        }, [l, p.finTab]), useEffect(() => {
            if (!l || !["admin", "admin_master", "admin_financeiro"].includes(l.role)) return;
            if ("avisos" !== p.finTab) return;
            (async () => {
                try {
                    const e = await fetch(`${API_URL}/avisos`),
                        t = await e.json();
                    Ue({
                        avisos: t,
                        loading: !1
                    })
                } catch (e) {
                    console.error("Erro ao carregar avisos:", e), Ue(e => ({
                        ...e,
                        loading: !1
                    }))
                }
            })()
        }, [l, p.finTab]), useEffect(() => {
            if (!l || "user" !== l.role) return;
            if ("saque" !== p.userTab) return;
            We(!1), Je(0), Be(null); buscarSaldoPlificUsuario();
            (async () => {
                try {
                    const [e, t] = await Promise.all([fetch(`${API_URL}/horarios/verificar`).then(e => e.json()), fetch(`${API_URL}/avisos?ativos=true`).then(e => e.json())]);
                    Be(e);
                    const a = t.filter(t => !t.exibir_fora_horario || t.exibir_fora_horario && !e.dentroHorario);
                    He(a)
                } catch (e) {
                    console.error("Erro ao verificar hor√°rio:", e), Be({
                        dentroHorario: !0
                    })
                }
            })()
        }, [l, p.userTab]), 
        
        // Polling para atualizar hist√≥rico de saques do usu√°rio a cada 15 segundos
        useEffect(() => {
            if (!l || "user" !== l.role) return;
            if ("saque" !== p.userTab) return;
            
            // Atualiza imediatamente ao entrar
            Oa();
            
            // Polling a cada 15 segundos
            const pollingInterval = setInterval(() => {
                Oa();
                buscarSaldoPlificUsuario();
            }, 15000);
            
            return () => clearInterval(pollingInterval);
        }, [l, p.userTab]),
        
        useEffect(() => {
            T && T.pix_tipo && x(e => ({
                ...e,
                pixTipo: T.pix_tipo,
                finPix: T.pix_key || "",
                finName: T.full_name || "",
                finCpf: T.cpf || ""
            }))
        }, [T]);
        
        // Carregar aviso pendente para o usu√°rio
        useEffect(() => {
            if (l && l.role === "user" && l.codProfissional && !avisoCarregado) {
                setAvisoCarregado(true);
                fetch(`${API_URL}/avisos-op/usuario/${l.codProfissional}`)
                    .then(res => res.json())
                    .then(data => { if (data) setAvisoAtual(data); })
                    .catch(err => console.error(err));
            }
        }, [l, avisoCarregado]);
        
        // Fun√ß√£o para fechar aviso
        const fecharAviso = async () => {
            if (avisoAtual && l) {
                await fetch(`${API_URL}/avisos-op/${avisoAtual.id}/visualizar`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_cod: l.codProfissional })
                });
            }
            setAvisoAtual(null);
        };
        
        // Fun√ß√µes do m√≥dulo Avisos (admin)
        const carregarAvisos = async () => {
            try {
                const res = await fetch(`${API_URL}/avisos-op`);
                const data = await res.json();
                setAvisosData(Array.isArray(data) ? data : []);
            } catch (err) { 
                console.error(err); 
                setAvisosData([]);
            }
        };
        
        const carregarRegioes = async () => {
            try {
                const res = await fetch(`${API_URL}/avisos-op/regioes`);
                const data = await res.json();
                setAvisosRegioes(Array.isArray(data) ? data : []);
            } catch (err) { 
                console.error(err); 
                setAvisosRegioes([]);
            }
        };

        const consultarSaldoPlific = async (idProf) => {
            if (!idProf) { ja("Informe o ID", "error"); return; }
            setPlificState(prev => ({ ...prev, loading: true }));
            try {
                const response = await fetchAuth(`${API_URL}/plific/saldo/${idProf}?refresh=true`);
                const data = await response.json();
                if (!response.ok) throw new Error(data.error || "Erro");
                setPlificState(prev => ({ ...prev, consultaIndividual: data, loading: false }));
                ja("Saldo consultado!", "success");
            } catch (error) {
                setPlificState(prev => ({ ...prev, loading: false }));
                ja(error.message, "error");
            }
        };


        // Consulta em Lote - busca saldos de m√∫ltiplos profissionais
        const consultarSaldosLotePlific = async (pagina = 1) => {
            setPlificState(prev => ({ ...prev, loadingLote: true }));
            try {
                const response = await fetchAuth(`${API_URL}/plific/saldos-todos?pagina=${pagina}&porPagina=15`);
                const data = await response.json();
                
                if (!response.ok) throw new Error(data.error || "Erro ao consultar saldos");
                
                setPlificState(prev => ({ 
                    ...prev, 
                    consultaLote: data.profissionais || [], 
                    pagina: data.pagina || 1,
                    totalPaginas: data.totalPaginas || 0,
                    total: data.total || 0,
                    somaTotal: data.somaTotal || 0,
                    loadingLote: false 
                }));
                
                if (pagina === 1) {
                    ja(`${data.total || 0} profissionais encontrados!`, "success");
                }
            } catch (error) {
                setPlificState(prev => ({ ...prev, loadingLote: false }));
                ja(error.message, "error");
            }
        };

        // Lan√ßar D√©bito
        const lancarDebitoPlific = async (idProf, valor, descricao) => {
            if (!idProf || !valor || !descricao) {
                ja("Preencha todos os campos", "error");
                return false;
            }
            
            const valorNum = parseFloat(String(valor).replace(",", "."));
            if (isNaN(valorNum) || valorNum <= 0) {
                ja("Valor inv√°lido", "error");
                return false;
            }

            setPlificState(prev => ({ ...prev, loadingDebito: true }));
            try {
                const response = await fetchAuth(`${API_URL}/plific/lancar-debito`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ idProf: parseInt(idProf), valor: valorNum, descricao })
                });
                
                const data = await response.json();
                
                if (!response.ok) throw new Error(data.error || "Erro ao lan√ßar d√©bito");
                
                setPlificState(prev => ({ ...prev, loadingDebito: false }));
                ja(`D√©bito de R$ ${valorNum.toFixed(2)} lan√ßado com sucesso!`, "success");
                
                // Atualiza o saldo ap√≥s d√©bito
                consultarSaldoPlific(idProf);
                
                return true;
            } catch (error) {
                setPlificState(prev => ({ ...prev, loadingDebito: false }));
                ja(error.message, "error");
                return false;
            }
        };

        // Exportar CSV
        const exportarSaldosCSVPlific = () => {
            if (!plificState.consultaLote || plificState.consultaLote.length === 0) {
                ja("Nenhum dado para exportar", "warning");
                return;
            }
            
            const dados = plificState.consultaLote.filter(r => !r.erro);
            const csv = [
                "ID;Nome;CPF;Celular;Saldo",
                ...dados.map(p => `${p.idProf || p.id || ""};${p.nome || ""};${p.cpf || ""};${p.celular || ""};${parseSaldoBR(p.saldo).toFixed(2).replace(".", ",")}`)
            ].join("\n");
            
            const blob = new Blob(["\ufeff" + csv], { type: "text/csv;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = `saldos_plific_${new Date().toISOString().split("T")[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
            ja("CSV exportado!", "success");
        };


        // Buscar saldo Plific do usu√°rio logado (para tela de saque)
        const buscarSaldoPlificUsuario = async (forceRefresh = false) => {
            if (!l || !l.cod_profissional) return;
            
            setSaldoPlificUser(prev => ({ ...prev, loading: true, erro: null }));
            try {
                const url = forceRefresh 
                    ? `${API_URL}/plific/saldo/${l.cod_profissional}?refresh=true`
                    : `${API_URL}/plific/saldo/${l.cod_profissional}`;
                const response = await fetchAuth(url);
                const data = await response.json();
                
                if (!response.ok) {
                    setSaldoPlificUser({ saldo: null, loading: false, erro: data.error || "Erro ao consultar saldo" });
                    return;
                }
                
                const saldoReal = data.profissional ? parseSaldoBR(data.profissional.saldo) : 0;
                
                // Guarda o saldo real - o c√°lculo com pendentes √© feito no render
                setSaldoPlificUser({ saldo: saldoReal, loading: false, erro: null });
            } catch (error) {
                setSaldoPlificUser({ saldo: null, loading: false, erro: error.message });
            }
        };
        
        // Calcular saldo dispon√≠vel (saldo real - saques pendentes)
        
        const calcularSaldoDisponivel = () => {
            if (saldoPlificUser.saldo === null) return null;
            const saquesPendentes = M.filter(s => s.status === "pending" || s.status === "aguardando_aprovacao");
            const totalPendente = saquesPendentes.reduce((acc, s) => acc + parseFloat(s.requested_amount || 0), 0);
            return Math.max(0, saldoPlificUser.saldo - totalPendente);
        };

        
        // Fun√ß√£o para carregar opera√ß√µes
        const carregarOperacoes = async () => {
            try {
                const res = await fetch(`${API_URL}/operacoes`);
                const data = await res.json();
                setOperacoesData(Array.isArray(data) ? data : []);
            } catch (err) { 
                console.error('Erro ao carregar opera√ß√µes:', err); 
                setOperacoesData([]);
            }
        };
        
        // ==================== FUN√á√ïES RECRUTAMENTO ====================
        // Fun√ß√£o para carregar necessidades de recrutamento
        const carregarRecrutamento = async () => {
            setRecrutamentoLoading(true);
            try {
                const res = await fetch(`${API_URL}/recrutamento`);
                const data = await res.json();
                setRecrutamentoData(Array.isArray(data) ? data : []);
                
                // Carregar estat√≠sticas
                const statsRes = await fetch(`${API_URL}/recrutamento/estatisticas`);
                const stats = await statsRes.json();
                setRecrutamentoStats(stats);
            } catch (err) { 
                console.error('Erro ao carregar recrutamento:', err); 
                setRecrutamentoData([]);
            }
            setRecrutamentoLoading(false);
        };
        
        // Fun√ß√£o para salvar necessidade de recrutamento
        const salvarRecrutamento = async () => {
            try {
                const url = recrutamentoEdit 
                    ? `${API_URL}/recrutamento/${recrutamentoEdit.id}`
                    : `${API_URL}/recrutamento`;
                const method = recrutamentoEdit ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ...recrutamentoForm,
                        criado_por: l?.fullName || 'Admin'
                    })
                });
                
                if (!res.ok) {
                    const err = await res.json();
                    throw new Error(err.error);
                }
                
                ja(recrutamentoEdit ? '‚úÖ Necessidade atualizada!' : '‚úÖ Necessidade criada!', 'success');
                setRecrutamentoModal(false);
                setRecrutamentoEdit(null);
                setRecrutamentoForm({
                    nome_cliente: '',
                    data_conclusao: '',
                    quantidade_motos: 1,
                    quantidade_backup: 0,
                    observacao: ''
                });
                carregarRecrutamento();
            } catch (err) {
                ja('‚ùå Erro: ' + err.message, 'error');
            }
        };
        
        // Fun√ß√£o para buscar profissional pelo c√≥digo
        const buscarProfissionalRecrutamento = async (necessidadeId, tipo, codigo) => {
            const key = `${necessidadeId}_${tipo}`;
            setRecrutamentoCodBusca(prev => ({
                ...prev,
                [key]: { ...prev[key], codigo, loading: true, nome: '', erro: '' }
            }));
            
            try {
                const res = await fetch(`${API_URL}/recrutamento/buscar-profissional/${codigo}`);
                if (!res.ok) {
                    const err = await res.json();
                    throw new Error(err.error || 'N√£o encontrado');
                }
                const data = await res.json();
                setRecrutamentoCodBusca(prev => ({
                    ...prev,
                    [key]: { ...prev[key], codigo, nome: data.nome_profissional || data.full_name, loading: false }
                }));
            } catch (err) {
                setRecrutamentoCodBusca(prev => ({
                    ...prev,
                    [key]: { ...prev[key], codigo, nome: '', loading: false, erro: err.message }
                }));
            }
        };
        
        // Fun√ß√£o para atribuir profissional
        const atribuirProfissionalRecrutamento = async (necessidadeId, tipo) => {
            const key = `${necessidadeId}_${tipo}`;
            const info = recrutamentoCodBusca[key];
            if (!info || !info.codigo) {
                ja('‚ùå Digite o c√≥digo do profissional', 'error');
                return;
            }
            
            try {
                const res = await fetch(`${API_URL}/recrutamento/${necessidadeId}/atribuir`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        cod_profissional: info.codigo,
                        tipo,
                        atribuido_por: l?.fullName || 'Admin'
                    })
                });
                
                if (!res.ok) {
                    const err = await res.json();
                    throw new Error(err.error);
                }
                
                ja('‚úÖ Profissional atribu√≠do!', 'success');
                setRecrutamentoCodBusca(prev => ({
                    ...prev,
                    [key]: { codigo: '', nome: '', loading: false }
                }));
                carregarRecrutamento();
            } catch (err) {
                ja('‚ùå Erro: ' + err.message, 'error');
            }
        };
        
        // Fun√ß√£o para remover atribui√ß√£o
        const removerAtribuicaoRecrutamento = async (atribuicaoId) => {
            if (!confirm('Remover esta atribui√ß√£o?')) return;
            
            try {
                const res = await fetch(`${API_URL}/recrutamento/atribuicao/${atribuicaoId}`, {
                    method: 'DELETE'
                });
                
                if (!res.ok) {
                    const err = await res.json();
                    throw new Error(err.error);
                }
                
                ja('‚úÖ Atribui√ß√£o removida!', 'success');
                carregarRecrutamento();
            } catch (err) {
                ja('‚ùå Erro: ' + err.message, 'error');
            }
        };
        
        // Fun√ß√£o para deletar necessidade
        const deletarRecrutamento = async (id) => {
            if (!confirm('Excluir esta necessidade de recrutamento? Todas as atribui√ß√µes ser√£o removidas.')) return;
            
            try {
                const res = await fetch(`${API_URL}/recrutamento/${id}`, {
                    method: 'DELETE'
                });
                
                if (!res.ok) {
                    const err = await res.json();
                    throw new Error(err.error);
                }
                
                ja('‚úÖ Necessidade exclu√≠da!', 'success');
                carregarRecrutamento();
            } catch (err) {
                ja('‚ùå Erro: ' + err.message, 'error');
            }
        };
        
        // ==================== FUN√á√ïES LOCALIZA√á√ÉO CLIENTES ====================
        // Fun√ß√£o para gerar link do Google Maps
        const gerarLinkGoogleMaps = (endereco, latitude, longitude) => {
            if (latitude && longitude && latitude !== 0 && longitude !== 0) {
                return `https://www.google.com/maps?q=${latitude},${longitude}`;
            }
            if (endereco) {
                return `https://www.google.com/maps?q=${encodeURIComponent(endereco)}`;
            }
            return 'https://www.google.com/maps';
        };
        
        // Fun√ß√£o para gerar link do Waze
        const gerarLinkWaze = (endereco, latitude, longitude) => {
            if (latitude && longitude && latitude !== 0 && longitude !== 0) {
                return `https://waze.com/ul?ll=${latitude},${longitude}&navigate=yes`;
            }
            if (endereco) {
                return `https://waze.com/ul?q=${encodeURIComponent(endereco)}&navigate=yes`;
            }
            return 'https://waze.com/ul';
        };
        
        // Fun√ß√£o para copiar para clipboard
        const copiarParaClipboard = async (texto, tipo) => {
            try {
                await navigator.clipboard.writeText(texto);
                ja(`‚úÖ Link ${tipo} copiado!`, "success");
            } catch (err) {
                // Fallback para browsers antigos
                const textarea = document.createElement('textarea');
                textarea.value = texto;
                textarea.style.position = 'fixed';
                textarea.style.left = '-9999px';
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                    ja(`‚úÖ Link ${tipo} copiado!`, "success");
                } catch (e) {
                    ja(`‚ùå Erro ao copiar`, "error");
                }
                document.body.removeChild(textarea);
            }
        };
        
        // Fun√ß√£o para carregar dados de localiza√ß√£o dos clientes
        const carregarLocalizacaoClientes = async () => {
            setLocalizacaoLoading(true);
            try {
                const res = await fetch(`${API_URL}/bi/localizacao-clientes`);
                const data = await res.json();
                setLocalizacaoClientes(Array.isArray(data) ? data : []);
            } catch (err) { 
                console.error('Erro ao carregar localiza√ß√£o clientes:', err); 
                setLocalizacaoClientes([]);
            }
            setLocalizacaoLoading(false);
        };
        
        // Fun√ß√µes para Relat√≥rio Di√°rio
        const carregarRelatoriosDiarios = async () => {
            setRelatoriosLoading(true);
            try {
                // Passar setor_id e usuario_id para filtrar relat√≥rios que o usu√°rio pode ver
                // Admins (sem setor) veem todos, usu√°rios comuns s√≥ veem os do seu setor ou para todos
                const params = new URLSearchParams();
                if (l?.setor_id) params.append('setor_id', l.setor_id);
                if (l?.codProfissional) params.append('usuario_id', l.codProfissional);
                
                const queryString = params.toString() ? `?${params.toString()}` : '';
                const res = await fetch(`${API_URL}/relatorios-diarios${queryString}`);
                const data = await res.json();
                setRelatoriosDiarios(Array.isArray(data) ? data : []);
            } catch (err) { 
                console.error('Erro ao carregar relat√≥rios:', err); 
                setRelatoriosDiarios([]);
            }
            setRelatoriosLoading(false);
        };
        
        // ===== FUN√á√ïES DE SETORES =====
        const carregarSetores = async () => {
            try {
                const res = await fetch(`${API_URL}/setores`);
                const data = await res.json();
                setSetores(Array.isArray(data) ? data : []);
            } catch (err) {
                console.error('Erro ao carregar setores:', err);
                setSetores([]);
            }
        };
        
        const salvarSetor = async () => {
            if (!setorForm.nome.trim()) {
                ja('Nome do setor √© obrigat√≥rio', 'error');
                return;
            }
            
            setSetoresLoading(true);
            try {
                const url = setorEdit 
                    ? `${API_URL}/setores/${setorEdit.id}`
                    : `${API_URL}/setores`;
                const method = setorEdit ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(setorForm)
                });
                
                const data = await res.json();
                
                if (!res.ok) {
                    throw new Error(data.error || 'Erro ao salvar');
                }
                
                ja(setorEdit ? 'Setor atualizado!' : 'Setor criado!', 'success');
                setShowSetorModal(false);
                setSetorEdit(null);
                setSetorForm({ nome: '', descricao: '', cor: '#6366f1' });
                carregarSetores();
            } catch (err) {
                ja(err.message || 'Erro ao salvar setor', 'error');
            }
            setSetoresLoading(false);
        };
        
        const excluirSetor = async (setor) => {
            if (!confirm(`Excluir o setor "${setor.nome}"?`)) return;
            
            try {
                const res = await fetch(`${API_URL}/setores/${setor.id}`, { method: 'DELETE' });
                const data = await res.json();
                
                if (!res.ok) {
                    throw new Error(data.error || 'Erro ao excluir');
                }
                
                ja('Setor exclu√≠do!', 'success');
                carregarSetores();
            } catch (err) {
                ja(err.message || 'Erro ao excluir setor', 'error');
            }
        };
        
        const atualizarSetorUsuario = async (codProfissional, setorId) => {
            try {
                const res = await fetch(`${API_URL}/users/${codProfissional}/setor`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ setor_id: setorId || null })
                });
                
                if (!res.ok) {
                    throw new Error('Erro ao atualizar');
                }
                
                ja('Setor do usu√°rio atualizado!', 'success');
                Ia(); // Recarregar usu√°rios
            } catch (err) {
                ja('Erro ao atualizar setor', 'error');
            }
        };
        
        // Carregar setores quando logar
        React.useEffect(() => {
            if (l?.codProfissional) {
                carregarSetores();
            }
        }, [l?.codProfissional]);
        
        // Carregar relat√≥rios n√£o lidos pelo usu√°rio
        const carregarRelatoriosNaoLidos = async () => {
            console.log('üì¢ Verificando relat√≥rios n√£o lidos para:', l?.codProfissional, 'setor:', l?.setor_id);
            if (!l?.codProfissional) {
                console.log('‚ùå Sem codProfissional');
                return;
            }
            try {
                // Passar setor_id como query param para filtrar por setor
                const setorParam = l?.setor_id ? `?setor_id=${l.setor_id}` : '';
                const res = await fetch(`${API_URL}/relatorios-diarios/nao-lidos/${l.codProfissional}${setorParam}`);
                const data = await res.json();
                console.log('üì¢ Resposta do servidor:', data);
                const naoLidos = Array.isArray(data) ? data : [];
                setRelatoriosNaoLidos(naoLidos);
                // Se houver relat√≥rios n√£o lidos, mostrar o primeiro
                if (naoLidos.length > 0) {
                    console.log('üì¢ Mostrando modal para:', naoLidos[0]);
                    setRelatorioNaoLido(naoLidos[0]);
                } else {
                    console.log('üì¢ Nenhum relat√≥rio n√£o lido');
                }
            } catch (err) { 
                console.error('Erro ao carregar relat√≥rios n√£o lidos:', err); 
            }
        };
        
        // Marcar relat√≥rio como lido
        const marcarRelatorioComoLido = async (relatorioId) => {
            if (!l?.codProfissional) return;
            try {
                await fetch(`${API_URL}/relatorios-diarios/${relatorioId}/visualizar`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        usuario_id: l.codProfissional,
                        usuario_nome: l.fullName || l.username,
                        usuario_foto: socialProfile?.profile_photo || ''
                    })
                });
                
                // Remover da lista de n√£o lidos
                const novosNaoLidos = relatoriosNaoLidos.filter(r => r.id !== relatorioId);
                setRelatoriosNaoLidos(novosNaoLidos);
                
                // Mostrar pr√≥ximo relat√≥rio n√£o lido ou fechar modal
                if (novosNaoLidos.length > 0) {
                    setRelatorioNaoLido(novosNaoLidos[0]);
                } else {
                    setRelatorioNaoLido(null);
                }
                
                // Atualizar lista de relat√≥rios para mostrar nova visualiza√ß√£o
                carregarRelatoriosDiarios();
            } catch (err) { 
                console.error('Erro ao marcar como lido:', err); 
            }
        };
        
        // Verificar relat√≥rios n√£o lidos ao carregar e periodicamente
        React.useEffect(() => {
            if (l?.codProfissional) {
                carregarRelatoriosNaoLidos();
                // Verificar a cada 30 segundos
                const interval = setInterval(carregarRelatoriosNaoLidos, 30000);
                return () => clearInterval(interval);
            }
        }, [l?.codProfissional]);
        
        // Renderizar modal de relat√≥rio globalmente via Portal
        React.useEffect(() => {
            if (!relatorioNaoLido) return;
            
            // Criar container do portal se n√£o existir
            let portalRoot = document.getElementById('relatorio-modal-portal');
            if (!portalRoot) {
                portalRoot = document.createElement('div');
                portalRoot.id = 'relatorio-modal-portal';
                document.body.appendChild(portalRoot);
            }
            
            // Renderizar modal no portal
            const modalContent = React.createElement("div", {
                style: {
                    position: 'fixed',
                    top: 0,
                    left: 0,
                    right: 0,
                    bottom: 0,
                    backgroundColor: 'rgba(0,0,0,0.7)',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    zIndex: 99999,
                    padding: '16px'
                }
            },
                React.createElement("div", {
                    style: {
                        backgroundColor: 'white',
                        borderRadius: '16px',
                        boxShadow: '0 25px 50px -12px rgba(0,0,0,0.25)',
                        width: '100%',
                        maxWidth: '640px',
                        maxHeight: '90vh',
                        overflow: 'hidden',
                        display: 'flex',
                        flexDirection: 'column'
                    }
                },
                    // Header
                    React.createElement("div", {
                        style: {
                            background: 'linear-gradient(to right, #0d9488, #0f766e)',
                            color: 'white',
                            padding: '16px',
                            display: 'flex',
                            alignItems: 'center',
                            gap: '12px'
                        }
                    },
                        React.createElement("span", {style: {fontSize: '30px'}}, "üì¢"),
                        React.createElement("div", null,
                            React.createElement("h3", {style: {fontSize: '18px', fontWeight: 'bold', margin: 0}}, "Novo Relat√≥rio Di√°rio"),
                            React.createElement("p", {style: {fontSize: '14px', color: '#99f6e4', margin: 0}}, 
                                relatoriosNaoLidos.length > 1 
                                    ? relatoriosNaoLidos.length + " relat√≥rios pendentes"
                                    : "1 relat√≥rio pendente"
                            )
                        )
                    ),
                    // Info do autor
                    React.createElement("div", {
                        style: {
                            padding: '16px',
                            backgroundColor: '#f9fafb',
                            borderBottom: '1px solid #e5e7eb',
                            display: 'flex',
                            alignItems: 'center',
                            gap: '12px'
                        }
                    },
                        relatorioNaoLido.usuario_foto 
                            ? React.createElement("img", {
                                src: relatorioNaoLido.usuario_foto,
                                style: {width: '48px', height: '48px', borderRadius: '50%', objectFit: 'cover', border: '2px solid #99f6e4'}
                            })
                            : React.createElement("div", {
                                style: {
                                    width: '48px',
                                    height: '48px',
                                    borderRadius: '50%',
                                    backgroundColor: '#ccfbf1',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    color: '#0d9488',
                                    fontWeight: 'bold',
                                    fontSize: '18px'
                                }
                            }, (relatorioNaoLido.usuario_nome || "?").charAt(0).toUpperCase()),
                        React.createElement("div", null,
                            React.createElement("p", {style: {fontWeight: 'bold', color: '#1f2937', margin: 0}}, relatorioNaoLido.titulo),
                            React.createElement("p", {style: {fontSize: '14px', color: '#6b7280', margin: 0}}, 
                                relatorioNaoLido.usuario_nome + " ‚Ä¢ " + 
                                new Date(relatorioNaoLido.created_at).toLocaleDateString('pt-BR', {
                                    day: '2-digit', month: '2-digit', year: 'numeric',
                                    hour: '2-digit', minute: '2-digit'
                                })
                            )
                        )
                    ),
                    // Conte√∫do
                    React.createElement("div", {
                        style: {
                            padding: '16px',
                            overflowY: 'auto',
                            flex: 1,
                            maxHeight: '50vh'
                        }
                    },
                        React.createElement("div", {
                            style: {color: '#374151', whiteSpace: 'pre-wrap'}
                        }, relatorioNaoLido.conteudo || ''),
                        relatorioNaoLido.imagem_url && React.createElement("div", {style: {marginTop: '16px'}},
                            React.createElement("img", {
                                src: relatorioNaoLido.imagem_url,
                                style: {maxWidth: '100%', borderRadius: '8px', boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1)'}
                            })
                        )
                    ),
                    // Footer
                    React.createElement("div", {
                        style: {
                            padding: '16px',
                            backgroundColor: '#f9fafb',
                            borderTop: '1px solid #e5e7eb'
                        }
                    },
                        React.createElement("button", {
                            onClick: () => marcarRelatorioComoLido(relatorioNaoLido.id),
                            style: {
                                width: '100%',
                                padding: '16px 24px',
                                backgroundColor: '#0d9488',
                                color: 'white',
                                borderRadius: '12px',
                                fontWeight: 'bold',
                                fontSize: '18px',
                                border: 'none',
                                cursor: 'pointer',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                gap: '8px',
                                boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1)'
                            }
                        }, "‚úÖ Estou Ciente")
                    )
                )
            );
            
            ReactDOM.render(modalContent, portalRoot);
            
            return () => {
                ReactDOM.unmountComponentAtNode(portalRoot);
            };
        }, [relatorioNaoLido, relatoriosNaoLidos]);
        
        const abrirNovoRelatorio = () => {
            setRelatorioEdit(null);
            // Por padr√£o, abre com "Setores espec√≠ficos" selecionado e "Monitoramento" marcado
            const setorMonitoramento = setores.find(s => s.nome.toLowerCase() === 'monitoramento');
            const setoresDefault = setorMonitoramento ? [setorMonitoramento.id] : [];
            setRelatorioForm({
                titulo: '',
                conteudo: '',
                imagem: null,
                para_todos: false, // Setores espec√≠ficos por padr√£o
                setores_destino: setoresDefault // Monitoramento selecionado por padr√£o
            });
            setShowRelatorioModal(true);
        };
        
        const abrirEditarRelatorio = (relatorio) => {
            setRelatorioEdit(relatorio);
            setRelatorioForm({
                titulo: relatorio.titulo || '',
                conteudo: relatorio.conteudo || '',
                imagem: null,
                para_todos: relatorio.para_todos !== false,
                setores_destino: relatorio.setores_destino || []
            });
            setShowRelatorioModal(true);
        };
        
        const salvarRelatorio = async (event) => {
            // Prevenir qualquer comportamento padr√£o
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            if (!relatorioForm.titulo.trim()) {
                ja('Preencha o t√≠tulo do relat√≥rio', 'error');
                return false;
            }
            
            // Validar setores se n√£o for para todos
            if (!relatorioForm.para_todos && (!relatorioForm.setores_destino || relatorioForm.setores_destino.length === 0)) {
                ja('Selecione pelo menos um setor de destino', 'error');
                return false;
            }
            
            s(true);
            try {
                let imagem_base64 = null;
                
                // Converter imagem para base64 se existir
                if (relatorioForm.imagem) {
                    imagem_base64 = await new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = () => resolve(reader.result);
                        reader.readAsDataURL(relatorioForm.imagem);
                    });
                }
                
                const payload = {
                    titulo: relatorioForm.titulo,
                    conteudo: relatorioForm.conteudo,
                    usuario_id: l.codProfissional,
                    usuario_nome: l.fullName || l.username,
                    usuario_foto: socialProfile?.profile_photo || '',
                    imagem_base64: imagem_base64,
                    para_todos: relatorioForm.para_todos,
                    setores_destino: relatorioForm.para_todos ? [] : relatorioForm.setores_destino
                };
                
                const urlApi = relatorioEdit 
                    ? `${API_URL}/relatorios-diarios/${relatorioEdit.id}`
                    : `${API_URL}/relatorios-diarios`;
                    
                const response = await fetch(urlApi, {
                    method: relatorioEdit ? 'PUT' : 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) throw new Error('Erro ao salvar');
                
                ja(relatorioEdit ? '‚úÖ Relat√≥rio atualizado!' : '‚úÖ Relat√≥rio criado!', 'success');
                setShowRelatorioModal(false);
                setRelatorioEdit(null);
                setRelatorioForm({ titulo: '', conteudo: '', imagem: null, para_todos: true, setores_destino: [] });
                await carregarRelatoriosDiarios();
            } catch (err) {
                console.error('Erro ao salvar relat√≥rio:', err);
                ja('‚ùå Erro ao salvar relat√≥rio', 'error');
            }
            s(false);
            return false;
        };
        
        const excluirRelatorio = async (id) => {
            if (!confirm('Tem certeza que deseja excluir este relat√≥rio?')) return;
            s(true);
            try {
                const res = await fetch(`${API_URL}/relatorios-diarios/${id}`, { method: 'DELETE' });
                if (!res.ok) throw new Error('Erro ao excluir');
                ja('‚úÖ Relat√≥rio exclu√≠do!', 'success');
                carregarRelatoriosDiarios();
            } catch (err) {
                ja('‚ùå Erro ao excluir relat√≥rio', 'error');
            }
            s(false);
        };
        
        const inserirEmoji = (emoji) => {
            setRelatorioForm(prev => ({
                ...prev,
                conteudo: prev.conteudo + emoji
            }));
        };
        
        const aplicarFormatacao = (tipo) => {
            const textarea = document.getElementById('relatorio-conteudo');
            if (!textarea) return;
            
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const texto = relatorioForm.conteudo;
            const selecionado = texto.substring(start, end);
            
            let novoTexto = '';
            switch(tipo) {
                case 'bold':
                    novoTexto = texto.substring(0, start) + '**' + selecionado + '**' + texto.substring(end);
                    break;
                case 'italic':
                    novoTexto = texto.substring(0, start) + '_' + selecionado + '_' + texto.substring(end);
                    break;
                default:
                    return;
            }
            
            setRelatorioForm(prev => ({ ...prev, conteudo: novoTexto }));
        };
        
        // Fun√ß√£o para calcular contador regressivo
        const calcularContadorRegressivo = (dataInicio) => {
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);
            const inicio = new Date(dataInicio);
            inicio.setHours(0, 0, 0, 0);
            const diffTime = inicio - hoje;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) {
                return { texto: `Iniciou h√° ${Math.abs(diffDays)} dia(s)`, status: 'iniciado', dias: diffDays };
            } else if (diffDays === 0) {
                return { texto: 'INICIA HOJE! üéâ', status: 'hoje', dias: 0 };
            } else if (diffDays === 1) {
                return { texto: 'Inicia AMANH√É!', status: 'amanha', dias: 1 };
            } else if (diffDays <= 7) {
                return { texto: `Faltam ${diffDays} dias`, status: 'proximo', dias: diffDays };
            } else {
                return { texto: `Faltam ${diffDays} dias`, status: 'distante', dias: diffDays };
            }
        };
        
        // Fun√ß√£o para gerar relat√≥rio PDF da opera√ß√£o
        const gerarRelatorioOperacao = async (op) => {
            const contador = calcularContadorRegressivo(op.data_inicio);
            
            // Carregar jsPDF dinamicamente se n√£o existir
            if (!window.jspdf) {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
                document.head.appendChild(script);
                await new Promise(resolve => script.onload = resolve);
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Cores oficiais da Tutts
            const roxoTutts = [85, 7, 118]; // #550776
            const laranjaTutts = [243, 118, 1]; // #f37601
            const branco = [255, 255, 255];
            const cinzaEscuro = [51, 51, 51];
            const cinzaMedio = [102, 102, 102];
            const cinzaClaro = [245, 245, 245];
            const cinzaBorda = [220, 220, 220];
            
            // ===== HEADER =====
            doc.setFillColor(...roxoTutts);
            doc.rect(0, 0, 210, 50, 'F');
            
            // Linha decorativa laranja
            doc.setFillColor(...laranjaTutts);
            doc.rect(0, 50, 210, 3, 'F');
            
            // Logo Tutts (texto estilizado)
            doc.setTextColor(...branco);
            doc.setFontSize(28);
            doc.setFont('helvetica', 'bold');
            doc.text('tutts', 12, 32);
            
            // Seta laranja simulando a logo
            doc.setFillColor(...laranjaTutts);
            doc.triangle(12, 18, 48, 18, 52, 12, 'F');
            
            // T√≠tulo do relat√≥rio - alinhado √† direita
            doc.setTextColor(...branco);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text('RELAT√ìRIO DE OPERA√á√ÉO', 200, 15, { align: 'right' });
            
            // Nome do cliente - alinhado √† direita
            doc.setFontSize(18);
            doc.setFont('helvetica', 'bold');
            const nomeCliente = op.nome_cliente.length > 35 ? op.nome_cliente.substring(0, 35) + '...' : op.nome_cliente;
            doc.text(nomeCliente, 200, 28, { align: 'right' });
            
            // Data de emiss√£o
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.text('Emitido em ' + new Date().toLocaleDateString('pt-BR') + ' √†s ' + new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit'}), 200, 40, { align: 'right' });
            
            let y = 65;
            
            // ===== DATA DE IN√çCIO - DESTAQUE =====
            doc.setFillColor(...cinzaClaro);
            doc.roundedRect(15, y, 180, 22, 3, 3, 'F');
            doc.setDrawColor(...laranjaTutts);
            doc.setLineWidth(1);
            doc.line(15, y, 15, y + 22);
            
            doc.setFontSize(9);
            doc.setTextColor(...cinzaMedio);
            doc.setFont('helvetica', 'normal');
            doc.text('DATA DE IN√çCIO DA OPERA√á√ÉO', 22, y + 7);
            
            doc.setFontSize(14);
            doc.setTextColor(...cinzaEscuro);
            doc.setFont('helvetica', 'bold');
            doc.text(new Date(op.data_inicio).toLocaleDateString('pt-BR', { weekday: 'long', day: '2-digit', month: 'long', year: 'numeric' }), 22, y + 16);
            
            // Badge do contador
            const contadorWidth = doc.getTextWidth(contador.texto) + 16;
            doc.setFillColor(...laranjaTutts);
            doc.roundedRect(195 - contadorWidth, y + 5, contadorWidth, 12, 2, 2, 'F');
            doc.setFontSize(9);
            doc.setTextColor(...branco);
            doc.setFont('helvetica', 'bold');
            doc.text(contador.texto, 195 - contadorWidth/2, y + 13, { align: 'center' });
            
            y += 32;
            
            // ===== INFORMA√á√ïES DA OPERA√á√ÉO =====
            doc.setFontSize(11);
            doc.setTextColor(...roxoTutts);
            doc.setFont('helvetica', 'bold');
            doc.text('INFORMA√á√ïES DA OPERA√á√ÉO', 105, y, { align: 'center' });
            doc.setDrawColor(...roxoTutts);
            doc.setLineWidth(0.5);
            doc.line(15, y + 2, 195, y + 2);
            
            y += 12;
            
            // Tabela de informa√ß√µes
            const tableData = [
                ['Regi√£o', op.regiao || '-'],
                ['Modelo', op.modelo === 'nuvem' ? 'Nuvem' : op.modelo === 'dedicado' ? 'Dedicado' : 'Flash'],
                ['Quantidade de Motos', op.quantidade_motos + ' moto(s)'],
                ['Obrigatoriedade de Ba√∫', op.obrigatoriedade_bau ? 'Sim' : 'N√£o'],
                ['Garantido pela Loja', op.possui_garantido ? 'Sim - R$ ' + parseFloat(op.valor_garantido || 0).toFixed(2) : 'N√£o']
            ];
            
            tableData.forEach((row, idx) => {
                if (idx % 2 === 0) {
                    doc.setFillColor(...cinzaClaro);
                    doc.rect(15, y - 4, 180, 10, 'F');
                }
                doc.setFontSize(10);
                doc.setTextColor(...cinzaMedio);
                doc.setFont('helvetica', 'normal');
                doc.text(row[0], 20, y + 2);
                doc.setTextColor(...cinzaEscuro);
                doc.setFont('helvetica', 'bold');
                doc.text(row[1], 100, y + 2);
                y += 10;
            });
            
            y += 5;
            
            // Endere√ßo
            doc.setFillColor(...cinzaClaro);
            doc.roundedRect(15, y, 180, 18, 2, 2, 'F');
            doc.setFontSize(9);
            doc.setTextColor(...cinzaMedio);
            doc.setFont('helvetica', 'normal');
            doc.text('ENDERE√áO COMPLETO', 20, y + 6);
            doc.setFontSize(10);
            doc.setTextColor(...cinzaEscuro);
            doc.setFont('helvetica', 'normal');
            const enderecoText = op.endereco || '-';
            const enderecoLines = doc.splitTextToSize(enderecoText, 165);
            doc.text(enderecoLines[0], 20, y + 14);
            
            y += 28;
            
            // ===== VALORES POR FAIXA DE KM =====
            if (op.faixas_km && op.faixas_km.filter(f => f.valor_motoboy > 0).length > 0) {
                doc.setFontSize(11);
                doc.setTextColor(...roxoTutts);
                doc.setFont('helvetica', 'bold');
                doc.text('TABELA DE VALORES POR QUILOMETRAGEM', 105, y, { align: 'center' });
                doc.setDrawColor(...roxoTutts);
                doc.setLineWidth(0.5);
                doc.line(15, y + 2, 195, y + 2);
                
                y += 10;
                
                const faixas = op.faixas_km.filter(f => f.valor_motoboy > 0);
                
                // Cabe√ßalho da tabela
                doc.setFillColor(...roxoTutts);
                doc.rect(15, y, 90, 8, 'F');
                doc.rect(105, y, 90, 8, 'F');
                doc.setFontSize(9);
                doc.setTextColor(...branco);
                doc.setFont('helvetica', 'bold');
                doc.text('FAIXA DE KM', 60, y + 5.5, { align: 'center' });
                doc.text('VALOR MOTOBOY', 150, y + 5.5, { align: 'center' });
                
                y += 8;
                
                faixas.forEach((faixa, idx) => {
                    if (idx % 2 === 0) {
                        doc.setFillColor(...cinzaClaro);
                        doc.rect(15, y, 180, 8, 'F');
                    }
                    doc.setDrawColor(...cinzaBorda);
                    doc.setLineWidth(0.2);
                    doc.line(15, y + 8, 195, y + 8);
                    
                    doc.setFontSize(10);
                    doc.setTextColor(...cinzaEscuro);
                    doc.setFont('helvetica', 'normal');
                    doc.text(faixa.km_inicio + ' km - ' + faixa.km_fim + ' km', 60, y + 5.5, { align: 'center' });
                    doc.setFont('helvetica', 'bold');
                    doc.text('R$ ' + parseFloat(faixa.valor_motoboy).toFixed(2), 150, y + 5.5, { align: 'center' });
                    y += 8;
                });
                
                y += 10;
            }
            
            // ===== OBSERVA√á√ïES =====
            if (op.observacoes) {
                if (y > 230) { doc.addPage(); y = 20; }
                
                doc.setFontSize(11);
                doc.setTextColor(...roxoTutts);
                doc.setFont('helvetica', 'bold');
                doc.text('OBSERVA√á√ïES', 105, y, { align: 'center' });
                doc.setDrawColor(...roxoTutts);
                doc.setLineWidth(0.5);
                doc.line(15, y + 2, 195, y + 2);
                
                y += 10;
                
                doc.setFillColor(...cinzaClaro);
                const obsLines = doc.splitTextToSize(op.observacoes, 170);
                const obsHeight = Math.max(obsLines.length * 5 + 8, 15);
                doc.roundedRect(15, y, 180, obsHeight, 2, 2, 'F');
                
                doc.setFontSize(10);
                doc.setTextColor(...cinzaEscuro);
                doc.setFont('helvetica', 'normal');
                doc.text(obsLines, 20, y + 7);
                
                y += obsHeight + 10;
            }
            
            // ===== FOOTER =====
            const footerY = 275;
            
            // Linha separadora
            doc.setDrawColor(...cinzaBorda);
            doc.setLineWidth(0.3);
            doc.line(15, footerY, 195, footerY);
            
            // Informa√ß√µes do footer
            doc.setFontSize(8);
            doc.setTextColor(...cinzaMedio);
            doc.setFont('helvetica', 'normal');
            doc.text('Documento gerado automaticamente pelo Sistema Tutts', 15, footerY + 6);
            doc.text('Respons√°vel: ' + (op.criado_por || '-'), 15, footerY + 11);
            
            // Logo texto no footer
            doc.setFontSize(12);
            doc.setTextColor(...roxoTutts);
            doc.setFont('helvetica', 'bold');
            doc.text('tutts', 190, footerY + 10, { align: 'right' });
            
            // Download do PDF
            doc.save('Tutts_Operacao_' + op.nome_cliente.replace(/[^a-zA-Z0-9]/g, '_') + '.pdf');
            ja('üìÑ Relat√≥rio PDF baixado!', 'success');
        };
        
        const salvarAviso = async () => {
            try {
                const url = avisoEdit ? `${API_URL}/avisos-op/${avisoEdit.id}` : `${API_URL}/avisos-op`;
                const method = avisoEdit ? 'PUT' : 'POST';
                
                await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ...avisoForm,
                        created_by: l?.fullName
                    })
                });
                
                ja(avisoEdit ? '‚úÖ Aviso atualizado!' : '‚úÖ Aviso criado!', 'success');
                setAvisoModal(false);
                setAvisoEdit(null);
                setAvisoForm({ titulo: '', regioes: [], todas_regioes: false, data_inicio: '', data_fim: '', recorrencia_tipo: 'uma_vez', recorrencia_intervalo: 24, imagem_url: '' });
                carregarAvisos();
            } catch (err) {
                ja('‚ùå Erro ao salvar aviso', 'error');
            }
        };
        
        const deletarAviso = async (id) => {
            if (!confirm('Tem certeza que deseja excluir este aviso?')) return;
            try {
                await fetch(`${API_URL}/avisos-op/${id}`, { method: 'DELETE' });
                ja('‚úÖ Aviso exclu√≠do!', 'success');
                carregarAvisos();
            } catch (err) {
                ja('‚ùå Erro ao excluir', 'error');
            }
        };
        
        const handleAvisoImageUpload = (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (ev) => {
                setAvisoForm(f => ({ ...f, imagem_url: ev.target.result }));
            };
            reader.readAsDataURL(file);
        };
        
        // useEffect para carregar avisos quando entrar na aba
        useEffect(() => {
            if (p.opTab === 'avisos' && l && (l.role === 'admin_master' || l.role === 'admin')) {
                carregarAvisos();
                carregarRegioes();
            }
        }, [p.opTab, l]);
        
        const loadTodoGrupos = async () => {
            try {
                const res = await fetch(`${API_URL}/todo/grupos?user_cod=${l.codProfissional}&role=${l.role}`);
                return await res.json()
            } catch (err) {
                console.error("Erro:", err);
                return []
            }
        };
        const loadTodoTarefas = async (grupoId, status = "todas") => {
            try {
                let url = `${API_URL}/todo/tarefas?user_cod=${l.codProfissional}&role=${l.role}`;
                if (grupoId) url += `&grupo_id=${grupoId}`;
                if (status !== "todas") url += `&status=${status}`;
                const res = await fetch(url);
                return await res.json()
            } catch (err) {
                console.error("Erro:", err);
                return []
            }
        };
        const loadTodoMetricas = async (periodo = "30") => {
            try {
                const res = await fetch(`${API_URL}/todo/metricas?periodo=${periodo}`);
                return await res.json()
            } catch (err) {
                console.error("Erro:", err);
                return null
            }
        };
        const loadTodoAdmins = async () => {
            try {
                const res = await fetch(`${API_URL}/todo/admins`);
                return await res.json()
            } catch (err) {
                return []
            }
        };
        
        // Fun√ß√£o para carregar "Meu Dia" - tarefas do dia ou vencidas atribu√≠das ao usu√°rio
        const loadTodoMeuDia = async () => {
            try {
                const res = await fetch(`${API_URL}/todo/tarefas?user_cod=${l.codProfissional}&role=${l.role}`);
                const todas = await res.json();
                const hoje = new Date();
                hoje.setHours(0, 0, 0, 0);
                
                // Normalizar c√≥digo do usu√°rio para string
                const meuCod = String(l.codProfissional);
                const meuNome = l.fullName;
                
                // Filtrar APENAS tarefas ATRIBU√çDAS ao usu√°rio (n√£o as que ele criou)
                // que s√£o do dia ou vencidas
                const meuDia = todas.filter(t => {
                    // Parsear respons√°veis de forma segura
                    let responsaveis = [];
                    try {
                        if (Array.isArray(t.responsaveis)) {
                            responsaveis = t.responsaveis;
                        } else if (typeof t.responsaveis === 'string' && t.responsaveis) {
                            responsaveis = JSON.parse(t.responsaveis);
                        }
                    } catch (e) {
                        responsaveis = [];
                    }
                    
                    // Verificar se o usu√°rio est√° na lista de respons√°veis
                    // Normalizar todos os valores para string e verificar diferentes formatos
                    const isAtribuidoParaMim = responsaveis.some(resp => {
                        if (typeof resp === 'string') {
                            return String(resp) === meuCod || resp === meuNome;
                        } else if (typeof resp === 'object' && resp !== null) {
                            // Caso seja objeto {cod: "...", nome: "..."} ou {user_cod: "..."}
                            const respCod = String(resp.cod || resp.user_cod || '');
                            const respNome = resp.nome || resp.user_name || '';
                            return respCod === meuCod || respNome === meuNome;
                        } else if (typeof resp === 'number') {
                            return String(resp) === meuCod;
                        }
                        return false;
                    });
                    
                    if (!isAtribuidoParaMim) return false; // S√≥ mostra se est√° atribu√≠da a mim
                    if (t.status === "concluida") return false; // N√£o mostrar conclu√≠das no meu dia
                    
                    if (t.data_prazo) {
                        const dataVenc = new Date(t.data_prazo);
                        dataVenc.setHours(0, 0, 0, 0);
                        return dataVenc <= hoje; // Hoje ou vencida
                    }
                    return true; // Sem data = aparece no meu dia
                });
                
                setTodoMeuDia(meuDia);
                return meuDia;
            } catch (err) {
                console.error("Erro ao carregar Meu Dia:", err);
                return [];
            }
        };
        
        // ============================================
        // NOVAS FUN√á√ïES TO-DO - KANBAN, SUBTAREFAS, TIMER
        // ============================================
        
        // Fun√ß√£o auxiliar para formatar tempo em HH:MM:SS
        const formatarTempo = (segundos) => {
            if (!segundos || segundos < 0) return "00:00:00";
            const h = Math.floor(segundos / 3600);
            const m = Math.floor((segundos % 3600) / 60);
            const s = Math.floor(segundos % 60);
            return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        };
        
        // Fun√ß√£o auxiliar para formatar tempo curto (ex: 2h 30min)
        const formatarTempoCurto = (segundos) => {
            if (!segundos || segundos < 0) return "0min";
            const h = Math.floor(segundos / 3600);
            const m = Math.floor((segundos % 3600) / 60);
            if (h > 0) return `${h}h ${m}min`;
            return `${m}min`;
        };
        
        // Carregar subtarefas de uma tarefa
        const loadTodoSubtarefas = async (tarefaId) => {
            try {
                const res = await fetch(`${API_URL}/todo/tarefas/${tarefaId}/subtarefas`);
                const subs = await res.json();
                setTodoSubtarefas(prev => ({ ...prev, [tarefaId]: subs }));
                return subs;
            } catch (err) {
                console.error("Erro ao carregar subtarefas:", err);
                return [];
            }
        };
        
        // Adicionar subtarefa
        const addTodoSubtarefa = async (tarefaId, titulo) => {
            try {
                const subs = todoSubtarefas[tarefaId] || [];
                await fetch(`${API_URL}/todo/tarefas/${tarefaId}/subtarefas`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ titulo, ordem: subs.length })
                });
                await loadTodoSubtarefas(tarefaId);
                // Atualizar lista de tarefas
                if (todoViewMode === "meudia") await loadTodoMeuDia();
                else if (todoGrupoAtivo) await loadTodoTarefas(todoGrupoAtivo.id);
            } catch (err) {
                console.error("Erro ao adicionar subtarefa:", err);
            }
        };
        
        // Toggle subtarefa conclu√≠da
        const toggleTodoSubtarefa = async (subId, concluida, tarefaId) => {
            try {
                await fetch(`${API_URL}/todo/subtarefas/${subId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        concluida: !concluida,
                        user_cod: l.codProfissional,
                        user_name: l.fullName
                    })
                });
                await loadTodoSubtarefas(tarefaId);
                // Atualizar lista de tarefas
                if (todoViewMode === "meudia") await loadTodoMeuDia();
                else if (todoGrupoAtivo) await loadTodoTarefas(todoGrupoAtivo.id);
            } catch (err) {
                console.error("Erro ao atualizar subtarefa:", err);
            }
        };
        
        // Excluir subtarefa
        const deleteTodoSubtarefa = async (subId, tarefaId) => {
            try {
                await fetch(`${API_URL}/todo/subtarefas/${subId}`, { method: 'DELETE' });
                await loadTodoSubtarefas(tarefaId);
                if (todoViewMode === "meudia") await loadTodoMeuDia();
                else if (todoGrupoAtivo) await loadTodoTarefas(todoGrupoAtivo.id);
            } catch (err) {
                console.error("Erro ao excluir subtarefa:", err);
            }
        };
        
        // Iniciar timer
        const iniciarTodoTimer = async (tarefaId) => {
            try {
                await fetch(`${API_URL}/todo/tarefas/${tarefaId}/timer/iniciar`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_cod: l.codProfissional,
                        user_name: l.fullName
                    })
                });
                setTodoTimerTarefa(tarefaId);
                setTodoTimerSegundos(0);
                ja("‚è±Ô∏è Timer iniciado!", "success");
                // Atualizar lista
                if (todoViewMode === "meudia") await loadTodoMeuDia();
                else if (todoGrupoAtivo) await loadTodoTarefas(todoGrupoAtivo.id);
            } catch (err) {
                console.error("Erro ao iniciar timer:", err);
                ja("Erro ao iniciar timer", "error");
            }
        };
        
        // Parar timer
        const pararTodoTimer = async (tarefaId) => {
            try {
                await fetch(`${API_URL}/todo/tarefas/${tarefaId}/timer/parar`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_cod: l.codProfissional,
                        user_name: l.fullName
                    })
                });
                setTodoTimerTarefa(null);
                setTodoTimerSegundos(0);
                ja("‚èπÔ∏è Timer parado e tempo registrado!", "success");
                // Atualizar lista
                if (todoViewMode === "meudia") await loadTodoMeuDia();
                else if (todoGrupoAtivo) await loadTodoTarefas(todoGrupoAtivo.id);
            } catch (err) {
                console.error("Erro ao parar timer:", err);
                ja("Erro ao parar timer", "error");
            }
        };
        
        // Mover tarefa no Kanban
        const moverTodoKanban = async (tarefaId, colunaDestino) => {
            try {
                await fetch(`${API_URL}/todo/tarefas/${tarefaId}/kanban`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        coluna_kanban: colunaDestino,
                        user_cod: l.codProfissional,
                        user_name: l.fullName
                    })
                });
                ja(`‚úÖ Tarefa movida para ${colunaDestino === 'todo' ? 'A Fazer' : colunaDestino === 'doing' ? 'Fazendo' : 'Conclu√≠do'}!`, "success");
                // Atualizar lista
                if (todoViewMode === "meudia") await loadTodoMeuDia();
                else if (todoGrupoAtivo) await loadTodoTarefas(todoGrupoAtivo.id);
            } catch (err) {
                console.error("Erro ao mover tarefa:", err);
                ja("Erro ao mover tarefa", "error");
            }
        };
        
        // Abrir detalhe da tarefa
        const abrirTodoDetalhe = async (tarefa) => {
            setTodoTarefaDetalhe(tarefa);
            await loadTodoSubtarefas(tarefa.id);
        };
        
        // Fun√ß√£o para abrir modal de editar tarefa com respons√°veis pr√©-carregados
        const abrirEditarTarefa = (tarefa) => {
            let responsaveisSelecionados = [];
            try {
                let resp = tarefa.responsaveis;
                if (typeof resp === 'string') resp = JSON.parse(resp);
                if (Array.isArray(resp)) {
                    responsaveisSelecionados = resp.map(r => typeof r === 'string' ? r : (r.cod || r.user_cod || r.nome));
                }
            } catch (e) {}
            
            setTodoModal({
                tipo: "editarTarefa", 
                tarefa: tarefa,
                responsaveisSelecionados: responsaveisSelecionados
            });
        };
        
        // Fun√ß√£o para verificar tarefas pendentes e mostrar notifica√ß√£o
        // S√≥ notifica se o usu√°rio tem tarefas ATRIBU√çDAS a ele (n√£o as que ele criou)
        // S√≥ notifica NOVAS tarefas (que ainda n√£o foram notificadas nesta sess√£o)
        const checkTodoPendentes = async (isInitialCheck = false) => {
            try {
                const res = await fetch(`${API_URL}/todo/tarefas?user_cod=${l.codProfissional}&role=${l.role}`);
                const todas = await res.json();
                const hoje = new Date();
                hoje.setHours(0, 0, 0, 0);
                
                // Normalizar c√≥digo do usu√°rio para string
                const meuCod = String(l.codProfissional);
                const meuNome = l.fullName;
                
                const pendentes = todas.filter(t => {
                    // Parsear respons√°veis de forma segura
                    let responsaveis = [];
                    try {
                        if (Array.isArray(t.responsaveis)) {
                            responsaveis = t.responsaveis;
                        } else if (typeof t.responsaveis === 'string' && t.responsaveis) {
                            responsaveis = JSON.parse(t.responsaveis);
                        }
                    } catch (e) {
                        responsaveis = [];
                    }
                    
                    // Verificar se o usu√°rio est√° na lista de respons√°veis
                    const isAtribuidoParaMim = responsaveis.some(resp => {
                        if (typeof resp === 'string') {
                            return String(resp) === meuCod || resp === meuNome;
                        } else if (typeof resp === 'object' && resp !== null) {
                            const respCod = String(resp.cod || resp.user_cod || '');
                            const respNome = resp.nome || resp.user_name || '';
                            return respCod === meuCod || respNome === meuNome;
                        } else if (typeof resp === 'number') {
                            return String(resp) === meuCod;
                        }
                        return false;
                    });
                    
                    if (!isAtribuidoParaMim) return false;
                    if (t.status === "concluida") return false;
                    
                    if (t.data_prazo) {
                        const dataVenc = new Date(t.data_prazo);
                        dataVenc.setHours(0, 0, 0, 0);
                        return dataVenc <= hoje; // Hoje ou vencida
                    }
                    return true; // Sem data = considera pendente
                });
                
                // Na verifica√ß√£o inicial (login), mostra TODAS as pendentes
                if (isInitialCheck) {
                    if (pendentes.length > 0) {
                        console.log(`üîî Login: ${pendentes.length} tarefa(s) pendente(s)`);
                        setTodoPendentesNotif(pendentes);
                        setTodoNotifModal(true);
                        // Marca todas como j√° notificadas
                        setTodoTarefasJaNotificadas(pendentes.map(t => t.id));
                    }
                } else {
                    // No polling, mostra apenas NOVAS tarefas (n√£o notificadas ainda)
                    const novasTarefas = pendentes.filter(t => !todoTarefasJaNotificadas.includes(t.id));
                    
                    if (novasTarefas.length > 0) {
                        console.log(`üîî Polling: ${novasTarefas.length} NOVA(S) tarefa(s) pendente(s)!`);
                        setTodoPendentesNotif(novasTarefas);
                        setTodoNotifModal(true);
                        // Adiciona √†s j√° notificadas
                        setTodoTarefasJaNotificadas(prev => [...prev, ...novasTarefas.map(t => t.id)]);
                    }
                }
            } catch (err) {
                console.error("Erro ao verificar pendentes:", err);
            }
        };
        
        useEffect(() => {
            const canAccessTodoEff = hasModuleAccess(l, "todo");
            if (!(l && canAccessTodoEff && "todo" === Ee)) return;
            const init = async () => {
                setTodoLoading(true);
                const [grupos, admins, meuDia] = await Promise.all([loadTodoGrupos(), loadTodoAdmins(), loadTodoMeuDia()]);
                setTodoGrupos(grupos);
                setTodoAdmins(admins);
                setTodoMeuDia(meuDia);
                // Iniciar com "Meu Dia" como padr√£o
                setTodoViewMode("meudia");
                setTodoGrupoAtivo(null);
                if ("admin_master" === l.role) {
                    const metricas = await loadTodoMetricas();
                    setTodoMetricas(metricas)
                }
                setTodoLoading(false)
            };
            init()
        }, [Ee, l]);
        const Ta = async () => {
            ge(!0), Re(null);
            try {
                const e = await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQTbc5J8j85MlYGrjWajG33cTDd6TEpYur5hgNcYUwmtra8jh3Nfsrzm-0GNJO6wCYEZAGEHxw807o7/pub?gid=0&single=true&output=tsv"),
                    t = (await e.text()).split("\n").filter(e => e.trim()),
                    a = [];
                for (let e = 1; e < t.length; e++) {
                    const l = t[e].split("\t"),
                        r = l[0]?.trim(),
                        o = l[1]?.trim();
                    r && o && a.push({
                        codigo: r,
                        nome: o
                    })
                }
                xe(a), console.log(`üìä Planilha carregada: ${a.length} profissionais`)
            } catch (e) {
                console.error("Erro ao carregar planilha:", e), Re("Erro ao carregar lista de profissionais")
            }
            ge(!1)
        }, Da = e => {
            if (!e || 0 === pe.length) return null;
            const t = pe.find(t => t.codigo === e.toString());
            return t ? t.nome : null
        }, La = async () => {
            try {
                const e = "user" === l.role ? `?userId=${l.id}&userCod=${l.cod_profissional}` : "",
                    t = await fetch(`${API_URL}/submissions${e}`),
                    a = await t.json();
                C(a.map(e => ({
                    ...e,
                    ordemServico: e.ordem_servico,
                    codProfissional: e.user_cod,
                    fullName: e.user_name,
                    temImagem: e.tem_imagem,
                    imagemComprovante: null,
                    timestamp: new Date(e.created_at).toLocaleString("pt-BR")
                })))
            } catch (e) {
                console.error(e)
            }
        }, Ia = async () => {
            try {
                const e = await fetch(`${API_URL}/users`),
                    t = await e.json();
                S(t.map(e => ({
                    codProfissional: e.cod_profissional,
                    fullName: e.full_name,
                    role: e.role,
                    setor_id: e.setor_id,
                    setor_nome: e.setor_nome,
                    setor_cor: e.setor_cor,
                    createdAt: new Date(e.created_at).toLocaleString("pt-BR")
                })))
            } catch (e) {
                console.error(e)
            }
        }, Fa = async e => {
            try {
                const t = await fetch(`${API_URL}/submissions/${e}/imagem`),
                    a = await t.json();
                C(t => t.map(t => t.id === e ? {
                    ...t,
                    imagemComprovante: a.imagem
                } : t))
            } catch (e) {
                ja("Erro ao carregar imagem", "error")
            }
        }, $a = async () => {
            try {
                const e = await fetch(`${API_URL}/financial/check-terms/${l.cod_profissional}`),
                    t = await e.json();
                if (P(t.hasAccepted), t.hasAccepted) {
                    const e = await fetch(`${API_URL}/financial/data/${l.cod_profissional}`),
                        t = await e.json();
                    D(t.data), Ma()
                }
            } catch (e) {
                console.error(e)
            }
        }, Ma = async () => {
            try {
                const e = await fetch(`${API_URL}/financial/logs/${l.cod_profissional}`),
                    t = await e.json();
                I(t)
            } catch (e) {
                console.error(e)
            }
        }, Oa = async () => {
            try {
                const e = await fetch(`${API_URL}/withdrawals/user/${l.cod_profissional}`);
                O(await e.json())
            } catch (e) {
                console.error(e)
            }
        }, qa = async () => {
            try {
                const e = await fetch(`${API_URL}/gratuities/user/${l.cod_profissional}`);
                W(await e.json())
            } catch (e) {
                console.error(e)
            }
        }, Ua = async () => {
            try {
                const e = await fetch(`${API_URL}/withdrawals`);
                U(await e.json())
            } catch (e) {
                console.error(e)
            }
        }, za = async () => {
            try {
                const e = await fetch(`${API_URL}/gratuities`);
                H(await e.json())
            } catch (e) {
                console.error(e)
            }
        }, Ba = async () => {
            try {
                const e = await fetch(`${API_URL}/restricted`);
                Y(await e.json())
            } catch (e) {
                console.error(e)
            }
        }, Va = async () => {
            try {
                const e = await fetch(`${API_URL}/withdrawals/dashboard/conciliacao`);
                X(await e.json())
            } catch (e) {
                console.error(e)
            }
        }, Ja = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/estoque`);
                Ye(await e.json())
            } catch (e) {
                console.error("Erro ao carregar estoque:", e)
            }
        }, Qa = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/movimentacoes`);
                dt(await e.json())
            } catch (e) {
                console.error("Erro ao carregar movimenta√ß√µes:", e)
            }
        }, Ha = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/produtos`);
                Xe(await e.json())
            } catch (e) {
                console.error("Erro ao carregar produtos:", e)
            }
        }, Ga = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/produtos/ativos`);
                Xe(await e.json())
            } catch (e) {
                console.error("Erro ao carregar produtos:", e)
            }
        }, Wa = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/pedidos`);
                tt(await e.json())
            } catch (e) {
                console.error("Erro ao carregar pedidos:", e)
            }
        }, Za = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/pedidos/user/${l.codProfissional}`);
                lt(await e.json())
            } catch (e) {
                console.error("Erro ao carregar pedidos:", e)
            }
        }, Ya = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/sugestoes`);
                gt(await e.json())
            } catch (e) {
                console.error("Erro ao carregar sugest√µes:", e)
            }
        }, Ka = async () => {
            try {
                const e = await fetch(`${API_URL}/loja/sugestoes/user/${l.codProfissional}`);
                Rt(await e.json())
            } catch (e) {
                console.error("Erro ao carregar sugest√µes:", e)
            }
        }, Xa = () => {
            const e = new URLSearchParams;
            ua.data_inicio && e.append("data_inicio", ua.data_inicio), ua.data_fim && e.append("data_fim", ua.data_fim);
            
            // Se tiver regi√£o selecionada, expandir para clientes e centros de custo
            let clientesParaEnviar = ua.cod_cliente || [];
            let centrosCustoParaEnviar = ua.centro_custo || [];
            let clientesSemFiltroCC = []; // Clientes que devem mostrar TODOS os CC
            
            if (ua.regiao) {
                const regiaoObj = aa.find(r => r.id === parseInt(ua.regiao));
                if (regiaoObj && regiaoObj.clientes) {
                    const itensRegiao = regiaoObj.clientes.map(function(item) {
                        if (typeof item === 'number') {
                            return { cod_cliente: item, centro_custo: null };
                        }
                        return item;
                    });
                    
                    // Separar clientes que t√™m "Todos CC" dos que t√™m CC espec√≠ficos
                    const clientesComTodosCC = itensRegiao
                        .filter(i => i.centro_custo === null)
                        .map(i => String(i.cod_cliente));
                    
                    const clientesComCCEspecifico = itensRegiao
                        .filter(i => i.centro_custo !== null);
                    
                    // Todos os clientes √∫nicos da regi√£o
                    const todosClientes = [...new Set(itensRegiao.map(i => String(i.cod_cliente)))];
                    clientesParaEnviar = todosClientes;
                    
                    // Se h√° clientes com CC espec√≠fico, enviar os centros de custo
                    // Mas tamb√©m precisamos enviar os clientes sem filtro de CC
                    if (clientesComCCEspecifico.length > 0) {
                        const ccEspecificos = clientesComCCEspecifico.map(i => i.centro_custo);
                        centrosCustoParaEnviar = ccEspecificos;
                        clientesSemFiltroCC = clientesComTodosCC;
                    }
                    // Se todos os clientes t√™m "Todos CC", n√£o enviar filtro de centro_custo
                }
            }
            
            clientesParaEnviar && clientesParaEnviar.length > 0 && e.append("cod_cliente", Array.isArray(clientesParaEnviar) ? clientesParaEnviar.join(",") : clientesParaEnviar);
            centrosCustoParaEnviar && centrosCustoParaEnviar.length > 0 && e.append("centro_custo", Array.isArray(centrosCustoParaEnviar) ? centrosCustoParaEnviar.join(",") : centrosCustoParaEnviar);
            clientesSemFiltroCC && clientesSemFiltroCC.length > 0 && e.append("clientes_sem_filtro_cc", clientesSemFiltroCC.join(","));
            ua.cod_prof && e.append("cod_prof", ua.cod_prof), ua.categoria && e.append("categoria", ua.categoria), ua.cidade && e.append("cidade", ua.cidade), ua.status_prazo && e.append("status_prazo", ua.status_prazo), ua.status_retorno && e.append("status_retorno", ua.status_retorno);
            return e;
        }, carregarMapaCalor = async () => {
            try {
                setMapaCalorLoading(true);
                setLoadingMessage("Carregando mapa de calor...");
                setMapaCalorDados(null);
                const params = Xa();
                console.log("üó∫Ô∏è Carregando mapa de calor:", params.toString());
                setLoadingMessage("Buscando coordenadas das entregas...");
                const response = await fetch(API_URL + "/bi/mapa-calor?" + params);
                const data = await response.json();
                setLoadingMessage("Renderizando mapa...");
                console.log("üó∫Ô∏è Dados mapa recebidos:", data);
                setMapaCalorDados(data);
            } catch (e) {
                console.error("Erro mapa calor:", e);
            } finally {
                setMapaCalorLoading(false);
            }
        }, toggleAcompFiltro = (filtro) => {
            setAcompFiltros(prev => {
                const novoEstado = !prev[filtro];
                if (novoEstado) {
                    // Adiciona ao FINAL para aparecer na ordem de sele√ß√£o
                    setAcompFiltrosOrdem(ordemAtual => [...ordemAtual, filtro]);
                } else {
                    setAcompFiltrosOrdem(ordemAtual => ordemAtual.filter(f => f !== filtro));
                }
                return {...prev, [filtro]: novoEstado};
            });
        }, carregarAcompanhamento = async () => {
            try {
                setAcompLoading(true);
                setLoadingMessage("Carregando acompanhamento peri√≥dico...");
                const params = Xa();
                console.log("üìà Carregando acompanhamento - Filtros ua:", JSON.stringify(ua));
                console.log("üìà Carregando acompanhamento - Params:", params.toString());
                setLoadingMessage("Analisando dados do per√≠odo...");
                const response = await fetch(API_URL + "/bi/acompanhamento-periodico?" + params);
                const data = await response.json();
                console.log("üìà Dados recebidos:", data);
                setAcompDados(data);
                
                // Carregar dados de clientes tamb√©m
                try {
                    const clientesRes = await fetch(API_URL + "/bi/acompanhamento-clientes?" + params);
                    const clientesData = await clientesRes.json();
                    console.log("üìä Dados clientes:", clientesData);
                    setAcompClientes(clientesData);
                } catch(e) { console.log("Erro ao carregar clientes:", e); }
                
                // Carregar comparativo semanal
                try {
                    const semanalRes = await fetch(API_URL + "/bi/comparativo-semanal?" + params);
                    const semanalData = await semanalRes.json();
                    console.log("üìÖ Comparativo semanal:", semanalData);
                    if (semanalData && semanalData.semanas) {
                        setComparativoSemanal(semanalData);
                    } else {
                        setComparativoSemanal({semanas: []});
                    }
                } catch(e) { 
                    console.log("Erro ao carregar comparativo semanal:", e); 
                    setComparativoSemanal({semanas: []});
                }
                
                // Carregar comparativo semanal POR CLIENTE
                try {
                    const semanalClientesRes = await fetch(API_URL + "/bi/comparativo-semanal-clientes?" + params);
                    const semanalClientesData = await semanalClientesRes.json();
                    console.log("üìÖ Comparativo semanal por cliente:", semanalClientesData);
                    if (semanalClientesData && semanalClientesData.clientes) {
                        setComparativoSemanalClientes(semanalClientesData);
                    } else {
                        setComparativoSemanalClientes({clientes: []});
                    }
                } catch(e) { 
                    console.log("Erro ao carregar comparativo semanal por cliente:", e);
                    setComparativoSemanalClientes({clientes: []});
                }
            } catch (e) {
                console.error("Erro acompanhamento:", e);
            } finally {
                setAcompLoading(false);
            }
        };
        
        // Fun√ß√£o para carregar dados do m√≥dulo Garantido
        const carregarGarantido = async () => {
            console.log('üí∞üí∞üí∞ FUN√á√ÉO carregarGarantido CHAMADA! üí∞üí∞üí∞');
            try {
                setGarantidoLoading(true);
                
                // Se n√£o tem filtros de data, definir automaticamente (primeiro dia do m√™s at√© √∫ltima data dispon√≠vel)
                let filtrosUsados = {...garantidoFiltros};
                
                if (!filtrosUsados.data_inicio || !filtrosUsados.data_fim) {
                    // Buscar √∫ltima data dispon√≠vel dos dados
                    try {
                        const metaRes = await fetch(`${API_URL}/bi/garantido/meta`);
                        const metaData = await metaRes.json();
                        
                        if (metaData.ultima_data) {
                            const hoje = new Date();
                            const primeiroDiaMes = new Date(hoje.getFullYear(), hoje.getMonth(), 1);
                            const ultimaData = new Date(metaData.ultima_data + 'T12:00:00');
                            
                            // Formatar datas YYYY-MM-DD
                            const formatDate = (d) => d.toISOString().split('T')[0];
                            
                            filtrosUsados.data_inicio = formatDate(primeiroDiaMes);
                            filtrosUsados.data_fim = formatDate(ultimaData);
                            
                            console.log('üí∞ Garantido - Datas autom√°ticas:', filtrosUsados.data_inicio, 'at√©', filtrosUsados.data_fim);
                            
                            // Atualizar estado dos filtros
                            setGarantidoFiltros(filtrosUsados);
                        }
                    } catch (metaErr) {
                        console.log('üí∞ N√£o foi poss√≠vel obter meta do garantido:', metaErr);
                    }
                }
                
                const params = new URLSearchParams();
                if (filtrosUsados.data_inicio) params.append('data_inicio', filtrosUsados.data_inicio);
                if (filtrosUsados.data_fim) params.append('data_fim', filtrosUsados.data_fim);
                if (filtrosUsados.cod_cliente) params.append('cod_cliente', filtrosUsados.cod_cliente);
                if (filtrosUsados.cod_prof) params.append('cod_prof', filtrosUsados.cod_prof);
                if (filtrosUsados.filtro_status && filtrosUsados.filtro_status !== 'todos') {
                    params.append('filtro_status', filtrosUsados.filtro_status);
                }
                
                console.log('üí∞ Garantido - Filtros usados:', filtrosUsados);
                console.log('üí∞ Garantido - URL params:', params.toString() || '(sem filtros)');
                
                // Carregar dados principais
                const url = `${API_URL}/bi/garantido?${params}`;
                console.log('üí∞ Garantido - Chamando URL:', url);
                const response = await fetch(url);
                const data = await response.json();
                console.log('üí∞ Garantido - Resposta:', data);
                setGarantidoData(data.dados || []);
                setGarantidoStats(data.totais || null);
                
                // Carregar an√°lise semanal
                const semanalRes = await fetch(`${API_URL}/bi/garantido/semanal?${params}`);
                const semanalData = await semanalRes.json();
                setGarantidoSemanal(Array.isArray(semanalData) ? semanalData : []);
                
                // Carregar resumo por cliente
                const clienteRes = await fetch(`${API_URL}/bi/garantido/por-cliente?${params}`);
                const clienteData = await clienteRes.json();
                setGarantidoPorCliente(clienteData.dados || []);
                
                // Carregar status salvos
                const statusRes = await fetch(`${API_URL}/bi/garantido/status`);
                const statusData = await statusRes.json();
                setGarantidoStatusMap(statusData || {});
                
            } catch (e) {
                console.error("Erro ao carregar garantido:", e);
                setGarantidoData([]);
                setGarantidoStats(null);
            } finally {
                setGarantidoLoading(false);
            }
        };
        
        // Fun√ß√£o para salvar status do garantido
        const salvarStatusGarantido = async (registro, novoStatus, motivo = '') => {
            try {
                if (novoStatus === 'reprovado' && !motivo) {
                    alert('Informe o motivo da reprova√ß√£o!');
                    return false;
                }
                
                const response = await fetch(`${API_URL}/bi/garantido/status`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        cod_prof: registro.cod_prof,
                        data: registro.data,
                        cod_cliente: registro.cod_cliente_garantido,
                        status: novoStatus,
                        motivo_reprovado: motivo,
                        alterado_por: l?.fullName || l?.username || 'Admin'
                    })
                });
                
                const data = await response.json();
                if (data.success) {
                    // Atualizar mapa local
                    const key = `${registro.cod_prof}_${registro.data}_${registro.cod_cliente_garantido}`;
                    setGarantidoStatusMap(prev => ({
                        ...prev,
                        [key]: data.data
                    }));
                    setGarantidoModalStatus(null);
                    setGarantidoMotivoReprovado('');
                    return true;
                } else {
                    alert('Erro ao salvar: ' + (data.error || 'Erro desconhecido'));
                    return false;
                }
            } catch (error) {
                console.error('Erro ao salvar status:', error);
                alert('Erro ao salvar status');
                return false;
            }
        };
        
        // Fun√ß√£o para carregar dados do Cliente 767 (prazo 120min)
        const carregarCliente767 = async () => {
            try {
                setCliente767Loading(true);
                setLoadingMessage("Carregando dados do Cliente 767...");
                const params = new URLSearchParams();
                // Usar filtros espec√≠ficos do Cliente 767
                if (cliente767Filtros.data_inicio) params.append("data_inicio", cliente767Filtros.data_inicio);
                if (cliente767Filtros.data_fim) params.append("data_fim", cliente767Filtros.data_fim);
                if (cliente767Filtros.centros_custo && cliente767Filtros.centros_custo.length > 0) {
                    params.append("centro_custo", cliente767Filtros.centros_custo.join(","));
                }
                
                const response = await fetch(API_URL + "/bi/cliente-767?" + params);
                const data = await response.json();
                console.log("üè¢ Cliente 767 dados:", data);
                setCliente767Dados(data);
            } catch (e) {
                console.error("Erro cliente 767:", e);
            } finally {
                setCliente767Loading(false);
            }
        };
        
        // Fun√ß√£o para gerar relat√≥rio com IA (Gemini)
        const gerarRelatorioIA = async () => {
            try {
                // Validar se tem pelo menos um tipo selecionado
                const tiposSelecionados = [...relatorioIATipos];
                if (tiposSelecionados.length === 0) {
                    setRelatorioIAErro("Selecione pelo menos um tipo de an√°lise");
                    return;
                }
                
                setRelatorioIALoading(true);
                setRelatorioIAErro(null);
                setRelatorioIAResultado(null);
                
                console.log("ü§ñ Gerando relat√≥rio IA tipos:", tiposSelecionados);
                
                // Preparar par√¢metros com filtros do Relat√≥rio IA
                const params = new URLSearchParams();
                
                // Enviar m√∫ltiplos tipos
                tiposSelecionados.forEach(t => params.append("tipo", t));
                
                // Usar filtros pr√≥prios do Relat√≥rio IA
                if (relatorioIAFiltros.data_inicio) params.append("data_inicio", relatorioIAFiltros.data_inicio);
                if (relatorioIAFiltros.data_fim) params.append("data_fim", relatorioIAFiltros.data_fim);
                if (relatorioIAFiltros.cod_cliente) params.append("cod_cliente", relatorioIAFiltros.cod_cliente);
                if (relatorioIAFiltros.centro_custo) params.append("centro_custo", relatorioIAFiltros.centro_custo);
                if (tiposSelecionados.includes("personalizado") && relatorioIAPromptCustom) {
                    params.append("prompt_custom", relatorioIAPromptCustom);
                }
                
                // Enviar dados do usu√°rio para hist√≥rico
                params.append("usuario_id", l.id || l.email || "");
                params.append("usuario_nome", l.fullName || l.email || "Usu√°rio");
                
                const response = await fetch(`${API_URL}/bi/relatorio-ia?${params}`);
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                setRelatorioIAResultado(data);
                
                // Recarregar hist√≥rico do banco
                carregarHistoricoRelatoriosIA();
                
                console.log("‚úÖ Relat√≥rio IA gerado com sucesso");
            } catch (e) {
                console.error("‚ùå Erro ao gerar relat√≥rio IA:", e);
                setRelatorioIAErro(e.message || "Erro ao gerar relat√≥rio");
            } finally {
                setRelatorioIALoading(false);
            }
        };
        
        // Fun√ß√£o para carregar hist√≥rico de relat√≥rios do banco
        const carregarHistoricoRelatoriosIA = async () => {
            try {
                const response = await fetch(`${API_URL}/bi/relatorio-ia/historico`);
                const data = await response.json();
                setRelatorioIAHistoricoDB(Array.isArray(data) ? data : []);
            } catch (e) {
                console.error("Erro ao carregar hist√≥rico:", e);
            }
        };
        
        // Fun√ß√£o para gerar Word de um relat√≥rio do hist√≥rico
        const gerarWordHistorico = async (relatorio) => {
            try {
                const response = await fetch(`${API_URL}/bi/relatorio-ia/word`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        tipo_analise: relatorio.tipo_analise,
                        periodo: { inicio: relatorio.data_inicio, fim: relatorio.data_fim },
                        metricas: relatorio.metricas,
                        relatorio: relatorio.relatorio,
                        filtros: relatorio.filtros
                    })
                });
                
                if (!response.ok) throw new Error('Erro ao gerar documento');
                
                let nomeArquivo = 'relatorio-operacional';
                if (relatorio.cod_cliente) nomeArquivo += '-' + relatorio.cod_cliente;
                nomeArquivo += '-' + new Date(relatorio.created_at).toISOString().split('T')[0] + '.docx';
                
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = nomeArquivo;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            } catch (err) {
                console.error('Erro ao gerar Word:', err);
                alert('Erro ao gerar documento: ' + err.message);
            }
        };
        
        // Fun√ß√£o para deletar relat√≥rio do hist√≥rico
        const deletarRelatorioHistorico = async (id) => {
            if (!confirm('Deseja realmente excluir este relat√≥rio?')) return;
            try {
                await fetch(`${API_URL}/bi/relatorio-ia/historico/${id}`, { method: 'DELETE' });
                carregarHistoricoRelatoriosIA();
                ja('Relat√≥rio exclu√≠do!', 'success');
            } catch (e) {
                ja('Erro ao excluir', 'error');
            }
        };
        
        // useEffect para carregar hist√≥rico ao entrar na aba Relat√≥rio IA
        useEffect(() => {
            if (Et === "relatorio-ia") {
                carregarHistoricoRelatoriosIA();
            }
        }, [Et]);
        
        // Fun√ß√£o para toggle de tipo de relat√≥rio
        const toggleRelatorioIATipo = (tipo) => {
            setRelatorioIATipos(prev => {
                if (prev.includes(tipo)) {
                    return prev.filter(t => t !== tipo);
                } else {
                    return [...prev, tipo];
                }
            });
        };
        
        // Fun√ß√£o para gerar Word do relat√≥rio IA
        const gerarPDFRelatorioIA = async () => {
            if (!relatorioIAResultado) return;
            
            try {
                const response = await fetch(`${API_URL}/bi/relatorio-ia/word`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        tipo_analise: relatorioIAResultado.tipo_analise,
                        periodo: relatorioIAResultado.periodo,
                        metricas: relatorioIAResultado.metricas,
                        relatorio: relatorioIAResultado.relatorio,
                        filtros: relatorioIAResultado.filtros
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Erro ao gerar documento');
                }
                
                // Montar nome do arquivo
                let nomeArquivo = 'relatorio-operacional';
                if (relatorioIAResultado.filtros?.cliente) {
                    nomeArquivo += '-' + relatorioIAResultado.filtros.cliente.codigo;
                }
                nomeArquivo += '-' + new Date().toISOString().split('T')[0] + '.docx';
                
                // Baixar arquivo
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = nomeArquivo;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
            } catch (err) {
                console.error('Erro ao gerar Word:', err);
                alert('Erro ao gerar documento: ' + err.message);
            }
        };
        
        // useEffect para recarregar acompanhamento quando filtros mudam
        useEffect(() => {
            if (Et === "acompanhamento") {
                console.log("üìà Filtros alterados, recarregando acompanhamento...");
                carregarAcompanhamento();
            }
        }, [ua.data_inicio, ua.data_fim, ua.cod_cliente, ua.centro_custo, ua.categoria]);
        
        // useEffect para CARREGAR DADOS DO BI automaticamente quando entrar no m√≥dulo
        useEffect(() => {
            if (Ee === "bi") {
                console.log("üìä Entrando no m√≥dulo BI, carregando dados automaticamente...");
                ll();
                tl();
                al();
                pl();
            }
        }, [Ee]);
        
        // useEffect para carregar mapa de calor quando estiver no dashboard
        useEffect(() => {
            if (Et === "dashboard" && mapaCalorVisivel && !mapaCalorDados && !ba) {
                carregarMapaCalor();
            }
        }, [Et, mapaCalorVisivel, ba]);
        
        // useEffect para recarregar mapa quando filtros mudam
        useEffect(() => {
            if (Et === "dashboard" && mapaCalorVisivel && !ba) {
                carregarMapaCalor();
            }
        }, [ua.data_inicio, ua.data_fim, ua.cod_cliente, ua.centro_custo, ua.categoria]);
        
        // useEffect para RENDERIZAR o mapa quando os dados estiverem dispon√≠veis
        useEffect(() => {
            if (Et === "dashboard" && mapaCalorVisivel && mapaCalorDados && !mapaCalorLoading && !ba) {
                console.log("üó∫Ô∏è Dados do mapa dispon√≠veis, inicializando...");
                setTimeout(() => {
                    if (window.initMapaCalor) {
                        const pontos = mapaCalorDados.pontos || (Array.isArray(mapaCalorDados) ? mapaCalorDados : []);
                        console.log("üó∫Ô∏è Renderizando mapa com", pontos.length, "pontos");
                        window.initMapaCalor(pontos);
                    }
                }, 200);
            }
        }, [Et, mapaCalorVisivel, mapaCalorDados, mapaCalorLoading, ba]);
        
        // Fun√ß√£o para carregar OS de um profissional espec√≠fico
        const carregarOsProfissional = async (codProf) => {
            try {
                setProfOsLoading(codProf);
                const params = new URLSearchParams();
                // Passar TODOS os filtros ativos
                if (ua.data_inicio) params.append("data_inicio", ua.data_inicio);
                if (ua.data_fim) params.append("data_fim", ua.data_fim);
                if (ua.cod_cliente && ua.cod_cliente.length > 0) params.append("cod_cliente", ua.cod_cliente.join(","));
                if (ua.centro_custo && ua.centro_custo.length > 0) params.append("centro_custo", ua.centro_custo.join(","));
                if (ua.categoria) params.append("categoria", ua.categoria);
                if (ua.status_prazo) params.append("status_prazo", ua.status_prazo);
                if (ua.status_retorno) params.append("status_retorno", ua.status_retorno);
                if (ua.cidade) params.append("cidade", ua.cidade);
                
                const response = await fetch(`${API_URL}/bi/os-profissional/${codProf}?${params}`);
                const data = await response.json();
                
                setProfOsExpandido(prev => ({
                    ...prev,
                    [codProf]: data.oss || []
                }));
            } catch (e) {
                console.error("Erro ao carregar OS do profissional:", e);
            } finally {
                setProfOsLoading(null);
            }
        };
        
        // Toggle expandir profissional - carrega OS se necess√°rio
        const toggleProfissionalExpand = (codProf, index) => {
            const chave = `prof-${index}`;
            if (Kt[chave]) {
                // Est√° expandido, apenas fecha
                ml(chave);
            } else {
                // Vai expandir, carrega OS se ainda n√£o tiver
                if (!profOsExpandido[codProf]) {
                    carregarOsProfissional(codProf);
                }
                ml(chave);
            }
        };
        
        const el = async () => {
            try {
                Ra(!0);
                setLoadingMessage("Carregando dashboard...");
                const e = Xa();
                console.log("üìä Carregando dashboard com filtros:", e.toString() || "(sem filtros)");
                setLoadingMessage("Buscando m√©tricas de desempenho...");
                const t = await fetch(`${API_URL}/bi/dashboard-completo?${e}`),
                    a = await t.json();
                setLoadingMessage("Processando dados...");
                console.log("üìä Dados recebidos:", a), Nt(a.metricas || {}), Bt(a.porCliente || []), Jt(a.porProfissional || []);
                const l = a.dadosGraficos || [],
                    r = [{
                        label: "0 a 45 min",
                        min: 0,
                        max: 45
                    }, {
                        label: "45-60 min",
                        min: 45,
                        max: 60
                    }, {
                        label: "60-75 min",
                        min: 60,
                        max: 75
                    }, {
                        label: "75-90 min",
                        min: 75,
                        max: 90
                    }, {
                        label: "90 a 120 min",
                        min: 90,
                        max: 120
                    }, {
                        label: "> 120 min",
                        min: 120,
                        max: 99999
                    }].map(e => ({
                        faixa: e.label,
                        total: l.filter(t => {
                            const a = parseFloat(t.tempo);
                            return null !== a && !isNaN(a) && a >= e.min && a < e.max
                        }).length
                    })),
                    o = [{
                        label: "0-10",
                        min: 0,
                        max: 10
                    }, {
                        label: "11-15",
                        min: 10,
                        max: 15
                    }, {
                        label: "16-20",
                        min: 15,
                        max: 20
                    }, {
                        label: "21-25",
                        min: 20,
                        max: 25
                    }, {
                        label: "26-30",
                        min: 25,
                        max: 30
                    }, {
                        label: "31-35",
                        min: 30,
                        max: 35
                    }, {
                        label: "36-40",
                        min: 35,
                        max: 40
                    }, {
                        label: "41-45",
                        min: 40,
                        max: 45
                    }, {
                        label: "46-50",
                        min: 45,
                        max: 50
                    }, {
                        label: "51-55",
                        min: 50,
                        max: 55
                    }, {
                        label: "56-60",
                        min: 55,
                        max: 60
                    }, {
                        label: "61-65",
                        min: 60,
                        max: 65
                    }, {
                        label: "66-70",
                        min: 65,
                        max: 70
                    }, {
                        label: "Outras",
                        min: 70,
                        max: 99999
                    }].map(e => ({
                        faixa: e.label,
                        total: l.filter(t => {
                            const a = parseFloat(t.km);
                            return null !== a && !isNaN(a) && a >= e.min && a < e.max
                        }).length
                    }));
                Ht({
                    porTempo: r,
                    porKm: o
                })
            } catch (e) {
                console.error("Erro ao carregar BI:", e)
            }
            Ra(!1)
        }, tl = async () => {
            try {
                const e = await fetch(`${API_URL}/bi/prazos`);
                vt(await e.json())
            } catch (e) {
                console.error("Erro ao carregar prazos:", e)
            }
        }, al = async () => {
            try {
                const e = await fetch(`${API_URL}/bi/prazo-padrao`),
                    t = await e.json();
                t && t.length > 0 && (_t(t), Na(t))
            } catch (e) {
                console.error("Erro ao carregar prazo padr√£o:", e)
            }
        }, 
        // Fun√ß√£o para carregar prazos profissionais
        carregarPrazosProf = async () => {
            try {
                // Carregar prazo padr√£o profissional
                const respPadrao = await fetch(`${API_URL}/bi/prazo-prof-padrao`);
                const dataPadrao = await respPadrao.json();
                if (dataPadrao && dataPadrao.length > 0) {
                    setPrazoProfPadrao(dataPadrao);
                }
                // Carregar lista de prazos profissionais espec√≠ficos
                const respLista = await fetch(`${API_URL}/bi/prazos-prof`);
                const dataLista = await respLista.json();
                if (dataLista.success) {
                    setPrazosProfissionais(dataLista.prazos || []);
                }
            } catch (e) {
                console.error("Erro ao carregar prazos profissionais:", e)
            }
        }, ll = async () => {
            try {
                console.log("üìä ll() - Iniciando carregamento do BI...");
                Ra(!0); // Mostrar loading
                setLoadingMessage("Carregando dados do sistema...");
                // Carregar m√°scaras PRIMEIRO junto com os outros dados
                setLoadingMessage("Buscando clientes e profissionais...");
                const [e, t, a, l, r, o, c, s, n, m, mascarasData] = await Promise.all([fetch(`${API_URL}/bi/clientes`).then(e => e.json()), fetch(`${API_URL}/bi/centros-custo`).then(e => e.json()), fetch(`${API_URL}/bi/profissionais`).then(e => e.json()), fetch(`${API_URL}/bi/datas`).then(e => e.json()), fetch(`${API_URL}/bi/uploads`).then(e => e.json()), fetch(`${API_URL}/bi/cidades`).then(e => e.json()).catch(() => []), fetch(`${API_URL}/bi/cliente-centros`).then(e => e.json()).catch(() => ({})), fetch(`${API_URL}/bi/categorias`).then(e => e.json()).catch(() => []), fetch(`${API_URL}/bi/regioes`).then(e => e.json()).catch(() => []), fetch(`${API_URL}/bi/dados-filtro`).then(e => e.json()).catch(() => []), fetch(`${API_URL}/bi/mascaras`).then(e => e.json()).catch(() => [])]), i = (e || []).sort((e, t) => (parseInt(e.cod_cliente) || 0) - (parseInt(t.cod_cliente) || 0));
                // Setar m√°scaras ANTES de tudo
                setLoadingMessage("Aplicando configura√ß√µes...");
                ta(mascarasData || []);
                console.log("üìä M√°scaras carregadas:", (mascarasData || []).length);
                console.log("üìä Datas recebidas:", l?.length || 0);
                console.log("üìä Clientes recebidos:", i?.length || 0);
                Ct(i); St(t || []); Pt(t || []); Dt(c || {}); It(a || []); $t(l || []); Ot(r || []); Yt(o || []); oa(s || []); xa(s || []); la(n || []); ma(m || []); da(i);
                
                // Popular Set de datas com dados para indicador visual no filtro
                if (l && l.length > 0) {
                    const datasSet = new Set();
                    l.forEach(item => {
                        if (item.data) {
                            const dataFormatada = new Date(item.data).toISOString().split('T')[0];
                            datasSet.add(dataFormatada);
                        }
                    });
                    setBiDatasComDados(datasSet);
                    console.log("üìä Datas com dados carregadas:", datasSet.size);
                }
                
                let novosFiltros = {};
                if (l && l.length > 0) {
                    const formatDate = d => {
                            if (!d) return "";
                            return new Date(d).toISOString().split("T")[0]
                        };
                    
                    // OTIMIZA√á√ÉO: Per√≠odo padr√£o = dia 1 do m√™s atual at√© hoje
                    const hoje = new Date();
                    const primeiroDiaMes = new Date(hoje.getFullYear(), hoje.getMonth(), 1);
                    
                    // Verificar se temos dados no m√™s atual
                    const dataMinDisponivel = new Date(l[l.length - 1].data);
                    const dataMaxDisponivel = new Date(l[0].data);
                    
                    // Se o primeiro dia do m√™s √© anterior aos dados dispon√≠veis, usar data m√≠nima dispon√≠vel
                    const dataInicio = primeiroDiaMes < dataMinDisponivel ? dataMinDisponivel : primeiroDiaMes;
                    // Se hoje √© posterior aos dados dispon√≠veis, usar data m√°xima dispon√≠vel
                    const dataFim = hoje > dataMaxDisponivel ? dataMaxDisponivel : hoje;
                    
                    novosFiltros = {
                        ...ua,
                        data_inicio: formatDate(dataInicio),
                        data_fim: formatDate(dataFim),
                        cod_cliente: [],
                        centro_custo: []
                    };
                    console.log("üìä Per√≠odo padr√£o: dia 1 do m√™s at√© hoje");
                    console.log("üìä Datas formatadas:", novosFiltros.data_inicio, "at√©", novosFiltros.data_fim);
                    ga(novosFiltros);
                } else {
                    console.log("üìä Sem datas, usando filtros vazios");
                }
                // Sempre chamar ol para carregar o dashboard
                setLoadingMessage("Carregando dashboard principal...");
                console.log("üìä Chamando ol() com filtros:", JSON.stringify(novosFiltros));
                await ol(novosFiltros);
                console.log("üìä ll() - Carregamento conclu√≠do!");
            } catch (e) {
                console.error("‚ùå Erro ao carregar dropdowns:", e);
                Ra(!1);
            }
        }, rl = e => {
            const t = na;
            if (!t || 0 === t.length) return da(jt), Pt(At), void xa(ra);
            let a = e.cod_cliente || [];
            let centrosCustoRegiao = [];
            if (e.regiao) {
                const t = aa.find(t => t.id === parseInt(e.regiao));
                if (t && t.clientes) {
                    // Suporta formato antigo (array de n√∫meros) e novo (array de objetos)
                    const itensRegiao = t.clientes.map(function(item) {
                        if (typeof item === 'number') {
                            return { cod_cliente: item, centro_custo: null };
                        }
                        return item;
                    });
                    // Extrair clientes √∫nicos
                    a = [...new Set(itensRegiao.map(i => String(i.cod_cliente)))];
                    // Extrair centros de custo espec√≠ficos (ignorar null = todos)
                    centrosCustoRegiao = itensRegiao
                        .filter(i => i.centro_custo !== null)
                        .map(i => i.centro_custo);
                }
            }
            let l = t;
            if (a.length > 0 && (l = l.filter(e => a.includes(String(e.cod_cliente)))), e.categoria && (l = l.filter(t => t.categoria === e.categoria)), e.centro_custo && e.centro_custo.length > 0 && (l = l.filter(t => e.centro_custo.includes(t.centro_custo))), centrosCustoRegiao.length > 0 && (l = l.filter(t => centrosCustoRegiao.includes(t.centro_custo))), 0 === a.length) {
                const e = [...new Set(l.map(e => e.cod_cliente))];
                da(jt.filter(t => e.includes(t.cod_cliente)))
            } else {
                let a = t;
                e.categoria && (a = a.filter(t => t.categoria === e.categoria)), e.centro_custo && e.centro_custo.length > 0 && (a = a.filter(t => e.centro_custo.includes(t.centro_custo)));
                const l = [...new Set(a.map(e => e.cod_cliente))];
                da(jt.filter(e => l.includes(e.cod_cliente)))
            }
            let r = t;
            a.length > 0 && (r = r.filter(e => a.includes(String(e.cod_cliente)))), e.categoria && (r = r.filter(t => t.categoria === e.categoria));
            const o = [...new Set(r.map(e => e.centro_custo).filter(e => e))];
            Pt(At.filter(e => o.includes(e.centro_custo)));
            let c = t;
            a.length > 0 && (c = c.filter(e => a.includes(String(e.cod_cliente)))), e.centro_custo && e.centro_custo.length > 0 && (c = c.filter(t => e.centro_custo.includes(t.centro_custo)));
            const s = [...new Set(c.map(e => e.categoria).filter(e => e))];
            xa(s.sort())
        }, ol = async e => {
            try {
                Ra(!0);
                // Limpar dados expandidos de profissionais para for√ßar recarregamento com novos filtros
                setProfOsExpandido({});
                const t = new URLSearchParams;
                e.data_inicio && t.append("data_inicio", e.data_inicio), e.data_fim && t.append("data_fim", e.data_fim);
                
                // Se tiver regi√£o selecionada, expandir para clientes e centros de custo
                let clientesParaEnviar = e.cod_cliente || [];
                let centrosCustoParaEnviar = e.centro_custo || [];
                let clientesSemFiltroCC = [];
                
                if (e.regiao) {
                    const regiaoObj = aa.find(r => r.id === parseInt(e.regiao));
                    if (regiaoObj && regiaoObj.clientes) {
                        const itensRegiao = regiaoObj.clientes.map(function(item) {
                            if (typeof item === 'number') {
                                return { cod_cliente: item, centro_custo: null };
                            }
                            return item;
                        });
                        
                        // Separar clientes que t√™m "Todos CC" dos que t√™m CC espec√≠ficos
                        const clientesComTodosCC = itensRegiao
                            .filter(i => i.centro_custo === null)
                            .map(i => String(i.cod_cliente));
                        
                        const clientesComCCEspecifico = itensRegiao
                            .filter(i => i.centro_custo !== null);
                        
                        // Todos os clientes √∫nicos
                        clientesParaEnviar = [...new Set(itensRegiao.map(i => String(i.cod_cliente)))];
                        
                        if (clientesComCCEspecifico.length > 0) {
                            centrosCustoParaEnviar = clientesComCCEspecifico.map(i => i.centro_custo);
                            clientesSemFiltroCC = clientesComTodosCC;
                        }
                    }
                }
                
                clientesParaEnviar && clientesParaEnviar.length > 0 && clientesParaEnviar.forEach(c => t.append("cod_cliente", c));
                centrosCustoParaEnviar && centrosCustoParaEnviar.length > 0 && centrosCustoParaEnviar.forEach(c => t.append("centro_custo", c));
                clientesSemFiltroCC && clientesSemFiltroCC.length > 0 && t.append("clientes_sem_filtro_cc", clientesSemFiltroCC.join(","));
                e.cod_prof && t.append("cod_prof", e.cod_prof), e.categoria && t.append("categoria", e.categoria), e.cidade && t.append("cidade", e.cidade), e.status_prazo && t.append("status_prazo", e.status_prazo), e.status_retorno && t.append("status_retorno", e.status_retorno), console.log("üìä loadBiDashboardComFiltros - params:", t.toString());
                const a = await fetch(`${API_URL}/bi/dashboard-completo?${t}`),
                    l = await a.json();
                console.log("üìä loadBiDashboardComFiltros - resposta:", l), console.log("üìä metricas:", l.metricas), console.log("üìä porCliente:", l.porCliente?.length, "registros"), console.log("üìä porProfissional:", l.porProfissional?.length, "registros"), Nt(l.metricas || {}), Bt(l.porCliente || []), Jt(l.porProfissional || []);
                const r = l.dadosGraficos || [],
                    o = [{
                        label: "0 a 45 min",
                        min: 0,
                        max: 45
                    }, {
                        label: "45-60 min",
                        min: 45,
                        max: 60
                    }, {
                        label: "60-75 min",
                        min: 60,
                        max: 75
                    }, {
                        label: "75-90 min",
                        min: 75,
                        max: 90
                    }, {
                        label: "90 a 120 min",
                        min: 90,
                        max: 120
                    }, {
                        label: "> 120 min",
                        min: 120,
                        max: 99999
                    }].map(e => ({
                        faixa: e.label,
                        total: r.filter(t => {
                            const a = parseFloat(t.tempo);
                            return null !== a && !isNaN(a) && a >= e.min && a < e.max
                        }).length
                    })),
                    c = [{
                        label: "0-10",
                        min: 0,
                        max: 10
                    }, {
                        label: "11-15",
                        min: 10,
                        max: 15
                    }, {
                        label: "16-20",
                        min: 15,
                        max: 20
                    }, {
                        label: "21-25",
                        min: 20,
                        max: 25
                    }, {
                        label: "26-30",
                        min: 25,
                        max: 30
                    }, {
                        label: "31-35",
                        min: 30,
                        max: 35
                    }, {
                        label: "36-40",
                        min: 35,
                        max: 40
                    }, {
                        label: "41-45",
                        min: 40,
                        max: 45
                    }, {
                        label: "46-50",
                        min: 45,
                        max: 50
                    }, {
                        label: "51-55",
                        min: 50,
                        max: 55
                    }, {
                        label: "56-60",
                        min: 55,
                        max: 60
                    }, {
                        label: "61-65",
                        min: 60,
                        max: 65
                    }, {
                        label: "66-70",
                        min: 65,
                        max: 70
                    }, {
                        label: "Outras",
                        min: 70,
                        max: 99999
                    }].map(e => ({
                        faixa: e.label,
                        total: r.filter(t => {
                            const a = parseFloat(t.km);
                            return null !== a && !isNaN(a) && a >= e.min && a < e.max
                        }).length
                    }));
                Ht({
                    porTempo: o,
                    porKm: c
                }), Xt({});
                
                // Tamb√©m recarregar a lista de OS com os mesmos filtros
                const osParams = new URLSearchParams;
                e.data_inicio && osParams.append("data_inicio", e.data_inicio);
                e.data_fim && osParams.append("data_fim", e.data_fim);
                e.cod_cliente && e.cod_cliente.length > 0 && osParams.append("cod_cliente", e.cod_cliente.join(","));
                e.centro_custo && e.centro_custo.length > 0 && osParams.append("centro_custo", e.centro_custo.join(","));
                e.cod_prof && osParams.append("cod_prof", e.cod_prof);
                e.categoria && osParams.append("categoria", e.categoria);
                e.cidade && osParams.append("cidade", e.cidade);
                e.status_prazo && osParams.append("status_prazo", e.status_prazo);
                e.status_retorno && osParams.append("status_retorno", e.status_retorno);
                const osResponse = await fetch(`${API_URL}/bi/entregas-lista?${osParams}`);
                const osData = await osResponse.json();
                Ut(Array.isArray(osData) ? osData : []);
                console.log("üìã Lista de OS recarregada com filtros");
            } catch (e) {
                console.error("Erro ao carregar BI:", e)
            }
            Ra(!1)
        }, cl = e => {
            // Fun√ß√£o para formatar tempo em minutos para HH:MM:SS
            // Recebe minutos (ex: 45.5) e retorna "00:45:30"
            if (!e && 0 !== e) return "-";
            const totalMinutos = parseFloat(e) || 0;
            if (totalMinutos <= 0) return "00:00:00";
            
            const totalSegundos = Math.round(totalMinutos * 60);
            const h = Math.floor(totalSegundos / 3600);
            const m = Math.floor((totalSegundos % 3600) / 60);
            const s = totalSegundos % 60;
            
            return `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`
        }, sl = e => e || 0 === e ? new Intl.NumberFormat("pt-BR", {
            style: "currency",
            currency: "BRL"
        }).format(parseFloat(e) || 0) : "R$0,00", nl = e => parseFloat(e) || 0, ml = e => {
            Xt(t => ({
                ...t,
                [e]: !t[e]
            }))
        }, il = e => {
            const t = ea.find(t => String(t.cod_cliente) === String(e));
            return t ? t.mascara : null
        }, dl = async () => {
            try {
                const e = await fetch(`${API_URL}/bi/mascaras`);
                ta(await e.json())
            } catch (e) {
                console.error("Erro ao carregar m√°scaras:", e)
            }
        }, pl = async () => {
            try {
                const e = await fetch(`${API_URL}/bi/regioes`);
                la(await e.json())
            } catch (e) {
                console.error("Erro ao carregar regi√µes:", e)
            }
        }, xl = async () => {
            try {
                Ra(!0);
                const e = await fetch(`${API_URL}/bi/entregas/recalcular`, {
                        method: "POST"
                    }),
                    t = await e.json();
                ja(`‚úÖ ${t.atualizados} entregas recalculadas!`, "success"), el()
            } catch (e) {
                ja("Erro ao recalcular", "error")
            }
            Ra(!1)
        }, ul = async () => {
            m(!0);
            try {
                await La(), "admin" !== l.role && "admin_master" !== l.role || await Ia(), "user" === l.role && (await Oa(), await qa(), await vl(), await _l(), await Ga(), await Za()), "admin_financeiro" !== l.role && "admin_master" !== l.role || (await Ua(), await za(), await Ba(), await Va(), await gl(), await wl(), await Ia(), await Ja(), await Ha(), await Wa()), "admin" === l.role && hasModuleAccess(l, "financeiro") && (await wl(), await gl()), ja("üîÑ Atualizado!", "success")
            } catch (e) {
                ja("Erro", "error")
            }
            m(!1)
        }, gl = async () => {
            try {
                const e = await fetch(`${API_URL}/promocoes`);
                te(await e.json())
            } catch (e) {
                console.error("Erro ao carregar promo√ß√µes:", e)
            }
        }, bl = ["Domingo", "Segunda-feira", "Ter√ßa-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "S√°bado"], Rl = async (e, t) => {
            try {
                await fetch(`${API_URL}/horarios/${e}`, {
                    method: "PUT",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(t)
                }), ja("‚úÖ Hor√°rio atualizado!", "success");
                const a = await fetch(`${API_URL}/horarios`),
                    l = await a.json();
                Oe(e => ({
                    ...e,
                    horarios: l
                }))
            } catch (e) {
                ja("Erro ao atualizar", "error")
            }
        }, El = async () => {
            const e = p.novoEspData,
                t = p.novoEspDesc,
                a = p.novoEspFechado,
                l = p.novoEspInicio,
                r = p.novoEspFim;
            if (e) try {
                await fetch(`${API_URL}/horarios/especiais`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        data: e,
                        descricao: t || "Hor√°rio especial",
                        hora_inicio: l,
                        hora_fim: r,
                        fechado: a
                    })
                }), ja("‚úÖ Hor√°rio especial criado!", "success"), x(e => ({
                    ...e,
                    novoEspData: "",
                    novoEspDesc: "",
                    novoEspFechado: !1,
                    novoEspInicio: "09:00",
                    novoEspFim: "18:00"
                }));
                const o = await fetch(`${API_URL}/horarios/especiais`),
                    c = await o.json();
                Oe(e => ({
                    ...e,
                    especiais: c
                }))
            } catch (e) {
                ja("Erro ao criar", "error")
            } else ja("Selecione uma data", "error")
        }, hl = async () => {
            const e = p.novoAvisoTitulo,
                t = p.novoAvisoMensagem,
                a = p.novoAvisoTipo || "info",
                l = p.novoAvisoExibirFora || !1;
            if (e && t) try {
                await fetch(`${API_URL}/avisos`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        titulo: e,
                        mensagem: t,
                        tipo: a,
                        exibir_fora_horario: l
                    })
                }), ja("‚úÖ Aviso criado!", "success"), x(e => ({
                    ...e,
                    novoAvisoTitulo: "",
                    novoAvisoMensagem: "",
                    novoAvisoTipo: "info",
                    novoAvisoExibirFora: !1
                }));
                const r = await fetch(`${API_URL}/avisos`);
                Ue({
                    avisos: await r.json(),
                    loading: !1
                })
            } catch (e) {
                ja("Erro ao criar", "error")
            } else ja("Preencha t√≠tulo e mensagem", "error")
        }, fl = async e => {
            try {
                await fetch(`${API_URL}/avisos/${e.id}`, {
                    method: "PUT",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        ...e,
                        ativo: !e.ativo
                    })
                });
                const t = await fetch(`${API_URL}/avisos`);
                Ue({
                    avisos: await t.json(),
                    loading: !1
                })
            } catch (e) {
                ja("Erro", "error")
            }
        }, Nl = async e => {
            if (confirm("Remover este aviso permanentemente?")) try {
                await fetch(`${API_URL}/avisos/${e}`, {
                    method: "DELETE"
                }), ja("‚úÖ Removido!", "success");
                const t = await fetch(`${API_URL}/avisos`);
                Ue({
                    avisos: await t.json(),
                    loading: !1
                })
            } catch (e) {
                ja("Erro", "error")
            }
        }, yl = () => {
            if (!ze?.proximoHorario) return "em breve";
            const e = ze.proximoHorario,
                t = new Date(e.data + "T12:00:00"),
                a = new Date;
            a.setHours(0, 0, 0, 0);
            const l = new Date(e.data + "T00:00:00");
            return l.getTime() === a.getTime() ? `hoje √†s ${e.inicio}` : l.getTime() === a.getTime() + 864e5 ? `amanh√£ √†s ${e.inicio}` : `${t.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"short"})} √†s ${e.inicio}`
        }, vl = async () => {
            try {
                const e = await fetch(`${API_URL}/promocoes/ativas`);
                te(await e.json())
            } catch (e) {
                console.error("Erro ao carregar promo√ß√µes ativas:", e)
            }
        }, wl = async () => {
            try {
                const e = await fetch(`${API_URL}/indicacoes`);
                le(await e.json())
            } catch (e) {
                console.error("Erro ao carregar indica√ß√µes:", e)
            }
        }, _l = async () => {
            try {
                const e = await fetch(`${API_URL}/indicacoes/usuario/${l.codProfissional}`);
                oe(await e.json())
            } catch (e) {
                console.error("Erro ao carregar minhas indica√ß√µes:", e)
            }
        }, jl = async () => {
            try {
                const e = await fetch(`${API_URL}/indicacao-link/usuario/${l.codProfissional}`),
                    t = await e.json(),
                    a = await fetch(`${API_URL}/indicacao-link/estatisticas/${l.codProfissional}`),
                    r = await a.json();
                await _l(), x(e => ({
                    ...e,
                    meuLinkIndicacao: t,
                    statsIndicacao: r
                }))
            } catch (e) {
                console.error("Erro ao carregar link de indica√ß√£o:", e)
            }
        }, Cl = async () => {
            try {
                const e = await fetch(`${API_URL}/promocoes-novatos`);
                se(await e.json())
            } catch (e) {
                console.error("Erro ao carregar promo√ß√µes novatos:", e)
            }
        },
        // Fun√ß√£o para carregar regi√µes dispon√≠veis da planilha
        carregarRegioesNovatos = async () => {
            try {
                const response = await fetch(`${API_URL}/promocoes-novatos/regioes`);
                const regioes = await response.json();
                setRegioesNovatos(regioes);
            } catch (e) {
                console.error("Erro ao carregar regi√µes novatos:", e);
            }
        },
        // Fun√ß√£o para verificar elegibilidade do usu√°rio para promo√ß√µes novatos
        verificarElegibilidadeNovatos = async () => {
            console.log("üîç Verificando elegibilidade novatos para:", l?.codProfissional);
            if (!l || !l.codProfissional) {
                setElegibilidadeNovatos({ elegivel: false, motivo: 'Usu√°rio n√£o logado', promocoes: [], carregando: false });
                return;
            }
            try {
                const response = await fetch(`${API_URL}/promocoes-novatos/elegibilidade/${l.codProfissional}`);
                const data = await response.json();
                console.log("‚úÖ Resposta elegibilidade novatos:", data);
                setElegibilidadeNovatos({ ...data, carregando: false });
                // Tamb√©m atualiza a lista de promo√ß√µes dispon√≠veis
                if (data.promocoes && data.promocoes.length > 0) {
                    se(data.promocoes);
                }
            } catch (e) {
                console.error("‚ùå Erro ao verificar elegibilidade novatos:", e);
                setElegibilidadeNovatos({ elegivel: false, motivo: 'Erro ao verificar elegibilidade', promocoes: [], carregando: false });
            }
        },
        Al = async () => {
            try {
                const e = await fetch(`${API_URL}/promocoes-novatos/ativas`);
                se(await e.json())
            } catch (e) {
                console.error("Erro ao carregar promo√ß√µes novatos ativas:", e)
            }
        }, Sl = async () => {
            try {
                await fetch(`${API_URL}/inscricoes-novatos/verificar-expiradas`, {
                    method: "POST"
                });
                const e = await fetch(`${API_URL}/inscricoes-novatos`);
                me(await e.json())
            } catch (e) {
                console.error("Erro ao carregar inscri√ß√µes novatos:", e)
            }
        }, 
        // Fun√ß√£o para rejeitar inscri√ß√£o de novato
        rejeitarInscNovato = async (id) => {
            if (!p.motivoRejeicaoNovato?.trim()) {
                ja("Informe o motivo da rejei√ß√£o", "error");
                return;
            }
            s(!0);
            try {
                const response = await fetch(`${API_URL}/inscricoes-novatos/${id}/rejeitar`, {
                    method: "PATCH",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        motivo_rejeicao: p.motivoRejeicaoNovato,
                        resolved_by: l.fullName
                    })
                });
                if (!response.ok) throw new Error("Erro ao rejeitar");
                ja("‚ùå Inscri√ß√£o rejeitada!", "success");
                x({
                    ...p,
                    modalRejeitarNovatos: null,
                    motivoRejeicaoNovato: ""
                });
                await Sl();
            } catch (e) {
                console.error("Erro ao rejeitar inscri√ß√£o:", e);
                ja("Erro ao rejeitar inscri√ß√£o", "error");
            } finally {
                s(!1);
            }
        },
        kl = async () => {
            try {
                const e = await fetch(`${API_URL}/inscricoes-novatos/usuario/${l.codProfissional}`);
                de(await e.json())
            } catch (e) {
                console.error("Erro ao carregar minhas inscri√ß√µes novatos:", e)
            }
        }, Pl = async () => {
            if (p.novatosRegiao && p.novatosCliente && p.novatosValor) {
                s(!0);
                try {
                    if (!(await fetch(`${API_URL}/promocoes-novatos`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                regiao: p.novatosRegiao,
                                cliente: p.novatosCliente,
                                valor_bonus: parseFloat(p.novatosValor),
                                detalhes: p.novatosDetalhes || null,
                                created_by: l.fullName
                            })
                        })).ok) throw new Error("Erro ao criar promo√ß√£o");
                    ja("‚úÖ Promo√ß√£o Novatos criada!", "success"), x({
                        ...p,
                        novatosRegiao: "",
                        novatosCliente: "",
                        novatosValor: "",
                        novatosDetalhes: "",
                        editPromoNovatos: null
                    }), await Cl()
                } catch (e) {
                    ja(e.message, "error")
                } finally {
                    s(!1)
                }
            } else ja("Preencha todos os campos obrigat√≥rios", "error")
        }, Tl = async () => {
            s(!0);
            try {
                if (!(await fetch(`${API_URL}/promocoes-novatos/${p.editPromoNovatos.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            regiao: p.novatosRegiao,
                            cliente: p.novatosCliente,
                            valor_bonus: parseFloat(p.novatosValor),
                            detalhes: p.novatosDetalhes || null
                        })
                    })).ok) throw new Error("Erro ao editar promo√ß√£o");
                ja("‚úÖ Promo√ß√£o atualizada!", "success"), x({
                    ...p,
                    novatosRegiao: "",
                    novatosCliente: "",
                    novatosValor: "",
                    novatosDetalhes: "",
                    editPromoNovatos: null
                }), await Cl()
            } catch (e) {
                ja(e.message, "error")
            } finally {
                s(!1)
            }
        }, Dl = async () => {
            try {
                const e = await fetch(`${API_URL}/quiz-procedimentos/config`),
                    t = await e.json();
                console.log("üéØ Quiz Config carregado:", t), Ne(t)
            } catch (e) {
                console.error("Erro ao carregar config quiz:", e)
            }
        }, Ll = async () => {
            try {
                const e = await fetch(`${API_URL}/quiz-procedimentos/respostas`);
                ve(await e.json())
            } catch (e) {
                console.error("Erro ao carregar respostas quiz:", e)
            }
        }, Il = async () => {
            try {
                const e = await fetch(`${API_URL}/quiz-procedimentos/verificar/${l.codProfissional}`),
                    t = await e.json();
                _e(t.ja_respondeu), t.dados && Ce(t.dados)
            } catch (e) {
                console.error("Erro ao verificar quiz:", e)
            }
        }, Fl = async () => {
            s(!0);
            try {
                if (!(await fetch(`${API_URL}/quiz-procedimentos/config`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(fe)
                    })).ok) throw new Error("Erro ao salvar");
                ja("‚úÖ Configura√ß√£o do Quiz salva!", "success")
            } catch (e) {
                ja(e.message, "error")
            } finally {
                s(!1)
            }
        }, $l = async () => {
            if (Te.some(e => null === e)) ja("Responda todas as perguntas!", "error");
            else {
                s(!0);
                try {
                    const e = await fetch(`${API_URL}/quiz-procedimentos/responder`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            user_cod: l.codProfissional,
                            user_name: l.fullName,
                            respostas: Te
                        })
                    });
                    if (!e.ok) {
                        const t = await e.json();
                        throw new Error(t.error || "Erro ao enviar")
                    }
                    const t = await e.json();
                    Ie(t), Se(3), _e(!0), Ce({
                        acertos: t.acertos,
                        passou: t.passou,
                        created_at: (new Date).toISOString()
                    }), t.passou && (ja(`üéâ Parab√©ns! Voc√™ ganhou R$ ${t.valor_gratuidade.toFixed(2).replace(".",",")} de gratuidade!`, "success"), qa())
                } catch (e) {
                    ja(e.message, "error")
                } finally {
                    s(!1)
                }
            }
        }, Ml = async () => {
            if (p.promoRegiao && p.promoValor) {
                s(!0);
                try {
                    if (!(await fetch(`${API_URL}/promocoes`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                regiao: p.promoRegiao,
                                valor_bonus: parseFloat(p.promoValor),
                                detalhes: p.promoDetalhes || null,
                                created_by: l.fullName
                            })
                        })).ok) throw new Error("Erro ao criar promo√ß√£o");
                    ja("‚úÖ Promo√ß√£o criada!", "success"), x({
                        ...p,
                        promoRegiao: "",
                        promoValor: "",
                        promoDetalhes: ""
                    }), await gl()
                } catch (e) {
                    ja(e.message, "error")
                }
                s(!1)
            } else ja("Preencha todos os campos obrigat√≥rios", "error")
        }, Ol = async () => {
            if (p.promoRegiao && p.promoValor) {
                s(!0);
                try {
                    if (!(await fetch(`${API_URL}/promocoes/${p.editPromo.id}`, {
                            method: "PATCH",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                regiao: p.promoRegiao,
                                valor_bonus: parseFloat(p.promoValor),
                                detalhes: p.promoDetalhes || null
                            })
                        })).ok) throw new Error("Erro ao editar promo√ß√£o");
                    ja("‚úÖ Promo√ß√£o atualizada!", "success"), x({
                        ...p,
                        editPromo: null,
                        promoRegiao: "",
                        promoValor: "",
                        promoDetalhes: ""
                    }), await gl()
                } catch (e) {
                    ja(e.message, "error")
                }
                s(!1)
            } else ja("Preencha todos os campos obrigat√≥rios", "error")
        }, ql = async () => {
            s(!0);
            try {
                const e = await fetch(`${API_URL}/users/login`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        codProfissional: p.cod,
                        password: p.password
                    })
                });
                if (!e.ok) throw new Error("Credenciais inv√°lidas");
                const t = await e.json();
                // Carregar permiss√µes se for admin
                let perms = null;
                if (t.role === "admin" || t.role === "admin_financeiro") {
                    try {
                        const permRes = await fetch(`${API_URL}/admin-permissions/${t.cod_profissional}`);
                        if (permRes.ok) {
                            const permData = await permRes.json();
                            const allowedMods = Array.isArray(permData.allowed_modules) ? permData.allowed_modules : [];
                            const allowedTabs = permData.allowed_tabs && typeof permData.allowed_tabs === 'object' ? permData.allowed_tabs : {};
                            
                            // Se n√£o h√° m√≥dulos configurados, dar acesso a todos (primeira vez)
                            // Se h√° m√≥dulos configurados, usar apenas os que est√£o na lista
                            const hasConfig = allowedMods.length > 0;
                            
                            perms = {
                                allowed_modules: allowedMods,
                                allowed_tabs: allowedTabs,
                                hasConfig: hasConfig,
                                modulos: {
                                    solicitacoes: !hasConfig || allowedMods.includes("solicitacoes"),
                                    financeiro: !hasConfig || allowedMods.includes("financeiro"),
                                    operacional: !hasConfig || allowedMods.includes("operacional"),
                                    disponibilidade: !hasConfig || allowedMods.includes("disponibilidade"),
                                    bi: !hasConfig || allowedMods.includes("bi"),
                                    todo: !hasConfig || allowedMods.includes("todo"),
                                    config: !hasConfig || allowedMods.includes("config")
                                },
                                abas: allowedTabs
                            };
                            console.log("Permiss√µes carregadas:", perms);
                        }
                    } catch (err) {
                        console.log("Sem permiss√µes definidas, usando padr√£o");
                    }
                }
                // Salvar token JWT se retornado
                if (t.token) {
                    setToken(t.token);
                }
                o({
                    ...t,
                    codProfissional: t.cod_profissional,
                    fullName: t.full_name,
                    permissions: perms
                }), x({})
            } catch (e) {
                ja(e.message, "error")
            }
            s(!1)
        }, Ul = async () => {
            s(!0);
            try {
                const response = await fetch(`${API_URL}/users/register`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            codProfissional: p.cod,
                            password: p.password,
                            fullName: p.name
                        })
                    });
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || "Erro no cadastro");
                }
                const data = await response.json();
                // Salvar token se retornado
                if (data.token) {
                    setToken(data.token);
                }
                ja("Cadastro realizado!", "success"), x({
                    view: "login"
                })
            } catch (e) {
                ja(e.message, "error")
            }
            s(!1)
        }, zl = async () => {
            s(!0);
            try {
                await fetch(`${API_URL}/financial/accept-terms`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        userCod: l.codProfissional
                    })
                }), P(!0), ja("‚úÖ Termos aceitos!", "success")
            } catch (e) {
                ja("Erro", "error")
            }
            s(!1)
        }, Bl = async () => {
            if (!p.finName || !p.finCpf || !p.finPix) return void ja("Preencha todos os campos", "error");
            if (!p.pixTipo) return void ja("‚ùå Selecione o tipo da chave PIX", "error");
            const e = tr(p.finPix, p.pixTipo);
            if (e.valido) {
                s(!0);
                try {
                    await fetch(`${API_URL}/financial/data`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            userCod: l.codProfissional,
                            fullName: p.finName,
                            cpf: p.finCpf,
                            pixKey: p.finPix,
                            pixTipo: p.pixTipo
                        })
                    }), D({
                        full_name: p.finName,
                        cpf: p.finCpf,
                        pix_key: p.finPix,
                        pix_tipo: p.pixTipo
                    }), $(!1), Ma();
                    const e = {
                        cpf: "CPF",
                        cnpj: "CNPJ",
                        telefone: "Telefone",
                        email: "Email",
                        aleatoria: "Chave Aleat√≥ria"
                    } [p.pixTipo];
                    ja(`‚úÖ Dados salvos! (PIX: ${e})`, "success")
                } catch (e) {
                    ja("Erro ao salvar", "error")
                }
                s(!1)
            } else ja(`‚ùå ${e.mensagem}`, "error")
        }, Vl = async () => {
            const e = parseFloat(p.withdrawAmount);
            if (!e || e <= 0) return void ja("Valor inv√°lido", "error");
            if (e < 10) return void ja("‚ö†Ô∏è Valor m√≠nimo √© R$ 10,00", "error");
            // Verificar saldo Plific (considerando saques pendentes)
            const saldoDisp = calcularSaldoDisponivel();
            if (saldoDisp !== null && e > saldoDisp) {
                return void ja("‚ö†Ô∏è Saldo insuficiente! Seu saldo dispon√≠vel √© R$ " + saldoDisp.toFixed(2).replace(".", ","), "error");
            }
            if (saldoDisp !== null && saldoDisp <= 0) {
                return void ja("‚ö†Ô∏è Voc√™ n√£o possui saldo dispon√≠vel para saque!", "error");
            }
            const t = new Date,
                a = new Date(t.getTime() - 36e5),
                r = M.filter(e => new Date(e.created_at) >= a);
            if (r.length >= 2) {
                const e = new Date(new Date(r[0].created_at).getTime() + 36e5),
                    a = Math.ceil((e - t) / 6e4);
                return void ja(`‚ö†Ô∏è Limite atingido! Voc√™ j√° fez 2 saques na √∫ltima hora. Aguarde ${a} minutos para solicitar novamente.`, "error")
            }
            if (r.find(t => parseFloat(t.requested_amount) === e)) ja(`‚ö†Ô∏è Valor repetido! Voc√™ j√° solicitou um saque de R$ ${e.toFixed(2)} na √∫ltima hora. Escolha um valor diferente.`, "error");
            else {
                s(!0);
                try {
                    await fetch(`${API_URL}/withdrawals`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            userCod: l.codProfissional,
                            userName: T.full_name,
                            cpf: T.cpf,
                            pixKey: T.pix_key,
                            requestedAmount: e
                        })
                    }), ja("‚úÖ Saque solicitado!", "success"), 
                    x({
                        ...p,
                        withdrawAmount: ""
                    }), 
                    // Recarrega saques e saldo (o c√°lculo autom√°tico subtrai pendentes)
                    Oa(), 
                    setTimeout(() => buscarSaldoPlificUsuario(), 500),
                    qa()
                } catch (e) {
                    ja("Erro", "error")
                }
                s(!1)
            }
        }, Jl = async (e, t, a = null) => {
            try {
                // Calcular data do d√©bito baseado no toggle de acerto
                let dataDebito = null;
                console.log("üîç Toggle acertoRealizado:", acertoRealizado);
                if (t === "aprovado" || t === "aprovado_gratuidade") {
                    if (acertoRealizado) {
                        // Acerto realizado: data/hora atual
                        dataDebito = new Date().toISOString();
                        console.log("üìÖ Data d√©bito (hoje):", dataDebito);
                    } else {
                        // Acerto pendente: √∫ltimo domingo
                        const hoje = new Date();
                        const diaSemana = hoje.getDay(); // 0 = domingo
                        const diasParaDomingo = diaSemana === 0 ? 7 : diaSemana;
                        const ultimoDomingo = new Date(hoje);
                        ultimoDomingo.setDate(hoje.getDate() - diasParaDomingo);
                        ultimoDomingo.setHours(23, 59, 0, 0);
                        dataDebito = ultimoDomingo.toISOString();
                        console.log("üìÖ Data d√©bito (√∫ltimo domingo):", dataDebito);
                    }
                }
                
                const response = await fetch(`${API_URL}/withdrawals/${e}`, {
                    method: "PATCH",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        status: t,
                        adminId: l.id,
                        adminName: l.fullName || "Admin Financeiro",
                        rejectReason: a,
                        dataDebito: dataDebito
                    })
                });
                
                const data = await response.json();
                if (!response.ok) {
                    ja("‚ùå " + (data.error || "Erro ao atualizar"), "error");
                    return;
                }
                
                ja("‚úÖ Status atualizado!" + (!acertoRealizado && (t === "aprovado" || t === "aprovado_gratuidade") ? " (D√©bito no √∫ltimo domingo)" : ""), "success");
                x({
                    ...p,
                    [`reject_${e}`]: "",
                    [`showReject_${e}`]: !1
                }), Ua()
            } catch (e) {
                ja("Erro", "error")
            }
        }, Ql = async (e, t) => {
            try {
                await fetch(`${API_URL}/withdrawals/${e}/saldo`, {
                    method: "PATCH",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        saldoStatus: t
                    })
                }), Ua(), ja("validado" === t ? "‚úÖ Saldo validado!" : "insuficiente" === t ? "‚ùå Saldo insuficiente!" : "‚Ü© Status de saldo removido", "success")
            } catch (e) {
                ja("Erro ao atualizar saldo", "error")
            }
        }, Hl = async () => {
            if (p.gratUserCod && p.gratQty && p.gratValue && p.gratUserName) {
                s(!0);
                try {
                    await fetch(`${API_URL}/gratuities`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            userCod: p.gratUserCod,
                            userName: p.gratUserName,
                            quantity: parseInt(p.gratQty),
                            value: parseFloat(p.gratValue),
                            reason: p.gratReason || "",
                            createdBy: l.fullName
                        })
                    }), ja("‚úÖ Gratuidade cadastrada!", "success"), x({
                        ...p,
                        gratUserCod: "",
                        gratUserName: "",
                        gratQty: "",
                        gratValue: "",
                        gratReason: ""
                    }), za()
                } catch (e) {
                    ja("Erro", "error")
                }
                s(!1)
            } else ja("Preencha todos os campos obrigat√≥rios", "error")
        }, Gl = async () => {
            if (p.restUserCod && p.restReason && p.restUserName) {
                s(!0);
                try {
                    await fetch(`${API_URL}/restricted`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            userCod: p.restUserCod,
                            userName: p.restUserName,
                            reason: p.restReason,
                            createdBy: l.fullName
                        })
                    }), ja("‚úÖ Restri√ß√£o cadastrada!", "success"), x({
                        ...p,
                        restUserCod: "",
                        restUserName: "",
                        restReason: ""
                    }), Ba()
                } catch (e) {
                    ja("Erro", "error")
                }
                s(!1)
            } else ja("Preencha todos os campos", "error")
        }, Wl = ["Ajuste de Retorno", "Ajuste de Ped√°gio (Campinas e Recife)"], Zl = (e, t = 1920, a = .85) => new Promise((l, r) => {
            const o = new FileReader;
            o.onload = e => {
                const o = new Image;
                o.onload = () => {
                    const e = document.createElement("canvas");
                    let r = o.width,
                        c = o.height;
                    // Redimensionar mantendo propor√ß√£o se maior que o limite
                    if (r > t || c > t) {
                        if (r > c) {
                            c = c * t / r;
                            r = t;
                        } else {
                            r = r * t / c;
                            c = t;
                        }
                    }
                    e.width = r, e.height = c, e.getContext("2d").drawImage(o, 0, 0, r, c), l(e.toDataURL("image/jpeg", a))
                }, o.onerror = r, o.src = e.target.result
            }, o.onerror = r, o.readAsDataURL(e)
        }), Yl = async () => {
            s(!0);
            try {
                const e = p.imagens?.length > 0 ? p.imagens.join("|||") : null;
                await fetch(`${API_URL}/submissions`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        ordemServico: p.os,
                        motivo: p.motivo,
                        userId: l.id,
                        userCod: l.codProfissional,
                        userName: l.fullName,
                        imagemComprovante: e,
                        coordenadas: p.coordenadas || null
                    })
                }), ja("‚úÖ OS enviada!", "success"), x({}), La()
            } catch (e) {
                ja("Erro", "error")
            }
            s(!1)
        }, Kl = async (e, t) => {
            try {
                C(a => a.map(a => a.id === e ? {
                    ...a,
                    status: t ? "aprovada" : "rejeitada",
                    validated_by_name: l.fullName
                } : a)), await fetch(`${API_URL}/submissions/${e}`, {
                    method: "PATCH",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        status: t ? "aprovada" : "rejeitada",
                        observacao: p[`obs_${e}`] || "",
                        validatedBy: l.id,
                        validatedByName: l.fullName || "Admin"
                    })
                }), ja(t ? "‚úÖ Aprovada!" : "‚ùå Rejeitada!", t ? "success" : "error");
                const {
                    pendingFilter: a,
                    adminTab: r
                } = p;
                x({
                    pendingFilter: a,
                    adminTab: r
                }), La()
            } catch (e) {
                ja("Erro", "error"), La()
            }
        }, Xl = e => {
            const t = e.replace(/\D/g, "").slice(0, 11);
            return t.length <= 3 ? t : t.length <= 6 ? `${t.slice(0,3)}.${t.slice(3)}` : t.length <= 9 ? `${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6)}` : `${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6,9)}-${t.slice(9)}`
        }, er = e => parseFloat(e || 0).toLocaleString("pt-BR", {
            style: "currency",
            currency: "BRL"
        }), tr = (e, t) => {
            if (!e || "" === e.trim()) return {
                valido: !1,
                mensagem: ""
            };
            const a = e.trim();
            switch (t) {
                case "cpf":
                    return 11 === a.replace(/\D/g, "").length ? {
                        valido: !0,
                        mensagem: "‚úÖ CPF v√°lido"
                    } : {
                        valido: !1,
                        mensagem: "‚ùå CPF deve ter 11 d√≠gitos"
                    };
                case "cnpj":
                    return 14 === a.replace(/\D/g, "").length ? {
                        valido: !0,
                        mensagem: "‚úÖ CNPJ v√°lido"
                    } : {
                        valido: !1,
                        mensagem: "‚ùå CNPJ deve ter 14 d√≠gitos"
                    };
                case "telefone":
                    const e = a.replace(/\D/g, "");
                    return 10 === e.length || 11 === e.length ? {
                        valido: !0,
                        mensagem: "‚úÖ Telefone v√°lido"
                    } : {
                        valido: !1,
                        mensagem: "‚ùå Telefone deve ter 10 ou 11 d√≠gitos"
                    };
                case "email":
                    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a) ? {
                        valido: !0,
                        mensagem: "‚úÖ Email v√°lido"
                    } : {
                        valido: !1,
                        mensagem: "‚ùå Formato de email inv√°lido"
                    };
                case "aleatoria":
                    return /^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i.test(a) || /^[a-f0-9]{32}$/i.test(a) ? {
                        valido: !0,
                        mensagem: "‚úÖ Chave aleat√≥ria v√°lida"
                    } : {
                        valido: !1,
                        mensagem: "‚ùå Formato de chave aleat√≥ria inv√°lido"
                    };
                default:
                    return {
                        valido: !1, mensagem: "Selecione o tipo da chave"
                    }
            }
        }, ar = (e, t) => {
            switch (t) {
                case "cpf":
                    return Xl(e);
                case "cnpj":
                    return (e => {
                        const t = e.replace(/\D/g, "").slice(0, 14);
                        return t.length <= 2 ? t : t.length <= 5 ? `${t.slice(0,2)}.${t.slice(2)}` : t.length <= 8 ? `${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5)}` : t.length <= 12 ? `${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5,8)}/${t.slice(8)}` : `${t.slice(0,2)}.${t.slice(2,5)}.${t.slice(5,8)}/${t.slice(8,12)}-${t.slice(12)}`
                    })(e);
                case "telefone":
                    return (e => {
                        const t = e.replace(/\D/g, "").slice(0, 11);
                        return t.length <= 2 ? t.length > 0 ? `(${t}` : "" : t.length <= 7 ? `(${t.slice(0,2)}) ${t.slice(2)}` : `(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7)}`
                    })(e);
                default:
                    return e
            }
        }, lr = e => {
            switch (e) {
                case "cpf":
                    return "000.000.000-00";
                case "cnpj":
                    return "00.000.000/0000-00";
                case "telefone":
                    return "(00) 00000-0000";
                case "email":
                    return "seu@email.com";
                case "aleatoria":
                    return "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx";
                default:
                    return "Selecione o tipo acima"
            }
        };
        if (!l) return React.createElement("div", {
            className: "min-h-screen bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center p-4"
        }, i && React.createElement(Toast, i), React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md"
        }, React.createElement("div", {
            className: "text-center mb-8"
        }, React.createElement("img", {
            src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAABwCAIAAABJgmMcAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAHdElNRQfpDAEAESjmv+FkAAADWXpUWHRSYXcgcHJvZmlsZSB0eXBlIHhtcAAASImdVkGSozAMvPsV+wRbsiXzHGLgtlV73Odvt4EAM2RmM0lBApKlltSSHf7+/hN+4ZNUctCmi1ePlkztYcWzRBMr5jbYrJP4vDwej0Uc7wfLfFNcS5405sljVuhWG0KuPjoWFvUxzyUbfmFQFYvEddE5jtq86ujVsNAmOrMkkc/WbHalLNAD0GRbiEPHVfBUB5LNlEDHdCySc7YPZiALENJU9Yxv1BFLF+8fmR1aMtsCRZdFkw784l9UwV1wn1YHMgVXRy7o3atM9AB5RxFHiQcSwEBqELjY4BH6A2KYgWyTB4Ql8IlAiEycy6/Ac+poYcDkM/ruerYUDiUa2/zMqOBiE9SQPSgiLJk17hmjK20XB2PIXXUXn4MpKKynQ3KWAe1whEXyBESDBSU7IkfVyBLp2WC4AmTlQLGbu2LJzFtBjhBQAdFmZBnV0CIT6pNwVzw3We6WHat2F+HWRwHXcx66+QhyVoNpFEW7m4JnUdRYc5dE/AMhK8T8K8rqwheQDFAueMMFnzGd3Bwhhxs84NeGhsZ4wQGMJyBIcEc39WPY4br0q6SiD1EApL8+S8O8bubC14rn0styLv6ZMJSEO87c5OXEtrPJo3HCuXPe77CjwcKrDoOi3syF2GnajplAPdxByAZiYfpwAjy7Kl27qhsdiQdXO+fuwM5ea56/7KiOsz8lm82Js48cctvA8UILgZ5LBFDltGb7wQwGaW6c2ZziRvIhL1yI9z1flmDZcaEnJRZpGsbkfajvi50e+vNZNfeM4ElgfLB1uVnp2Gm+hRUBxCNNyYTQ0nec2Sp6SUqg6D6Z93x5RZfwLl9e0SV47KovZ/G+UR3jd12xEUV3omzzaDPHQc/JXUk3VFPxFJlSNyDV/rbtpq7a4Sf5uNMLP8nHunlf0xG+yQdGqcf77Wgzdxn+CIvTCN+mM84X4BWyQl5V7ilgWe7kwyVD5/jClsYpIAEQBlApHCPC9lA2CGOGsk7YnxLIVfOcW0Fpyoi5TxOy0RdhZ3nqKA8RtfAshNNP32B4cGnrZgNzb/RgeNWE7/ZgeNWE5x7s5Lik9nNmw/+z6Ky1Hreebytb5HKgW0U3p8qyJhgjTdYDYfgHTFxxn8a82H0AACIpSURBVHja7X1plF3XVebe+5w7vFev5klVkqpKs6x5suMROwk2EDokcZpuaBxI3OkmDQESAiTQCenVsFhMccMCegVoNziEQCYnjr2ixKFtx/IkS5ZkyZpdUqkmlUo1V73p3nP27h/n3lcly5LLTpSYxbvrSSpV3fvuvt/Z47f3eYU/HXwcqsf376AqBFVAq4BWAa0eVUCrgFYBrR5VQKuAVgGtHlVAq4BWAa0CWj2qgFYBrQJaPaqAVgGtAlo9qoBWAa0CWj2qgFYBrQJaBfTfwiFvekDF/RGRH4Cw8zcVAAERWfz5AgAieM3FpO/puQBABBAAEQThB4SpoCAAAiIsElJBQABAEIRrjOkbBFRABFBEkBCARABR5Bpj6t5aBIHc/RARr6am4tRSkADAnQ/iMH1TASpuxUVIkbUS2TIDM0Mibqo28sqXpKZ35UVyJyUm/YrVcW8tRMAWynFZ0DALIqbuRl65nIgiQgqt4chGDIaZK0K+iiSV+87/VObFlkVpC70BON2NlCJTNuCZ337wnl954O44jgABUUASU0QRFEGovAAFAS/XqMTBoSCiJC8QFAFMHaUkBkGKbMwGSh/7x5/5+IPvY4nBXSUgsMDtJNeIVjouWczApx5+/y/f/544jjEV8hI9FRAQQScwACAQOFeGgAjuBxUXLN8/QAUABQRJU6lk/Cb63Yfvfcs7tze05ghRKU1Ko3IwChCSp0jNv4BA5HLPh855oEJSmpR2J6MiSUBO1khpFZUNZPkTD/7Cj/zHG+rbahWRVsrdFMU9sMNWRFBrKhbjTJv/6Uc+sPPHN9e15hBAKY+UQjWvpwIAKABISKQVEgqLjdlE1sbWGYFSikgtxgHr16eaKCCoteQLUXN37e987f1rtq8AgDOHh8dluq5krWUPVegHAGgsF0sFAMBUCTIq4yniFCRwT+QQQMiXCiycLhpqpIwXSBpGlFbFQqm2LfjtB9+/8ZZ1ANB3ZPhiNFWraqy1Gr3A91AweVdB5al8vti8ou5TD927cnMXAJw5ODgB06bEbNlDL/B890QoAIQKqVSKIikrUJlskKsNlNLWcJQvF/KFGFiDDoOQFLJlxCuihIsaCZcksoIgeZTPFzs3NH3q6x9ctqbDxFZ76uL58YPfOgagggw9/42jz/zTcVLU2lP3zo/dhFq7S63wI3/27OiJcR1qYBchKr4O4pL50Q/v3HTLysJc2RoOa4IXHz255/MveaEWBq1prlBo6an/3Yc+uGLL8jiKPN+fvji199tHIYYwq1/8zsuP3X/ACz0QEQHl6bl8vntL+ye/dm/HynYbW+Wp0aHRQ4+eRFR+Rj3z4It7v3QiCANmIYUmNkVTXr625S3v3rT5trUdaxtrGmq01jbmwkzx4sDE6f0DB3YfPf50v40xDDyn3fhquOpFogmAIqA9ms4X1t3Y+d+/+v6WzjZrrPaUiLQsabrrA7dZw0qT54dP/dOR2ML179n4k//t7dZYUiQspOjYd/sGT1zwyWNO3AcIAIGNuaYl+JlPvqOpvV5YWEQpau5oePzzh31A5eFcvrB8c+unvn5vx8oOa6zneyJQ11J/1z23WMtKUUNrw7/cf8D5ReXRXD6//pZlv/PVDzS1N1tjladEpLWz9a4PtFljlVaI6qkvvRRioBXki+Xmztx/+fS77rhnZ5jNiAhixa6gob2uY3Xblreuf+9v3XnsmdNf+J3dJ/YMKl+B4Bs0eXGGBEJKTefntt+15hNffH9tQ84aVlq52wuDtZYNK02nn++3gAS45vouALDGOosul8r9L573QAsn4cktFSFFNl61rqOhPWtig4jWsFJ0al+/Aas8PTU7vfHWrt/+8r1NSxqNMVprEXH5kjVsjVWKTu3ri8GEFCDgTH7uhp9Y/5v//PM1dTm2lwspSsOpvQMCoDTNzhbX39r1W//8vpalzcxijWXLiJW8VZKwBAAgG29e+/N/7H3i5r9S8j34UBc4SeFssXDT3Zt+4x9+LpOtYctKu1CCbNkVSkgEAGcODiBQptZfsbUTALSvAZAIL/SOXOybdhq9MMYhggXp2dZJ4DFapciZUu/BAQ1qZja/467Vn/jSB3L1tWytStB0N50XsvfAMAERwdxc/rb/sPnXH7gnCDNsmdTlQiIA9B0a9EEX5qLure2ffOg/1zXVmtgqTUiotBbn5ZNYiSLCVpzOPvKXT1hrfN8T5ooWv16TR9JYKJRv/9ktv/WFe2NjmJlUJZlnJCQkYUHC/HRh+OQYArcub1iyohkAEFEsA6lzh0fyhWIuk2VOhKsYDYKsuaF7weJRqVQaOnrRAN/8U+s+9dCHrGVrI6U8EXBPiISEKCJKe1G53Hd4OECvMFd8689v//UH3m/iOBXSZWqXCDkzPjd8fIyUJ2j/65+/u4ImAAjz3m++dGzPmfJs2Qt1U1fj2l3da3d1a98jwse/sPexfziUC7PCaVB9/YA6TycaYGJo7quf2X3rv9/Z3t0mLIAgDEhmz1cODx656PlKBfrc0eHp4TwDLt/Y7Pk+W0ZCAQSA3gP97AKQq1Yr0d9I6Hkrty1N0BdAhJEzY6N9UwHo6QuFL//Joze+a/PytZ3MiaUjwrMPHzyzbzgIA/JoqPfCxd5pHZIpqrHB2a995ts3//S29q72REgRJH7yiy8MHZvQvvICffbw0PRYydh410+s2Xz7OraiNAkDKfi/H//6F+97zEMtaTobou5Y2/oTv3xj16bWv/+NRwIKXIaL+MZ8qCCgsEU/CE4+c+65J19ataOrvbvNrTwSTl7M/+WHvjI5PqdRibACL5cNOS47B+qgI0IA6H1hUAFJiiZAYn9R2bSvbOhY1QIASMhWgLDv8HC+UKrL1pw5eP75vcc7VjcvX9spzKgIEUuF0md/5WvD5ybck2vAjB+wlTBQx77bt/exI6uv72rvaq8IOTYy85cfenBqKq9RsYgGVZutKcZz299xXVKbCpLCuYmZb33uuVqoydZmGFhERISNDJ+8+Ne/+nWNpLSnPXKZ6Rv1oZikNQKiQa/oXNK1oSNVJUHAoeMX44m4OVcvnJZQLBqwZ8dyd6GDbXZyZvj4qEdaRGQhV0EUg126sSVTk2Hrim4BgN79QwIiCBp0V+OSVduWAQgSCQsqHDx1cW6k3FLTUKllrWXnLjSqnq6Oro2XCDl49EI0ZVtq69kmQjJbD4LuTR2JkAjCUtOUfdeHb3v4T56emJlmYA+0R54OVDYXsoBYERC5KpqLTOwRBFBhqRytXt3Z1F4vzIAoDE7vymJ8FjZWEBDRxtzQmuva2HbJI528ODlU0IHnyoMF1TkK8JpdyxNNASQiAD67f0iBRoAoijuva2nramawiNoyE0DfoaFiuayVEsuSMl0AgERROV6yenl9c13FKQHAy/sHylAOrc82DS5ApCCoVZdUa4z3fPpdP/bBW196vPfk3r7+IxfOnxwbH5kxwBkdeJ5i69CUVw1Hry8PJSQDcdfWDgDFbEhpRHGyQlKbJLlubM2SNR0tS+pEGJCEGQDOHhoqSVxHgbWMFYEQRIQAVu5ansAsgIST4zODpy746ANIBLZna7tSnjVMKtHfU/v6HAYMiCIAmAQ5RAN25Y4OAGK2pMgp08svDJAT0hkbIBHE1o72Tq/bCcJCCbDELC1Lm+74uaa3/twNgmZ6bK73xfOHv33ysc/tn7lQCMOQ2V4dU3pNNF2dCwIAtOb65ZVUihRZE587ckGDEpaU3QADZsX2ZQBeal8IAKf3DSZ160InCmBjrmuo6d60BACAEi5u+Pjo5Pm89hEEBXjlrqUV4kcpFIj7Dg1pUCKCLsVFZ/kIAgi4aueyyn1JURzF/UdGffBSp5SwMQT42APPAwAqMLF10rp0lS0bY5ixoaV+x1vXf+CP333f/o+uurGzWCq5zEGurKH0mubu/jLMWS9cta3imwAARvrGR86O+dq/lO2gNbuWVRZEaWLgvhcHNWhHQmFKhCGBMaZ1ZWPTsgYGrpCbZw8OR2BRg2UJUK/a2eVuCgKIauL8zPlT477SlXw2LYyFjanJhCu2LnXxzZ0wcmZ87Nyk5+mkq+A4JSuZMHvgm6f/5mNfjk2kPeXyU7aJl1RaESphEBYT29ZlzR/73H+qbQlsZJEQr0xELoJtEgQELpuWnlzH6o5EVmZHTxTmyspLTQCBjWQ8vWLH0kpEAoDRgfGLZ6Z8rYUdwYauaUJIEZhV1y/1yBczz4ud3HfOkWYmMk1LajvXtlbcMQD0HxuZHisoT1XcMbpiDjGOpbW7fsnK9lTXBAB6XzxXKJZJq0Q1nMGBCHMY+A/f99RHttz3z7/3zbOHzxljlCZSSIpAhK1FQlSoPWUis3RN503v3Vq0ZUWOhnyjpSegEFEMZvmGjjATsGWihErs3T9oHQ/pUnLEuMzNK3IdK5tdiBAWBJy9mC/ORkrptJpLKk9gUgC3/+zORAFBSGEcl84dPu8DAYhh03Fda2PLJWHwzIEBA4yEbg1SgAAJY4i7N3cEgc+WiSgVcohTITEpzUSc20WoydSMnJ783O/u/vLvP75sXcuqtyxbc/3y5ZvaV25dnq3JiqT1EiEAdG1oF3AFEl/Jhy4isRcAQAt21fWdiScDICIA6X1hIPVlLrtCBtOyvCGbq3Ha5GJCbVPWyyiOnBkCApBCABorTNz94R/Zcvs6ZnE/IqLz/ZOjZyY97QmgAbtqx1IAcJyQe7fT+4cUKHCkZ6KeDlXk1OG65IyIAMyZg0MKdOpwXfREQCAEG1vyMQj9AHw2fO7I6OkjQ9/6P3t91EvXNN/7F+/cedcWtknFBQAmjqXSsLhCXFqEybsKD9SqnZ0Vr0qE5ciMnJn0QCOhYxAQwALXNtUCJOYGiNaYJT0tN7xn01h5ykTGRtaUzFyhOFfIv+eXbvvgZ94tktCL7pJzR8/PzRaUR07tKxHJ6SAAjPROEmhERCRygc4JacUDtXJHZ6rvQISlYnzh7JQHmggQKTF2EEKMjPXr/blioVSIhEV5lKkJ6nO19bnabE3m3Kmxz/7qV+OoSGo+CA2fGndUvlw5yi+KYLaxrWvIdG9cCgAuE2HLge9tftuKh08/ZYsZYNGayA8AgI1dGM5QKQD8xb94T12Lv//h06W5OMj5K7a03/mLb9l55yZHOizstb28f4gBgJAjWxNmVmxe5ryHQxwVbrmj++QL56RokVkpX2tyJmliW9uSq6T0Tq/DTGbT7ct3n3neFANiIK21UqRwujD39vft+NCfv/c7f//co599dujUuAFQoJXDi7gI5TU7uj0/49pQpKlUKp18+twl2cKrqt/VCWYBIIRyySxb3/yZgx8NQr/SaxTkuBSdeOZsaS7KNYf3f+SRs/svCEDPttY/3f8xrUgSHUURYWalVKlcLs2Ww5ogzAQiYq1VSlXQFAEi/B/v+N8v7D5VU5OJ83Hj8ro/P/KbNfUZl6W7d4ui6NRzZ2cnSvXtmQc+vvvEnnNhJgCRcinu3tz2pwc+6mm/whIBcrkYHX/2TLlgco3h33z4ocEXL1rhrh1Nf/T4R7J1NQBQLBSO7jl9+Dun+4+MTl8osrXZpnDTHT0/9ZE7ahvrRISNVZ5++msH/vDuB7KZ7JV4pkVp6Px1akFYcz5dyA/CrW/b4Hjl7g0vnNw/UJvJDp242H/s/MrNy5itUo6LRCSylgPfD1sCEIjLhjQ6ZrPS8yLC/Mzc0LExja5ChTSFZlceIoKIeNrb9CPr3E1Xbj58ZE9vBkNJfQIDiHCSOCOAUBCG29+20Z3ftb719KHBto66j/7d+7J1NcYYBAwzmV0/tnXnXVsQkZlFRCmVuCABa432aG567gufflSBN+9C32AeCiICnqfGzk2NnZsCIGt4YePPGjZxDABxZABAaSqWom/+1R4AYGvZclpTAhG6nI6ZvUBf6BsbOHkeEa0RYbGGAWD41MWJwRnP12JB+3pyeGb45VEAsrEB4MQtIFhjTWzd3ZMeEoPW6kLf1ET/FKITMs0UxQlpAIAFYjBd17Wv3LJcBMgZeMorV/pxnMppLWvtlYvRfb/w+b4jF8KMx/YqSf2iAHWcI83Nlb/8B7sdZJdcr1D7HgAIWgCwVrJh5jt/s2/33+7xfD8J82kij4TaU3EcffOzT/zals989pe/6NQKE04Zel8cKdqYFAEIKiyb+Et/8CiD0Z63wG8hKdIeuZg3TzD6ana6+JU//BYAKEULgyop9HwNAFGZMxAc2zPwe+/823PHB0gjKURCUoREwMJWrGEEUB4RkdJ05lDfJ9/+F88/dKI2k7FW8LVmOdRGfetV1TMxNN/Tp18Y7D080NpTX99co/3EV0TFeHRg/Kmv7H/igQNcACQAAUV67yMvTY5Mt61qqG3KKSIktMYMnr7w+AN7//qXHnz07/ZJTETYvbU1P12aGJ6ZvDAzPT79yJ/tudA75WkCRhHxPe/skfMnn+tt6amrb8lpz0vcaDm+2D/x7DcO/b/798XTggpcTevr4MTz/eeO9bf21NU312pPzQvZP/7kl/bu+ceDtghaq75j5594YF/f4UFGk6kNwtpAKQWYri5BYar40jOnvvg/v3X/x74xenamJpO11ia9pqtq6Gt2PZOJBSKLoPKlImlY0t1U35olrcolLk6WJs9PzxZKGR2qNF9z+U2+VMpmMktW19e35ZBhcnTm4tnp2UIxQB2EoYgYY6xlhZSOcgkQeq7JkTbribBQKoHCjuWNDe1ZCtAUOT8VTwxPz+ULgQ504qaTmpJQFUpFraGtu7G+LUMelQtSnChNnJ+dKxYzXqiIRIS04pgLcRFB6urrWroyjUvqw8acH3pRPpoZnRk9M3lxeMqKZP1M2jrGq7FMiwA0UU9rhdAW4zD0OPTYWCiX2YIVEAJQQMrTyiPXtMGKjSOQIo5tFMcWAIAVKM/ztQfMwq69g5cOJ7nqiRdSZCICSilhjiLD6YyfAqU9Up5i5ksISgFBUaSYIS7HFjgVUilPXSKkiHMFIGTi2Bo2YBgAgBGQADV6XuAhiQsDSY2XDEi9MfpOgIjzJf/OHYfuvvHAN57b/OTxDROFuqwfhVkU0K4+ckMibK1LJ9PqXxDQWouEQeg7OgQERNjYpO50GnhZUVaRtVJ8gWWLAH6gIe3uikBy01ewvcl9GVH8UAGq9HwBgYVCuuusZQQmRUqrAL0FjRk3AmSAAQFZkIWsJa0sESdp/hVgvZoPRURmagiLP7r98C2bTmzr6ffRDE3WTRWyKKhIQBgSVUtplETRkpmQdFWTghUlmRNKEH0V6vvy7yXMh7hWhQCwpHN1lyuL42TdMqcTSwLpWMGC0YrK2W40ihgEgEUYjFHlWJdiVTZeZJQR1mRqM/kljROx0cZ4SAvoiNflQ0WASPIlb03n8K/91O6e9pGygeHx9j2HNzx5fO35yTaNEPgRIYsjkOa1BBaUuqnaCQC+pgu6CqWQxlfEVEcWcVUqCsjlN0/Sf8tUin0AUGhDr5wLS/XZmcb6Ynv9VFv9dFv9dHNtvjZTXNI09dVnbnrgsbfWhiXrBtpeL6AOU0VcKAdNdRMffse/7Fh5qmQo8HhyLvv8qQ1PvrTu9PmOUpwJVOxpwRTZRH6Redf4pjuSATzLqjYzd9PaU22Nk6310y210/W1+VxQDD2jVIKAYTCxyvjyv77x7544srUmLFmhKznSq6dNgCgsFHgmX6556sSqwJPrlo4WjdUq3rB8+JaNJzf3DOSCwkwxM5XPRrHvSDvChClzo4Dz7ExFTypfLyZwXq52lxZzb+w9EBBJipG3fcXAR37moTUdQ51N4425uUBFAhxbKMcQGYwMGoue5uHx9geeuN11cB0d8wby0AQAFtDEBPq50ytGp+q29IzkgvJ0wUcwHY2Tu9acufW6Y2uXD9X4pUJZzRQyhdhjqwhJocWE03XkLlQIN8c/p773NXxB0t+oTMth2plLWM2U334d2CZ39LQ9P1k3NlG3eslYoEqlSElKXBMCEhCCCGQD2H1g+76X12S8mAGvYnSvpaGVQVhBRAk9OTHcceDl7mXNUys6xmNDZQORAc8zPW3j16/vvXnjqS0rzrXVTyNKsUxzpUzZBMYql5sSCc2P1EIFZbyK/1sQQ9zJBIAIlL5YaJ40XqyPdoFO0pVURwc6j57tXNo23dYwwyn7nFoVEEEpDj732B35Uo0iWSjR6wY0dYGV0ImhZ6bydXuOrS3G3sZlI5kwjo0SAGMojsnzy0tbJretPnfLpqM3bzx13Yr+zsaxjB8xSznyimUXOj1jiQUACIWSGWEEckmAexEQJrshKvmYCDLr2HomVmWjSkYbA54uIRlmTXSVeY5L16nCSIMAgiLOetw31b7v9NK3bzoV+iWRFEwEEcoGcqB39e59u0KPGdJLX3ceepmjctHVMgVeLKK++tStR3p77nnbnu0r+opGjEFFzALFMjAAkm1pmOxonrht44nIqplSzfh0w4WJuqHxxgsTufHpxqnZzGwpG5WDyHjWIgMygABVaCL3UAiAwAqElPjaZDPFbE2+vq7QUj/T3jzZ2Ty7vH1sei533+d/Mo5DIn4VKkgWQOmaeQgoSMhIYFgVylqR3d51+sd3HqoJirF12VjSE2MAFr3n2FojvmARhORK7aTXA2jSA0YUQGAmRMmFce+FZb//xffeuf3F9970bGvDbL6kmVkREwIgxAbKhtwEfCacWZmbWdMNiMACxmKpHOSjIF/yC8VMvpwtlrxiOYiMYpHYakDWJEpJ4MVhYMJMVBMWwmypJlvKBVHWj5QSQgALQDA40pK0tS6zRYFKtpH865yjAJSNjizWZWZv2TB4x5ZjW7v6fa9YjDH0AQ1FlkBYgAOP+0fbX+xdlfGidIryannL4kfCE9N3OxME0LKEXgyiHtl34/7TK9970/7bth3NecViBCxEyIii3AIAsIUyI8fONTGReH6pKSw1N4AiIALBJAhYTJ/ZFQcE1n3BYASYARkiBolRGIShNiu9A0tmC7lsGFe2g2BlPiXtOyEyEohgZHRklU9Rd9voDWtfvvG6kz0tY4hmpuSLoVDR3//LLbHx7r3zu3FMDOxr2HNi3UyprjYsMrvRg+9xcuQVQSpdbUFkAUCuDYuTc41/tfvOx15af/fNz+9ceyZQtlTWDIzIyWqSAIoCFGA3S8QMLMgWBNOAj0mBg4iIwABC6cCr28YzzwMCKiAEi0IE/SMtDIgozJQ4SLePBIFAANAIxFFoBDwqtTdf3Npzbtf6M+uWDtaHpbKBuYiEg1ymPDHddN/utz97el2gordtObGy7XyZaXouu/fYWl8ZN3mG8BoVxesEdEHW4eZAUNAKeMr6Gk8Pdf/Rl5duXdn3zpte2LZiAJQpRciCQgucDi4omlASZSQAEALgdIdcEgbR5RjJthFKtyRJ2hVGhNhi/3Cby8GJuMLNWKsiizETgtQE5e6l/eu7+7etHFjVeb6uJo8MxQhniq51zbls+YXe1X+9+0eHJ1oas6WpQubpY+tWLxkMiZ44uWpovC0bRPaK5fv3BVAHTeKfUUQYIPRjADnYu/rImZ4tq/p+/PoDW1f31Xhx0WAk6NIdvILWL5RVAASRk6CPleAtIojkBsDcuVrB9GzN0GizVhIbbYy2ggJCaHOZwtLWyZ6O0bVdo2uXjixpGgvCSCzEEeSLmE4UQuhzxOEXHn/LV569nsXPhVFsKVRm76nVd9+8tzGb/+7hjZDsUFpUTvY9AAqVFDJtiQkAUjaIQOjg6bUHeldsWD70tu2Hd113pqFuNrIQxSSslLKvWf4sZj+mCCiCfMmfyWukqD6Xb8jNtTdPLmub6mobWdY23VI3kwlKiGAMRDHMFYgACJgIxAIi1Gbh9FDn/d+543DfipzPSLGbr9eeGZ5seurEuvbaueMDS0PfiCyODV3stprF5MouGiToAiGLUCnSLNTZcv7Gjadu3nimq3PE1zYyEltgQKLUoikpeJzJAyKjSLpZoMKZVlYNBEgA3UioBP3DrQS2ub5Yk5kLPOOivzFgLBiLIArRAAAwIAAwiqVsxpbL4SN7t3/96RuLpWw2jKxQZfNQMlwPDICcTEkttmjAa/CrK+YLdbescazLlnJ+cV334A0bX966+syS5klSEFsoWQJkomTSMJnyQxCqzHw6TN0kLlc2jRIAMggAMQUaRNgwsAVmECESoaQLAAAEwCAgTMIQaPYVHurt+cJjtxwf6KnxjCKbzn2mG14SYrCSEuNi9fPaADq/g1FS8pOQLatyrFmgMTe7rnto29qz160c7GyZFowiZnK5AAAjMAJhsiuUcT5Vd+9KAm5sUUQcssIV5hCSgX5OR0QEEIiFLaOvVM4350Zav/bUridf3GzZywQRuz2lDr8Ft7oU09fBEuC1/eUqlUnDxJQFAY3FKFYMUJ/Jd7SP3/OO767rGSjHgAQEIKmSunBvcSGxCiiQTI2n/CvC/NfC6XidVABFZtKKM55MzNR9+/lt3967dSJfX+tbIcOchsnLFVDSbDatUxf5xBqu6YHJXsp03VFQiCQbGgCJJTzYt/r2kZc2rxooR8m+cBdOkznflFSiFDSHl6ScNaVZFCAQJ10CtyIswAyeglxoJ6brv/Xs+m8/v314ojX04tqwzIKysH1wOV6YRtzFUdk/KEDhFWRSsu42pUibg7lVy0Zjk9rV/Hg3LLRB9z9a0CCqsHaJ801JNxSwTAiY0VYrGJls+OZTG77zwsbB8baM4tqwzMkJKZH2/Wa/rz2gl6972pszRrU2TLU2TsY2iUYV2CkNbUKycDUqgYLSxKrCXAuD63RlQgH2+84vefLg+qePrLkw1RJoWxdGLGAdl5nul78WvYQfMKAOA8cHirHU2TZZF5ZLJpmQqKAzr9dy+ZrMf1sEWBAtKRQ/ZA9laiZz8NiqJw+vP/zystlSLqNNbVgSIcuJW5Z5I74mnZkfBqBJpxQsUPeSi57iUoTzrD7M234FufnGe/rBMcwIKFpBRokimy9mj51pf+HoqgMnuocutlrxM36UaqVCrPT65Vp3uH4ogDqzRwKzouOi+8wBTLcCzpPzC6ol10B2pyhCX4unBRgm85mTQ+1HTq84dKp74EJryYQBccY3gEUWfIWBww+kWfhDARQAgJlqwtKylonYJskzJLMQiUbaJHMSRaBItAIiYMa5YnbwQsPZwfajZ5e+3L90dKI+tr5H7HumTpdEwAKCEC5sHF8zA39zACqABFFMS5dMtzZOWUOUdD6ECFGJQgGVbOyKrCqV/bHZmpGJhv7zLX3DHQMjzaMT9YUoFKBAWV9z6JWd/lqe39y++AbTv3pAJdlaiWEQgyLDSlhxrMpGl2M/XwrzxWBqrnZiNjs2mRubqLs4XT8xW1MoZiNBBaSJPW1zYQQAnHz4BkD6OU4Ar9FEu+bu7If0aygT9qGtcUYrY6yKLUZGlWMvjnVstGHlaiIC0SRKs0JOmhjzsxSXVA1vknGKH44PTfk+GhxrTkeUoNJhDjwJ0VRIlvmPoUrIqEQVFzGs+W8G0JQ1lkAbuOxjvtJhsAWEc6qBrrZ5M472/HABTUMGzu9ZeEXr61XGHOBNqZFvFkBfFSy4wn/+NR3VT7itAloFtApo9agCWgW0Cmj1qAJaBbQKaPWoAloFtApoFdDqUQW0CmgV0OpRBbQKaBXQ6vFax/8Hq2rCqnGXXpAAAAAVdEVYdHBkZjpBdXRob3IAU3VwZXJ2aXNvcq7E1dIAAACjelRYdHhtcDpDcmVhdG9yVG9vbAAACJklizsOwkAMBa/iElqgoNkihI+QVoCCggSdia2wfLyJs+E+QMFB9mIkohpp5r0U5YkwyFiIlXUI5AszT1aLOnfahAm0DavJk+V0Y/ej0/gIZ0UhM+tNSpe8LCHwo7pjYLPzTYAKFcE6uTGtBYghVYfxGz8esviqHPW1bjv+5VbL+BZXeDiwdnPb/eWKPy8QOQUV5AGlAAAAAElFTkSuQmCC",
            alt: "Logo Tutts",
            className: "w-28 h-28 mx-auto mb-4 rounded-xl shadow-lg object-cover"
        }), React.createElement("h1", {
            className: "text-2xl font-bold text-gray-800"
        }, "Central do Entregador Tutts"), React.createElement("p", {
            className: "text-gray-500 text-sm"
        }, "Solicita√ß√µes e Saque Emergencial")), "register" === p.view ? React.createElement("div", {
            className: "space-y-4"
        }, ue && React.createElement("div", {
            className: "bg-blue-50 border border-blue-200 rounded-lg p-3 text-center"
        }, React.createElement("p", {
            className: "text-blue-700 text-sm"
        }, "üìä Carregando lista de profissionais...")), be && React.createElement("div", {
            className: "bg-red-50 border border-red-200 rounded-lg p-3 text-center"
        }, React.createElement("p", {
            className: "text-red-700 text-sm"
        }, "‚ùå ", be), React.createElement("button", {
            onClick: Ta,
            className: "text-red-600 text-xs underline mt-1"
        }, "Tentar novamente")), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-medium text-gray-700 mb-1"
        }, "C√≥digo Profissional"), React.createElement("input", {
            type: "text",
            placeholder: "Digite seu c√≥digo",
            value: p.cod || "",
            onChange: e => x({
                ...p,
                cod: e.target.value
            }),
            className: "w-full px-4 py-3 border rounded-lg " + (p.cod && !ue ? p.codValido ? "border-green-500 bg-green-50" : "border-red-500 bg-red-50" : "")
        }), p.cod && !ue && !p.codValido && React.createElement("p", {
            className: "text-red-600 text-sm mt-1"
        }, "‚ùå C√≥digo n√£o encontrado na base"), p.cod && p.codValido && React.createElement("p", {
            className: "text-green-600 text-sm mt-1"
        }, "‚úÖ C√≥digo v√°lido!")), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-medium text-gray-700 mb-1"
        }, "Nome Completo"), React.createElement("input", {
            type: "text",
            placeholder: p.codValido ? "Nome carregado automaticamente" : "Digite o c√≥digo primeiro",
            value: p.name || "",
            readOnly: !0,
            className: "w-full px-4 py-3 border rounded-lg bg-gray-100 cursor-not-allowed " + (p.name ? "border-green-500 bg-green-50" : "")
        }), p.name && React.createElement("p", {
            className: "text-green-600 text-xs mt-1"
        }, "üîí Nome vinculado ao c√≥digo")), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-medium text-gray-700 mb-1"
        }, "Senha"), React.createElement("input", {
            type: "password",
            placeholder: "Crie sua senha",
            value: p.password || "",
            onChange: e => x({
                ...p,
                password: e.target.value
            }),
            className: "w-full px-4 py-3 border rounded-lg",
            disabled: !p.codValido
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-medium text-gray-700 mb-1"
        }, "Confirmar Senha"), React.createElement("input", {
            type: "password",
            placeholder: "Digite a senha novamente",
            value: p.confirmPassword || "",
            onChange: e => x({
                ...p,
                confirmPassword: e.target.value
            }),
            className: "w-full px-4 py-3 border rounded-lg " + (p.confirmPassword ? p.password === p.confirmPassword ? "border-green-500 bg-green-50" : "border-red-500 bg-red-50" : ""),
            disabled: !p.codValido || !p.password
        }), p.confirmPassword && p.password !== p.confirmPassword && React.createElement("p", {
            className: "text-red-600 text-sm mt-1"
        }, "‚ùå As senhas n√£o coincidem"), p.confirmPassword && p.password === p.confirmPassword && React.createElement("p", {
            className: "text-green-600 text-sm mt-1"
        }, "‚úÖ Senhas conferem!")), React.createElement("button", {
            onClick: Ul,
            disabled: c || !p.codValido || !p.password || !p.confirmPassword || p.password !== p.confirmPassword,
            className: "w-full bg-purple-900 text-white py-3 rounded-lg font-semibold hover:bg-purple-800 disabled:opacity-50 disabled:cursor-not-allowed"
        }, c ? "Aguarde..." : "Criar Conta"), React.createElement("button", {
            onClick: () => x({
                view: "login"
            }),
            className: "w-full text-purple-700 text-sm"
        }, "‚Üê Voltar")) : "recuperar" === p.view ? React.createElement("div", {
            className: "space-y-4"
        }, React.createElement("div", {
            className: "bg-purple-50 border border-purple-200 rounded-lg p-6 text-center"
        }, React.createElement("p", {
            className: "text-5xl mb-4"
        }, "üîê"), React.createElement("h2", {
            className: "text-xl font-bold text-purple-800 mb-2"
        }, "Esqueceu sua senha?"), React.createElement("p", {
            className: "text-gray-600 mb-4"
        }, "Entre em contato com o suporte Tutts para obter uma nova senha."), React.createElement("div", {
            className: "bg-white rounded-lg p-4 border border-purple-300"
        }, React.createElement("p", {
            className: "text-sm text-gray-500 mb-1"
        }, "üìû Contato Suporte"), React.createElement("a", {
            href: "https://wa.me/5571989260372",
            target: "_blank",
            className: "text-2xl font-bold text-green-600 hover:text-green-700"
        }, "(71) 98926-0372"), React.createElement("p", {
            className: "text-xs text-gray-400 mt-2"
        }, "Clique para abrir o WhatsApp"))), React.createElement("button", {
            onClick: () => x({
                view: "login"
            }),
            className: "w-full bg-purple-900 text-white py-3 rounded-lg font-semibold hover:bg-purple-800"
        }, "‚Üê Voltar ao Login")) : React.createElement("div", {
            className: "space-y-4"
        }, React.createElement("input", {
            type: "text",
            placeholder: "C√≥digo Profissional",
            value: p.cod || "",
            onChange: e => x({
                ...p,
                cod: e.target.value
            }),
            className: "w-full px-4 py-3 border rounded-lg"
        }), React.createElement("input", {
            type: "password",
            placeholder: "Senha",
            value: p.password || "",
            onChange: e => x({
                ...p,
                password: e.target.value
            }),
            onKeyDown: e => "Enter" === e.key && ql(),
            className: "w-full px-4 py-3 border rounded-lg"
        }), React.createElement("button", {
            onClick: ql,
            disabled: c,
            className: "w-full bg-purple-900 text-white py-3 rounded-lg font-semibold hover:bg-purple-800 disabled:opacity-50"
        }, c ? "Entrando..." : "Entrar"), React.createElement("div", {
            className: "flex justify-between text-sm"
        }, React.createElement("button", {
            onClick: () => x({
                view: "register"
            }),
            className: "text-purple-700 hover:underline"
        }, "Criar nova conta"), React.createElement("button", {
            onClick: () => x({
                view: "recuperar"
            }),
            className: "text-gray-500 hover:underline"
        }, "Esqueci minha senha")))));
        if ("user" === l.role) {
            return React.createElement("div", {
            className: "min-h-screen bg-gray-50"
        }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null), 
        // Modal de Relat√≥rio N√£o Lido (ci√™ncia) - GLOBAL para usu√°rios
        relatorioNaoLido && React.createElement("div", {
            className: "fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4",
            style: { zIndex: 9999 }
        },
            React.createElement("div", {className: "bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-screen overflow-hidden flex flex-col"},
                // Header
                React.createElement("div", {className: "bg-gradient-to-r from-teal-600 to-teal-700 text-white p-4 flex items-center gap-3"},
                    React.createElement("span", {className: "text-3xl"}, "üì¢"),
                    React.createElement("div", null,
                        React.createElement("h3", {className: "text-lg font-bold"}, "Novo Relat√≥rio Di√°rio"),
                        React.createElement("p", {className: "text-teal-100 text-sm"}, 
                            relatoriosNaoLidos.length > 1 
                                ? relatoriosNaoLidos.length + " relat√≥rios pendentes de leitura"
                                : "1 relat√≥rio pendente de leitura"
                        )
                    )
                ),
                // Info do autor
                React.createElement("div", {className: "p-4 bg-gray-50 border-b flex items-center gap-3"},
                    relatorioNaoLido.usuario_foto 
                        ? React.createElement("img", {
                            src: relatorioNaoLido.usuario_foto,
                            className: "w-12 h-12 rounded-full object-cover border-2 border-teal-200"
                        })
                        : React.createElement("div", {
                            className: "w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold text-lg"
                        }, (relatorioNaoLido.usuario_nome || "?").charAt(0).toUpperCase()),
                    React.createElement("div", null,
                        React.createElement("p", {className: "font-bold text-gray-800"}, relatorioNaoLido.titulo),
                        React.createElement("p", {className: "text-sm text-gray-500"}, 
                            relatorioNaoLido.usuario_nome, " ‚Ä¢ ", 
                            new Date(relatorioNaoLido.created_at).toLocaleDateString('pt-BR', {
                                day: '2-digit', month: '2-digit', year: 'numeric',
                                hour: '2-digit', minute: '2-digit'
                            })
                        )
                    )
                ),
                // Conte√∫do
                React.createElement("div", {className: "p-4 overflow-y-auto", style: { maxHeight: '50vh' }},
                    React.createElement("div", {
                        className: "text-gray-700 whitespace-pre-wrap"
                    }, relatorioNaoLido.conteudo || ''),
                    relatorioNaoLido.imagem_url && React.createElement("div", {className: "mt-4"},
                        React.createElement("img", {
                            src: relatorioNaoLido.imagem_url,
                            className: "max-w-full rounded-lg shadow cursor-pointer hover:opacity-90",
                            onClick: () => setRelatorioImagemAmpliada(relatorioNaoLido.imagem_url)
                        })
                    )
                ),
                // Footer com bot√£o de ci√™ncia
                React.createElement("div", {className: "p-4 bg-gray-50 border-t"},
                    React.createElement("button", {
                        onClick: () => marcarRelatorioComoLido(relatorioNaoLido.id),
                        className: "w-full px-6 py-4 bg-teal-600 text-white rounded-xl font-bold text-lg hover:bg-teal-700 flex items-center justify-center gap-2 shadow-lg"
                    }, "‚úÖ Estou Ciente")
                )
            )
        ),
        // Modal de imagem ampliada (relat√≥rio)
        relatorioImagemAmpliada && React.createElement("div", {
            className: "fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4",
            style: { zIndex: 10000 },
            onClick: () => setRelatorioImagemAmpliada(null)
        },
            React.createElement("div", {className: "relative max-w-4xl"},
                React.createElement("button", {
                    onClick: () => setRelatorioImagemAmpliada(null),
                    className: "absolute -top-10 right-0 text-white text-3xl hover:text-gray-300"
                }, "‚úï"),
                React.createElement("img", {
                    src: relatorioImagemAmpliada,
                    className: "max-w-full max-h-screen rounded-lg shadow-2xl",
                    style: { maxHeight: '85vh' },
                    onClick: (e) => e.stopPropagation()
                })
            )
        ),
        // Modal do Editor de Foto de Perfil
        photoEditorOpen && React.createElement("div", {
            className: "fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4",
            style: { zIndex: 10001 },
            onClick: () => setPhotoEditorOpen(false)
        },
            React.createElement("div", {
                className: "bg-white rounded-3xl shadow-2xl w-full max-w-md p-6",
                onClick: (e) => e.stopPropagation()
            },
                React.createElement("h3", {className: "text-xl font-bold text-gray-800 mb-4 text-center"}, "‚úÇÔ∏è Ajustar Foto de Perfil"),
                React.createElement("p", {className: "text-sm text-gray-500 mb-4 text-center"}, "Arraste para posicionar e use o zoom para ajustar"),
                
                // √Årea de preview circular
                React.createElement("div", {
                    className: "relative mx-auto mb-4",
                    style: {
                        width: '256px',
                        height: '256px',
                        overflow: 'hidden',
                        borderRadius: '50%',
                        border: '4px solid #7c3aed',
                        cursor: photoEditorDragging ? 'grabbing' : 'grab',
                        touchAction: 'none'
                    },
                    onMouseDown: handlePhotoEditorMouseDown,
                    onMouseMove: handlePhotoEditorMouseMove,
                    onMouseUp: handlePhotoEditorMouseUp,
                    onMouseLeave: handlePhotoEditorMouseUp,
                    onTouchStart: handlePhotoEditorMouseDown,
                    onTouchMove: handlePhotoEditorMouseMove,
                    onTouchEnd: handlePhotoEditorMouseUp
                },
                    React.createElement("img", {
                        src: photoEditorSrc,
                        style: {
                            position: 'absolute',
                            left: '50%',
                            top: '50%',
                            transform: `translate(calc(-50% + ${photoEditorPosition.x}px), calc(-50% + ${photoEditorPosition.y}px)) scale(${photoEditorZoom})`,
                            minWidth: '100%',
                            minHeight: '100%',
                            objectFit: 'cover',
                            pointerEvents: 'none',
                            userSelect: 'none'
                        },
                        draggable: false
                    })
                ),
                
                // Controle de Zoom
                React.createElement("div", {className: "mb-6"},
                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2 text-center"}, 
                        "üîç Zoom: ", Math.round(photoEditorZoom * 100), "%"
                    ),
                    React.createElement("input", {
                        type: "range",
                        min: "1",
                        max: "3",
                        step: "0.1",
                        value: photoEditorZoom,
                        onChange: e => {
                            const newZoom = parseFloat(e.target.value);
                            setPhotoEditorZoom(newZoom);
                            // Ajustar posi√ß√£o ao diminuir zoom para n√£o sair dos limites
                            const maxMove = 128 * (newZoom - 1);
                            setPhotoEditorPosition({
                                x: Math.max(-maxMove, Math.min(maxMove, photoEditorPosition.x)),
                                y: Math.max(-maxMove, Math.min(maxMove, photoEditorPosition.y))
                            });
                        },
                        className: "w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer accent-purple-600"
                    })
                ),
                
                // Bot√µes
                React.createElement("div", {className: "flex gap-3"},
                    React.createElement("button", {
                        onClick: () => setPhotoEditorOpen(false),
                        className: "flex-1 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50"
                    }, "Cancelar"),
                    React.createElement("button", {
                        onClick: handlePhotoEditorSave,
                        className: "flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-semibold hover:opacity-90"
                    }, "‚úÖ Aplicar")
                )
            )
        ),
        u && React.createElement(ImageModal, {
            imageUrl: u,
            onClose: () => g(null)
        }), 
        // Tutorial do Usu√°rio - Renderiza√ß√£o Direta
        tutorialAtivo && React.createElement("div", {
            className: "fixed inset-0 z-[100] flex items-center justify-center p-4",
            style: { backgroundColor: "rgba(0,0,0,0.85)" },
            onClick: () => { setTutorialAtivo(false); setTutorialPasso(0); localStorage.setItem('tutts_tutorial_visto_' + l?.codProfissional, 'true'); }
        },
            React.createElement("div", {
                className: "bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden",
                onClick: (e) => e.stopPropagation()
            },
                // Header
                React.createElement("div", {
                    className: "bg-gradient-to-r from-purple-600 via-purple-700 to-indigo-700 p-6 text-white relative overflow-hidden"
                },
                    React.createElement("div", {className: "absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),
                    React.createElement("div", {className: "absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),
                    React.createElement("div", {className: "relative"},
                        React.createElement("div", {className: "flex items-center justify-between mb-2"},
                            React.createElement("span", {className: "text-sm bg-white/20 px-3 py-1 rounded-full"}, 
                                "Passo ", tutorialPasso + 1, " de ", TUTORIAL_PASSOS.length
                            ),
                            React.createElement("button", {
                                onClick: () => { setTutorialAtivo(false); setTutorialPasso(0); localStorage.setItem('tutts_tutorial_visto_' + l?.codProfissional, 'true'); },
                                className: "text-white/70 hover:text-white text-sm hover:bg-white/10 px-3 py-1 rounded transition-all"
                            }, "‚úï Pular")
                        ),
                        React.createElement("div", {className: "text-5xl mb-3"}, TUTORIAL_PASSOS[tutorialPasso]?.icone),
                        React.createElement("h2", {className: "text-2xl font-bold"}, TUTORIAL_PASSOS[tutorialPasso]?.titulo)
                    )
                ),
                // Barra de progresso
                React.createElement("div", {className: "h-1 bg-gray-200"},
                    React.createElement("div", {
                        className: "h-full bg-gradient-to-r from-purple-500 to-indigo-500 transition-all duration-500",
                        style: { width: (((tutorialPasso + 1) / TUTORIAL_PASSOS.length) * 100) + "%" }
                    })
                ),
                // Conte√∫do
                React.createElement("div", {className: "p-6"},
                    React.createElement("p", {className: "text-gray-600 text-lg leading-relaxed"}, TUTORIAL_PASSOS[tutorialPasso]?.descricao),
                    React.createElement("div", {className: "flex justify-center gap-2 mt-6"},
                        TUTORIAL_PASSOS.map((_, idx) => 
                            React.createElement("div", {
                                key: idx,
                                className: "w-2 h-2 rounded-full transition-all " + (idx === tutorialPasso ? "bg-purple-600 w-6" : idx < tutorialPasso ? "bg-purple-300" : "bg-gray-300")
                            })
                        )
                    )
                ),
                // Bot√µes
                React.createElement("div", {className: "flex gap-3 p-6 pt-0"},
                    tutorialPasso > 0 && React.createElement("button", {
                        onClick: () => setTutorialPasso(tutorialPasso - 1),
                        className: "flex-1 px-6 py-3 border-2 border-purple-200 text-purple-700 rounded-xl font-semibold hover:bg-purple-50"
                    }, "‚Üê Anterior"),
                    React.createElement("button", {
                        onClick: () => {
                            if (tutorialPasso < TUTORIAL_PASSOS.length - 1) {
                                setTutorialPasso(tutorialPasso + 1);
                            } else {
                                setTutorialAtivo(false);
                                setTutorialPasso(0);
                                localStorage.setItem('tutts_tutorial_visto_' + l?.codProfissional, 'true');
                            }
                        },
                        className: "flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-purple-700 hover:to-indigo-700 shadow-lg"
                    }, tutorialPasso === TUTORIAL_PASSOS.length - 1 ? "Come√ßar! üöÄ" : "Pr√≥ximo ‚Üí")
                )
            )
        ),
        // Modal de Aviso
        avisoAtual && React.createElement("div", {
            className: "fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-2 md:p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[95vh] overflow-hidden flex flex-col"
        }, 
            React.createElement("div", {
                className: "bg-gradient-to-r from-teal-600 to-teal-700 p-6 text-white flex-shrink-0"
            }, React.createElement("h2", {className: "text-2xl md:text-3xl font-bold flex items-center gap-3"}, "üì¢ ", avisoAtual.titulo)),
            avisoAtual.imagem_url && React.createElement("div", {
                className: "flex-1 flex items-center justify-center bg-gray-100 p-4 overflow-auto"
            }, React.createElement("img", {
                src: avisoAtual.imagem_url,
                className: "max-w-full max-h-[60vh] object-contain rounded-lg shadow-lg"
            })),
            React.createElement("div", {className: "p-6 text-center flex-shrink-0 bg-gray-50"},
                React.createElement("button", {
                    onClick: fecharAviso,
                    className: "w-full max-w-md mx-auto px-8 py-4 bg-teal-600 text-white rounded-xl font-bold text-lg hover:bg-teal-700 shadow-lg hover:shadow-xl transition-all"
                }, "‚úÖ Entendi")
            )
        )),
        // Modal de notifica√ß√£o de tarefas pendentes
        todoNotifModal && todoPendentesNotif.length > 0 && React.createElement("div", {
            className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-orange-500 to-red-500 p-4 text-white"
        }, React.createElement("h2", {className: "text-xl font-bold flex items-center gap-2"}, "‚ö†Ô∏è Aten√ß√£o!"),
            React.createElement("p", {className: "text-orange-100 text-sm"}, "Voc√™ possui tarefas pendentes")
        ), React.createElement("div", {className: "p-4 max-h-60 overflow-y-auto"},
            React.createElement("p", {className: "text-gray-600 mb-3"}, "üìã ", todoPendentesNotif.length, " tarefa(s) precisam da sua aten√ß√£o:"),
            React.createElement("div", {className: "space-y-2"},
                todoPendentesNotif.slice(0, 5).map(t => React.createElement("div", {
                    key: t.id,
                    className: "bg-orange-50 border-l-4 border-orange-500 p-3 rounded"
                }, React.createElement("p", {className: "font-semibold text-gray-800"}, t.titulo),
                    t.data_prazo && React.createElement("p", {className: "text-xs text-orange-600"}, "üìÖ Vence: ", new Date(t.data_prazo).toLocaleDateString("pt-BR"))
                ))
            ),
            todoPendentesNotif.length > 5 && React.createElement("p", {className: "text-sm text-gray-500 mt-2"}, "... e mais ", todoPendentesNotif.length - 5, " tarefa(s)")
        ), React.createElement("div", {className: "flex gap-3 p-4 border-t"},
            React.createElement("button", {
                onClick: () => setTodoNotifModal(false),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "Fechar"),
            React.createElement("button", {
                onClick: () => { setTodoNotifModal(false); he("todo"); },
                className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "üìã Ir para Tarefas")
        ))),
        React.createElement("nav", {
            className: "bg-gradient-to-r from-purple-800 to-purple-900 shadow-lg"
        }, React.createElement("div", {
            className: "max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"
        }, React.createElement("div", {className: "flex items-center gap-3"}, 
            // Foto de perfil
            socialProfile?.profile_photo ? React.createElement("img", {
                src: socialProfile.profile_photo,
                className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
            }) : React.createElement("div", {
                className: "w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold border-2 border-white/50"
            }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
            React.createElement("div", null, React.createElement("h1", {
            className: "text-xl font-bold text-white"
        }, "Central do Entregador Tutts"), React.createElement("p", {
            className: "text-sm text-purple-200"
        }, socialProfile?.display_name || l.fullName))), React.createElement("div", {
            className: "flex gap-2"
        }, p.userTab && React.createElement("button", {
            onClick: () => x({
                ...p,
                userTab: null
            }),
            className: "px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 text-sm font-semibold"
        }, "üè† Menu"), React.createElement("button", {
            onClick: iniciarTutorial,
            className: "px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 text-sm font-semibold",
            title: "Ver tutorial"
        }, "‚ùì"), React.createElement("button", {
            onClick: ul,
            className: "px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 text-sm font-semibold"
        }, "üîÑ"), React.createElement("button", {
            onClick: () => o(null),
            className: "px-4 py-2 bg-white/10 text-white hover:bg-white/20 rounded-lg"
        }, "Sair")))), !p.userTab && React.createElement("div", {
            className: "max-w-2xl mx-auto p-6"
        }, 
        // ========== BOT√ÉO CONHE√áA A TUTTS ==========
        React.createElement("button", {
            onClick: () => setSobreTuttsAberto(true),
            className: "w-full mb-6 rounded-2xl p-5 flex items-center gap-4 shadow-lg hover:shadow-xl transition-all hover:scale-[1.02] group",
            style: { background: "linear-gradient(135deg, #550976 0%, #6b1190 50%, #550976 100%)" }
        },
            React.createElement("div", {
                className: "w-14 h-14 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",
                style: { backgroundColor: "#f37601" }
            }, React.createElement("span", {className: "text-3xl"}, "üöÄ")),
            React.createElement("div", {className: "text-left flex-1"},
                React.createElement("h3", {className: "text-lg font-bold text-white"}, "Conhe√ßa como funciona a Tutts"),
                React.createElement("p", {className: "text-sm", style: { color: "rgba(255,255,255,0.7)" }}, "Tudo sobre modalidades, taxas, incentivos e mais")
            ),
            React.createElement("span", {className: "text-2xl group-hover:translate-x-1 transition-transform", style: { color: "#f37601" }}, "‚Ä∫")
        ),
        
        // ========== MODAL LANDING PAGE COM ANIMA√á√ïES ==========
        sobreTuttsAberto && React.createElement("div", {
            className: "fixed inset-0 z-[100] overflow-y-auto",
            style: { background: "linear-gradient(180deg, #550976 0%, #3d0656 50%, #2a0340 100%)" }
        },
            // CSS para anima√ß√µes
            React.createElement("style", null, `
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translateY(40px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fadeInLeft {
                    from { opacity: 0; transform: translateX(-40px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                @keyframes fadeInRight {
                    from { opacity: 0; transform: translateX(40px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                @keyframes scaleIn {
                    from { opacity: 0; transform: scale(0.8); }
                    to { opacity: 1; transform: scale(1); }
                }
                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-10px); }
                }
                @keyframes pulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                }
                .animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }
                .animate-fadeInLeft { animation: fadeInLeft 0.6s ease-out forwards; }
                .animate-fadeInRight { animation: fadeInRight 0.6s ease-out forwards; }
                .animate-scaleIn { animation: scaleIn 0.5s ease-out forwards; }
                .animate-float { animation: float 3s ease-in-out infinite; }
                .animate-pulse-slow { animation: pulse 2s ease-in-out infinite; }
                .delay-100 { animation-delay: 0.1s; }
                .delay-200 { animation-delay: 0.2s; }
                .delay-300 { animation-delay: 0.3s; }
                .delay-400 { animation-delay: 0.4s; }
                .delay-500 { animation-delay: 0.5s; }
            `),
            
            // Header fixo
            React.createElement("div", {
                className: "sticky top-0 z-10 backdrop-blur-lg border-b border-white/10",
                style: { backgroundColor: "rgba(85, 9, 118, 0.95)" }
            },
                React.createElement("div", {className: "max-w-4xl mx-auto px-4 py-4 flex items-center justify-between"},
                    React.createElement("div", {className: "flex items-center gap-3"},
                        React.createElement("span", {className: "text-3xl animate-float"}, "üöÄ"),
                        React.createElement("h1", {className: "text-xl font-bold text-white"}, "Conhe√ßa a Tutts")
                    ),
                    React.createElement("button", {
                        onClick: () => setSobreTuttsAberto(false),
                        className: "w-10 h-10 rounded-full flex items-center justify-center text-white transition-all hover:scale-110 hover:rotate-90",
                        style: { backgroundColor: "#f37601" }
                    }, "‚úï")
                )
            ),
            
            // Conte√∫do da Landing Page
            React.createElement("div", {className: "max-w-4xl mx-auto px-4 py-8"},
                
                // Hero Section
                React.createElement("div", {className: "text-center mb-12 animate-fadeInUp"},
                    React.createElement("div", {
                        className: "w-24 h-24 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl animate-pulse-slow",
                        style: { backgroundColor: "#f37601" }
                    }, React.createElement("span", {className: "text-5xl"}, "üèçÔ∏è")),
                    React.createElement("h1", {className: "text-3xl md:text-4xl font-bold text-white mb-4"}, 
                        "Bem-vindo √† ", 
                        React.createElement("span", {style: { color: "#f37601" }}, "Tutts")
                    ),
                    React.createElement("p", {className: "text-lg max-w-2xl mx-auto leading-relaxed", style: { color: "rgba(255,255,255,0.8)" }},
                        "Atue de forma aut√¥noma, com flexibilidade e oportunidades reais de ganho, em um modelo pensado especialmente para o segmento de pe√ßas automotivas."
                    )
                ),
                
                // Se√ß√£o 1: Modelo de Trabalho
                React.createElement("div", {className: "mb-10 animate-fadeInUp", style: { animationDelay: "0.1s", opacity: 0, animationFillMode: "forwards" }},
                    React.createElement("div", {className: "flex items-center gap-3 mb-6"},
                        React.createElement("div", {
                            className: "w-10 h-10 rounded-xl flex items-center justify-center animate-pulse-slow",
                            style: { backgroundColor: "#f37601" }
                        },
                            React.createElement("span", {className: "text-xl"}, "üíº")
                        ),
                        React.createElement("h2", {className: "text-2xl font-bold text-white"}, "Modelo de Trabalho")
                    ),
                    React.createElement("p", {className: "mb-6", style: { color: "rgba(255,255,255,0.7)" }}, "Na Tutts, voc√™ pode rodar em duas modalidades:"),
                    React.createElement("div", {className: "grid md:grid-cols-2 gap-4"},
                        // Card Nuvem
                        React.createElement("div", {
                            className: "rounded-2xl p-6 border transition-all hover:scale-105 hover:shadow-2xl animate-fadeInLeft",
                            style: { backgroundColor: "rgba(255,255,255,0.1)", borderColor: "rgba(243,118,1,0.3)", animationDelay: "0.2s", opacity: 0, animationFillMode: "forwards" }
                        },
                            React.createElement("div", {className: "flex items-center gap-3 mb-4"},
                                React.createElement("div", {
                                    className: "w-12 h-12 rounded-xl flex items-center justify-center shadow-lg animate-float",
                                    style: { background: "linear-gradient(135deg, #3b82f6, #06b6d4)" }
                                },
                                    React.createElement("span", {className: "text-2xl"}, "‚òÅÔ∏è")
                                ),
                                React.createElement("h3", {className: "text-xl font-bold text-white"}, "Modalidade Nuvem")
                            ),
                            React.createElement("p", {className: "leading-relaxed", style: { color: "rgba(255,255,255,0.8)" }},
                                "Voc√™ permanece online no aplicativo e recebe pedidos eventuais, que aparecem diretamente na sua tela. ",
                                React.createElement("span", {className: "font-semibold", style: { color: "#f37601" }}, "Ideal para quem busca flexibilidade"),
                                " e quer rodar conforme a disponibilidade."
                            )
                        ),
                        // Card Dedicada
                        React.createElement("div", {
                            className: "rounded-2xl p-6 border transition-all hover:scale-105 hover:shadow-2xl animate-fadeInRight",
                            style: { backgroundColor: "rgba(255,255,255,0.1)", borderColor: "rgba(243,118,1,0.3)", animationDelay: "0.3s", opacity: 0, animationFillMode: "forwards" }
                        },
                            React.createElement("div", {className: "flex items-center gap-3 mb-4"},
                                React.createElement("div", {
                                    className: "w-12 h-12 rounded-xl flex items-center justify-center shadow-lg animate-float",
                                    style: { backgroundColor: "#f37601", animationDelay: "0.5s" }
                                },
                                    React.createElement("span", {className: "text-2xl"}, "üè™")
                                ),
                                React.createElement("h3", {className: "text-xl font-bold text-white"}, "Modalidade Dedicada")
                            ),
                            React.createElement("p", {className: "leading-relaxed", style: { color: "rgba(255,255,255,0.8)" }},
                                "A demanda √© direcionada para voc√™ durante o hor√°rio de atendimento da loja parceira. ",
                                React.createElement("span", {className: "font-semibold", style: { color: "#f37601" }}, "Opera√ß√£o mais previs√≠vel"),
                                ", com fluxo constante de entregas."
                            )
                        )
                    )
                ),
                
                // Se√ß√£o 2: Necessidade de Ba√∫
                React.createElement("div", {className: "mb-10 animate-fadeInUp", style: { animationDelay: "0.2s", opacity: 0, animationFillMode: "forwards" }},
                    React.createElement("div", {className: "flex items-center gap-3 mb-6"},
                        React.createElement("div", {
                            className: "w-10 h-10 rounded-xl flex items-center justify-center",
                            style: { backgroundColor: "#f37601" }
                        },
                            React.createElement("span", {className: "text-xl"}, "üì¶")
                        ),
                        React.createElement("h2", {className: "text-2xl font-bold text-white"}, "Necessidade de Ba√∫")
                    ),
                    React.createElement("div", {
                        className: "rounded-2xl p-6 border",
                        style: { backgroundColor: "rgba(243,118,1,0.15)", borderColor: "rgba(243,118,1,0.4)" }
                    },
                        // Imagem da moto com ba√∫ - LAZY LOADING
                        React.createElement("div", {className: "flex justify-center mb-6 animate-scaleIn", style: { animationDelay: "0.3s", opacity: 0, animationFillMode: "forwards" }},
                            React.createElement("img", {
                                src: "https://github.com/Leonardodevcloud/tutts-frontend/blob/main/Layer%200%20copy%20(1).png?raw=true",
                                alt: "Moto com ba√∫",
                                loading: "lazy",
                                decoding: "async",
                                className: "max-w-full h-auto max-h-52 object-contain rounded-xl shadow-2xl hover:scale-105 transition-transform"
                            })
                        ),
                        React.createElement("p", {className: "text-lg mb-6", style: { color: "rgba(255,255,255,0.9)" }},
                            "Como o foco √© o transporte de pe√ßas automotivas, ",
                            React.createElement("span", {className: "font-bold", style: { color: "#ff6b6b" }}, "n√£o √© permitido o uso de bags"),
                            ". √â ",
                            React.createElement("span", {className: "font-bold", style: { color: "#51cf66" }}, "obrigat√≥rio o uso de ba√∫ ou caixote"),
                            "."
                        ),
                        React.createElement("p", {className: "mb-4", style: { color: "rgba(255,255,255,0.7)" }}, "Essa exig√™ncia garante:"),
                        React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-3"},
                            [
                                {icon: "üõ°Ô∏è", text: "Maior seguran√ßa"},
                                {icon: "üì¶", text: "Mais volume"},
                                {icon: "üöÄ", text: "Mais entregas"},
                                {icon: "üí∞", text: "Mais ganhos"}
                            ].map((item, idx) => 
                                React.createElement("div", {
                                    key: idx,
                                    className: "rounded-xl p-4 text-center transition-all hover:scale-110 animate-fadeInUp",
                                    style: { backgroundColor: "rgba(85,9,118,0.5)", animationDelay: (0.4 + idx * 0.1) + "s", opacity: 0, animationFillMode: "forwards" }
                                },
                                    React.createElement("span", {className: "text-3xl block mb-2 animate-float", style: { animationDelay: idx * 0.2 + "s" }}, item.icon),
                                    React.createElement("span", {className: "text-white text-sm font-medium"}, item.text)
                                )
                            )
                        )
                    )
                ),
                
                // Se√ß√£o 3: Taxas Administrativas
                React.createElement("div", {className: "mb-10 animate-fadeInUp", style: { animationDelay: "0.3s", opacity: 0, animationFillMode: "forwards" }},
                    React.createElement("div", {className: "flex items-center gap-3 mb-6"},
                        React.createElement("div", {
                            className: "w-10 h-10 rounded-xl flex items-center justify-center animate-pulse-slow",
                            style: { backgroundColor: "#22c55e" }
                        },
                            React.createElement("span", {className: "text-xl"}, "üí∞")
                        ),
                        React.createElement("h2", {className: "text-2xl font-bold text-white"}, "Taxas Administrativas")
                    ),
                    React.createElement("div", {
                        className: "rounded-2xl p-6 border",
                        style: { backgroundColor: "rgba(34,197,94,0.15)", borderColor: "rgba(34,197,94,0.4)" }
                    },
                        React.createElement("p", {className: "text-lg mb-6", style: { color: "rgba(255,255,255,0.9)" }},
                            "Com a Tutts, seu dinheiro fica na palma da m√£o. Solicite o saque em ",
                            React.createElement("span", {className: "font-bold text-2xl", style: { color: "#f37601" }}, "at√© 1 hora"),
                            "!"
                        ),
                        React.createElement("div", {className: "grid md:grid-cols-2 gap-4 mb-6"},
                            React.createElement("div", {
                                className: "rounded-xl p-5",
                                style: { backgroundColor: "rgba(255,255,255,0.1)" }
                            },
                                React.createElement("div", {className: "flex items-center gap-3 mb-2"},
                                    React.createElement("span", {className: "text-2xl"}, "‚úÖ"),
                                    React.createElement("span", {className: "text-white font-bold"}, "Saque Emergencial")
                                ),
                                React.createElement("p", {style: { color: "rgba(255,255,255,0.8)" }}, "Libera√ß√£o de 100% do saldo dispon√≠vel")
                            ),
                            React.createElement("div", {
                                className: "rounded-xl p-5",
                                style: { backgroundColor: "rgba(255,255,255,0.1)" }
                            },
                                React.createElement("div", {className: "flex items-center gap-3 mb-2"},
                                    React.createElement("span", {className: "text-2xl"}, "üìä"),
                                    React.createElement("span", {className: "text-white font-bold"}, "Taxa Administrativa")
                                ),
                                React.createElement("p", {style: { color: "rgba(255,255,255,0.8)" }}, "Apenas ", React.createElement("span", {className: "font-bold text-xl", style: { color: "#f37601" }}, "4,5%"), " sobre o valor")
                            )
                        ),
                        React.createElement("div", {
                            className: "rounded-xl p-5 border",
                            style: { backgroundColor: "rgba(85,9,118,0.4)", borderColor: "rgba(243,118,1,0.3)" }
                        },
                            React.createElement("p", {className: "text-white flex items-start gap-3"},
                                React.createElement("span", {className: "text-2xl"}, "üéâ"),
                                React.createElement("span", null,
                                    "A Tutts frequentemente disponibiliza ",
                                    React.createElement("span", {className: "font-bold", style: { color: "#f37601" }}, "promo√ß√µes com isen√ß√£o dessa taxa"),
                                    ", aumentando ainda mais sua rentabilidade!"
                                )
                            )
                        )
                    )
                ),
                
                // Se√ß√£o 4: Canhotos
                React.createElement("div", {className: "mb-10 animate-fadeInUp", style: { animationDelay: "0.4s", opacity: 0, animationFillMode: "forwards" }},
                    React.createElement("div", {className: "flex items-center gap-3 mb-6"},
                        React.createElement("div", {
                            className: "w-10 h-10 rounded-xl flex items-center justify-center animate-pulse-slow",
                            style: { backgroundColor: "#550976" }
                        },
                            React.createElement("span", {className: "text-xl"}, "üìù")
                        ),
                        React.createElement("h2", {className: "text-2xl font-bold text-white"}, "Uso de Canhotos")
                    ),
                    React.createElement("div", {
                        className: "rounded-2xl p-6 border",
                        style: { backgroundColor: "rgba(85,9,118,0.3)", borderColor: "rgba(243,118,1,0.3)" }
                    },
                        React.createElement("p", {className: "text-lg mb-6", style: { color: "rgba(255,255,255,0.9)" }},
                            "√â ",
                            React.createElement("span", {className: "font-bold", style: { color: "#f37601" }}, "obrigat√≥rio o preenchimento do canhoto"),
                            " da nota fiscal pelo cliente."
                        ),
                        React.createElement("div", {className: "space-y-3 mb-6"},
                            [
                                {icon: "‚úçÔ∏è", text: "Canhoto leg√≠vel e sem rasuras"},
                                {icon: "üè™", text: "Devolver √† loja parceira"},
                                {icon: "üì∏", text: "Registrar foto no aplicativo"}
                            ].map((item, idx) => 
                                React.createElement("div", {
                                    key: idx,
                                    className: "rounded-xl p-4 flex items-center gap-4",
                                    style: { backgroundColor: "rgba(255,255,255,0.1)" }
                                },
                                    React.createElement("span", {className: "text-2xl"}, item.icon),
                                    React.createElement("span", {className: "text-white font-medium"}, item.text)
                                )
                            )
                        ),
                        React.createElement("div", {
                            className: "rounded-xl p-4 border",
                            style: { backgroundColor: "rgba(239,68,68,0.2)", borderColor: "rgba(239,68,68,0.4)" }
                        },
                            React.createElement("p", {className: "font-semibold flex items-center gap-2", style: { color: "#fca5a5" }},
                                React.createElement("span", {className: "text-xl"}, "‚ö†Ô∏è"),
                                "Somente com essas etapas a entrega ser√° validada!"
                            )
                        )
                    )
                ),
                
                // Se√ß√£o 5: Incentivos
                React.createElement("div", {className: "mb-10 animate-fadeInUp", style: { animationDelay: "0.5s", opacity: 0, animationFillMode: "forwards" }},
                    React.createElement("div", {className: "flex items-center gap-3 mb-6"},
                        React.createElement("div", {
                            className: "w-10 h-10 rounded-xl flex items-center justify-center animate-pulse-slow",
                            style: { backgroundColor: "#f37601" }
                        },
                            React.createElement("span", {className: "text-xl"}, "üéØ")
                        ),
                        React.createElement("h2", {className: "text-2xl font-bold text-white"}, "Sistema de Incentivos")
                    ),
                    React.createElement("div", {
                        className: "rounded-2xl p-6 border",
                        style: { backgroundColor: "rgba(243,118,1,0.15)", borderColor: "rgba(243,118,1,0.4)" }
                    },
                        React.createElement("p", {className: "text-lg mb-6", style: { color: "rgba(255,255,255,0.9)" }},
                            "A Tutts conta com um sistema de ",
                            React.createElement("span", {className: "font-bold", style: { color: "#f37601" }}, "incentivos progressivos"),
                            ", liberado conforme voc√™ avan√ßa e se mant√©m ativo."
                        ),
                        React.createElement("div", {
                            className: "rounded-xl p-5 border mb-6",
                            style: { backgroundColor: "rgba(85,9,118,0.4)", borderColor: "rgba(243,118,1,0.3)" }
                        },
                            React.createElement("p", {className: "font-semibold mb-4 flex items-center gap-2", style: { color: "#f37601" }},
                                React.createElement("span", {className: "text-xl"}, "üì¢"),
                                "Fique atento:"
                            ),
                            React.createElement("div", {className: "flex flex-wrap gap-3"},
                                ["Grupos oficiais", "Status", "Avisos na Central"].map((item, idx) => 
                                    React.createElement("span", {
                                        key: idx,
                                        className: "px-4 py-2 rounded-full text-white font-medium",
                                        style: { backgroundColor: "rgba(255,255,255,0.15)" }
                                    }, item)
                                )
                            )
                        ),
                        React.createElement("div", {
                            className: "rounded-xl p-6 text-center",
                            style: { background: "linear-gradient(135deg, #f37601 0%, #ff9f43 100%)" }
                        },
                            React.createElement("p", {className: "text-white text-xl font-bold mb-2"},
                                "üöÄ Promo√ß√µes e incentivos para impulsionar seus ganhos!"
                            ),
                            React.createElement("p", {style: { color: "rgba(255,255,255,0.9)" }},
                                "Acompanhe de perto e aproveite cada oportunidade."
                            )
                        )
                    )
                ),
                
                // Bot√£o Fechar
                React.createElement("div", {className: "text-center pt-6 pb-10"},
                    React.createElement("button", {
                        onClick: () => setSobreTuttsAberto(false),
                        className: "px-8 py-4 text-white font-bold text-lg rounded-2xl shadow-lg hover:shadow-xl transition-all hover:scale-105",
                        style: { background: "linear-gradient(135deg, #f37601 0%, #ff6b35 100%)" }
                    }, "‚úÖ Entendi, vamos come√ßar!")
                )
            )
        ),
        
        // ========== FIM LANDING PAGE ==========
        
        React.createElement("div", {
            className: "text-center mb-8"
        }, React.createElement("h2", {
            className: "text-2xl font-bold text-gray-800"
        }, "Ol√°, ", l.fullName?.split(" ")[0], "! üëã"), React.createElement("p", {
            className: "text-gray-600 mt-1"
        }, "O que voc√™ precisa fazer hoje?")), React.createElement("div", {
            className: "space-y-4"
        }, (() => {
            // Nova l√≥gica: usa elegibilidade do backend
            // Mostra se eleg√≠vel OU se ainda est√° carregando (para n√£o piscar)
            if (!l || !l.codProfissional) return !1;
            if (elegibilidadeNovatos.carregando) return !1;
            return elegibilidadeNovatos.elegivel;
        })() && React.createElement("button", {
            onClick: () => {
                verificarElegibilidadeNovatos(); // Recarrega ao clicar
                x({
                ...p,
                userTab: "promo-novatos"
            })},
            className: "w-full bg-white rounded-2xl shadow-lg p-6 flex items-center gap-4 hover:shadow-xl transition-all hover:scale-[1.02] border-l-4 border-orange-500"
        }, React.createElement("div", {
            className: "w-16 h-16 bg-orange-100 rounded-xl flex items-center justify-center text-3xl"
        }, "üöÄ"), React.createElement("div", {
            className: "text-left flex-1"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-gray-800"
        }, "Promo√ß√µes Novatos"), React.createElement("p", {
            className: "text-sm text-gray-500"
        }, elegibilidadeNovatos.motivo || "Promo√ß√µes especiais para voc√™!"), React.createElement("div", {
            className: "flex gap-2 mt-1 flex-wrap"
        }, elegibilidadeNovatos.promocoes && elegibilidadeNovatos.promocoes.length > 0 && React.createElement("span", {
            className: "inline-block px-2 py-0.5 bg-orange-500 text-white text-xs rounded-full"
        }, elegibilidadeNovatos.promocoes.length, " promo√ß√£o(√µes)"), elegibilidadeNovatos.diasSemEntrega !== null && elegibilidadeNovatos.diasSemEntrega !== undefined && React.createElement("span", {
            className: "inline-block px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full font-semibold"
        }, "üìÖ ", elegibilidadeNovatos.diasSemEntrega, " dias sem entregas"))), React.createElement("span", {
            className: "text-orange-400 text-2xl"
        }, "‚Ä∫")), React.createElement("button", {
            onClick: () => x({
                ...p,
                userTab: "solicitacoes"
            }),
            className: "w-full bg-white rounded-2xl shadow-lg p-6 flex items-center gap-4 hover:shadow-xl transition-all hover:scale-[1.02] border-l-4 border-purple-600"
        }, React.createElement("div", {
            className: "w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center text-3xl"
        }, "üìã"), React.createElement("div", {
            className: "text-left flex-1"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-gray-800"
        }, "Solicitar Ajuste"), React.createElement("p", {
            className: "text-sm text-gray-500"
        }, "Retornos e Ped√°gios")), React.createElement("span", {
            className: "text-purple-400 text-2xl"
        }, "‚Ä∫")), React.createElement("button", {
            onClick: () => x({
                ...p,
                userTab: "saque"
            }),
            className: "w-full bg-white rounded-2xl shadow-lg p-6 flex items-center gap-4 hover:shadow-xl transition-all hover:scale-[1.02] border-l-4 border-green-600"
        }, React.createElement("div", {
            className: "w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center text-3xl"
        }, "üí∞"), React.createElement("div", {
            className: "text-left flex-1"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-gray-800"
        }, "Saque Emergencial"), React.createElement("p", {
            className: "text-sm text-gray-500"
        }, "Solicitar adiantamento")), React.createElement("span", {
            className: "text-green-400 text-2xl"
        }, "‚Ä∫")), React.createElement("button", {
            onClick: () => x({
                ...p,
                userTab: "indicacoes"
            }),
            className: "w-full bg-white rounded-2xl shadow-lg p-6 flex items-center gap-4 hover:shadow-xl transition-all hover:scale-[1.02] border-l-4 border-blue-600"
        }, React.createElement("div", {
            className: "w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center text-3xl"
        }, "üë•"), React.createElement("div", {
            className: "text-left flex-1"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-gray-800"
        }, "Promo√ß√£o de Indica√ß√£o"), React.createElement("p", {
            className: "text-sm text-gray-500"
        }, "Indique amigos e ganhe b√¥nus"), ee.length > 0 && React.createElement("span", {
            className: "inline-block mt-1 px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full"
        }, ee.length, " promo√ß√£o(√µes) ativa(s)")), React.createElement("span", {
            className: "text-blue-400 text-2xl"
        }, "‚Ä∫")), React.createElement("button", {
            onClick: () => x({
                ...p,
                userTab: "seguro-iza"
            }),
            className: "w-full bg-white rounded-2xl shadow-lg p-6 flex items-center gap-4 hover:shadow-xl transition-all hover:scale-[1.02] border-l-4 border-cyan-500"
        }, React.createElement("div", {
            className: "w-16 h-16 bg-cyan-100 rounded-xl flex items-center justify-center text-3xl"
        }, "üõ°Ô∏è"), React.createElement("div", {
            className: "text-left flex-1"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-gray-800"
        }, "Seguro de Vida - IZA"), React.createElement("p", {
            className: "text-sm text-gray-500"
        }, "Coberturas, valores e como acionar")), React.createElement("span", {
            className: "text-cyan-400 text-2xl"
        }, "‚Ä∫")), React.createElement("button", {
            onClick: () => {
                ot(!0), st(0), Ga(), Za(), x({
                    ...p,
                    userTab: "loja"
                })
            },
            className: "w-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl shadow-lg p-6 flex items-center gap-4 hover:shadow-xl transition-all hover:scale-[1.02]"
        }, React.createElement("div", {
            className: "w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center text-3xl"
        }, "üõí"), React.createElement("div", {
            className: "text-left flex-1"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-white"
        }, "Lojinha Tutts"), React.createElement("p", {
            className: "text-sm text-white/80"
        }, "Ofertas exclusivas com abatimento no saldo!")), React.createElement("span", {
            className: "text-white/60 text-2xl"
        }, "‚Ä∫"))), React.createElement("div", {
            className: "mt-8 grid grid-cols-3 gap-4"
        }, React.createElement("div", {
            className: "bg-white rounded-xl p-4 text-center shadow"
        }, React.createElement("p", {
            className: "text-2xl font-bold text-purple-600"
        }, j.filter(e => "pendente" === e.status).length), React.createElement("p", {
            className: "text-xs text-gray-500"
        }, "Ajustes Pendentes")), React.createElement("div", {
            className: "bg-white rounded-xl p-4 text-center shadow"
        }, React.createElement("p", {
            className: "text-2xl font-bold text-green-600"
        }, M.filter(e => "aguardando_aprovacao" === e.status).length), React.createElement("p", {
            className: "text-xs text-gray-500"
        }, "Saques Pendentes")), React.createElement("div", {
            className: "bg-white rounded-xl p-4 text-center shadow"
        }, React.createElement("p", {
            className: "text-2xl font-bold text-blue-600"
        }, re.filter(e => "pendente" === e.status).length), React.createElement("p", {
            className: "text-xs text-gray-500"
        }, "Indica√ß√µes Pendentes")))), p.userTab && React.createElement("div", {
            className: "max-w-4xl mx-auto p-6"
        }, React.createElement("div", {
            className: "flex items-center gap-4 mb-6"
        }, React.createElement("button", {
            onClick: () => x({
                ...p,
                userTab: null
            }),
            className: "p-2 bg-white rounded-lg shadow hover:bg-gray-50"
        }, "‚Üê Voltar"), React.createElement("h1", {
            className: "text-xl font-bold text-gray-800"
        }, "solicitacoes" === p.userTab && "üìã Solicitar Ajuste", "saque" === p.userTab && "üí∞ Saque Emergencial", "indicacoes" === p.userTab && "üë• Promo√ß√£o de Indica√ß√£o", "promo-novatos" === p.userTab && "üöÄ Promo√ß√µes Novatos", "seguro-iza" === p.userTab && "üõ°Ô∏è Seguro de Vida - IZA", "loja" === p.userTab && "üõí Lojinha Tutts")), "solicitacoes" === p.userTab && React.createElement(React.Fragment, null, React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6 mb-6"
        }, React.createElement("h2", {
            className: "text-lg font-semibold mb-4"
        }, "üìù Enviar OS"), React.createElement("div", {
            className: "space-y-4"
        }, React.createElement("input", {
            type: "text",
            placeholder: "N√∫mero da OS",
            value: p.os || "",
            onChange: e => x({
                ...p,
                os: e.target.value
            }),
            className: "w-full px-4 py-3 border rounded-lg"
        }), React.createElement("select", {
            value: p.motivo || "",
            onChange: e => {
                const t = e.target.value;
                x({
                    ...p,
                    motivo: t,
                    imagens: []
                })
            },
            className: "w-full px-4 py-3 border rounded-lg"
        }, React.createElement("option", {
            value: ""
        }, "Selecione o motivo"), React.createElement("option", null, "Ajuste de Retorno"), React.createElement("option", null, "Ajuste de Ped√°gio (Campinas e Recife)")), Wl.includes(p.motivo) && React.createElement("div", {
            className: "border-2 border-dashed border-orange-300 bg-orange-50 rounded-lg p-4"
        }, React.createElement("p", {
            className: "text-sm font-bold text-orange-800 mb-2"
        }, "üìé Fotos OBRIGAT√ìRIAS (m√°x. 2)"), React.createElement("input", {
            type: "file",
            accept: "image/*",
            multiple: !0,
            onChange: async e => {
                const t = Array.from(e.target.files).slice(0, 2);
                if (t.length) {
                    s(!0);
                    try {
                        const e = [];
                        for (const a of t) {
                            if (a.size > 25 * 1024 * 1024) {
                                ja("Imagem muito grande! M√°ximo 25MB por foto", "error");
                                continue;
                            }
                            e.push(await Zl(a));
                        }
                        if (e.length > 0) {
                            x({
                                ...p,
                                imagens: [...p.imagens || [], ...e].slice(0, 2)
                            }), ja("‚úÖ Imagem adicionada!", "success")
                        }
                    } catch {
                        ja("Erro ao processar imagem", "error")
                    }
                    s(!1), e.target.value = ""
                }
            },
            className: "w-full text-sm"
        }), p.imagens?.length > 0 && React.createElement("div", {
            className: "mt-3 flex gap-2"
        }, p.imagens.map((e, t) => React.createElement("div", {
            key: t,
            className: "relative"
        }, React.createElement("img", {
            src: e,
            className: "h-24 rounded border"
        }), React.createElement("button", {
            onClick: () => x({
                ...p,
                imagens: p.imagens.filter((e, a) => a !== t)
            }),
            className: "absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 text-xs"
        }, "‚úï")))), React.createElement("p", {
            className: "text-xs text-gray-500 mt-2"
        }, p.imagens?.length || 0, "/2 fotos")), React.createElement("button", {
            onClick: Yl,
            disabled: c || !p.os || !p.motivo || Wl.includes(p.motivo) && !p.imagens?.length,
            className: "w-full bg-purple-900 text-white py-3 rounded-lg font-semibold disabled:opacity-50"
        }, c ? "‚è≥ Enviando..." : "Enviar"))), React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-semibold mb-4"
        }, "üìã Minhas Submiss√µes"), 0 === j.length ? React.createElement("p", {
            className: "text-gray-500"
        }, "Nenhuma submiss√£o") : React.createElement("div", {
            className: "space-y-3"
        }, j.map(e => React.createElement("div", {
            key: e.id,
            className: "border rounded-lg p-4"
        }, React.createElement("div", {
            className: "flex justify-between items-start"
        }, React.createElement("div", null, React.createElement("p", {
            className: "font-mono text-lg font-bold"
        }, "OS: ", e.ordemServico), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, e.motivo)), React.createElement("span", {
            className: "px-3 py-1 rounded-full text-xs font-bold " + ("aprovada" === e.status ? "bg-green-500 text-white" : "rejeitada" === e.status ? "bg-red-500 text-white" : "bg-yellow-500 text-white")
        }, e.status?.toUpperCase())), "rejeitada" === e.status && e.observacao && React.createElement("div", {
            className: "mt-2 p-2 bg-red-50 border border-red-200 rounded"
        }, React.createElement("p", {
            className: "text-xs text-red-800"
        }, React.createElement("strong", null, "Motivo da rejei√ß√£o:"), " ", e.observacao)), e.temImagem && !e.imagemComprovante && React.createElement("button", {
            onClick: () => Fa(e.id),
            className: "mt-2 text-sm text-blue-600 hover:underline"
        }, "üì∑ Ver foto(s)"), e.imagemComprovante && React.createElement("div", {
            className: "mt-2 flex gap-2"
        }, e.imagemComprovante.split("|||").map((e, t) => React.createElement("img", {
            key: t,
            src: e,
            className: "h-20 rounded cursor-pointer",
            onClick: () => g(e)
        }))), React.createElement("p", {
            className: "text-xs text-gray-400 mt-2"
        }, e.timestamp)))))), "saque" === p.userTab && React.createElement(React.Fragment, null, null === ze ? React.createElement("div", {
            className: "flex items-center justify-center py-12"
        }, React.createElement("div", {
            className: "animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"
        }), React.createElement("span", {
            className: "ml-3"
        }, "Verificando hor√°rio...")) : ze.dentroHorario || Ge ? React.createElement(React.Fragment, null, Qe.length > 0 && React.createElement("div", {
            className: "space-y-2 mb-4"
        }, Qe.map(e => React.createElement("div", {
            key: e.id,
            className: "p-3 rounded-xl border-l-4 " + ("error" === e.tipo ? "bg-red-50 border-red-500" : "warning" === e.tipo ? "bg-yellow-50 border-yellow-500" : "success" === e.tipo ? "bg-green-50 border-green-500" : "bg-blue-50 border-blue-500")
        }, React.createElement("p", {
            className: "font-bold text-sm"
        }, e.titulo), React.createElement("p", {
            className: "text-xs text-gray-700"
        }, e.mensagem)))), ze && !ze.dentroHorario && Ge && React.createElement("div", {
            className: "bg-orange-100 border border-orange-300 rounded-xl p-3 mb-4 flex items-center gap-3"
        }, React.createElement("span", {
            className: "text-2xl"
        }, "‚è∞"), React.createElement("div", null, React.createElement("p", {
            className: "text-sm font-semibold text-orange-800"
        }, "Solicita√ß√£o fora do hor√°rio"), React.createElement("p", {
            className: "text-xs text-orange-700"
        }, "Ser√° processada ", yl()))), k ? T?.full_name ? React.createElement(React.Fragment, null, React.createElement("div", {
            className: "bg-white rounded-xl shadow mb-6"
        }, React.createElement("div", {
            className: "flex border-b overflow-x-auto"
        }, React.createElement("button", {
            onClick: () => x({
                ...p,
                saqueTab: "solicitar"
            }),
            className: "flex-1 py-3 font-semibold whitespace-nowrap px-2 " + (p.saqueTab && "solicitar" !== p.saqueTab ? "text-gray-500" : "text-green-700 border-b-2 border-green-600")
        }, "üí∞ Solicitar"), React.createElement("button", {
            onClick: () => x({
                ...p,
                saqueTab: "gratuidades"
            }),
            className: "flex-1 py-3 font-semibold whitespace-nowrap px-2 " + ("gratuidades" === p.saqueTab ? "text-pink-700 border-b-2 border-pink-600" : "text-gray-500")
        }, "üéÅ Gratuidades"), React.createElement("button", {
            onClick: () => x({
                ...p,
                saqueTab: "dados"
            }),
            className: "flex-1 py-3 font-semibold whitespace-nowrap px-2 " + ("dados" === p.saqueTab ? "text-blue-700 border-b-2 border-blue-600" : "text-gray-500")
        }, "üë§ Dados"), React.createElement("button", {
            onClick: () => x({
                ...p,
                saqueTab: "dashboard"
            }),
            className: "flex-1 py-3 font-semibold whitespace-nowrap px-2 " + ("dashboard" === p.saqueTab ? "text-purple-700 border-b-2 border-purple-600" : "text-gray-500")
        }, "üìä Dashboard")), React.createElement("div", {
            className: "p-6"
        }, "dashboard" === p.saqueTab && React.createElement(React.Fragment, null, (() => {
            const e = new Date,
                t = e.getMonth(),
                a = e.getFullYear(),
                l = M.filter(e => {
                    const l = new Date(e.created_at);
                    return l.getMonth() === t && l.getFullYear() === a
                }),
                r = l.filter(e => "aprovado" === e.status || "aprovado_gratuidade" === e.status),
                o = r.reduce((e, t) => e + parseFloat(t.final_amount || 0), 0),
                c = G.reduce((e, t) => e + (t.quantity - t.remaining), 0),
                s = G.reduce((e, t) => e + t.quantity, 0),
                n = [];
            for (let e = 5; e >= 0; e--) {
                const l = new Date(a, t - e, 1),
                    r = l.getMonth(),
                    o = l.getFullYear(),
                    c = M.filter(e => {
                        const t = new Date(e.created_at);
                        return t.getMonth() === r && t.getFullYear() === o && ("aprovado" === e.status || "aprovado_gratuidade" === e.status)
                    }),
                    s = c.reduce((e, t) => e + parseFloat(t.final_amount || 0), 0);
                n.push({
                    mes: l.toLocaleDateString("pt-BR", {
                        month: "short"
                    }).replace(".", ""),
                    valor: s,
                    qtd: c.length
                })
            }
            const m = Math.max(...n.map(e => e.valor), 1),
                i = M.filter(e => "aprovado" === e.status || "aprovado_gratuidade" === e.status).reduce((e, t) => e + parseFloat(t.final_amount || 0), 0),
                d = r.length > 0 ? o / r.length : 0;
            return React.createElement("div", {
                className: "space-y-6"
            }, React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-3 gap-4"
            }, React.createElement("div", {
                className: "bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 text-white"
            }, React.createElement("p", {
                className: "text-xs opacity-80"
            }, "üí∞ Sacado este m√™s"), React.createElement("p", {
                className: "text-2xl font-bold mt-1"
            }, er(o)), React.createElement("p", {
                className: "text-xs opacity-70 mt-1"
            }, r.length, " saque(s)")), React.createElement("div", {
                className: "bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl p-4 text-white"
            }, React.createElement("p", {
                className: "text-xs opacity-80"
            }, "üéÅ Gratuidades"), React.createElement("p", {
                className: "text-2xl font-bold mt-1"
            }, c, "/", s), React.createElement("p", {
                className: "text-xs opacity-70 mt-1"
            }, "usadas/total")), React.createElement("div", {
                className: "bg-gradient-to-br from-orange-500 to-red-500 rounded-xl p-4 text-white"
            }, React.createElement("p", {
                className: "text-xs opacity-80"
            }, "üìà Total Hist√≥rico"), React.createElement("p", {
                className: "text-2xl font-bold mt-1"
            }, er(i)), React.createElement("p", {
                className: "text-xs opacity-70 mt-1"
            }, "todos os tempos"))), React.createElement("div", {
                className: "bg-white border rounded-xl p-4"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üìä Hist√≥rico de Saques (√öltimos 6 meses)"), React.createElement("div", {
                className: "flex items-end justify-between gap-2 h-48"
            }, n.map((e, t) => React.createElement("div", {
                key: t,
                className: "flex-1 flex flex-col items-center"
            }, React.createElement("span", {
                className: "text-xs text-gray-600 mb-1"
            }, er(e.valor)), React.createElement("div", {
                className: "w-full bg-gradient-to-t from-green-500 to-emerald-400 rounded-t-lg transition-all duration-500",
                style: {
                    height: `${Math.max(e.valor/m*100,5)}%`,
                    minHeight: "20px"
                }
            }), React.createElement("span", {
                className: "text-xs font-semibold mt-2 text-gray-700"
            }, e.mes), React.createElement("span", {
                className: "text-xs text-gray-500"
            }, e.qtd, " saque(s)"))))), React.createElement("div", {
                className: "bg-gray-50 rounded-xl p-4"
            }, React.createElement("h3", {
                className: "font-semibold mb-3"
            }, "üìã Resumo do M√™s"), React.createElement("div", {
                className: "grid grid-cols-2 gap-4 text-sm"
            }, React.createElement("div", {
                className: "flex justify-between"
            }, React.createElement("span", {
                className: "text-gray-600"
            }, "M√©dia por saque:"), React.createElement("span", {
                className: "font-semibold"
            }, er(d))), React.createElement("div", {
                className: "flex justify-between"
            }, React.createElement("span", {
                className: "text-gray-600"
            }, "Pendentes:"), React.createElement("span", {
                className: "font-semibold text-yellow-600"
            }, l.filter(e => "aguardando_aprovacao" === e.status).length)), React.createElement("div", {
                className: "flex justify-between"
            }, React.createElement("span", {
                className: "text-gray-600"
            }, "Aprovados:"), React.createElement("span", {
                className: "font-semibold text-green-600"
            }, r.length)), React.createElement("div", {
                className: "flex justify-between"
            }, React.createElement("span", {
                className: "text-gray-600"
            }, "Rejeitados:"), React.createElement("span", {
                className: "font-semibold text-red-600"
            }, l.filter(e => "rejeitado" === e.status).length)))))
        })()), (!p.saqueTab || "solicitar" === p.saqueTab) && React.createElement(React.Fragment, null, (() => {
            const e = G.find(e => "ativa" === e.status && e.remaining > 0),
                t = !!e,
                a = e ? parseFloat(e.value) : 0,
                l = parseFloat(p.withdrawAmount) || 0,
                r = t && l > a,
                o = new Date,
                s = new Date(o.getTime() - 36e5),
                n = M.filter(e => new Date(e.created_at) >= s),
                m = Math.max(0, 2 - n.length),
                i = n.map(e => parseFloat(e.requested_amount)),
                d = i.includes(l) && l > 0;
            
            // Calcular saldo dispon√≠vel (saldo real - saques pendentes)
            const saquesPend = M.filter(sq => sq.status === "pending" || sq.status === "aguardando_aprovacao");
            const totalPend = saquesPend.reduce((acc, sq) => acc + parseFloat(sq.requested_amount || 0), 0);
            const saldoDisp = saldoPlificUser.saldo !== null ? Math.max(0, saldoPlificUser.saldo - totalPend) : null;
            let u = null;
            if (n.length >= 2) {
                const e = new Date(Math.min(...n.map(e => new Date(e.created_at).getTime()))),
                    t = new Date(e.getTime() + 36e5) - o;
                t > 0 && (u = Math.ceil(t / 6e4))
            }
            return React.createElement("div", {
                className: "space-y-4"
            }, 
            // Card Saldo Plific
            React.createElement("div", {
                className: "rounded-xl p-4 border-2 " + (saldoPlificUser.loading ? "bg-gray-50 border-gray-200" : saldoPlificUser.erro ? "bg-red-50 border-red-300" : saldoDisp !== null && saldoDisp <= 0 ? "bg-red-50 border-red-300" : "bg-purple-50 border-purple-300")
            }, 
                React.createElement("div", {className: "flex items-center justify-between"},
                    React.createElement("div", {className: "flex items-center gap-3"},
                        React.createElement("span", {className: "text-3xl"}, "üí∞"),
                        React.createElement("div", null,
                            React.createElement("p", {className: "text-sm font-medium text-gray-600"}, "Seu Saldo Dispon√≠vel"),
                            saldoPlificUser.loading ? 
                                React.createElement("p", {className: "text-lg font-bold text-gray-400"}, "Carregando...") :
                            saldoPlificUser.erro ?
                                React.createElement("p", {className: "text-lg font-bold text-red-600"}, "Erro ao carregar") :
                            saldoDisp !== null ?
                                React.createElement("p", {className: "text-2xl font-bold " + (saldoDisp > 0 ? "text-green-600" : "text-red-600")}, "R$ " + saldoDisp.toFixed(2).replace(".", ",")) :
                                React.createElement("p", {className: "text-lg font-bold text-gray-400"}, "N√£o dispon√≠vel")
                        )
                    ),
                    React.createElement("button", {
                        onClick: function() { buscarSaldoPlificUsuario(true); },
                        disabled: saldoPlificUser.loading,
                        className: "p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors"
                    }, "üîÑ")
                ),
                totalPend > 0 && React.createElement("p", {
                    className: "text-xs text-purple-600 mt-2"
                }, "üìã R$ " + totalPend.toFixed(2).replace(".", ",") + " em saques aguardando aprova√ß√£o"),
                saldoDisp !== null && saldoDisp <= 0 && React.createElement("p", {
                    className: "text-sm text-red-600 mt-2 font-medium"
                }, "‚ö†Ô∏è Voc√™ n√£o possui saldo suficiente para solicitar saque emergencial.")
            ),
            React.createElement("div", {
                className: "rounded-lg p-4 border " + (0 === m ? "bg-red-50 border-red-300" : 1 === m ? "bg-orange-50 border-orange-300" : "bg-blue-50 border-blue-300")
            }, React.createElement("div", {
                className: "flex items-center justify-between"
            }, React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("span", {
                className: "text-2xl"
            }, 0 === m ? "üö´" : 1 === m ? "‚ö†Ô∏è" : "‚úÖ"), React.createElement("div", null, React.createElement("p", {
                className: "font-semibold " + (0 === m ? "text-red-800" : 1 === m ? "text-orange-800" : "text-blue-800")
            }, 0 === m ? "Limite atingido" : `${m} saque(s) dispon√≠vel(is)`), React.createElement("p", {
                className: "text-xs " + (0 === m ? "text-red-600" : 1 === m ? "text-orange-600" : "text-blue-600")
            }, 0 === m ? `Aguarde ${u||"?"} min para solicitar novamente` : "M√°ximo 2 saques por hora com valores diferentes"))), React.createElement("div", {
                className: "flex gap-1"
            }, [0, 1].map(e => React.createElement("div", {
                key: e,
                className: "w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold " + (e < n.length ? "bg-gray-400 text-white" : "bg-green-500 text-white")
            }, e < n.length ? "‚úì" : e + 1 - n.length)))), i.length > 0 && React.createElement("p", {
                className: "text-xs mt-2 text-gray-600"
            }, "Valores j√° usados na √∫ltima hora: ", i.map(e => `R$ ${e.toFixed(2)}`).join(", "))), t && React.createElement("div", {
                className: "bg-green-50 border border-green-300 rounded-lg p-4"
            }, React.createElement("p", {
                className: "text-green-800 font-semibold"
            }, "üéÅ Voc√™ possui gratuidade ativa!"), React.createElement("p", {
                className: "text-green-700 text-sm mt-1"
            }, "Valor m√°ximo permitido: ", React.createElement("strong", null, er(a))), React.createElement("p", {
                className: "text-green-600 text-xs mt-1"
            }, "Restam ", e.remaining, " uso(s) desta gratuidade")), !t && React.createElement("div", {
                className: "bg-yellow-50 border border-yellow-300 rounded-lg p-4"
            }, React.createElement("p", {
                className: "text-yellow-800 font-semibold"
            }, "‚ö†Ô∏è Aten√ß√£o!"), React.createElement("p", {
                className: "text-yellow-700 text-sm mt-1"
            }, "Conforme termo de uso do saque emergencial, ser√° cobrado um valor de ", React.createElement("strong", null, "4,5%"), " na solicita√ß√£o.")), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Valor ", t && React.createElement("span", {
                className: "text-green-600 text-xs"
            }, "(m√°x: ", er(a), ")"), React.createElement("span", {
                className: "text-gray-500 text-xs ml-1"
            }, "(m√≠n: R$ 10,00)")), React.createElement("input", {
                type: "text",
                inputMode: "decimal",
                value: p.withdrawAmount || "",
                onChange: e => {
                    // Permite apenas n√∫meros e v√≠rgula/ponto para decimais
                    let val = e.target.value;
                    // Remove caracteres inv√°lidos (permite n√∫meros, v√≠rgula e ponto)
                    val = val.replace(/[^0-9.,]/g, '');
                    // Substitui v√≠rgula por ponto para c√°lculos
                    val = val.replace(',', '.');
                    // Garante apenas um ponto decimal
                    const parts = val.split('.');
                    if (parts.length > 2) {
                        val = parts[0] + '.' + parts.slice(1).join('');
                    }
                    // Limita a 2 casas decimais
                    if (parts.length === 2 && parts[1].length > 2) {
                        val = parts[0] + '.' + parts[1].substring(0, 2);
                    }
                    x({...p, withdrawAmount: val});
                },
                placeholder: "Ex: 50,00",
                className: "w-full px-4 py-3 border rounded-lg text-lg " + (r || d || (p.withdrawAmount && parseFloat(p.withdrawAmount) < 10) ? "border-red-500 bg-red-50" : ""),
                disabled: 0 === m || (saldoDisp !== null && saldoDisp <= 0)
            }), p.withdrawAmount && parseFloat(p.withdrawAmount) > 0 && parseFloat(p.withdrawAmount) < 10 && React.createElement("p", {
                className: "text-red-600 text-sm mt-1 font-semibold"
            }, "‚ùå Valor m√≠nimo √© R$ 10,00"), r && React.createElement("p", {
                className: "text-red-600 text-sm mt-1 font-semibold"
            }, "‚ùå Valor excede o limite da gratuidade (", er(a), ")"), d && !r && React.createElement("p", {
                className: "text-red-600 text-sm mt-1 font-semibold"
            }, "‚ùå Voc√™ j√° solicitou R$ ", l.toFixed(2), " na √∫ltima hora. Escolha outro valor.")), saldoDisp !== null && parseFloat(p.withdrawAmount || 0) > saldoDisp && React.createElement("p", {
                className: "text-red-600 text-sm mt-1 font-semibold"
            }, "‚ùå Valor excede seu saldo dispon√≠vel (R$ " + saldoDisp.toFixed(2).replace(".", ",") + ")"), p.withdrawAmount && parseFloat(p.withdrawAmount) >= 10 && !r && !d && (() => {
                const e = (e => {
                    const t = G.find(e => "ativa" === e.status && e.remaining > 0),
                        a = !!t,
                        l = a ? 0 : .045 * e;
                    return {
                        fee: l,
                        final: e - l,
                        hasGrat: a,
                        maxGratValue: t ? parseFloat(t.value) : 0,
                        gratAtiva: t
                    }
                })(parseFloat(p.withdrawAmount));
                return React.createElement("div", {
                    className: "bg-gray-50 rounded-lg p-4 space-y-2"
                }, React.createElement("div", {
                    className: "flex justify-between"
                }, React.createElement("span", null, "Solicitado:"), React.createElement("span", {
                    className: "font-bold"
                }, er(p.withdrawAmount))), React.createElement("div", {
                    className: "flex justify-between"
                }, React.createElement("span", null, "Taxa:"), React.createElement("span", {
                    className: e.hasGrat ? "text-green-600 font-bold" : "text-red-600"
                }, e.hasGrat ? "ISENTA" : `-${er(e.fee)}`)), React.createElement("hr", null), React.createElement("div", {
                    className: "flex justify-between text-lg"
                }, React.createElement("span", {
                    className: "font-bold"
                }, "Receber:"), React.createElement("span", {
                    className: "font-bold text-green-700"
                }, er(e.final))))
            })(), React.createElement("button", {
                onClick: Vl,
                disabled: c || !p.withdrawAmount || parseFloat(p.withdrawAmount) < 10 || r || d || 0 === m || (saldoDisp !== null && saldoDisp <= 0) || (saldoDisp !== null && parseFloat(p.withdrawAmount || 0) > saldoDisp),
                className: "w-full bg-green-600 text-white py-3 rounded-lg font-bold disabled:opacity-50"
            }, c ? "..." : 0 === m ? "üö´ Limite Atingido" : parseFloat(p.withdrawAmount || 0) < 10 ? "‚ö†Ô∏è M√≠nimo R$ 10" : "üí∏ Solicitar"))
        })(), React.createElement("h3", {
            className: "text-lg font-semibold mt-8 mb-4"
        }, "üìã Hist√≥rico"), 0 === M.length ? React.createElement("p", {
            className: "text-gray-500"
        }, "Nenhum saque") : React.createElement("div", {
            className: "space-y-3"
        }, M.map(e => {
            const t = "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at) > 36e5,
                a = "aprovado" === e.status || "aprovado_gratuidade" === e.status ? "Saque aprovado, em instantes ser√° feito a transfer√™ncia para o seu banco!" : "inativo" === e.status ? "Saque temporariamente inativo por quest√µes t√©cnicas" : "rejeitado" === e.status && e.reject_reason ? `Motivo: ${e.reject_reason}` : null;
            return React.createElement("div", {
                key: e.id,
                className: "border rounded-lg p-4 " + (t ? "border-red-400 bg-red-50" : e.status?.includes("aprovado") ? "border-green-400 bg-green-50" : "rejeitado" === e.status ? "border-red-300 bg-red-50" : "inativo" === e.status ? "border-orange-300 bg-orange-50" : "")
            }, React.createElement("div", {
                className: "flex justify-between"
            }, React.createElement("div", null, React.createElement("p", {
                className: "font-bold"
            }, er(e.requested_amount)), React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Receber: ", er(e.final_amount))), React.createElement("span", {
                className: "px-3 py-1 rounded-full text-xs font-bold h-fit " + (e.status?.includes("aprovado") ? "bg-green-500 text-white" : "rejeitado" === e.status ? "bg-red-500 text-white" : "inativo" === e.status ? "bg-orange-500 text-white" : "bg-yellow-500 text-white")
            }, t ? "‚ö†Ô∏è ATRASADO" : "aprovado" === e.status || "aprovado_gratuidade" === e.status ? "‚úÖ Aprovado" : "rejeitado" === e.status ? "‚ùå Rejeitado" : "inativo" === e.status ? "‚ö†Ô∏è Inativo" : "‚è≥ Aguardando")), a && React.createElement("p", {
                className: "text-sm mt-2 font-semibold " + (e.status?.includes("aprovado") ? "text-green-700" : "rejeitado" === e.status ? "text-red-600" : "text-orange-600")
            }, a), t && React.createElement("p", {
                className: "text-red-600 text-sm mt-2 font-semibold"
            }, "Entre em contato com o suporte"), React.createElement("p", {
                className: "text-xs text-gray-400 mt-2"
            }, new Date(e.created_at).toLocaleString("pt-BR")))
        }))), "dados" === p.saqueTab && React.createElement("div", {
            className: "space-y-4"
        }, T && !F ? React.createElement(React.Fragment, null, React.createElement("div", {
            className: "bg-green-50 border-2 border-green-300 rounded-xl p-5"
        }, React.createElement("div", {
            className: "flex items-center gap-2 mb-4"
        }, React.createElement("span", {
            className: "text-2xl"
        }, "‚úÖ"), React.createElement("h3", {
            className: "font-bold text-green-800"
        }, "Dados Validados")), React.createElement("div", {
            className: "space-y-3"
        }, React.createElement("div", {
            className: "flex justify-between items-center py-2 border-b border-green-200"
        }, React.createElement("span", {
            className: "text-gray-600 text-sm"
        }, "Nome Completo"), React.createElement("span", {
            className: "font-semibold text-gray-800"
        }, T.full_name)), React.createElement("div", {
            className: "flex justify-between items-center py-2 border-b border-green-200"
        }, React.createElement("span", {
            className: "text-gray-600 text-sm"
        }, "CPF"), React.createElement("span", {
            className: "font-semibold text-gray-800"
        }, T.cpf)), React.createElement("div", {
            className: "flex justify-between items-center py-2 border-b border-green-200"
        }, React.createElement("span", {
            className: "text-gray-600 text-sm"
        }, "Tipo da Chave PIX"), React.createElement("span", {
            className: "px-2 py-1 bg-green-200 text-green-800 rounded-full text-xs font-bold"
        }, {
            cpf: "ü™™ CPF",
            cnpj: "üè¢ CNPJ",
            telefone: "üì± Telefone",
            email: "üìß Email",
            aleatoria: "üîë Aleat√≥ria"
        } [T.pix_tipo] || T.pix_tipo)), React.createElement("div", {
            className: "flex justify-between items-center py-2"
        }, React.createElement("span", {
            className: "text-gray-600 text-sm"
        }, "Chave PIX"), React.createElement("span", {
            className: "font-semibold text-gray-800"
        }, T.pix_key))), React.createElement("button", {
            onClick: () => $(!0),
            className: "w-full mt-4 bg-white border-2 border-green-500 text-green-700 py-3 rounded-lg font-bold hover:bg-green-100 transition"
        }, "‚úèÔ∏è Editar Dados")), L.length > 0 && React.createElement("div", {
            className: "bg-gray-50 border border-gray-200 rounded-xl p-4"
        }, React.createElement("h4", {
            className: "font-semibold text-gray-700 mb-3 flex items-center gap-2"
        }, React.createElement("span", null, "üìã"), " Hist√≥rico de Altera√ß√µes"), React.createElement("div", {
            className: "space-y-2 max-h-48 overflow-y-auto"
        }, L.map((e, t) => React.createElement("div", {
            key: t,
            className: "bg-white border border-gray-200 rounded-lg p-3 text-sm"
        }, React.createElement("div", {
            className: "flex justify-between items-start"
        }, React.createElement("div", null, React.createElement("span", {
            className: "font-semibold text-gray-700"
        }, "ALTERACAO_NOME" === e.action && "üë§ Nome alterado", "ALTERACAO_CPF" === e.action && "ü™™ CPF alterado", "ALTERACAO_PIX" === e.action && "üí≥ Chave PIX alterada", "CADASTRO_DADOS" === e.action && "‚úÖ Cadastro inicial"), e.old_value && e.new_value && React.createElement("p", {
            className: "text-gray-500 text-xs mt-1"
        }, "De: ", React.createElement("span", {
            className: "line-through text-red-500"
        }, e.old_value), React.createElement("br", null), "Para: ", React.createElement("span", {
            className: "text-green-600 font-medium"
        }, e.new_value))), React.createElement("span", {
            className: "text-xs text-gray-400"
        }, new Date(e.created_at).toLocaleDateString("pt-BR"), " ", new Date(e.created_at).toLocaleTimeString("pt-BR", {
            hour: "2-digit",
            minute: "2-digit"
        })))))))) : React.createElement(React.Fragment, null, T && F && React.createElement("div", {
            className: "bg-yellow-50 border border-yellow-300 rounded-lg p-3 mb-2"
        }, React.createElement("p", {
            className: "text-yellow-800 text-sm flex items-center gap-2"
        }, React.createElement("span", null, "‚ö†Ô∏è"), " Voc√™ est√° editando seus dados. As altera√ß√µes ser√£o registradas no hist√≥rico.")), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "Nome Completo"), React.createElement("input", {
            type: "text",
            value: p.finName ?? T?.full_name ?? "",
            onChange: e => x({
                ...p,
                finName: e.target.value
            }),
            className: "w-full px-4 py-2 border rounded-lg",
            placeholder: "Seu nome completo"
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "CPF"), React.createElement("input", {
            type: "text",
            value: p.finCpf ?? T?.cpf ?? "",
            onChange: e => x({
                ...p,
                finCpf: Xl(e.target.value)
            }),
            className: "w-full px-4 py-2 border rounded-lg",
            placeholder: "000.000.000-00",
            maxLength: 14
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-2"
        }, "Tipo da Chave PIX"), React.createElement("div", {
            className: "grid grid-cols-5 gap-2"
        }, [{
            id: "cpf",
            label: "CPF",
            icon: "ü™™"
        }, {
            id: "cnpj",
            label: "CNPJ",
            icon: "üè¢"
        }, {
            id: "telefone",
            label: "Telefone",
            icon: "üì±"
        }, {
            id: "email",
            label: "Email",
            icon: "üìß"
        }, {
            id: "aleatoria",
            label: "Aleat√≥ria",
            icon: "üîë"
        }].map(e => React.createElement("button", {
            key: e.id,
            type: "button",
            onClick: () => x({
                ...p,
                pixTipo: e.id,
                finPix: ""
            }),
            className: "p-2 rounded-lg border-2 text-center transition-all " + (p.pixTipo === e.id ? "border-blue-500 bg-blue-50 text-blue-700" : "border-gray-200 hover:border-gray-300")
        }, React.createElement("span", {
            className: "text-xl"
        }, e.icon), React.createElement("p", {
            className: "text-xs font-semibold mt-1"
        }, e.label))))), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "Chave PIX"), React.createElement("input", {
            type: "email" === p.pixTipo ? "email" : "text",
            value: p.finPix ?? T?.pix_key ?? "",
            onChange: e => x({
                ...p,
                finPix: ar(e.target.value, p.pixTipo)
            }),
            placeholder: lr(p.pixTipo),
            disabled: !p.pixTipo,
            maxLength: "cpf" === p.pixTipo ? 14 : "cnpj" === p.pixTipo ? 18 : "telefone" === p.pixTipo ? 15 : 100,
            className: "w-full px-4 py-2 border rounded-lg transition-all " + (p.pixTipo ? p.finPix ? tr(p.finPix, p.pixTipo).valido ? "border-green-500 bg-green-50" : "border-red-500 bg-red-50" : "" : "bg-gray-100 cursor-not-allowed")
        }), p.finPix && p.pixTipo && React.createElement("p", {
            className: "mt-1 text-sm " + (tr(p.finPix, p.pixTipo).valido ? "text-green-600" : "text-red-600")
        }, tr(p.finPix, p.pixTipo).mensagem), !p.pixTipo && React.createElement("p", {
            className: "mt-1 text-sm text-gray-500"
        }, "üëÜ Selecione o tipo da chave acima")), React.createElement("div", {
            className: "flex gap-2"
        }, F && React.createElement("button", {
            onClick: () => {
                $(!1), x(e => ({
                    ...e,
                    finName: T?.full_name || "",
                    finCpf: T?.cpf || "",
                    finPix: T?.pix_key || "",
                    pixTipo: T?.pix_tipo || ""
                }))
            },
            className: "flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition"
        }, "‚úï Cancelar"), React.createElement("button", {
            onClick: Bl,
            disabled: c || !p.pixTipo,
            className: (F ? "flex-1" : "w-full") + " bg-blue-600 text-white py-3 rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 transition"
        }, c ? "..." : "üíæ Salvar Dados")))), "gratuidades" === p.saqueTab && React.createElement(React.Fragment, null, React.createElement("h3", {
            className: "font-semibold mb-4"
        }, "üéÅ Minhas Gratuidades"), 0 === G.length ? React.createElement("p", {
            className: "text-gray-500"
        }, "Nenhuma") : React.createElement("div", {
            className: "space-y-3"
        }, G.map(e => React.createElement("div", {
            key: e.id,
            className: "border rounded-lg p-4 " + ("ativa" === e.status ? "border-green-300 bg-green-50" : "bg-gray-50")
        }, React.createElement("div", {
            className: "flex justify-between"
        }, React.createElement("div", null, React.createElement("p", {
            className: "font-bold"
        }, e.remaining, "/", e.quantity, " restantes"), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "Valor: ", er(e.value))), React.createElement("span", {
            className: "px-3 py-1 rounded-full text-xs font-bold h-fit " + ("ativa" === e.status ? "bg-green-500 text-white" : "bg-gray-400 text-white")
        }, e.status))))))))) : React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-xl font-bold text-purple-900 mb-4"
        }, "üí≥ Cadastrar Dados Financeiros"), React.createElement("p", {
            className: "text-sm text-gray-600 mb-4"
        }, "Preencha seus dados para receber os saques via PIX."), React.createElement("div", {
            className: "space-y-4"
        }, React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "C√≥digo do Profissional"), React.createElement("input", {
            type: "text",
            value: l.codProfissional,
            disabled: !0,
            className: "w-full px-4 py-2 border rounded-lg bg-gray-100 text-gray-600"
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "Nome Completo *"), React.createElement("input", {
            type: "text",
            value: p.finName || "",
            onChange: e => x({
                ...p,
                finName: e.target.value
            }),
            className: "w-full px-4 py-2 border rounded-lg",
            placeholder: "Seu nome completo"
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "CPF *"), React.createElement("input", {
            type: "text",
            value: p.finCpf || "",
            onChange: e => x({
                ...p,
                finCpf: Xl(e.target.value)
            }),
            className: "w-full px-4 py-2 border rounded-lg",
            placeholder: "000.000.000-00",
            maxLength: 14
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-2"
        }, "Tipo da Chave PIX *"), React.createElement("div", {
            className: "grid grid-cols-5 gap-2"
        }, [{
            id: "cpf",
            label: "CPF",
            icon: "ü™™"
        }, {
            id: "cnpj",
            label: "CNPJ",
            icon: "üè¢"
        }, {
            id: "telefone",
            label: "Telefone",
            icon: "üì±"
        }, {
            id: "email",
            label: "Email",
            icon: "üìß"
        }, {
            id: "aleatoria",
            label: "Aleat√≥ria",
            icon: "üîë"
        }].map(e => React.createElement("button", {
            key: e.id,
            type: "button",
            onClick: () => x({
                ...p,
                pixTipo: e.id,
                finPix: ""
            }),
            className: "p-2 rounded-lg border-2 text-center transition-all " + (p.pixTipo === e.id ? "border-purple-500 bg-purple-50 text-purple-700" : "border-gray-200 hover:border-gray-300")
        }, React.createElement("span", {
            className: "text-xl"
        }, e.icon), React.createElement("p", {
            className: "text-xs font-semibold mt-1"
        }, e.label))))), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "Chave PIX *"), React.createElement("input", {
            type: "email" === p.pixTipo ? "email" : "text",
            value: p.finPix || "",
            onChange: e => x({
                ...p,
                finPix: ar(e.target.value, p.pixTipo)
            }),
            placeholder: lr(p.pixTipo),
            disabled: !p.pixTipo,
            maxLength: "cpf" === p.pixTipo ? 14 : "cnpj" === p.pixTipo ? 18 : "telefone" === p.pixTipo ? 15 : 100,
            className: "w-full px-4 py-2 border rounded-lg transition-all " + (p.pixTipo ? p.finPix ? tr(p.finPix, p.pixTipo).valido ? "border-green-500 bg-green-50" : "border-red-500 bg-red-50" : "" : "bg-gray-100 cursor-not-allowed")
        }), p.finPix && p.pixTipo && React.createElement("p", {
            className: "mt-1 text-sm " + (tr(p.finPix, p.pixTipo).valido ? "text-green-600" : "text-red-600")
        }, tr(p.finPix, p.pixTipo).mensagem), !p.pixTipo && React.createElement("p", {
            className: "mt-1 text-sm text-gray-500"
        }, "üëÜ Selecione o tipo da chave acima")), React.createElement("button", {
            onClick: Bl,
            disabled: c || !p.pixTipo || !p.finName || !p.finCpf || !p.finPix,
            className: "w-full bg-purple-600 text-white py-3 rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-purple-700 transition"
        }, c ? "‚è≥ Salvando..." : "üíæ Salvar Dados"))) : React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-2xl font-bold text-purple-900 mb-4 text-center"
        }, "üìã Termos de Uso"), React.createElement("div", {
            className: "bg-gray-50 rounded-lg p-4 mb-6 max-h-80 overflow-y-auto text-sm"
        }, React.createElement("p", {
            className: "text-gray-700 leading-relaxed"
        }, "Uma taxa administrativa de 4,5% ser√° aplicada sobre o valor solicitado e deduzida automaticamente na transfer√™ncia. As solicita√ß√µes s√£o processadas de segunda a sexta, das 09:00 √†s 18:00, e aos s√°bados, das 08:00 √†s 12:00. Solicita√ß√µes feitas fora desse hor√°rio ser√£o atendidas no pr√≥ximo dia √∫til. √â sua responsabilidade garantir que as informa√ß√µes fornecidas estejam corretas, pois n√£o nos responsabilizamos por atrasos ou transfer√™ncias erradas causadas por dados incorretos. O dinheiro ser√° transferido em at√© 1 hora ap√≥s a confirma√ß√£o, dentro do hor√°rio de funcionamento.")), React.createElement("button", {
            onClick: zl,
            disabled: c,
            className: "w-full bg-purple-600 text-white py-3 rounded-lg font-bold disabled:opacity-50"
        }, c ? "Aguarde..." : "‚úì Aceitar e Continuar"))) : React.createElement("div", {
            className: "space-y-4"
        }, Qe.map(e => React.createElement("div", {
            key: e.id,
            className: "p-4 rounded-xl border-l-4 " + ("error" === e.tipo ? "bg-red-50 border-red-500" : "warning" === e.tipo ? "bg-yellow-50 border-yellow-500" : "success" === e.tipo ? "bg-green-50 border-green-500" : "bg-blue-50 border-blue-500")
        }, React.createElement("p", {
            className: "font-bold text-sm mb-1"
        }, e.titulo), React.createElement("p", {
            className: "text-sm text-gray-700"
        }, e.mensagem))), React.createElement("div", {
            className: "bg-orange-50 border-2 border-orange-400 rounded-2xl p-6"
        }, React.createElement("div", {
            className: "text-center mb-6"
        }, React.createElement("div", {
            className: "text-6xl mb-4"
        }, "üïê"), React.createElement("h2", {
            className: "text-xl font-bold text-orange-800 mb-2"
        }, "Fora do Hor√°rio de Atendimento"), React.createElement("p", {
            className: "text-orange-700"
        }, "O atendimento de saques estar√° dispon√≠vel novamente ", React.createElement("strong", null, yl()), ".")), React.createElement("div", {
            className: "bg-white rounded-xl p-4 mb-6"
        }, React.createElement("p", {
            className: "text-sm text-gray-700 text-center"
        }, "‚ö†Ô∏è Voc√™ pode solicitar o saque agora, mas ele s√≥ ser√° processado quando o atendimento reabrir.")), React.createElement("div", {
            className: "bg-orange-100 rounded-xl p-4"
        }, React.createElement("p", {
            className: "text-sm font-semibold text-orange-800 mb-4 text-center"
        }, "Arraste o cursor para confirmar que entendeu:"), React.createElement("div", {
            className: "relative h-14 bg-orange-200 rounded-full overflow-hidden touch-none select-none",
            onTouchStart: e => {
                const t = e.touches[0],
                    a = e.currentTarget.getBoundingClientRect(),
                    l = Math.max(0, Math.min(100, (t.clientX - a.left) / a.width * 100));
                Je(l)
            },
            onTouchMove: e => {
                const t = e.touches[0],
                    a = e.currentTarget.getBoundingClientRect(),
                    l = Math.max(0, Math.min(100, (t.clientX - a.left) / a.width * 100));
                Je(l), l >= 95 && !Ge && (We(!0), ja("‚úÖ Voc√™ pode prosseguir com a solicita√ß√£o!", "success"))
            },
            onMouseDown: e => {
                const t = e.currentTarget.getBoundingClientRect(),
                    a = Math.max(0, Math.min(100, (e.clientX - t.left) / t.width * 100));
                Je(a);
                const l = e => {
                        const a = Math.max(0, Math.min(100, (e.clientX - t.left) / t.width * 100));
                        Je(a), a >= 95 && !Ge && (We(!0), ja("‚úÖ Voc√™ pode prosseguir com a solicita√ß√£o!", "success"))
                    },
                    r = () => {
                        document.removeEventListener("mousemove", l), document.removeEventListener("mouseup", r)
                    };
                document.addEventListener("mousemove", l), document.addEventListener("mouseup", r)
            }
        }, React.createElement("div", {
            className: "absolute top-0 left-0 h-full bg-gradient-to-r from-orange-400 via-yellow-400 to-green-500 rounded-full",
            style: {
                width: `${Ve}%`,
                transition: "none"
            }
        }), React.createElement("div", {
            className: "absolute top-1 w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-2xl pointer-events-none border-2 border-orange-300",
            style: {
                left: `calc(${Ve}% - ${.48*Ve}px)`,
                transition: "none",
                transform: Ve >= 95 ? "scale(1.1)" : "scale(1)"
            }
        }, Ve < 95 ? "üëâ" : "‚úÖ"), React.createElement("div", {
            className: "absolute inset-0 flex items-center justify-end pr-4 pointer-events-none"
        }, React.createElement("span", {
            className: "font-bold text-sm " + (Ve < 95 ? "text-orange-700" : "text-green-700")
        }, Ve < 30 ? "Arraste ‚Üí‚Üí‚Üí" : Ve < 95 ? "Continue ‚Üí" : "‚úì OK!"))))))), "indicacoes" === p.userTab && React.createElement(React.Fragment, null, React.createElement("div", {
            className: "bg-gradient-to-br from-blue-600 to-purple-700 rounded-xl shadow-lg p-6 mb-6 text-white"
        }, React.createElement("div", {
            className: "flex items-center gap-4 mb-4"
        }, React.createElement("div", {
            className: "text-5xl"
        }, "üîó"), React.createElement("div", null, React.createElement("h2", {
            className: "text-2xl font-bold"
        }, "Indique e Ganhe!"), React.createElement("p", {
            className: "text-blue-200"
        }, "Escolha uma promo√ß√£o e compartilhe seu link de indica√ß√£o"))), p.statsIndicacao && React.createElement("div", {
            className: "grid grid-cols-4 gap-3"
        }, React.createElement("div", {
            className: "bg-white/10 rounded-lg p-3 text-center"
        }, React.createElement("p", {
            className: "text-2xl font-bold"
        }, p.statsIndicacao.total || 0), React.createElement("p", {
            className: "text-xs text-blue-200"
        }, "Total")), React.createElement("div", {
            className: "bg-yellow-500/30 rounded-lg p-3 text-center"
        }, React.createElement("p", {
            className: "text-2xl font-bold"
        }, p.statsIndicacao.pendentes || 0), React.createElement("p", {
            className: "text-xs text-yellow-200"
        }, "Pendentes")), React.createElement("div", {
            className: "bg-green-500/30 rounded-lg p-3 text-center"
        }, React.createElement("p", {
            className: "text-2xl font-bold"
        }, p.statsIndicacao.aprovadas || 0), React.createElement("p", {
            className: "text-xs text-green-200"
        }, "Aprovadas")), React.createElement("div", {
            className: "bg-red-500/30 rounded-lg p-3 text-center"
        }, React.createElement("p", {
            className: "text-2xl font-bold"
        }, p.statsIndicacao.rejeitadas || 0), React.createElement("p", {
            className: "text-xs text-red-200"
        }, "Rejeitadas")))), React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6 mb-6"
        }, React.createElement("h2", {
            className: "text-xl font-bold text-purple-800 mb-4"
        }, "üéØ Promo√ß√µes de Indica√ß√£o Dispon√≠veis"), 0 === ee.length ? React.createElement("div", {
            className: "text-center py-8 text-gray-500"
        }, React.createElement("p", {
            className: "text-4xl mb-2"
        }, "üì¢"), React.createElement("p", null, "Nenhuma promo√ß√£o dispon√≠vel no momento"), React.createElement("p", {
            className: "text-sm"
        }, "Fique atento, novas promo√ß√µes podem aparecer a qualquer momento!")) : React.createElement("div", {
            className: "grid md:grid-cols-2 gap-4"
        }, ee.map(e => React.createElement("div", {
            key: e.id,
            className: "border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-white rounded-xl p-6"
        }, React.createElement("div", {
            className: "flex justify-between items-start mb-3"
        }, React.createElement("span", {
            className: "px-3 py-1 bg-green-500 text-white rounded-full text-xs font-bold"
        }, "üî• ATIVA")), React.createElement("p", {
            className: "text-lg font-bold text-gray-800 mb-1"
        }, "üìç ", e.regiao), React.createElement("p", {
            className: "text-3xl font-bold text-green-600 mb-3"
        }, er(e.valor_bonus)), e.detalhes && React.createElement("div", {
            className: "bg-white border border-purple-200 rounded-lg p-3 mb-4"
        }, React.createElement("p", {
            className: "text-sm text-gray-700 whitespace-pre-wrap"
        }, e.detalhes)), p.linkPromoSelecionada === e.id && p.meuLinkIndicacao?.token ? React.createElement("div", {
            className: "space-y-3"
        }, React.createElement("div", {
            className: "bg-purple-100 rounded-lg p-3"
        }, React.createElement("p", {
            className: "text-xs text-purple-600 mb-1"
        }, "Seu link para esta promo√ß√£o:"), React.createElement("div", {
            className: "flex gap-2"
        }, React.createElement("input", {
            type: "text",
            readOnly: !0,
            value: `${window.location.origin}/#/indicar/${p.meuLinkIndicacao.token}`,
            className: "flex-1 px-3 py-2 bg-white border border-purple-300 rounded-lg text-gray-800 font-mono text-xs"
        }), React.createElement("button", {
            onClick: () => {
                navigator.clipboard.writeText(`${window.location.origin}/#/indicar/${p.meuLinkIndicacao.token}`), ja("‚úÖ Link copiado!", "success")
            },
            className: "px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold text-sm"
        }, "üìã"))), React.createElement("button", {
            onClick: () => {
                const e = `üöÄ Fala, parceiro(a)!\n\nEstou te indicando para realizar entregas comigo no aplicativo TUTTS! üíúüì¶ \n\nFa√ßa seu cadastro pelo link abaixo, rode pelo menos 5 dias e garanta um b√¥nus de R$ 30,00 no final! üí∞‚ú®\n\nüëâ Link para cadastro: ${window.location.origin}/#/indicar/${p.meuLinkIndicacao.token}\n\nVem ganhar com a gente! üõµüî•`;
                window.open(`https://wa.me/?text=${encodeURIComponent(e)}`, "_blank")
            },
            className: "w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold flex items-center justify-center gap-2"
        }, React.createElement("span", null, "üì±"), " Compartilhar no WhatsApp")) : React.createElement("button", {
            onClick: async () => {
                try {
                    s(!0);
                    const t = await fetch(`${API_URL}/indicacao-link/gerar`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            user_cod: l.codProfissional,
                            user_name: l.fullName,
                            promocao_id: e.id,
                            regiao: e.regiao,
                            valor_bonus: e.valor_bonus
                        })
                    });
                    if (!t.ok) {
                        const e = await t.json().catch(() => ({}));
                        return ja("‚ùå Erro: " + (e.error || t.status), "error"), void s(!1)
                    }
                    const a = await t.json();
                    if (!a || !a.token) return ja("‚ùå Erro: token n√£o gerado", "error"), void s(!1);
                    x({
                        ...p,
                        meuLinkIndicacao: a,
                        linkPromoSelecionada: e.id
                    }), ja("‚úÖ Link gerado!", "success")
                } catch (e) {
                    ja("‚ùå Erro: " + e.message, "error")
                }
                s(!1)
            },
            disabled: c,
            className: "w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold disabled:opacity-50"
        }, c ? "‚è≥ Gerando..." : "üîó Gerar Link de Indica√ß√£o"))))), React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6 mb-6"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-gray-800 mb-4"
        }, "üìñ Como Funciona"), React.createElement("div", {
            className: "grid md:grid-cols-4 gap-4"
        }, React.createElement("div", {
            className: "bg-blue-50 rounded-lg p-4 text-center"
        }, React.createElement("div", {
            className: "text-3xl mb-2"
        }, "1Ô∏è‚É£"), React.createElement("p", {
            className: "font-semibold text-blue-800"
        }, "Escolha"), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "Selecione uma promo√ß√£o ativa")), React.createElement("div", {
            className: "bg-purple-50 rounded-lg p-4 text-center"
        }, React.createElement("div", {
            className: "text-3xl mb-2"
        }, "2Ô∏è‚É£"), React.createElement("p", {
            className: "font-semibold text-purple-800"
        }, "Gere o Link"), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "Clique para criar seu link √∫nico")), React.createElement("div", {
            className: "bg-green-50 rounded-lg p-4 text-center"
        }, React.createElement("div", {
            className: "text-3xl mb-2"
        }, "3Ô∏è‚É£"), React.createElement("p", {
            className: "font-semibold text-green-800"
        }, "Compartilhe"), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "Envie pelo WhatsApp")), React.createElement("div", {
            className: "bg-yellow-50 rounded-lg p-4 text-center"
        }, React.createElement("div", {
            className: "text-3xl mb-2"
        }, "4Ô∏è‚É£"), React.createElement("p", {
            className: "font-semibold text-yellow-800"
        }, "Ganhe"), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "Receba o b√¥nus no repasse")))), React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-bold text-gray-800 mb-4"
        }, "üìã Minhas Indica√ß√µes"), 0 === re.length ? React.createElement("div", {
            className: "text-center py-8 text-gray-500"
        }, React.createElement("p", {
            className: "text-4xl mb-2"
        }, "üë•"), React.createElement("p", null, "Voc√™ ainda n√£o tem indica√ß√µes"), React.createElement("p", {
            className: "text-sm"
        }, "Compartilhe seu link e comece a indicar!")) : React.createElement("div", {
            className: "space-y-4"
        }, re.map(e => React.createElement("div", {
            key: e.id,
            className: "border rounded-xl p-4 " + ("aprovada" === e.status ? "border-green-300 bg-green-50" : "rejeitada" === e.status ? "border-red-300 bg-red-50" : "border-yellow-300 bg-yellow-50")
        }, React.createElement("div", {
            className: "flex justify-between items-start"
        }, React.createElement("div", null, React.createElement("p", {
            className: "font-bold text-lg"
        }, e.indicado_nome), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "üìû ", e.indicado_contato), e.regiao && React.createElement("p", {
            className: "text-sm text-purple-600"
        }, "üìç ", e.regiao), e.valor_bonus && React.createElement("p", {
            className: "text-sm text-green-600 font-semibold"
        }, "üí∞ ", er(e.valor_bonus)), React.createElement("p", {
            className: "text-xs text-gray-500 mt-1"
        }, "Cadastrado em ", new Date(e.created_at).toLocaleDateString("pt-BR"))), React.createElement("div", {
            className: "text-right"
        }, React.createElement("span", {
            className: "inline-block px-3 py-1 rounded-full text-xs font-bold " + ("pendente" === e.status ? "bg-yellow-500 text-white" : "aprovada" === e.status ? "bg-green-500 text-white" : "bg-red-500 text-white")
        }, "pendente" === e.status ? "‚è≥ Pendente" : "aprovada" === e.status ? "‚úÖ Aprovada" : "‚ùå Rejeitada"))), "aprovada" === e.status && React.createElement("div", {
            className: "mt-3 bg-green-100 border border-green-300 rounded-lg p-3"
        }, React.createElement("p", {
            className: "text-green-800 text-sm"
        }, "üéâ ", React.createElement("strong", null, "Parab√©ns!"), " Sua indica√ß√£o foi aprovada! ", e.valor_bonus && `B√¥nus de ${er(e.valor_bonus)} ser√° creditado.`)), "rejeitada" === e.status && e.motivo_rejeicao && React.createElement("div", {
            className: "mt-3 bg-red-100 border border-red-300 rounded-lg p-3"
        }, React.createElement("p", {
            className: "text-red-800 text-sm"
        }, React.createElement("strong", null, "Motivo:"), " ", e.motivo_rejeicao))))))), "promo-novatos" === p.userTab && React.createElement(React.Fragment, null, fe.ativo && !we && 0 === Ae && React.createElement("div", {
            className: "bg-gradient-to-r from-purple-600 to-purple-800 rounded-xl shadow-lg p-6 mb-6 text-white"
        }, React.createElement("div", {
            className: "text-center"
        }, React.createElement("div", {
            className: "text-5xl mb-4"
        }, "üéØ"), React.createElement("h2", {
            className: "text-xl font-bold mb-2"
        }, fe.titulo), React.createElement("p", {
            className: "text-purple-200 mb-4"
        }, "Responda corretamente e ganhe gratuidade no seu pr√≥ximo saque!"), React.createElement("div", {
            className: "bg-white/20 rounded-lg p-4 mb-4"
        }, React.createElement("p", {
            className: "text-2xl font-bold text-yellow-300"
        }, "üí∞ R$ ", fe.valor_gratuidade.toFixed(2).replace(".", ",")), React.createElement("p", {
            className: "text-sm text-purple-200"
        }, "de gratuidade se acertar tudo!")), React.createElement("button", {
            onClick: () => {
                Se(1), Pe(0)
            },
            className: "px-8 py-3 bg-yellow-400 text-purple-900 rounded-lg font-bold text-lg hover:bg-yellow-300"
        }, "üöÄ Come√ßar Quiz!"))), 1 === Ae && React.createElement("div", {
            className: "bg-white rounded-xl shadow-lg p-6 mb-6"
        }, React.createElement("div", {
            className: "text-center mb-4"
        }, React.createElement("h2", {
            className: "text-xl font-bold text-purple-700"
        }, "üì∏ Conhe√ßa os Procedimentos"), React.createElement("p", {
            className: "text-gray-500 text-sm"
        }, "Veja as imagens com aten√ß√£o antes de responder"), React.createElement("p", {
            className: "text-purple-600 font-semibold mt-2"
        }, "Imagem ", ke + 1, " de 4")), React.createElement("div", {
            className: "relative bg-gray-100 rounded-xl overflow-hidden mb-4",
            style: {
                minHeight: "300px"
            }
        }, fe.imagens[ke] ? React.createElement("img", {
            src: fe.imagens[ke],
            alt: `Procedimento ${ke+1}`,
            className: "w-full h-full object-contain",
            style: {
                maxHeight: "400px"
            }
        }) : React.createElement("div", {
            className: "flex items-center justify-center h-64 text-gray-400"
        }, React.createElement("p", null, "Imagem n√£o dispon√≠vel"))), React.createElement("div", {
            className: "flex justify-center gap-2 mb-4"
        }, [0, 1, 2, 3].map(e => React.createElement("button", {
            key: e,
            onClick: () => Pe(e),
            className: "w-3 h-3 rounded-full transition " + (ke === e ? "bg-purple-600" : "bg-gray-300")
        }))), React.createElement("div", {
            className: "flex justify-between"
        }, React.createElement("button", {
            onClick: () => Pe(Math.max(0, ke - 1)),
            disabled: 0 === ke,
            className: "px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold disabled:opacity-50"
        }, "‚Üê Anterior"), ke < 3 ? React.createElement("button", {
            onClick: () => Pe(ke + 1),
            className: "px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
        }, "Pr√≥xima ‚Üí") : React.createElement("button", {
            onClick: () => Se(2),
            className: "px-6 py-2 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700"
        }, "‚úÖ Ir para o Quiz!"))), 2 === Ae && React.createElement("div", {
            className: "bg-white rounded-xl shadow-lg p-6 mb-6"
        }, React.createElement("div", {
            className: "text-center mb-6"
        }, React.createElement("h2", {
            className: "text-xl font-bold text-purple-700"
        }, "‚ùì Responda: CERTO ou ERRADO?"), React.createElement("p", {
            className: "text-gray-500 text-sm"
        }, "Acerte as 5 afirma√ß√µes para ganhar a gratuidade")), React.createElement("div", {
            className: "space-y-4 mb-6"
        }, fe.perguntas.map((e, t) => React.createElement("div", {
            key: t,
            className: "border-2 rounded-xl p-4 transition " + (null !== Te[t] ? "border-purple-300 bg-purple-50" : "border-gray-200")
        }, React.createElement("p", {
            className: "font-semibold text-gray-800 mb-3"
        }, React.createElement("span", {
            className: "text-purple-600"
        }, t + 1, "."), " ", e.texto), React.createElement("div", {
            className: "flex gap-3"
        }, React.createElement("button", {
            onClick: () => {
                const e = [...Te];
                e[t] = !0, De(e)
            },
            className: "flex-1 py-3 rounded-lg font-bold text-lg transition " + (!0 === Te[t] ? "bg-green-500 text-white" : "bg-green-100 text-green-700 hover:bg-green-200")
        }, "‚úì CERTO"), React.createElement("button", {
            onClick: () => {
                const e = [...Te];
                e[t] = !1, De(e)
            },
            className: "flex-1 py-3 rounded-lg font-bold text-lg transition " + (!1 === Te[t] ? "bg-red-500 text-white" : "bg-red-100 text-red-700 hover:bg-red-200")
        }, "‚úó ERRADO"))))), React.createElement("div", {
            className: "flex gap-3"
        }, React.createElement("button", {
            onClick: () => Se(1),
            className: "px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold"
        }, "‚Üê Voltar √†s imagens"), React.createElement("button", {
            onClick: $l,
            disabled: c || Te.some(e => null === e),
            className: "flex-1 py-3 bg-purple-600 text-white rounded-lg font-bold text-lg hover:bg-purple-700 disabled:opacity-50"
        }, c ? "Enviando..." : "üéØ Enviar Respostas")), React.createElement("p", {
            className: "text-center text-xs text-gray-500 mt-3"
        }, "‚ö†Ô∏è Voc√™ tem apenas UMA chance de responder este quiz!")), 3 === Ae && Le && React.createElement("div", {
            className: `rounded-xl shadow-lg p-6 mb-6 text-center ${Le.passou?"bg-green-500":"bg-red-500"} text-white`
        }, React.createElement("div", {
            className: "text-6xl mb-4"
        }, Le.passou ? "üéâ" : "üò¢"), React.createElement("h2", {
            className: "text-2xl font-bold mb-2"
        }, Le.passou ? "Parab√©ns! Voc√™ passou!" : "Que pena! N√£o foi dessa vez..."), React.createElement("p", {
            className: "text-lg mb-4"
        }, "Voc√™ acertou ", React.createElement("strong", null, Le.acertos), " de ", React.createElement("strong", null, "5"), " perguntas"), Le.passou && React.createElement("div", {
            className: "bg-white/20 rounded-lg p-4 mb-4"
        }, React.createElement("p", {
            className: "text-xl font-bold"
        }, "üí∞ R$ ", Le.valor_gratuidade.toFixed(2).replace(".", ",")), React.createElement("p", {
            className: "text-sm"
        }, "foi adicionado √†s suas gratuidades!")), React.createElement("button", {
            onClick: () => Se(0),
            className: "px-6 py-2 bg-white text-gray-800 rounded-lg font-semibold"
        }, "Fechar")), fe.ativo && we && 0 === Ae && React.createElement("div", {
            className: "bg-gray-100 border-2 border-gray-300 rounded-xl p-6 mb-6 text-center"
        }, React.createElement("div", {
            className: "text-4xl mb-2"
        }, "‚úÖ"), React.createElement("p", {
            className: "text-gray-600 font-semibold"
        }, "Voc√™ j√° participou do Quiz de Procedimentos"), React.createElement("p", {
            className: "text-gray-500 text-sm"
        }, "Esta promo√ß√£o s√≥ pode ser usada uma vez")), React.createElement("hr", {
            className: "my-6 border-gray-200"
        }), React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6 mb-6"
        }, React.createElement("h2", {
            className: "text-lg font-bold text-orange-700 mb-4"
        }, "üöÄ Promo√ß√µes Dispon√≠veis para Novatos"), 0 === ce.length ? React.createElement("div", {
            className: "text-center py-8"
        }, React.createElement("p", {
            className: "text-6xl mb-4"
        }, "üòï"), React.createElement("p", {
            className: "text-gray-500 font-semibold"
        }, "Nenhuma promo√ß√£o dispon√≠vel no momento"), React.createElement("p", {
            className: "text-gray-400 text-sm"
        }, "Volte mais tarde para verificar novas promo√ß√µes")) : React.createElement("div", {
            className: "grid md:grid-cols-2 gap-4"
        }, ce.map(e => {
            const t = ie.some(t => t.promocao_id === e.id);
            return React.createElement("div", {
                key: e.id,
                className: "border-2 border-orange-200 bg-orange-50 rounded-xl p-4"
            }, React.createElement("div", {
                className: "flex justify-between items-start mb-2"
            }, React.createElement("div", null, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "üìç ", e.regiao), React.createElement("p", {
                className: "font-bold text-lg text-gray-800"
            }, "üè¢ ", e.cliente)), React.createElement("span", {
                className: "px-3 py-1 bg-green-500 text-white rounded-full text-sm font-bold"
            }, er(e.valor_bonus))), e.detalhes && React.createElement("p", {
                className: "text-sm text-gray-600 mb-3 whitespace-pre-wrap"
            }, e.detalhes), React.createElement("div", {
                className: "bg-yellow-100 border border-yellow-300 rounded-lg p-2 mb-3"
            }, React.createElement("p", {
                className: "text-xs text-yellow-800"
            }, "‚è±Ô∏è Ao se inscrever, voc√™ ter√° ", React.createElement("strong", null, "10 dias"), " para ser contemplado")), t ? React.createElement("button", {
                disabled: !0,
                className: "w-full py-2 bg-gray-300 text-gray-600 rounded-lg font-semibold cursor-not-allowed"
            }, "‚úÖ J√° inscrito") : React.createElement("button", {
                onClick: () => (async e => {
                    s(!0);
                    try {
                        const t = await fetch(`${API_URL}/inscricoes-novatos`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                promocao_id: e.id,
                                user_cod: l.codProfissional,
                                user_name: l.fullName,
                                valor_bonus: e.valor_bonus,
                                regiao: e.regiao,
                                cliente: e.cliente
                            })
                        });
                        if (!t.ok) {
                            const e = await t.json();
                            throw new Error(e.error || "Erro ao se inscrever")
                        }
                        ja("‚úÖ Inscri√ß√£o realizada! V√°lida por 10 dias.", "success"), await kl(), await Al()
                    } catch (e) {
                        ja(e.message, "error")
                    } finally {
                        s(!1)
                    }
                })(e),
                disabled: c,
                className: "w-full py-2 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 disabled:opacity-50"
            }, c ? "..." : "üöÄ Quero me inscrever!"))
        }))), React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-bold text-gray-800 mb-4"
        }, "üìã Minhas Inscri√ß√µes e Bonifica√ß√µes"), je && React.createElement("div", {
            className: "border-2 rounded-xl p-4 mb-4 " + (je.passou ? "border-green-400 bg-green-50" : "border-red-300 bg-red-50")
        }, React.createElement("div", {
            className: "flex justify-between items-start"
        }, React.createElement("div", {
            className: "flex items-center gap-3"
        }, React.createElement("span", {
            className: "text-3xl"
        }, je.passou ? "üéâ" : "üìù"), React.createElement("div", null, React.createElement("p", {
            className: "font-bold text-gray-800"
        }, "Quiz de Procedimentos"), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "Respondido em: ", new Date(je.created_at).toLocaleDateString("pt-BR")), React.createElement("p", {
            className: "text-sm text-gray-500"
        }, "Acertos: ", je.acertos, "/5"))), React.createElement("div", {
            className: "text-right"
        }, je.passou && React.createElement("p", {
            className: "font-bold text-green-600 text-lg"
        }, er(fe.valor_gratuidade)), React.createElement("span", {
            className: "inline-block mt-1 px-3 py-1 rounded-full text-xs font-bold " + (je.passou ? "bg-green-500 text-white" : "bg-red-400 text-white")
        }, je.passou ? "‚úÖ Aprovado" : "‚ùå N√£o passou"))), je.passou && React.createElement("div", {
            className: "mt-3 bg-green-100 border border-green-300 rounded-lg p-3"
        }, React.createElement("p", {
            className: "text-green-800 text-sm"
        }, "üéâ ", React.createElement("strong", null, "Parab√©ns!"), " Voc√™ acertou todas as perguntas! A gratuidade de ", er(fe.valor_gratuidade), " foi adicionada √† sua conta.")), !je.passou && React.createElement("div", {
            className: "mt-3 bg-red-100 border border-red-300 rounded-lg p-3"
        }, React.createElement("p", {
            className: "text-red-800 text-sm"
        }, "üò¢ Infelizmente voc√™ n√£o acertou todas as perguntas. Era necess√°rio acertar 5/5 para ganhar a gratuidade."))), 0 !== ie.length || je ? React.createElement("div", {
            className: "space-y-3"
        }, ie.map(e => {
            const t = e.expires_at ? new Date(e.expires_at) : null,
                a = t && new Date > t;
            return React.createElement("div", {
                key: e.id,
                className: "border rounded-lg p-4 " + ("aprovada" === e.status ? "border-green-300 bg-green-50" : "rejeitada" === e.status ? "border-red-300 bg-red-50" : a ? "border-gray-300 bg-gray-50" : "border-yellow-300 bg-yellow-50")
            }, React.createElement("div", {
                className: "flex justify-between items-start"
            }, React.createElement("div", null, React.createElement("p", {
                className: "font-semibold text-gray-800"
            }, "üè¢ ", e.cliente), React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "üìç ", e.regiao), React.createElement("p", {
                className: "text-sm text-gray-500"
            }, "Inscrito em: ", new Date(e.created_at).toLocaleDateString("pt-BR")), t && "pendente" === e.status && !a && React.createElement("p", {
                className: "text-xs text-orange-600"
            }, "‚è±Ô∏è Expira em: ", t.toLocaleDateString("pt-BR"))), React.createElement("div", {
                className: "text-right"
            }, React.createElement("p", {
                className: "font-bold text-green-600"
            }, er(e.valor_bonus)), React.createElement("span", {
                className: "inline-block mt-1 px-2 py-1 rounded-full text-xs font-bold " + ("pendente" !== e.status || a ? "aprovada" === e.status ? "bg-green-200 text-green-800" : "rejeitada" === e.status ? "bg-red-200 text-red-800" : "bg-gray-200 text-gray-800" : "bg-yellow-200 text-yellow-800")
            }, "pendente" === e.status && a ? "‚è∞ Expirada" : "pendente" === e.status ? "‚è≥ Pendente" : "aprovada" === e.status ? "‚úÖ Aprovada" : "rejeitada" === e.status ? "‚ùå Rejeitada" : e.status))), "aprovada" === e.status && React.createElement("div", {
                className: "mt-3 bg-green-100 border border-green-300 rounded-lg p-3"
            }, React.createElement("p", {
                className: "text-green-800 text-sm"
            }, "üéâ ", React.createElement("strong", null, "Parab√©ns!"), " Voc√™ foi contemplado! O b√¥nus de ", er(e.valor_bonus), " ser√° inclu√≠do no seu pr√≥ximo repasse.")), "rejeitada" === e.status && e.motivo_rejeicao && React.createElement("div", {
                className: "mt-3 bg-red-100 border border-red-300 rounded-lg p-3"
            }, React.createElement("p", {
                className: "text-red-800 text-sm"
            }, React.createElement("strong", null, "Motivo:"), " ", e.motivo_rejeicao)))
        })) : React.createElement("p", {
            className: "text-gray-500 text-center py-4"
        }, "Voc√™ ainda n√£o participou de nenhuma promo√ß√£o"))), "seguro-iza" === p.userTab && React.createElement("div", {
            className: "max-w-lg mx-auto"
        }, React.createElement("div", {
            className: "bg-gradient-to-b from-sky-100 to-white rounded-2xl shadow-xl overflow-hidden"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-blue-600 to-blue-700 text-white text-center py-4 px-4"
        }, React.createElement("h2", {
            className: "text-xl font-bold tracking-wide"
        }, "üõ°Ô∏è SEGURO DE VIDA PARA"), React.createElement("h2", {
            className: "text-xl font-bold tracking-wide"
        }, "ENTREGADORES TUTTS")), React.createElement("div", {
            className: "p-4 space-y-4"
        }, React.createElement("div", {
            className: "bg-white rounded-xl shadow border-l-4 border-yellow-400 overflow-hidden"
        }, React.createElement("div", {
            className: "bg-yellow-400 text-yellow-900 font-bold text-center py-2 text-sm italic"
        }, "QUANDO EST√Å ATIVO?"), React.createElement("div", {
            className: "p-4 space-y-2 text-sm text-gray-700"
        }, React.createElement("p", null, "üïê Durante a entrega (aceite √† finaliza√ß√£o)"), React.createElement("p", null, "‚è≥ ", React.createElement("strong", null, "Limite:"), " 60 min por entrega (encerra ap√≥s)"), React.createElement("p", null, "‚ùå ", React.createElement("strong", null, "N√£o cobre:"), " Trajeto casa/pessoal"))), React.createElement("div", {
            className: "bg-white rounded-xl shadow border-l-4 border-green-500 overflow-hidden"
        }, React.createElement("div", {
            className: "bg-green-500 text-white font-bold text-center py-2 text-sm"
        }, "COBERTURAS E VALORES"), React.createElement("div", {
            className: "p-4 space-y-2 text-sm text-gray-700"
        }, React.createElement("p", null, "‚ò†Ô∏è ", React.createElement("strong", null, "Morte Acidental:"), " R$ 20.000"), React.createElement("p", null, "üí∞ ", React.createElement("strong", null, "Invalidez Perm.:"), " R$ 20.000"), React.createElement("p", null, "üè• ", React.createElement("strong", null, "Desp. M√©dicas/Hosp.:"), " At√© R$ 5.000"), React.createElement("p", null, "üìÖ ", React.createElement("strong", null, "Di√°ria Incapacidade:"), " R$ 80/dia (30 dias)"), React.createElement("p", null, "‚ö∞Ô∏è ", React.createElement("strong", null, "Funeral:"), " R$ 5.000"))), React.createElement("div", {
            className: "bg-white rounded-xl shadow border-l-4 border-red-500 overflow-hidden"
        }, React.createElement("div", {
            className: "bg-red-500 text-white font-bold text-center py-2 text-sm"
        }, "QUANDO N√ÉO COBRE?"), React.createElement("div", {
            className: "p-4 space-y-2 text-sm text-gray-700"
        }, React.createElement("p", null, "‚ö†Ô∏è Cadastro/CPF incorreto"), React.createElement("p", null, "‚ö†Ô∏è Sem CNH v√°lida"), React.createElement("p", null, "‚ö†Ô∏è Ve√≠culo errado"), React.createElement("p", null, "‚ö†Ô∏è Fora de entrega ativa"), React.createElement("p", null, "‚ö†Ô∏è Fraude/M√°-f√©"))), React.createElement("div", {
            className: "bg-white rounded-xl shadow border-l-4 border-gray-500 overflow-hidden"
        }, React.createElement("div", {
            className: "bg-gray-600 text-white font-bold text-center py-2 text-sm"
        }, "COMO ACIONAR? (IZA Seguros)"), React.createElement("div", {
            className: "p-4 space-y-2 text-sm text-gray-700"
        }, React.createElement("p", null, "üì± ", React.createElement("strong", null, "Baixar"), " App IZA"), React.createElement("p", null, "üìã ", React.createElement("strong", null, "Informar"), " Data/Hora/Local"), React.createElement("p", null, "üìÑ ", React.createElement("strong", null, "Anexar Documentos"), " (B.O., atestado)"), React.createElement("p", null, "üìû ", React.createElement("strong", null, "Suporte:"), " Tel (11) 4673-2002"), React.createElement("p", null, "üí¨ ", React.createElement("strong", null, "WhatsApp:"), " ", React.createElement("a", {
            href: "https://wa.me/551146732004",
            target: "_blank",
            rel: "noopener noreferrer",
            className: "text-green-600 font-bold underline hover:text-green-700"
        }, "(11) 4673-2004")), React.createElement("p", null, "üåê ", React.createElement("strong", null, "Site:"), " ", React.createElement("a", {
            href: "https://www.iza.com.vc",
            target: "_blank",
            rel: "noopener noreferrer",
            className: "text-blue-600 underline hover:text-blue-700"
        }, "www.iza.com.vc")))), React.createElement("div", {
            className: "bg-white rounded-xl shadow border-l-4 border-orange-400 overflow-hidden"
        }, React.createElement("div", {
            className: "bg-orange-400 text-white font-bold text-center py-2 text-sm"
        }, "OUTRAS INFORMA√á√ïES"), React.createElement("div", {
            className: "p-4 space-y-2 text-sm text-gray-700"
        }, React.createElement("p", null, "‚ÑπÔ∏è ", React.createElement("strong", null, "Sem car√™ncia"), " (desde 1¬™ entrega)"), React.createElement("p", null, "‚ÑπÔ∏è ", React.createElement("strong", null, "Renova"), " a cada entrega aceita"))), React.createElement("button", {
            onClick: () => x({
                ...p,
                seguroDetalhes: !p.seguroDetalhes
            }),
            className: "w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2"
        }, "üìÑ ", p.seguroDetalhes ? "Ocultar Detalhes" : "Ver Texto com Mais Detalhes"), p.seguroDetalhes && React.createElement("div", {
            className: "bg-white rounded-xl shadow p-4 text-sm text-gray-700 space-y-4 border border-blue-200"
        }, React.createElement("h3", {
            className: "font-bold text-blue-800 text-lg"
        }, "üìã Informa√ß√µes Completas do Seguro"), React.createElement("div", null, React.createElement("h4", {
            className: "font-bold text-gray-800 mb-2"
        }, "Quando o seguro est√° ativo?"), React.createElement("ul", {
            className: "list-disc pl-5 space-y-1"
        }, React.createElement("li", null, "O seguro cobre voc√™ durante o per√≠odo em que estiver realizando uma entrega pela plataforma da Tutts."), React.createElement("li", null, "A cobertura √© ativada automaticamente desde o aceite da entrega at√© a finaliza√ß√£o no destino."), React.createElement("li", null, "N√£o cobre o trajeto de casa para o trabalho ou atividades pessoais."), React.createElement("li", null, "O entregador estar√° coberto durante o per√≠odo da entrega, limitado a at√© 60 minutos. Ou seja, se a entrega ultrapassar esse tempo e for finalizada ap√≥s os 60 minutos, a cobertura do seguro de vida ser√° encerrada."))), React.createElement("div", null, React.createElement("h4", {
            className: "font-bold text-gray-800 mb-2"
        }, "Coberturas e Valores"), React.createElement("ul", {
            className: "list-disc pl-5 space-y-1"
        }, React.createElement("li", null, React.createElement("strong", null, "Morte Acidental:"), " R$ 20.000,00"), React.createElement("li", null, React.createElement("strong", null, "Invalidez Permanente Total ou Parcial por Acidente:"), " R$ 20.000,00"), React.createElement("li", null, React.createElement("strong", null, "Despesas M√©dicas, Hospitalares e Odontol√≥gicos:"), " At√© R$ 5.000,00"), React.createElement("li", null, React.createElement("strong", null, "Di√°ria por Incapacidade Tempor√°ria (at√© 30 dias):"), " R$ 80,00 por dia"), React.createElement("li", null, React.createElement("strong", null, "Funeral:"), " R$ 5.000,00"))), React.createElement("div", null, React.createElement("h4", {
            className: "font-bold text-gray-800 mb-2"
        }, "Quando o seguro n√£o cobre?"), React.createElement("ul", {
            className: "list-disc pl-5 space-y-1"
        }, React.createElement("li", null, "Se o entregador n√£o estiver cadastrado corretamente ou com CPF incorreto."), React.createElement("li", null, "Se estiver sem habilita√ß√£o v√°lida no momento do acidente."), React.createElement("li", null, "Se estiver usando o ve√≠culo errado (ex.: moto em contrato de carro)."), React.createElement("li", null, "Se estiver fora de uma entrega ativa pela plataforma da Tutts."), React.createElement("li", null, "Se for constatado fraude ou m√°-f√©."))), React.createElement("div", null, React.createElement("h4", {
            className: "font-bold text-gray-800 mb-2"
        }, "Como acionar o seguro em caso de acidente?"), React.createElement("ul", {
            className: "list-disc pl-5 space-y-1"
        }, React.createElement("li", null, "Baixe o aplicativo IZA Seguros."), React.createElement("li", null, "Informe: data, hor√°rio e local do acidente."), React.createElement("li", null, "Anexe os documentos solicitados no app (como boletim de ocorr√™ncia ou atestado m√©dico)."), React.createElement("li", null, "D√∫vidas ou suporte: Telefone (11) 4673-2002 | WhatsApp", " ", React.createElement("a", {
            href: "https://wa.me/551146732004",
            target: "_blank",
            rel: "noopener noreferrer",
            className: "text-green-600 font-bold underline"
        }, "(11) 4673-2004")), React.createElement("li", null, "Site:", " ", React.createElement("a", {
            href: "https://www.iza.com.vc",
            target: "_blank",
            rel: "noopener noreferrer",
            className: "text-blue-600 underline"
        }, "www.iza.com.vc")))), React.createElement("div", null, React.createElement("h4", {
            className: "font-bold text-gray-800 mb-2"
        }, "Outras Informa√ß√µes"), React.createElement("ul", {
            className: "list-disc pl-5 space-y-1"
        }, React.createElement("li", null, React.createElement("strong", null, "Sem car√™ncia:"), " voc√™ estar√° coberto a partir da primeira entrega feita no dia."), React.createElement("li", null, "A cobertura se renova a cada entrega aceita na plataforma da Tutts."))))))), "score" === p.userTab && React.createElement(ScoreEntregador, {
            user: l,
            apiUrl: API_URL,
            showToast: ja
        }), "loja" === p.userTab && React.createElement(React.Fragment, null, rt && React.createElement("div", {
            className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-purple-600 to-pink-500 p-6 text-center"
        }, React.createElement("div", {
            className: "text-6xl mb-2"
        }, "üõí‚ú®"), React.createElement("h2", {
            className: "text-2xl font-bold text-white"
        }, "Lojinha Virtual da Tutts")), React.createElement("div", {
            className: "p-6"
        }, React.createElement("p", {
            className: "text-lg mb-4"
        }, React.createElement("span", {
            className: "text-2xl"
        }, "üëã"), " ", React.createElement("strong", null, "Ol√°, entregador!")), React.createElement("p", {
            className: "text-gray-700 mb-4"
        }, "Criamos este espa√ßo para trazer mais ", React.createElement("strong", null, "praticidade"), " e ", React.createElement("strong", null, "acessibilidade"), " na compra de itens essenciais para o seu dia a dia."), React.createElement("p", {
            className: "text-gray-700 mb-4"
        }, "As ofertas dispon√≠veis aqui s√£o ", React.createElement("strong", null, "exclusivas"), " para voc√™, entregador aut√¥nomo que opera ativamente no aplicativo Tutts h√° pelo menos 3 meses e possui um bom score ‚≠êüìä"), React.createElement("p", {
            className: "text-gray-700 mb-2"
        }, "Aproveite os benef√≠cios, equipe sua rotina com qualidade e economize! üíú"), React.createElement("div", {
            className: "bg-purple-50 rounded-xl p-4 mb-6"
        }, React.createElement("p", {
            className: "text-purple-800 font-semibold text-center"
        }, "üí∞ Abatimentos diretamente do saldo do aplicativo!")), React.createElement("button", {
            onClick: () => ot(!1),
            className: "w-full py-4 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl font-bold text-lg hover:opacity-90 transition-opacity shadow-lg flex items-center justify-center gap-2"
        }, "üõí Siga para a Loja")))), !rt && React.createElement("div", {
            className: "space-y-6"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-purple-600 to-pink-500 rounded-2xl p-6 text-white text-center"
        }, React.createElement("h2", {
            className: "text-2xl font-bold mb-2"
        }, "üõçÔ∏è Ofertas Exclusivas!"), React.createElement("p", {
            className: "text-white/80"
        }, "Abatimento direto no seu saldo - Sem dor de cabe√ßa!")), React.createElement("a", {
            href: "https://www.mercadolivre.com.br/loja/tutts#from=share_eshop",
            target: "_blank",
            rel: "noopener noreferrer",
            className: "block"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-400 rounded-2xl shadow-lg p-5 hover:shadow-xl transition-all hover:scale-[1.02] flex items-center gap-4"
        }, React.createElement("div", {
            className: "w-14 h-14 bg-white rounded-xl flex items-center justify-center text-3xl shadow"
        }, "ü§ù"), React.createElement("div", {
            className: "flex-1"
        }, React.createElement("h3", {
            className: "text-lg font-bold text-gray-800"
        }, "Compre na nossa loja online"), React.createElement("p", {
            className: "text-sm text-gray-700"
        }, "Visite nossa loja no Mercado Livre")), React.createElement("span", {
            className: "text-gray-700 text-2xl"
        }, "‚Ä∫"))), React.createElement("button", {
            onClick: () => x({
                ...p,
                lojaSugestaoModal: !0
            }),
            className: "w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-semibold hover:opacity-90 transition-opacity shadow-lg flex items-center justify-center gap-2"
        }, "üí° Sugerir Produto para a Loja"), bt.length > 0 && React.createElement("div", {
            className: "bg-white rounded-xl shadow p-4"
        }, React.createElement("h3", {
            className: "font-bold text-gray-800 mb-3"
        }, "üí° Minhas Sugest√µes"), React.createElement("div", {
            className: "space-y-2"
        }, bt.map(e => React.createElement("div", {
            key: e.id,
            className: "p-3 rounded-lg border " + ("respondido" === e.status ? "border-green-200 bg-green-50" : "recusado" === e.status ? "border-red-200 bg-red-50" : "border-gray-200 bg-gray-50")
        }, React.createElement("p", {
            className: "text-sm text-gray-800"
        }, e.sugestao), React.createElement("p", {
            className: "text-xs text-gray-500 mt-1"
        }, new Date(e.created_at).toLocaleDateString("pt-BR")), "respondido" === e.status && e.resposta && React.createElement("div", {
            className: "mt-2 p-2 bg-green-100 rounded"
        }, React.createElement("p", {
            className: "text-xs font-semibold text-green-800"
        }, "‚úÖ Resposta:"), React.createElement("p", {
            className: "text-sm text-green-700"
        }, e.resposta)), "recusado" === e.status && e.resposta && React.createElement("div", {
            className: "mt-2 p-2 bg-red-100 rounded"
        }, React.createElement("p", {
            className: "text-xs font-semibold text-red-800"
        }, "‚ùå Resposta:"), React.createElement("p", {
            className: "text-sm text-red-700"
        }, e.resposta)), "pendente" === e.status && React.createElement("span", {
            className: "inline-block mt-2 px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded-full"
        }, "‚è≥ Aguardando an√°lise"))))), p.lojaSugestaoModal && React.createElement("div", {
            className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl max-w-md w-full"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-amber-500 to-orange-500 p-4 rounded-t-2xl text-white"
        }, React.createElement("h2", {
            className: "text-xl font-bold"
        }, "üí° Sugerir Produto"), React.createElement("p", {
            className: "text-sm opacity-80"
        }, "Diga o que voc√™ gostaria de ver na loja")), React.createElement("div", {
            className: "p-6"
        }, React.createElement("textarea", {
            value: p.lojaSugestaoTexto || "",
            onChange: e => x({
                ...p,
                lojaSugestaoTexto: e.target.value
            }),
            placeholder: "Descreva o produto que voc√™ gostaria que tivesse na loja... Ex: T√™nis Nike Air Max tamanho 42, Camiseta do Flamengo M...",
            className: "w-full px-4 py-3 border rounded-xl h-32 resize-none"
        }), React.createElement("p", {
            className: "text-xs text-gray-500 mt-2"
        }, "Sua sugest√£o ser√° analisada pela equipe"), React.createElement("div", {
            className: "flex gap-3 mt-4"
        }, React.createElement("button", {
            onClick: () => x({
                ...p,
                lojaSugestaoModal: !1,
                lojaSugestaoTexto: ""
            }),
            className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
        }, "Cancelar"), React.createElement("button", {
            onClick: async () => {
                p.lojaSugestaoTexto?.trim() ? (await fetch(`${API_URL}/loja/sugestoes`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        user_cod: l.codProfissional,
                        user_name: l.fullName,
                        sugestao: p.lojaSugestaoTexto.trim()
                    })
                }), ja("üí° Sugest√£o enviada!", "success"), x({
                    ...p,
                    lojaSugestaoModal: !1,
                    lojaSugestaoTexto: ""
                }), Ka()) : ja("Digite sua sugest√£o", "error")
            },
            className: "flex-1 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg font-semibold hover:opacity-90"
        }, "üì§ Enviar Sugest√£o"))))), at.length > 0 && React.createElement("div", {
            className: "bg-white rounded-xl shadow p-4"
        }, React.createElement("h3", {
            className: "font-bold text-gray-800 mb-3"
        }, "üì¶ Meus Pedidos"), React.createElement("div", {
            className: "space-y-3"
        }, at.map(e => React.createElement("div", {
            key: e.id,
            className: "p-4 rounded-xl border-2 " + ("aprovado" === e.status ? "border-green-200 bg-green-50" : "rejeitado" === e.status ? "border-red-200 bg-red-50" : "border-gray-200 bg-gray-50")
        }, React.createElement("div", {
            className: "flex justify-between items-start"
        }, React.createElement("div", {
            className: "flex-1"
        }, React.createElement("p", {
            className: "font-bold text-gray-800"
        }, e.produto_nome), e.tamanho && React.createElement("p", {
            className: "text-sm text-purple-600"
        }, "Tamanho: ", e.tamanho), React.createElement("p", {
            className: "text-xs text-gray-500 mt-1"
        }, new Date(e.created_at).toLocaleDateString("pt-BR"), " ‚Ä¢ ", e.tipo_abatimento), React.createElement("p", {
            className: "font-bold text-green-600 mt-1"
        }, "R$ ", parseFloat(e.valor_final).toFixed(2).replace(".", ","), e.parcelas > 1 && React.createElement("span", {
            className: "text-xs font-normal text-gray-500"
        }, " (", e.parcelas, "x)"))), React.createElement("span", {
            className: "px-3 py-1 rounded-full text-xs font-bold " + ("pendente" === e.status ? "bg-yellow-100 text-yellow-700" : "aprovado" === e.status ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700")
        }, "pendente" === e.status ? "‚è≥ Aguardando" : "aprovado" === e.status ? "‚úÖ Aprovado" : "‚ùå Rejeitado")), "aprovado" === e.status && React.createElement("div", {
            className: "mt-3 p-3 bg-green-100 rounded-lg"
        }, React.createElement("p", {
            className: "text-green-800 text-sm font-semibold"
        }, "‚úÖ Pedido Aprovado!"), React.createElement("p", {
            className: "text-green-700 text-xs mt-1"
        }, "Logo mais, um respons√°vel entrar√° em contato para realizar a entrega do produto adquirido.")), "rejeitado" === e.status && React.createElement("div", {
            className: "mt-3 p-3 bg-red-100 rounded-lg"
        }, React.createElement("p", {
            className: "text-red-800 text-sm font-semibold"
        }, "‚ùå Pedido N√£o Aprovado"), e.observacao && React.createElement("p", {
            className: "text-red-700 text-xs mt-1"
        }, React.createElement("span", {
            className: "font-semibold"
        }, "Motivo:"), " ", e.observacao)))))), React.createElement("div", {
            className: "grid gap-4"
        }, 0 === Ke.length ? React.createElement("div", {
            className: "bg-white rounded-xl shadow p-8 text-center"
        }, React.createElement("div", {
            className: "text-6xl mb-4"
        }, "üè™"), React.createElement("p", {
            className: "text-gray-500"
        }, "Nenhum produto dispon√≠vel no momento"), React.createElement("p", {
            className: "text-sm text-gray-400 mt-2"
        }, "Em breve teremos novidades!")) : Ke.map(e => React.createElement("div", {
            key: e.id,
            className: "bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow"
        }, e.imagem_url && React.createElement("div", {
            className: "relative cursor-pointer group bg-gray-100",
            onClick: () => x({
                ...p,
                lojaImagemAmpliada: e.imagem_url
            })
        }, React.createElement("img", {
            src: e.imagem_url,
            alt: e.nome,
            className: "w-full h-64 object-contain group-hover:opacity-90 transition-opacity"
        }), React.createElement("div", {
            className: "absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20"
        }, React.createElement("span", {
            className: "bg-white/90 text-gray-700 px-3 py-1 rounded-full text-sm font-semibold"
        }, "üîç Ampliar"))), React.createElement("div", {
            className: "p-4"
        }, React.createElement("h3", {
            className: "font-bold text-gray-800 text-lg"
        }, e.nome), e.marca && React.createElement("p", {
            className: "text-sm text-purple-600 font-medium"
        }, e.marca), e.descricao && React.createElement("p", {
            className: "text-sm text-gray-600 mt-1 line-clamp-2"
        }, e.descricao), React.createElement("div", {
            className: "mt-3 p-3 bg-gray-50 rounded-lg"
        }, React.createElement("div", {
            className: "flex items-baseline justify-between"
        }, React.createElement("span", {
            className: "text-2xl font-bold text-green-600"
        }, "R$ ", parseFloat(e.valor).toFixed(2).replace(".", ","))), e.parcelas_config && e.parcelas_config.filter(e => e && parseFloat(e.valor_parcela) > 0).length > 0 && React.createElement("div", {
            className: "mt-2 flex flex-wrap gap-1"
        }, e.parcelas_config.filter(e => e && parseFloat(e.valor_parcela) > 0).map((e, t) => React.createElement("span", {
            key: t,
            className: "text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full"
        }, 1 === parseInt(e.parcelas) ? "√Ä vista" : `${e.parcelas}x`, " R$ ", parseFloat(e.valor_parcela).toFixed(2).replace(".", ","))))), React.createElement("button", {
            onClick: () => x({
                ...p,
                lojaProdutoSelecionado: e,
                lojaCompraModal: !0
            }),
            className: "mt-3 w-full py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl font-bold text-lg hover:opacity-90 transition-opacity shadow-lg"
        }, "üõí Comprar"))))), p.lojaImagemAmpliada && React.createElement("div", {
            className: "fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",
            onClick: () => x({
                ...p,
                lojaImagemAmpliada: null
            })
        }, React.createElement("button", {
            className: "absolute top-4 right-4 text-white text-4xl hover:text-gray-300",
            onClick: () => x({
                ...p,
                lojaImagemAmpliada: null
            })
        }, "‚úï"), React.createElement("img", {
            src: p.lojaImagemAmpliada,
            alt: "Imagem ampliada",
            className: "max-w-full max-h-full object-contain rounded-lg"
        }))), p.lojaCompraModal && p.lojaProdutoSelecionado && React.createElement("div", {
            className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-purple-600 to-pink-500 p-4 text-white"
        }, React.createElement("h2", {
            className: "text-xl font-bold"
        }, "üõí Finalizar Compra")), React.createElement("div", {
            className: "p-6"
        }, React.createElement("div", {
            className: "flex gap-4 mb-6"
        }, p.lojaProdutoSelecionado.imagem_url && React.createElement("img", {
            src: p.lojaProdutoSelecionado.imagem_url,
            alt: "",
            className: "w-24 h-24 object-cover rounded-lg"
        }), React.createElement("div", null, React.createElement("h3", {
            className: "font-bold text-gray-800"
        }, p.lojaProdutoSelecionado.nome), p.lojaProdutoSelecionado.marca && React.createElement("p", {
            className: "text-sm text-gray-500"
        }, p.lojaProdutoSelecionado.marca), React.createElement("p", {
            className: "text-xl font-bold text-green-600 mt-1"
        }, "R$ ", parseFloat(p.lojaProdutoSelecionado.valor).toFixed(2).replace(".", ",")))), p.lojaProdutoSelecionado.tem_tamanho && p.lojaProdutoSelecionado.tamanhos && p.lojaProdutoSelecionado.tamanhos.length > 0 && React.createElement("div", {
            className: "mb-4"
        }, React.createElement("label", {
            className: "block text-sm font-semibold mb-2"
        }, "Tamanho *"), React.createElement("div", {
            className: "flex flex-wrap gap-2"
        }, p.lojaProdutoSelecionado.tamanhos.map(e => React.createElement("button", {
            key: e.tamanho,
            onClick: () => x({
                ...p,
                lojaCompraTamanho: e.tamanho
            }),
            disabled: e.quantidade <= 0,
            className: "px-4 py-2 rounded-lg border-2 font-semibold transition-all " + (p.lojaCompraTamanho === e.tamanho ? "border-purple-600 bg-purple-50 text-purple-700" : e.quantidade <= 0 ? "border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed" : "border-gray-300 hover:border-purple-400")
        }, e.tamanho, e.quantidade <= 0 && React.createElement("span", {
            className: "text-xs ml-1"
        }, "(Esgotado)"))))), React.createElement("div", {
            className: "mb-6"
        }, React.createElement("label", {
            className: "block text-sm font-semibold mb-2"
        }, "Forma de Pagamento *"), React.createElement("div", {
            className: "space-y-2"
        }, (() => {
            const e = (p.lojaProdutoSelecionado.parcelas_config || []).filter(e => e && parseFloat(e.valor_parcela) > 0);
            return 0 === e.length ? React.createElement("div", {
                className: "text-center py-4 text-gray-500"
            }, React.createElement("p", null, "Nenhuma op√ß√£o de pagamento configurada"), React.createElement("p", {
                className: "text-xs mt-1"
            }, "Entre em contato com o administrador")) : e.map((e, t) => {
                const a = parseInt(e.parcelas) || 1,
                    l = parseFloat(e.valor_parcela) || 0,
                    r = l * a,
                    o = parseFloat(p.lojaProdutoSelecionado.valor) - r,
                    c = 1 === a ? "√Ä Vista" : `${a}x Semanal`;
                return React.createElement("button", {
                    key: t,
                    onClick: () => x({
                        ...p,
                        lojaCompraTipo: c,
                        lojaCompraParcelas: a,
                        lojaCompraValorFinal: r,
                        lojaCompraValorParcela: l,
                        lojaCompraDesconto: o > 0 ? o : 0
                    }),
                    className: "w-full p-4 rounded-xl border-2 text-left transition-all " + (p.lojaCompraTipo === c ? "border-purple-600 bg-purple-50" : "border-gray-200 hover:border-purple-300")
                }, React.createElement("div", {
                    className: "flex justify-between items-center"
                }, React.createElement("div", null, React.createElement("p", {
                    className: "font-semibold"
                }, c), React.createElement("p", {
                    className: "text-xs text-gray-500"
                }, 1 === a ? "Abatimento √∫nico do saldo" : `${a} abatimentos semanais`)), React.createElement("div", {
                    className: "text-right"
                }, o > 0 && React.createElement("p", {
                    className: "text-xs text-green-600 font-semibold"
                }, "Economia R$ ", o.toFixed(2).replace(".", ",")), React.createElement("p", {
                    className: "font-bold text-purple-700"
                }, a > 1 ? `${a}x de ` : "", "R$ ", l.toFixed(2).replace(".", ",")), a > 1 && React.createElement("p", {
                    className: "text-xs text-gray-500"
                }, "Total: R$ ", r.toFixed(2).replace(".", ",")))))
            })
        })())), p.lojaCompraTipo && React.createElement("div", {
            className: "bg-gray-50 rounded-xl p-4 mb-6"
        }, React.createElement("h4", {
            className: "font-bold text-gray-800 mb-2"
        }, "üìã Resumo do Pedido"), React.createElement("div", {
            className: "space-y-1 text-sm"
        }, React.createElement("div", {
            className: "flex justify-between"
        }, React.createElement("span", {
            className: "text-gray-600"
        }, "Valor original:"), React.createElement("span", null, "R$ ", parseFloat(p.lojaProdutoSelecionado.valor).toFixed(2).replace(".", ","))), p.lojaCompraDesconto > 0 && React.createElement("div", {
            className: "flex justify-between text-green-600"
        }, React.createElement("span", null, "Desconto:"), React.createElement("span", null, "- R$ ", p.lojaCompraDesconto.toFixed(2).replace(".", ","))), React.createElement("div", {
            className: "flex justify-between font-bold text-lg border-t pt-2 mt-2"
        }, React.createElement("span", null, "Total:"), React.createElement("span", {
            className: "text-purple-700"
        }, "R$ ", p.lojaCompraValorFinal.toFixed(2).replace(".", ","))), p.lojaCompraParcelas > 1 && React.createElement("p", {
            className: "text-center text-xs text-gray-500 mt-1"
        }, "em ", p.lojaCompraParcelas, "x de R$ ", p.lojaCompraValorParcela.toFixed(2).replace(".", ",")))), React.createElement("div", {
            className: "flex gap-3"
        }, React.createElement("button", {
            onClick: () => x({
                ...p,
                lojaCompraModal: !1,
                lojaProdutoSelecionado: null,
                lojaCompraTipo: null,
                lojaCompraTamanho: null
            }),
            className: "flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold"
        }, "Cancelar"), React.createElement("button", {
            onClick: async () => {
                if (!p.lojaProdutoSelecionado.tem_tamanho || p.lojaCompraTamanho)
                    if (p.lojaCompraTipo) try {
                        const e = {
                            produto_id: p.lojaProdutoSelecionado.id,
                            user_cod: l.codProfissional,
                            user_name: l.fullName,
                            produto_nome: p.lojaProdutoSelecionado.nome,
                            tamanho: p.lojaCompraTamanho || null,
                            marca: p.lojaProdutoSelecionado.marca || null,
                            valor_original: parseFloat(p.lojaProdutoSelecionado.valor),
                            tipo_abatimento: p.lojaCompraTipo,
                            valor_abatimento: p.lojaCompraDesconto || 0,
                            valor_final: p.lojaCompraValorFinal,
                            parcelas: p.lojaCompraParcelas,
                            valor_parcela: p.lojaCompraValorParcela
                        };
                        await fetch(`${API_URL}/loja/pedidos`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(e)
                        }), ja("‚úÖ Pedido enviado com sucesso!", "success"), x({
                            ...p,
                            lojaCompraModal: !1,
                            lojaProdutoSelecionado: null,
                            lojaCompraTipo: null,
                            lojaCompraTamanho: null
                        }), Za()
                    } catch (e) {
                        ja("Erro ao enviar pedido", "error")
                    } else ja("Selecione a forma de pagamento", "error");
                    else ja("Selecione um tamanho", "error")
            },
            className: "flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl font-semibold hover:opacity-90"
        }, "‚úÖ Confirmar Pedido"))))))));
        }
        // Verificar permiss√£o para Financeiro (admin comum)
        const canAccessFinanceiro = hasModuleAccess(l, "financeiro");
        if ((canAccessFinanceiro && "financeiro" === Ee) || "admin_financeiro" === l.role) {
            const e = "admin_master" === l.role;
            return React.createElement("div", {
                className: "min-h-screen bg-gray-50"
            }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null), 
            // Modal de Relat√≥rio N√£o Lido (ci√™ncia)
            relatorioNaoLido && React.createElement("div", {
                className: "fixed inset-0 bg-black/70 flex items-center justify-center z-[100] p-4"
            },
                React.createElement("div", {className: "bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col animate-fade-in"},
                    // Header
                    React.createElement("div", {className: "bg-gradient-to-r from-teal-600 to-teal-700 text-white p-4 flex items-center gap-3"},
                        React.createElement("span", {className: "text-3xl"}, "üì¢"),
                        React.createElement("div", null,
                            React.createElement("h3", {className: "text-lg font-bold"}, "Novo Relat√≥rio Di√°rio"),
                            React.createElement("p", {className: "text-teal-100 text-sm"}, 
                                relatoriosNaoLidos.length > 1 
                                    ? `${relatoriosNaoLidos.length} relat√≥rios pendentes de leitura`
                                    : "1 relat√≥rio pendente de leitura"
                            )
                        )
                    ),
                    // Info do autor
                    React.createElement("div", {className: "p-4 bg-gray-50 border-b flex items-center gap-3"},
                        relatorioNaoLido.usuario_foto 
                            ? React.createElement("img", {
                                src: relatorioNaoLido.usuario_foto,
                                className: "w-12 h-12 rounded-full object-cover border-2 border-teal-200"
                            })
                            : React.createElement("div", {
                                className: "w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold text-lg"
                            }, (relatorioNaoLido.usuario_nome || "?").charAt(0).toUpperCase()),
                        React.createElement("div", null,
                            React.createElement("p", {className: "font-bold text-gray-800"}, relatorioNaoLido.titulo),
                            React.createElement("p", {className: "text-sm text-gray-500"}, 
                                relatorioNaoLido.usuario_nome, " ‚Ä¢ ", 
                                new Date(relatorioNaoLido.created_at).toLocaleDateString('pt-BR', {
                                    day: '2-digit', month: '2-digit', year: 'numeric',
                                    hour: '2-digit', minute: '2-digit'
                                })
                            )
                        )
                    ),
                    // Conte√∫do
                    React.createElement("div", {className: "p-4 overflow-y-auto flex-1"},
                        React.createElement("div", {
                            className: "text-gray-700 whitespace-pre-wrap",
                            dangerouslySetInnerHTML: { __html: (relatorioNaoLido.conteudo || '').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/_(.*?)_/g, '<em>$1</em>') }
                        }),
                        relatorioNaoLido.imagem_url && React.createElement("div", {className: "mt-4"},
                            React.createElement("img", {
                                src: relatorioNaoLido.imagem_url,
                                className: "max-w-full rounded-lg shadow cursor-pointer hover:opacity-90",
                                onClick: () => setRelatorioImagemAmpliada(relatorioNaoLido.imagem_url)
                            })
                        )
                    ),
                    // Footer com bot√£o de ci√™ncia
                    React.createElement("div", {className: "p-4 bg-gray-50 border-t"},
                        React.createElement("button", {
                            onClick: () => marcarRelatorioComoLido(relatorioNaoLido.id),
                            className: "w-full px-6 py-4 bg-teal-600 text-white rounded-xl font-bold text-lg hover:bg-teal-700 flex items-center justify-center gap-2 shadow-lg"
                        }, "‚úÖ Estou Ciente")
                    )
                )
            ),
            // Modal de imagem ampliada (relat√≥rio)
            relatorioImagemAmpliada && React.createElement("div", {
                className: "fixed inset-0 bg-black/90 flex items-center justify-center z-[110] p-4",
                onClick: () => setRelatorioImagemAmpliada(null)
            },
                React.createElement("div", {className: "relative max-w-4xl max-h-[90vh]"},
                    React.createElement("button", {
                        onClick: () => setRelatorioImagemAmpliada(null),
                        className: "absolute -top-10 right-0 text-white text-3xl hover:text-gray-300"
                    }, "‚úï"),
                    React.createElement("img", {
                        src: relatorioImagemAmpliada,
                        className: "max-w-full max-h-[85vh] rounded-lg shadow-2xl",
                        onClick: (e) => e.stopPropagation()
                    })
                )
            ),
            V && React.createElement(PixQRCodeModal, {
                withdrawal: V,
                onClose: () => J(null),
                showToast: ja
            }), 
            // Modal de notifica√ß√£o de tarefas pendentes
            todoNotifModal && todoPendentesNotif.length > 0 && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"
            }, React.createElement("div", {
                className: "bg-gradient-to-r from-orange-500 to-red-500 p-4 text-white"
            }, React.createElement("h2", {className: "text-xl font-bold flex items-center gap-2"}, "‚ö†Ô∏è Aten√ß√£o!"),
                React.createElement("p", {className: "text-orange-100 text-sm"}, "Voc√™ possui tarefas pendentes")
            ), React.createElement("div", {className: "p-4 max-h-60 overflow-y-auto"},
                React.createElement("p", {className: "text-gray-600 mb-3"}, "üìã ", todoPendentesNotif.length, " tarefa(s) precisam da sua aten√ß√£o:"),
                React.createElement("div", {className: "space-y-2"},
                    todoPendentesNotif.slice(0, 5).map(t => React.createElement("div", {
                        key: t.id,
                        className: "bg-orange-50 border-l-4 border-orange-500 p-3 rounded"
                    }, React.createElement("p", {className: "font-semibold text-gray-800"}, t.titulo),
                        t.data_prazo && React.createElement("p", {className: "text-xs text-orange-600"}, "üìÖ Vence: ", new Date(t.data_prazo).toLocaleDateString("pt-BR"))
                    ))
                ),
                todoPendentesNotif.length > 5 && React.createElement("p", {className: "text-sm text-gray-500 mt-2"}, "... e mais ", todoPendentesNotif.length - 5, " tarefa(s)")
            ), React.createElement("div", {className: "flex gap-3 p-4 border-t"},
                React.createElement("button", {
                    onClick: () => setTodoNotifModal(false),
                    className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
                }, "Fechar"),
                React.createElement("button", {
                    onClick: () => { setTodoNotifModal(false); he("todo"); },
                    className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                }, "üìã Ir para Tarefas")
            ))),
            e ? React.createElement("nav", {
                className: "bg-gradient-to-r from-indigo-900 to-purple-900 shadow-lg"
            }, 
            // Primeira linha - Logo e usu√°rio
            React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 pt-3 pb-2 flex justify-between items-center border-b border-white/10"
            }, React.createElement("div", {
                className: "flex items-center gap-3"
            }, 
            socialProfile?.profile_photo ? React.createElement("img", {
                src: socialProfile.profile_photo,
                className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
            }) : React.createElement("div", {
                className: "w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold border-2 border-white/50"
            }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
            React.createElement("div", null, React.createElement("h1", {
                className: "text-lg font-bold text-white"
            }, "üëë Admin Master"), React.createElement("p", {
                className: "text-xs text-indigo-200"
            }, socialProfile?.display_name || l.fullName))), 
            React.createElement("div", {
                className: "flex items-center gap-3"
            }, React.createElement("div", {
                className: "flex items-center gap-2 bg-white/10 px-3 py-1 rounded-full"
            }, React.createElement("span", {
                className: "w-2 h-2 rounded-full " + (f ? "bg-yellow-400 animate-pulse" : "bg-green-400")
            }), React.createElement("span", {
                className: "text-xs text-indigo-200"
            }, f ? "Atualizando..." : E ? `${E.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}` : "‚ö° 10s")), React.createElement("button", {
                onClick: ul,
                className: "px-3 py-1.5 bg-white/20 text-white rounded-lg hover:bg-white/30 text-sm font-semibold"
            }, "üîÑ"), React.createElement("button", {
                onClick: () => o(null),
                className: "px-3 py-1.5 text-white hover:bg-white/20 rounded-lg text-sm"
            }, "Sair"))),
            // Segunda linha - Navega√ß√£o
            React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 py-2"
            }, React.createElement("div", {
                className: "flex flex-wrap gap-1"
            }, React.createElement("button", {
                onClick: () => he("home"),
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("home" === Ee ? "bg-white text-purple-900" : "text-white hover:bg-white/10")
            }, "üè† In√≠cio"), 
            hasModuleAccess(l, "solicitacoes") && React.createElement("button", {
                onClick: () => { he("solicitacoes"); x(e => ({...e, adminTab: "dashboard"})); },
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("solicitacoes" === Ee && "disponibilidade" !== p.adminTab ? "bg-white text-purple-900" : "text-white hover:bg-white/10")
            }, "üìã Solicita√ß√µes"), 
            hasModuleAccess(l, "financeiro") && React.createElement("button", {
                onClick: () => { he("financeiro"); x(e => ({...e, finTab: getFirstAllowedTab(l, "financeiro", "home-fin")})); },
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("financeiro" === Ee ? "bg-white text-green-800" : "text-white hover:bg-white/10")
            }, "üí∞ Financeiro"), 
            hasModuleAccess(l, "disponibilidade") && React.createElement("button", {
                onClick: () => { he("solicitacoes"); x(e => ({...e, adminTab: "disponibilidade"})); },
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("solicitacoes" === Ee && "disponibilidade" === p.adminTab ? "bg-white text-blue-800" : "text-white hover:bg-white/10")
            }, "üìÖ Disponibilidade"), 
            hasModuleAccess(l, "bi") && React.createElement("button", {
                onClick: () => {
                    he("bi"), ll(), tl(), al(), pl(), carregarPrazosProf()
                },
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("bi" === Ee ? "bg-white text-orange-800" : "text-white hover:bg-white/10")
            }, "üìä BI"), 
            hasModuleAccess(l, "todo") && React.createElement("button", {
                onClick: () => he("todo"),
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("todo" === Ee ? "bg-white text-indigo-800" : "text-white hover:bg-white/10")
            }, "üìù TO-DO"), 
            React.createElement("button", {
                onClick: () => he("social"),
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("social" === Ee ? "bg-white text-pink-800" : "text-white hover:bg-white/10")
            }, "üíú Social"), 
            hasModuleAccess(l, "operacional") && React.createElement("button", {
                onClick: () => he("operacional"),
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("operacional" === Ee ? "bg-white text-teal-800" : "text-white hover:bg-white/10")
            }, "‚öôÔ∏è Operacional"), 
            hasModuleAccess(l, "config") && React.createElement("button", {
                onClick: () => { he("config"); x(e => ({...e, configTab: getFirstAllowedTab(l, "config", "usuarios")})); },
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("config" === Ee ? "bg-white text-gray-800" : "text-white hover:bg-white/10")
            }, "üîß Config")))) : React.createElement("nav", {
                className: "bg-green-800 shadow-lg"
            }, React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"
            }, React.createElement("div", {
                className: "flex items-center gap-3"
            }, 
            // Foto de perfil
            socialProfile?.profile_photo ? React.createElement("img", {
                src: socialProfile.profile_photo,
                className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
            }) : React.createElement("div", {
                className: "w-10 h-10 rounded-full bg-green-600 flex items-center justify-center text-white font-bold border-2 border-white/50"
            }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
            React.createElement("h1", {
                className: "text-xl font-bold text-white"
            }, "üí∞ Painel Financeiro"), 
            // Bot√µes de navega√ß√£o para admin comum
            "admin" === l.role && React.createElement("div", {
                className: "flex bg-green-900/50 rounded-lg p-1 ml-3"
            },
                hasModuleAccess(l, "solicitacoes") && React.createElement("button", {
                    onClick: () => he("home"),
                    className: "px-3 py-1.5 rounded-lg text-xs font-semibold text-white hover:bg-white/10"
                }, "üìã Solicita√ß√µes"),
                React.createElement("button", {
                    onClick: () => { he("financeiro"); x(e => ({...e, finTab: getFirstAllowedTab(l, "financeiro", "home-fin")})); },
                    className: "px-3 py-1.5 rounded-lg text-xs font-semibold bg-white text-green-800"
                }, "üí∞ Financeiro"),
                hasModuleAccess(l, "operacional") && React.createElement("button", {
                    onClick: () => he("operacional"),
                    className: "px-3 py-1.5 rounded-lg text-xs font-semibold text-white hover:bg-white/10"
                }, "‚öôÔ∏è Operacional"),
                hasModuleAccess(l, "bi") && React.createElement("button", {
                    onClick: () => { he("bi"); ll(); tl(); al(); pl(); carregarPrazosProf(); },
                    className: "px-3 py-1.5 rounded-lg text-xs font-semibold text-white hover:bg-white/10"
                }, "üìä BI"),
                hasModuleAccess(l, "todo") && React.createElement("button", {
                    onClick: () => he("todo"),
                    className: "px-3 py-1.5 rounded-lg text-xs font-semibold text-white hover:bg-white/10"
                }, "üìã TO-DO"),
                React.createElement("button", {
                    onClick: () => he("social"),
                    className: "px-3 py-1.5 rounded-lg text-xs font-semibold text-white hover:bg-white/10"
                }, "üíú Social")
            ),
            React.createElement("div", {
                className: "flex items-center gap-2 bg-green-900/50 px-3 py-1 rounded-full"
            }, React.createElement("span", {
                className: "w-2 h-2 rounded-full " + (f ? "bg-yellow-400 animate-pulse" : "bg-green-400 animate-pulse")
            }), React.createElement("span", {
                className: "text-xs text-green-200"
            }, f ? "üîÑ Atualizando..." : "‚ö° Tempo Real (10s)")), E && React.createElement("span", {
                className: "text-xs text-green-300"
            }, "√öltima: ", E.toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit"
            }))), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("button", {
                onClick: ul,
                className: "px-4 py-2 bg-green-700 text-white rounded-lg hover:bg-green-600 text-sm font-semibold"
            }, "üîÑ"), React.createElement("button", {
                onClick: () => o(null),
                className: "px-4 py-2 text-white hover:bg-green-700 rounded-lg"
            }, "Sair")))), p.deleteConfirm && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow-2xl p-6 max-w-md w-full"
            }, React.createElement("h3", {
                className: "text-xl font-bold text-red-600 mb-4"
            }, "‚ö†Ô∏è Confirmar Exclus√£o"), React.createElement("p", {
                className: "text-gray-700 mb-2"
            }, "Tem certeza que deseja excluir esta solicita√ß√£o?"), React.createElement("div", {
                className: "bg-gray-50 rounded-lg p-4 mb-4"
            }, React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Profissional:"), " ", p.deleteConfirm.user_name), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "C√≥digo:"), " ", p.deleteConfirm.user_cod), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Valor:"), " ", er(p.deleteConfirm.requested_amount)), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Data:"), " ", new Date(p.deleteConfirm.created_at).toLocaleString("pt-BR"))), React.createElement("p", {
                className: "text-red-600 text-sm mb-4 font-semibold"
            }, "Esta a√ß√£o n√£o pode ser desfeita!"), React.createElement("div", {
                className: "flex gap-3"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    deleteConfirm: null
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "Cancelar"), React.createElement("button", {
                onClick: () => (async e => {
                    try {
                        await fetch(`${API_URL}/withdrawals/${e}`, {
                            method: "DELETE"
                        }), ja("üóëÔ∏è Solicita√ß√£o exclu√≠da!", "success"), x({
                            ...p,
                            deleteConfirm: null
                        }), Ua()
                    } catch (e) {
                        ja("Erro ao excluir", "error")
                    }
                })(p.deleteConfirm.id),
                className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700"
            }, "üóëÔ∏è Excluir")))), 
            
            // Barra de abas - oculta na Home
            p.finTab !== "home-fin" && React.createElement("div", {
                className: "bg-white border-b sticky top-0 z-10"
            }, React.createElement("div", {
                className: "max-w-7xl mx-auto px-2 flex gap-0.5 overflow-x-auto"
            }, 
            // Bot√£o Home
            React.createElement("button", {
                onClick: () => { x({...p, finTab: "home-fin"}); },
                className: "relative px-2 py-1.5 text-xs font-semibold whitespace-nowrap rounded-t-lg " + ("home-fin" === p.finTab ? "text-green-700 border-b-2 border-green-600 bg-green-50" : "text-gray-600 hover:bg-gray-100")
            }, "üè† Home"),
            ["solicitacoes", "validacao", "conciliacao", "saldo-plific", "resumo", "gratuidades", "restritos", "indicacoes", "promo-novatos", "loja", "relatorios", "horarios", "avisos", "backup"].filter(function(tabId) {
                // Admin master tem acesso a tudo
                if ("admin_master" === l.role) return true;
                // Verificar permiss√£o da aba
                const abaKey = "financeiro_" + tabId.replace("-", "");
                const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                // Se n√£o h√° permiss√µes de abas definidas, mostrar todas
                if (Object.keys(abas).length === 0) return true;
                // Verificar se a aba espec√≠fica est√° permitida (default: true se n√£o definido)
                return abas[abaKey] !== false;
            }).map(e => React.createElement("button", {
                key: e,
                onClick: () => {
                    x({
                        ...p,
                        finTab: e
                    }), Pa(e)
                },
                className: "relative px-2 py-1.5 text-xs font-semibold whitespace-nowrap rounded-t-lg " + ((p.finTab || "home-fin") === e ? "text-green-700 border-b-2 border-green-600 bg-green-50" : "text-gray-600 hover:bg-gray-100")
            }, "solicitacoes" === e && React.createElement(React.Fragment, null, "üìã Solicita√ß√µes", y.solicitacoes > 0 && "solicitacoes" !== p.finTab && React.createElement("span", {
                className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse"
            }, y.solicitacoes > 9 ? "9+" : y.solicitacoes)), "validacao" === e && React.createElement(React.Fragment, null, "üìä Valida√ß√£o", y.validacao > 0 && "validacao" !== p.finTab && React.createElement("span", {
                className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse"
            }, y.validacao > 9 ? "9+" : y.validacao)), "conciliacao" === e && "‚úÖ Concilia√ß√£o", "resumo" === e && "üîç Resumo", "gratuidades" === e && React.createElement(React.Fragment, null, "üéÅ Gratuidades", y.gratuidades > 0 && "gratuidades" !== p.finTab && React.createElement("span", {
                className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse"
            }, y.gratuidades > 9 ? "9+" : y.gratuidades)), "restritos" === e && "üö´ Restritos", "indicacoes" === e && "üë• Indica√ß√µes", "promo-novatos" === e && "üöÄ Promo Novatos", "loja" === e && React.createElement(React.Fragment, null, "üõí Loja", y.loja > 0 && "loja" !== p.finTab && React.createElement("span", {
                className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse"
            }, y.loja > 9 ? "9+" : y.loja)), "relatorios" === e && "üìà Relat√≥rios", "horarios" === e && "üïê Hor√°rios", "avisos" === e && "üì¢ Avisos", "backup" === e && "üíæ Backup", "saldo-plific" === e && "üí≥ Saldo Plific")))),
            
            // =============================================
            // HOME FINANCEIRO - P√°gina Inicial do M√≥dulo
            // =============================================
            ("home-fin" === p.finTab || !p.finTab) && React.createElement("div", {className: "min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50"},
                // Hero Section com Logo
                React.createElement("div", {className: "flex flex-col items-center justify-center py-12"},
                    React.createElement("img", {
                        src: "https://github.com/Leonardodevcloud/tutts-frontend/blob/main/tutts%20FI.png?raw=true",
                        alt: "Tutts Financeiro",
                        className: "w-64 h-64 object-contain mb-6 drop-shadow-2xl"
                    }),
                    React.createElement("h1", {className: "text-3xl font-bold text-gray-800 mb-2"}, "M√≥dulo Financeiro"),
                    React.createElement("p", {className: "text-gray-500 text-center max-w-xl"}, 
                        "Gest√£o completa de saques, gratuidades, valida√ß√µes e controle financeiro dos profissionais."
                    )
                ),
                
                // Cards de Navega√ß√£o
                React.createElement("div", {className: "max-w-6xl mx-auto px-6 pb-12"},
                    React.createElement("div", {className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},
                        
                        // Card Solicita√ß√µes
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "solicitacoes"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-green-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-green-500 to-emerald-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform relative"},
                                    React.createElement("span", {className: "text-3xl"}, "üìã"),
                                    y.solicitacoes > 0 && React.createElement("span", {className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"}, y.solicitacoes > 9 ? "9+" : y.solicitacoes)
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Solicita√ß√µes"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Saques emergenciais pendentes de aprova√ß√£o e hist√≥rico completo.")
                            )
                        ),
                        
                        // Card Valida√ß√£o
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "validacao"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-blue-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-blue-500 to-cyan-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform relative"},
                                    React.createElement("span", {className: "text-3xl"}, "üìä"),
                                    y.validacao > 0 && React.createElement("span", {className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"}, y.validacao > 9 ? "9+" : y.validacao)
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Valida√ß√£o"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Aprova√ß√£o de ajustes de OS e retornos enviados pelos entregadores.")
                            )
                        ),
                        
                        // Card Concilia√ß√£o
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "conciliacao"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-teal-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-teal-500 to-cyan-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-teal-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "‚úÖ")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Concilia√ß√£o"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Marcar saques como efetivamente pagos e controle de pagamentos.")
                            )
                        ),
                        
                        // Card Resumo
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "resumo"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-purple-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-purple-500 to-violet-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üîç")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Resumo"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Busca detalhada por profissional com hist√≥rico completo de saques.")
                            )
                        ),
                        
                        // Card Gratuidades
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "gratuidades"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-pink-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-pink-500 to-rose-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-pink-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform relative"},
                                    React.createElement("span", {className: "text-3xl"}, "üéÅ"),
                                    y.gratuidades > 0 && React.createElement("span", {className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"}, y.gratuidades > 9 ? "9+" : y.gratuidades)
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Gratuidades"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Gerenciar saques gratuitos como premia√ß√µes e bonifica√ß√µes.")
                            )
                        ),
                        
                        // Card Restritos
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "restritos"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-red-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-red-500 to-rose-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-red-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üö´")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Restritos"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Profissionais bloqueados de realizar saques emergenciais.")
                            )
                        ),
                        
                        // Card Indica√ß√µes
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "indicacoes"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-amber-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-amber-500 to-orange-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üë•")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Indica√ß√µes"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Programa de indica√ß√£o de novos profissionais e bonifica√ß√µes.")
                            )
                        ),
                        
                        // Card Promo Novatos
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "promo-novatos"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-indigo-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-indigo-500 to-blue-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üöÄ")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Promo Novatos"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Promo√ß√µes e campanhas especiais para novos entregadores.")
                            )
                        ),
                        
                        // Card Loja
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "loja"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-violet-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-violet-500 to-purple-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform relative"},
                                    React.createElement("span", {className: "text-3xl"}, "üõí"),
                                    y.loja > 0 && React.createElement("span", {className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"}, y.loja > 9 ? "9+" : y.loja)
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Loja"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Lojinha Tutts com produtos, pedidos e gest√£o de estoque.")
                            )
                        ),
                        
                        // Card Relat√≥rios
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "relatorios"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-cyan-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-cyan-500 to-teal-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-cyan-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üìà")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Relat√≥rios"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Relat√≥rios gerenciais e exporta√ß√£o de dados financeiros.")
                            )
                        ),
                        
                        // Card Hor√°rios
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "horarios"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-sky-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-sky-500 to-blue-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-sky-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üïê")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Hor√°rios"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Configurar hor√°rios de funcionamento para saques.")
                            )
                        ),
                        
                        // Card Avisos
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "avisos"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-yellow-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-yellow-500 to-amber-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-yellow-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üì¢")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Avisos"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Comunicados e avisos para os profissionais no app.")
                            )
                        ),
                        
                        // Card Backup
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "backup"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-gray-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-gray-500 to-slate-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-gray-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üíæ")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Backup"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Exportar e fazer backup dos dados do sistema.")
                            )
                        ),
                        React.createElement("div", {
                            onClick: () => { x({...p, finTab: "saldo-plific"}); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all cursor-pointer group overflow-hidden border border-purple-200"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-purple-500 to-indigo-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("span", {className: "text-3xl"}, "üí≥"),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2 mt-2"}, "Saldo Plific"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Consultar saldos.")
                            )
                        )
                    ),
                    
                    // Resumo R√°pido com contadores
                    React.createElement("div", {className: "mt-10"},
                        React.createElement("h2", {className: "text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"},
                            React.createElement("span", null, "‚ö°"),
                            "Pend√™ncias"
                        ),
                        React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-4"},
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center border-l-4 border-green-500"},
                                React.createElement("p", {className: "text-3xl font-bold text-green-600"}, y.solicitacoes || 0),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Saques Pendentes")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center border-l-4 border-blue-500"},
                                React.createElement("p", {className: "text-3xl font-bold text-blue-600"}, y.validacao || 0),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Ajustes p/ Validar")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center border-l-4 border-pink-500"},
                                React.createElement("p", {className: "text-3xl font-bold text-pink-600"}, y.gratuidades || 0),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Gratuidades Pendentes")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center border-l-4 border-violet-500"},
                                React.createElement("p", {className: "text-3xl font-bold text-violet-600"}, y.loja || 0),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Pedidos Loja")
                            )
                        )
                    )
                )
            ),
            
            React.createElement("div", {
                className: "max-w-7xl mx-auto p-6"
            }, ("solicitacoes" === p.finTab) && React.createElement(React.Fragment, null, (() => {
                const e = e => {
                        const t = new Date(e),
                            a = t.getDay(),
                            l = t.getHours() + t.getMinutes() / 60;
                        return 0 !== a && (6 === a ? l >= 9 && l < 12 : l >= 9 && l < 18)
                    },
                    t = new Date;
                t.setHours(0, 0, 0, 0);
                const a = q.filter(e => new Date(e.created_at) >= t),
                    l = a.filter(e => "aguardando_aprovacao" !== e.status),
                    r = (a.filter(e => "aguardando_aprovacao" === e.status), a.filter(t => ("aprovado" === t.status || "aprovado_gratuidade" === t.status) && t.updated_at && t.created_at && e(t.created_at)).map(e => (new Date(e.updated_at) - new Date(e.created_at)) / 6e4).filter(e => e > 0 && e <= 1440)),
                    o = r.length > 0 ? Math.round(r.reduce((e, t) => e + t, 0) / r.length) : 0,
                    c = a.filter(t => "aguardando_aprovacao" === t.status && e(t.created_at) && Date.now() - new Date(t.created_at).getTime() >= 36e5),
                    s = 0 === c.length ? 100 : Math.max(0, 100 - 20 * c.length),
                    n = o <= 30 ? 100 : o <= 60 ? 80 : o <= 120 ? 60 : 40,
                    m = Math.round((s + n) / 2);
                return React.createElement(React.Fragment, null, React.createElement("div", {
                    className: "grid grid-cols-2 md:grid-cols-6 gap-4 mb-6"
                }, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Total"), React.createElement("p", {
                    className: "text-2xl font-bold text-purple-600"
                }, q.length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Aguardando"), React.createElement("p", {
                    className: "text-2xl font-bold text-yellow-600"
                }, q.filter(e => "aguardando_aprovacao" === e.status).length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Aprovadas"), React.createElement("p", {
                    className: "text-2xl font-bold text-green-600"
                }, q.filter(e => "aprovado" === e.status).length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Aprov. Gratuidade"), React.createElement("p", {
                    className: "text-2xl font-bold text-blue-600"
                }, q.filter(e => "aprovado_gratuidade" === e.status).length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Rejeitadas"), React.createElement("p", {
                    className: "text-2xl font-bold text-red-600"
                }, q.filter(e => "rejeitado" === e.status).length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "üö® Atrasadas (+1h)"), React.createElement("p", {
                    className: "text-2xl font-bold " + (c.length > 0 ? "text-red-600 animate-pulse" : "text-gray-400")
                }, c.length))), React.createElement("div", {
                    className: "bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 mb-6 text-white"
                }, React.createElement("div", {
                    className: "flex flex-col md:flex-row items-center gap-6"
                }, React.createElement("div", {
                    className: "relative w-32 h-32"
                }, React.createElement("svg", {
                    className: "w-32 h-32 transform -rotate-90"
                }, React.createElement("circle", {
                    cx: "64",
                    cy: "64",
                    r: "56",
                    stroke: "rgba(255,255,255,0.2)",
                    strokeWidth: "12",
                    fill: "none"
                }), React.createElement("circle", {
                    cx: "64",
                    cy: "64",
                    r: "56",
                    stroke: m >= 80 ? "#10b981" : m >= 50 ? "#f59e0b" : "#ef4444",
                    strokeWidth: "12",
                    fill: "none",
                    strokeDasharray: 3.52 * m + " 352",
                    strokeLinecap: "round"
                })), React.createElement("div", {
                    className: "absolute inset-0 flex flex-col items-center justify-center"
                }, React.createElement("span", {
                    className: "text-3xl font-bold"
                }, m), React.createElement("span", {
                    className: "text-xs opacity-70"
                }, "SCORE"))), React.createElement("div", {
                    className: "flex-1 grid grid-cols-2 md:grid-cols-4 gap-4"
                }, React.createElement("div", {
                    className: "bg-white/10 rounded-lg p-3 text-center"
                }, React.createElement("p", {
                    className: "text-white/70 text-xs"
                }, "Hoje"), React.createElement("p", {
                    className: "text-2xl font-bold"
                }, a.length), React.createElement("p", {
                    className: "text-xs text-white/60"
                }, l.length, " processadas")), React.createElement("div", {
                    className: "bg-white/10 rounded-lg p-3 text-center"
                }, React.createElement("p", {
                    className: "text-white/70 text-xs"
                }, "Tempo M√©dio"), React.createElement("p", {
                    className: "text-2xl font-bold"
                }, o < 60 ? `${o}min` : `${Math.floor(o/60)}h${o%60}m`), React.createElement("p", {
                    className: "text-xs " + (o <= 60 ? "text-green-300" : "text-red-300")
                }, o <= 30 ? "‚úÖ Excelente" : o <= 60 ? "‚ö†Ô∏è Bom" : "üö® Lento")), React.createElement("div", {
                    className: "bg-white/10 rounded-lg p-3 text-center"
                }, React.createElement("p", {
                    className: "text-white/70 text-xs"
                }, "Pendentes"), React.createElement("p", {
                    className: "text-2xl font-bold"
                }, q.filter(e => "aguardando_aprovacao" === e.status).length), React.createElement("p", {
                    className: "text-xs text-white/60"
                }, "aguardando")), React.createElement("div", {
                    className: "bg-white/10 rounded-lg p-3 text-center"
                }, React.createElement("p", {
                    className: "text-white/70 text-xs"
                }, "Prazo (1h)"), React.createElement("p", {
                    className: "text-2xl font-bold " + (0 === c.length ? "text-green-300" : "text-red-300")
                }, 0 === c.length ? "‚úÖ" : `${c.length} üö®`), React.createElement("p", {
                    className: "text-xs text-white/60"
                }, 0 === c.length ? "Nenhum atraso" : "A√ß√£o necess√°ria!"))))))
            })(), (() => {
                const e = q.filter(e => {
                    if ("aguardando_aprovacao" !== e.status) return !1;
                    return (Date.now() - new Date(e.created_at).getTime()) / 36e5 >= 1
                });
                return 0 === e.length ? null : React.createElement("div", {
                    className: "bg-red-50 border-2 border-red-400 rounded-xl p-4 mb-6 animate-pulse"
                }, React.createElement("div", {
                    className: "flex items-center gap-3"
                }, React.createElement("span", {
                    className: "text-3xl"
                }, "üö®"), React.createElement("div", {
                    className: "flex-1"
                }, React.createElement("p", {
                    className: "text-red-800 font-bold text-lg"
                }, "ATEN√á√ÉO: ", e.length, " saque(s) aguardando h√° mais de 1 hora!"), React.createElement("p", {
                    className: "text-red-600 text-sm mt-1"
                }, "Profissionais aguardando: ", e.map(e => e.user_name || e.user_cod).join(", "))), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        filterStatus: "atrasados"
                    }),
                    className: "px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 whitespace-nowrap"
                }, "üëÄ Ver Atrasados")))
            })(), React.createElement("div", {
                className: "bg-white rounded-xl shadow overflow-hidden"
            }, React.createElement("div", {
                className: "p-4 border-b"
            }, React.createElement("div", {
                className: "flex flex-wrap gap-2"
            }, React.createElement("button", {
                onClick: () => { setSolicitacoesPagina(1); x({
                    ...p,
                    filterStatus: ""
                }); },
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + (p.filterStatus ? "bg-gray-100 hover:bg-gray-200" : "bg-purple-600 text-white")
            }, "üìã Todas (", q.length, ")"), React.createElement("button", {
                onClick: () => { setSolicitacoesPagina(1); x({
                    ...p,
                    filterStatus: "atrasados"
                }); },
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("atrasados" === p.filterStatus ? "bg-red-600 text-white" : "bg-gray-100 hover:bg-gray-200")
            }, "üö® Atrasados (", q.filter(e => "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at).getTime() >= 36e5).length, ")"), React.createElement("button", {
                onClick: () => { setSolicitacoesPagina(1); x({
                    ...p,
                    filterStatus: "aguardando_aprovacao"
                }); },
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("aguardando_aprovacao" === p.filterStatus ? "bg-yellow-500 text-white" : "bg-gray-100 hover:bg-gray-200")
            }, "‚è≥ Aguardando (", q.filter(e => "aguardando_aprovacao" === e.status).length, ")"), React.createElement("button", {
                onClick: () => { setSolicitacoesPagina(1); x({
                    ...p,
                    filterStatus: "aprovado"
                }); },
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("aprovado" === p.filterStatus ? "bg-green-600 text-white" : "bg-gray-100 hover:bg-gray-200")
            }, "‚úÖ Aprovadas (", q.filter(e => "aprovado" === e.status).length, ")"), React.createElement("button", {
                onClick: () => { setSolicitacoesPagina(1); x({
                    ...p,
                    filterStatus: "aprovado_gratuidade"
                }); },
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("aprovado_gratuidade" === p.filterStatus ? "bg-blue-600 text-white" : "bg-gray-100 hover:bg-gray-200")
            }, "üéÅ Aprov. Gratuidade (", q.filter(e => "aprovado_gratuidade" === e.status).length, ")"), React.createElement("button", {
                onClick: () => { setSolicitacoesPagina(1); x({
                    ...p,
                    filterStatus: "rejeitado"
                }); },
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("rejeitado" === p.filterStatus ? "bg-red-600 text-white" : "bg-gray-100 hover:bg-gray-200")
            }, "‚ùå Rejeitadas (", q.filter(e => "rejeitado" === e.status).length, ")"), React.createElement("button", {
                onClick: () => { setSolicitacoesPagina(1); x({
                    ...p,
                    filterStatus: "inativo"
                }); },
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("inativo" === p.filterStatus ? "bg-orange-500 text-white" : "bg-gray-100 hover:bg-gray-200")
            }, "‚ö†Ô∏è Inativo (", q.filter(e => "inativo" === e.status).length, ")"),
            // Toggle de Acerto
            React.createElement("div", {
                className: "ml-auto flex items-center gap-2 bg-gray-100 rounded-lg px-3 py-2"
            },
                React.createElement("span", {
                    className: "text-xs font-medium " + (acertoRealizado ? "text-gray-400" : "text-orange-600 font-bold")
                }, "Acerto Pendente"),
                React.createElement("button", {
                    onClick: () => { const novoValor = !acertoRealizado; setAcertoRealizado(novoValor); try { localStorage.setItem("tutts_acerto_realizado", JSON.stringify(novoValor)); } catch(e) {} },
                    className: "relative w-12 h-6 rounded-full transition-colors " + (acertoRealizado ? "bg-green-500" : "bg-orange-500")
                },
                    React.createElement("span", {
                        className: "absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform " + (acertoRealizado ? "right-1" : "left-1")
                    })
                ),
                React.createElement("span", {
                    className: "text-xs font-medium " + (acertoRealizado ? "text-green-600 font-bold" : "text-gray-400")
                }, "Acerto Realizado")
            )
        )), z.length > 0 && React.createElement("div", {
                className: "bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-4 mb-4 shadow-lg"
            }, React.createElement("div", {
                className: "flex items-center justify-between flex-wrap gap-4"
            }, React.createElement("div", {
                className: "flex items-center gap-4"
            }, React.createElement("div", {
                className: "bg-white/20 rounded-lg px-4 py-2"
            }, React.createElement("p", {
                className: "text-white/70 text-xs"
            }, "Selecionadas"), React.createElement("p", {
                className: "text-white text-2xl font-bold"
            }, z.length)), React.createElement("div", {
                className: "bg-white/20 rounded-lg px-4 py-2"
            }, React.createElement("p", {
                className: "text-white/70 text-xs"
            }, "Total Solicitado"), React.createElement("p", {
                className: "text-white text-2xl font-bold"
            }, er(q.filter(e => z.includes(e.id)).reduce((e, t) => e + parseFloat(t.requested_amount || 0), 0)))), React.createElement("div", {
                className: "bg-white/20 rounded-lg px-4 py-2"
            }, React.createElement("p", {
                className: "text-white/70 text-xs"
            }, "Total Profissional"), React.createElement("p", {
                className: "text-white text-2xl font-bold"
            }, er(q.filter(e => z.includes(e.id)).reduce((e, t) => e + parseFloat(t.final_amount || 0), 0))))), React.createElement("button", {
                onClick: () => B([]),
                className: "bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors"
            }, "‚úï Limpar sele√ß√£o"))), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm table-fixed"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-2 py-3 text-center w-[40px]"
            }, React.createElement("input", {
                type: "checkbox",
                checked: q.filter(e => !p.filterStatus || ("atrasados" === p.filterStatus ? "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at).getTime() >= 36e5 : e.status === p.filterStatus)).length > 0 && q.filter(e => !p.filterStatus || ("atrasados" === p.filterStatus ? "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at).getTime() >= 36e5 : e.status === p.filterStatus)).every(e => z.includes(e.id)),
                onChange: e => {
                    const t = q.filter(e => !p.filterStatus || ("atrasados" === p.filterStatus ? "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at).getTime() >= 36e5 : e.status === p.filterStatus));
                    e.target.checked ? B([...new Set([...z, ...t.map(e => e.id)])]) : B(z.filter(e => !t.map(e => e.id).includes(e)))
                },
                className: "w-4 h-4",
                title: "Selecionar todos"
            })), React.createElement("th", {
                className: "px-2 py-3 text-left w-[90px]"
            }, "Data"), React.createElement("th", {
                className: "px-2 py-3 text-left w-[140px]"
            }, "Nome"), React.createElement("th", {
                className: "px-2 py-3 text-left w-[110px]"
            }, "CPF"), React.createElement("th", {
                className: "px-2 py-3 text-left w-[70px]"
            }, "C√≥digo"), React.createElement("th", {
                className: "px-2 py-3 text-right w-[90px]"
            }, "Solicitado"), React.createElement("th", {
                className: "px-2 py-3 text-right w-[90px]"
            }, "Valor Prof."), React.createElement("th", {
                className: "px-2 py-3 text-left w-[120px]"
            }, "PIX"), React.createElement("th", {
                className: "px-2 py-3 text-center w-[160px]"
            }, "Status"), React.createElement("th", {
                className: "px-2 py-3 text-center w-[100px]"
            }, "D√©bito"), React.createElement("th", {
                className: "px-2 py-3 text-center w-[50px]"
            }, "A√ß√µes"))), React.createElement("tbody", null, (() => {
                // Filtra por status
                const filtradas = q.filter(e => !p.filterStatus || ("atrasados" === p.filterStatus ? "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at).getTime() >= 36e5 : e.status === p.filterStatus));
                // Aplica pagina√ß√£o
                const inicio = (solicitacoesPagina - 1) * solicitacoesPorPagina;
                const fim = inicio + solicitacoesPorPagina;
                const paginadas = filtradas.slice(inicio, fim);
                return paginadas;
            })().map(e => {
                const t = "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at).getTime() >= 36e5,
                    a = Math.floor((Date.now() - new Date(e.created_at).getTime()) / 6e4),
                    l = Math.floor(a / 60),
                    r = a % 60,
                    o = "aprovado" === e.status,
                    c = "aprovado_gratuidade" === e.status,
                    s = "rejeitado" === e.status,
                    n = s ? "font-bold text-red-800 bg-red-100" : c ? "font-bold text-blue-800 bg-blue-100 border-l-4 border-l-blue-500" : o ? "font-bold bg-green-100" : "",
                    m = new Date(e.created_at),
                    i = m.toLocaleDateString("pt-BR"),
                    d = m.toLocaleTimeString("pt-BR", {
                        hour: "2-digit",
                        minute: "2-digit"
                    });
                return React.createElement("tr", {
                    key: e.id,
                    className: `border-t hover:bg-gray-50 ${z.includes(e.id)?"bg-purple-50":""} ${!t||s||o||c?"":"bg-red-50 border-l-4 border-l-red-500"} ${n} ${!e.has_gratuity||o||s||c?"":"row-blue"} ${e.is_restricted&&!s?"row-red":""}`
                }, React.createElement("td", {
                    className: "px-2 py-3 text-center"
                }, React.createElement("input", {
                    type: "checkbox",
                    checked: z.includes(e.id),
                    onChange: t => {
                        t.target.checked ? B([...z, e.id]) : B(z.filter(t => t !== e.id))
                    },
                    className: "w-4 h-4"
                })), React.createElement("td", {
                    className: "px-2 py-3 text-xs " + (s ? "text-red-800 font-bold" : c ? "text-blue-800 font-bold" : o ? "text-green-800 font-bold" : "")
                }, React.createElement("div", {
                    className: "flex flex-col"
                }, React.createElement("span", {
                    className: "font-medium"
                }, i), React.createElement("span", {
                    className: "text-[10px] text-gray-500"
                }, d)), "aguardando_aprovacao" === e.status && React.createElement("div", {
                    className: "mt-1 px-2 py-0.5 rounded text-xs font-bold inline-flex items-center gap-1 " + (t ? "bg-red-500 text-white animate-pulse" : a >= 90 ? "bg-orange-100 text-orange-700" : "bg-gray-100 text-gray-600")
                }, t ? "üö®" : a >= 90 ? "‚ö†Ô∏è" : "‚è±Ô∏è", l > 0 ? `${l}h ${r}m` : `${r}min`, t && React.createElement("span", {
                    className: "text-[10px] ml-1"
                }, "ATRASADO"))), React.createElement("td", {
                    className: "px-2 py-3 text-xs " + (s ? "text-red-800 font-bold" : c ? "text-blue-800 font-bold" : o ? "text-green-800 font-bold" : "")
                }, React.createElement("span", {className: "block max-w-[100px] break-words leading-tight"}, e.user_name)), React.createElement("td", {
                    className: "px-2 py-3 text-xs " + (s ? "text-red-800 font-bold" : c ? "text-blue-800 font-bold" : o ? "text-green-800 font-bold" : "")
                }, e.cpf), React.createElement("td", {
                    className: "px-2 py-3 font-mono text-xs " + (s ? "text-red-800 font-bold" : c ? "text-blue-800 font-bold" : o ? "text-green-800 font-bold" : "")
                }, e.user_cod), React.createElement("td", {
                    className: "px-2 py-3 text-right text-xs " + (s ? "text-red-800 font-bold" : c ? "text-blue-800 font-bold" : o ? "text-green-800 font-bold" : "font-semibold")
                }, er(e.requested_amount)), React.createElement("td", {
                    className: "px-2 py-3 text-right text-xs " + (s ? "text-red-800 font-bold" : c ? "text-blue-800 font-bold" : o ? "text-green-800 font-bold" : "")
                }, er(e.final_amount)), React.createElement("td", {
                    className: "px-2 py-3 " + (s ? "text-red-800 font-bold" : c ? "text-blue-800 font-bold" : o ? "text-green-800 font-bold" : "")
                }, React.createElement("div", {
                    className: "flex items-center gap-1"
                }, React.createElement("span", {
                    className: "text-[10px] truncate flex-1",
                    title: e.pix_key
                }, e.pix_key), !s && React.createElement("button", {
                    onClick: () => J(e),
                    className: "text-lg hover:scale-125 transition-transform",
                    title: "Gerar QR Code PIX"
                }, "üí†")), e.has_gratuity && React.createElement("p", {
                    className: "text-[10px] font-bold text-blue-700 mt-0.5"
                }, "üéÅ GRATUIDADE")), React.createElement("td", {
                    className: "px-2 py-3"
                }, React.createElement("select", {
                    value: p[`showReject_${e.id}`] ? "rejeitado" : e.status,
                    onChange: t => {
                        return a = e.id, void("rejeitado" === (l = t.target.value) ? x({
                            ...p,
                            [`showReject_${a}`]: !0,
                            [`pendingStatus_${a}`]: l
                        }) : Jl(a, l));
                        var a, l
                    },
                    className: "px-1 py-1 border rounded text-xs w-full"
                }, 
                React.createElement("option", {
                    value: "aguardando_aprovacao"
                }, "‚è≥ Aguardando"), 
                // Mostrar "Aprovado" apenas para saques SEM gratuidade
                !e.has_gratuity && React.createElement("option", {
                    value: "aprovado"
                }, "‚úÖ Aprovado"), 
                // Mostrar "c/ Gratuidade" apenas para saques COM gratuidade
                e.has_gratuity && React.createElement("option", {
                    value: "aprovado_gratuidade"
                }, "‚úÖ c/ Gratuidade"), 
                React.createElement("option", {
                    value: "rejeitado"
                }, "‚ùå Rejeitado"), 
                React.createElement("option", {
                    value: "inativo"
                }, "‚ö†Ô∏è Inativo")), p[`showReject_${e.id}`] && React.createElement("div", {
                    className: "mt-2 space-y-2"
                }, React.createElement("input", {
                    type: "text",
                    placeholder: "Motivo da rejei√ß√£o...",
                    value: p[`reject_${e.id}`] || "",
                    onChange: t => x({
                        ...p,
                        [`reject_${e.id}`]: t.target.value
                    }),
                    className: "w-full px-2 py-1 border rounded text-xs"
                }), React.createElement("div", {
                    className: "flex gap-1"
                }, React.createElement("button", {
                    onClick: () => {
                        p[`reject_${e.id}`] ? Jl(e.id, "rejeitado", p[`reject_${e.id}`]) : ja("Informe o motivo", "error")
                    },
                    className: "flex-1 px-2 py-1 bg-red-600 text-white rounded text-xs"
                }, "Confirmar"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        [`showReject_${e.id}`]: !1
                    }),
                    className: "px-2 py-1 bg-gray-400 text-white rounded text-xs"
                }, "‚úï"))), e.reject_reason && "rejeitado" === e.status && React.createElement("p", {
                    className: "text-[10px] text-red-600 mt-1 truncate"
                }, "Motivo: ", e.reject_reason), e.admin_name && "aguardando_aprovacao" !== e.status && React.createElement("p", {
                    className: "text-[10px] text-purple-600 mt-1 font-medium"
                }, "üë§ ", e.admin_name)), 
                // C√©lula de Data do D√©bito
                React.createElement("td", {
                    className: "px-2 py-3 text-center text-xs"
                }, e.debito_plific_at ? React.createElement("div", {className: "flex flex-col"},
                    React.createElement("span", {className: "font-medium text-green-600"}, new Date(e.debito_plific_at).toLocaleDateString("pt-BR")),
                    React.createElement("span", {className: "text-[10px] text-gray-500"}, new Date(e.debito_plific_at).toLocaleTimeString("pt-BR", {hour: "2-digit", minute: "2-digit"}))
                ) : (e.status === "aprovado" || e.status === "aprovado_gratuidade") ? React.createElement("span", {className: "text-orange-500"}, "Pendente") : React.createElement("span", {className: "text-gray-400"}, "-")),
                React.createElement("td", {
                    className: "px-2 py-3 text-center"
                }, React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        deleteConfirm: e
                    }),
                    className: "px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",
                    title: "Excluir"
                }, "üóëÔ∏è")))
            }))), 
            // Controles de pagina√ß√£o
            (() => {
                const filtradas = q.filter(e => !p.filterStatus || ("atrasados" === p.filterStatus ? "aguardando_aprovacao" === e.status && Date.now() - new Date(e.created_at).getTime() >= 36e5 : e.status === p.filterStatus));
                const totalPaginas = Math.ceil(filtradas.length / solicitacoesPorPagina);
                if (totalPaginas <= 1) return null;
                return React.createElement("div", {
                    className: "flex items-center justify-between bg-white rounded-xl shadow p-4 mt-4"
                }, 
                    React.createElement("div", { className: "text-sm text-gray-600" },
                        `Mostrando ${Math.min((solicitacoesPagina - 1) * solicitacoesPorPagina + 1, filtradas.length)}-${Math.min(solicitacoesPagina * solicitacoesPorPagina, filtradas.length)} de ${filtradas.length} solicita√ß√µes`
                    ),
                    React.createElement("div", { className: "flex items-center gap-2" },
                        React.createElement("button", {
                            onClick: () => setSolicitacoesPagina(1),
                            disabled: solicitacoesPagina === 1,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (solicitacoesPagina === 1 ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "‚èÆÔ∏è"),
                        React.createElement("button", {
                            onClick: () => setSolicitacoesPagina(p => Math.max(1, p - 1)),
                            disabled: solicitacoesPagina === 1,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (solicitacoesPagina === 1 ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "‚óÄÔ∏è Anterior"),
                        React.createElement("span", { className: "px-4 py-1 bg-purple-100 text-purple-700 rounded font-bold" },
                            `${solicitacoesPagina} / ${totalPaginas}`
                        ),
                        React.createElement("button", {
                            onClick: () => setSolicitacoesPagina(p => Math.min(totalPaginas, p + 1)),
                            disabled: solicitacoesPagina === totalPaginas,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (solicitacoesPagina === totalPaginas ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "Pr√≥xima ‚ñ∂Ô∏è"),
                        React.createElement("button", {
                            onClick: () => setSolicitacoesPagina(totalPaginas),
                            disabled: solicitacoesPagina === totalPaginas,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (solicitacoesPagina === totalPaginas ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "‚è≠Ô∏è")
                    )
                );
            })()
            ))), "validacao" === p.finTab && React.createElement(React.Fragment, null, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4 mb-6"
            }, React.createElement("div", {
                className: "flex flex-wrap gap-4 items-end"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Filtrar por"), React.createElement("select", {
                value: p.validacaoTipo || "solicitacao",
                onChange: e => x({
                    ...p,
                    validacaoTipo: e.target.value
                }),
                className: "px-4 py-2 border rounded-lg"
            }, React.createElement("option", {
                value: "solicitacao"
            }, "üìÖ Data da Solicita√ß√£o"), React.createElement("option", {
                value: "debito"
            }, "üí≥ Data do D√©bito"))), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Data In√≠cio"), React.createElement("input", {
                type: "date",
                value: p.validacaoDataInicio || "",
                onChange: e => x({
                    ...p,
                    validacaoDataInicio: e.target.value
                }),
                className: "px-4 py-2 border rounded-lg"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Data Fim"), React.createElement("input", {
                type: "date",
                value: p.validacaoDataFim || "",
                onChange: e => x({
                    ...p,
                    validacaoDataFim: e.target.value
                }),
                className: "px-4 py-2 border rounded-lg"
            })), React.createElement("button", {
                onClick: () => {
                    const e = (new Date).toISOString().split("T")[0];
                    x({
                        ...p,
                        validacaoDataInicio: e,
                        validacaoDataFim: e
                    })
                },
                className: "px-6 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700"
            }, "üìÜ Hoje"), React.createElement("button", {
                onClick: () => x({
                    ...p,
                    validacaoDataInicio: "",
                    validacaoDataFim: ""
                }),
                className: "px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "üîÑ Limpar"))), (() => {
                const e = p.validacaoTipo || "solicitacao",
                    t = p.validacaoDataInicio,
                    a = p.validacaoDataFim,
                    l = q.filter(l => {
                        if (!t && !a) return !0;
                        let r;
                        if ("solicitacao" === e) r = new Date(l.created_at).toISOString().split("T")[0];
                        else {
                            if (!l.debito_at) return !1;
                            r = new Date(l.debito_at).toISOString().split("T")[0]
                        }
                        return t && a ? r >= t && r <= a : t ? r >= t : !a || r <= a
                    }),
                    r = l.length,
                    o = l.filter(e => "rejeitado" === e.status).length,
                    c = l.filter(e => "aprovado" === e.status || "aprovado_gratuidade" === e.status).length,
                    s = l.filter(e => "aprovado" === e.status).length,
                    n = l.filter(e => "aprovado_gratuidade" === e.status).length,
                    m = l.filter(e => "aprovado" === e.status).reduce((e, t) => e + parseFloat(t.requested_amount || 0), 0),
                    i = .045 * m,
                    d = l.filter(e => "aprovado_gratuidade" === e.status).reduce((e, t) => e + parseFloat(t.requested_amount || 0), 0),
                    x = .045 * d,
                    u = m + d;
                return React.createElement(React.Fragment, null, React.createElement("div", {
                    className: "bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6"
                }, React.createElement("p", {
                    className: "text-blue-800 font-semibold"
                }, "solicitacao" === e ? "üìÖ Filtrando por Data da Solicita√ß√£o" : "üí≥ Filtrando por Data do D√©bito", t && a && t === a && ` - ${new Date(t+"T12:00:00").toLocaleDateString("pt-BR")}`, t && a && t !== a && ` - ${new Date(t+"T12:00:00").toLocaleDateString("pt-BR")} at√© ${new Date(a+"T12:00:00").toLocaleDateString("pt-BR")}`, !t && !a && " - Todos os per√≠odos")), React.createElement("div", {
                    className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4"
                }, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 border-l-4 border-gray-500"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "üì• Total Recebidas"), React.createElement("p", {
                    className: "text-3xl font-bold text-gray-700"
                }, r)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 border-l-4 border-green-500"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "‚úÖ Total Aprovadas"), React.createElement("p", {
                    className: "text-3xl font-bold text-green-600"
                }, c)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 border-l-4 border-blue-500"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "‚úÖ Sem Gratuidade"), React.createElement("p", {
                    className: "text-3xl font-bold text-blue-600"
                }, s)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 border-l-4 border-purple-500"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "üéÅ Com Gratuidade"), React.createElement("p", {
                    className: "text-3xl font-bold text-purple-600"
                }, n)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 border-l-4 border-red-500"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "‚ùå Rejeitadas"), React.createElement("p", {
                    className: "text-3xl font-bold text-red-600"
                }, o))), React.createElement("div", {
                    className: "grid grid-cols-1 md:grid-cols-3 gap-4"
                }, React.createElement("div", {
                    className: "bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow p-6 text-white"
                }, React.createElement("p", {
                    className: "text-sm opacity-90"
                }, "üíµ Valor Total Aprovado"), React.createElement("p", {
                    className: "text-4xl font-bold mt-2"
                }, er(u)), React.createElement("p", {
                    className: "text-xs opacity-75 mt-2"
                }, "Soma de ", c, " aprova√ß√µes (com + sem gratuidade)")), React.createElement("div", {
                    className: "bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl shadow p-6 text-white"
                }, React.createElement("p", {
                    className: "text-sm opacity-90"
                }, "üí∞ Lucro com Saque (4,5%)"), React.createElement("p", {
                    className: "text-4xl font-bold mt-2"
                }, er(i)), React.createElement("p", {
                    className: "text-xs opacity-75 mt-2"
                }, "Baseado em ", s, " aprova√ß√µes sem gratuidade (", er(m), ")")), React.createElement("div", {
                    className: "bg-gradient-to-r from-red-500 to-orange-500 rounded-xl shadow p-6 text-white"
                }, React.createElement("p", {
                    className: "text-sm opacity-90"
                }, "üìâ Deixou de Arrecadar"), React.createElement("p", {
                    className: "text-4xl font-bold mt-2"
                }, er(x)), React.createElement("p", {
                    className: "text-xs opacity-75 mt-2"
                }, "Baseado em ", n, " aprova√ß√µes com gratuidade (", er(d), ")"))))
            })()), "conciliacao" === p.finTab && React.createElement(React.Fragment, null, 
                // Filtros de Concilia√ß√£o
                React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 mb-4"
                }, 
                    React.createElement("div", {className: "flex flex-wrap items-end gap-4"},
                        // Filtro por Data de Solicita√ß√£o
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-xs font-semibold text-gray-600 mb-1"}, "üìÖ Data Solicita√ß√£o"),
                            React.createElement("input", {
                                type: "date",
                                value: p.concDataSolicitacao || "",
                                onChange: e => { setConciliacaoPagina(1); x({...p, concDataSolicitacao: e.target.value}); },
                                className: "px-3 py-2 border rounded-lg text-sm"
                            })
                        ),
                        // Filtro por Data de Realiza√ß√£o
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-xs font-semibold text-gray-600 mb-1"}, "‚úÖ Data Realiza√ß√£o"),
                            React.createElement("input", {
                                type: "date",
                                value: p.concDataRealizacao || "",
                                onChange: e => { setConciliacaoPagina(1); x({...p, concDataRealizacao: e.target.value}); },
                                className: "px-3 py-2 border rounded-lg text-sm"
                            })
                        ),
                        // Filtro de Gratuidade
                        React.createElement("div", {className: "flex items-center gap-2"},
                            React.createElement("button", {
                                onClick: () => { setConciliacaoPagina(1); x({...p, concApenasGratuidade: !p.concApenasGratuidade}); },
                                className: "px-4 py-2 rounded-lg text-sm font-semibold " + 
                                    (p.concApenasGratuidade ? "bg-blue-600 text-white" : "bg-gray-100 hover:bg-gray-200")
                            }, "üéÅ Apenas Gratuidades")
                        ),
                        // Bot√£o Limpar Filtros
                        (p.concDataSolicitacao || p.concDataRealizacao || p.concApenasGratuidade) && React.createElement("button", {
                            onClick: () => { setConciliacaoPagina(1); x({...p, concDataSolicitacao: "", concDataRealizacao: "", concApenasGratuidade: false}); },
                            className: "px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-semibold hover:bg-red-200"
                        }, "‚úï Limpar Filtros")
                    )
                ),
                // Cards din√¢micos baseados nos filtros
                (() => {
                    // Aplicar os mesmos filtros para calcular os cards
                    const dadosFiltrados = q.filter(e => {
                        if (!e.status?.includes("aprovado")) return false;
                        if (p.concDataSolicitacao) {
                            const dataSolic = new Date(e.created_at).toISOString().split('T')[0];
                            if (dataSolic !== p.concDataSolicitacao) return false;
                        }
                        if (p.concDataRealizacao) {
                            if (!e.approved_at) return false;
                            const dataReal = new Date(e.approved_at).toISOString().split('T')[0];
                            if (dataReal !== p.concDataRealizacao) return false;
                        }
                        if (p.concApenasGratuidade && !e.has_gratuity) return false;
                        return true;
                    });
                    
                    const totalAprovados = dadosFiltrados.length;
                    const totalConciliados = dadosFiltrados.filter(e => e.conciliacao_omie).length;
                    const pendenteConciliacao = totalAprovados - totalConciliados;
                    const totalGratuidades = dadosFiltrados.filter(e => e.has_gratuity).length;
                    
                    return React.createElement("div", {
                        className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
                    }, 
                        React.createElement("div", {
                            className: "bg-white rounded-xl shadow p-4"
                        }, React.createElement("p", {
                            className: "text-sm text-gray-600"
                        }, "Aprovados"), React.createElement("p", {
                            className: "text-2xl font-bold text-green-600"
                        }, totalAprovados)),
                        React.createElement("div", {
                            className: "bg-white rounded-xl shadow p-4"
                        }, React.createElement("p", {
                            className: "text-sm text-gray-600"
                        }, "Conciliados"), React.createElement("p", {
                            className: "text-2xl font-bold text-purple-600"
                        }, totalConciliados)),
                        React.createElement("div", {
                            className: "bg-white rounded-xl shadow p-4"
                        }, React.createElement("p", {
                            className: "text-sm text-gray-600"
                        }, "Pend. Conc."), React.createElement("p", {
                            className: "text-2xl font-bold text-yellow-600"
                        }, pendenteConciliacao)),
                        React.createElement("div", {
                            className: "bg-white rounded-xl shadow p-4"
                        }, React.createElement("p", {
                            className: "text-sm text-gray-600"
                        }, "üéÅ Gratuidades"), React.createElement("p", {
                            className: "text-2xl font-bold text-blue-600"
                        }, totalGratuidades))
                    );
                })(),
                React.createElement("div", {
                className: "bg-white rounded-xl shadow overflow-hidden"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Datas"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Nome"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "CPF"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "C√≥digo"), React.createElement("th", {
                className: "px-4 py-3 text-right"
            }, "Solicitado"), React.createElement("th", {
                className: "px-4 py-3 text-right"
            }, "Valor Profissional"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Gratuidade"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "OMIE"))), React.createElement("tbody", null, (() => {
                // Filtrar dados
                const filtrados = q.filter(e => {
                    // Filtro base: apenas aprovados
                    if (!e.status?.includes("aprovado")) return false;
                    
                    // Filtro por data de solicita√ß√£o
                    if (p.concDataSolicitacao) {
                        const dataSolic = new Date(e.created_at).toISOString().split('T')[0];
                        if (dataSolic !== p.concDataSolicitacao) return false;
                    }
                    
                    // Filtro por data de realiza√ß√£o
                    if (p.concDataRealizacao) {
                        if (!e.approved_at) return false;
                        const dataReal = new Date(e.approved_at).toISOString().split('T')[0];
                        if (dataReal !== p.concDataRealizacao) return false;
                    }
                    
                    // Filtro apenas gratuidades
                    if (p.concApenasGratuidade && !e.has_gratuity) return false;
                    
                    return true;
                });
                
                // Aplicar pagina√ß√£o
                const inicio = (conciliacaoPagina - 1) * conciliacaoPorPagina;
                const fim = inicio + conciliacaoPorPagina;
                return filtrados.slice(inicio, fim);
            })().map(e => {
                const t = new Date(e.created_at),
                    a = t.toLocaleDateString("pt-BR"),
                    l = t.toLocaleTimeString("pt-BR", {
                        hour: "2-digit",
                        minute: "2-digit"
                    }),
                    r = e.approved_at ? new Date(e.approved_at) : null,
                    o = r ? r.toLocaleDateString("pt-BR") : "-",
                    c = r ? r.toLocaleTimeString("pt-BR", {
                        hour: "2-digit",
                        minute: "2-digit"
                    }) : "",
                    s = e.has_gratuity;
                return React.createElement("tr", {
                    key: e.id,
                    className: "border-t hover:bg-gray-50 " + (s ? "bg-blue-50 border-l-4 border-l-blue-500" : "")
                }, React.createElement("td", {
                    className: "px-4 py-3"
                }, React.createElement("div", {
                    className: "flex flex-col text-[10px]"
                }, React.createElement("span", {
                    className: "text-gray-600"
                }, "Solicitado: ", React.createElement("span", {
                    className: "font-medium text-gray-800"
                }, a), " √†s ", React.createElement("span", {
                    className: "font-medium text-gray-800"
                }, l)), React.createElement("span", {
                    className: "text-green-600"
                }, "Realizado: ", React.createElement("span", {
                    className: "font-medium text-green-700"
                }, o), c && React.createElement(React.Fragment, null, " √†s ", React.createElement("span", {
                    className: "font-medium text-green-700"
                }, c))))), React.createElement("td", {
                    className: "px-4 py-3"
                }, e.user_name), React.createElement("td", {
                    className: "px-4 py-3"
                }, e.cpf), React.createElement("td", {
                    className: "px-4 py-3 font-mono"
                }, e.user_cod), React.createElement("td", {
                    className: "px-4 py-3 text-right"
                }, er(e.requested_amount)), React.createElement("td", {
                    className: "px-4 py-3 text-right font-semibold"
                }, er(e.final_amount)), React.createElement("td", {
                    className: "px-4 py-3 text-center"
                }, s ? React.createElement("span", {
                    className: "text-xs font-bold text-blue-700 bg-blue-100 px-2 py-1 rounded"
                }, "SIM") : React.createElement("span", {
                    className: "text-xs text-gray-400"
                }, "-")), React.createElement("td", {
                    className: "px-4 py-3 text-center"
                }, React.createElement("input", {
                    type: "checkbox",
                    checked: e.conciliacao_omie,
                    onChange: t => (async (e, t, a) => {
                        try {
                            await fetch(`${API_URL}/withdrawals/${e}/conciliacao`, {
                                method: "PATCH",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    [t]: a
                                })
                            }), Ua(), Va()
                        } catch (e) {
                            ja("Erro", "error")
                        }
                    })(e.id, "conciliacaoOmie", t.target.checked),
                    className: "w-5 h-5"
                })))
            }))),
            // Controles de pagina√ß√£o da Concilia√ß√£o
            (() => {
                const filtrados = q.filter(e => {
                    if (!e.status?.includes("aprovado")) return false;
                    if (p.concDataSolicitacao) {
                        const dataSolic = new Date(e.created_at).toISOString().split('T')[0];
                        if (dataSolic !== p.concDataSolicitacao) return false;
                    }
                    if (p.concDataRealizacao) {
                        if (!e.approved_at) return false;
                        const dataReal = new Date(e.approved_at).toISOString().split('T')[0];
                        if (dataReal !== p.concDataRealizacao) return false;
                    }
                    if (p.concApenasGratuidade && !e.has_gratuity) return false;
                    return true;
                });
                const totalPaginas = Math.ceil(filtrados.length / conciliacaoPorPagina);
                if (totalPaginas <= 1) return null;
                return React.createElement("div", {
                    className: "flex items-center justify-between bg-white rounded-xl shadow p-4 mt-4"
                }, 
                    React.createElement("div", { className: "text-sm text-gray-600" },
                        `Mostrando ${Math.min((conciliacaoPagina - 1) * conciliacaoPorPagina + 1, filtrados.length)}-${Math.min(conciliacaoPagina * conciliacaoPorPagina, filtrados.length)} de ${filtrados.length} registros`
                    ),
                    React.createElement("div", { className: "flex items-center gap-2" },
                        React.createElement("button", {
                            onClick: () => setConciliacaoPagina(1),
                            disabled: conciliacaoPagina === 1,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (conciliacaoPagina === 1 ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "‚èÆÔ∏è"),
                        React.createElement("button", {
                            onClick: () => setConciliacaoPagina(pg => Math.max(1, pg - 1)),
                            disabled: conciliacaoPagina === 1,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (conciliacaoPagina === 1 ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "‚óÄÔ∏è Anterior"),
                        React.createElement("span", { className: "px-4 py-1 bg-purple-100 text-purple-700 rounded font-bold" },
                            `${conciliacaoPagina} / ${totalPaginas}`
                        ),
                        React.createElement("button", {
                            onClick: () => setConciliacaoPagina(pg => Math.min(totalPaginas, pg + 1)),
                            disabled: conciliacaoPagina === totalPaginas,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (conciliacaoPagina === totalPaginas ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "Pr√≥xima ‚ñ∂Ô∏è"),
                        React.createElement("button", {
                            onClick: () => setConciliacaoPagina(totalPaginas),
                            disabled: conciliacaoPagina === totalPaginas,
                            className: "px-3 py-1 rounded text-sm font-semibold " + (conciliacaoPagina === totalPaginas ? "bg-gray-100 text-gray-400" : "bg-gray-200 text-gray-700 hover:bg-gray-300")
                        }, "‚è≠Ô∏è")
                    )
                );
            })()
            )), "resumo" === p.finTab && React.createElement(React.Fragment, null, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4 mb-6"
            }, React.createElement("div", {
                className: "flex gap-4"
            }, React.createElement("input", {
                type: "text",
                placeholder: "üîç Buscar por c√≥digo do profissional...",
                value: p.searchCod || "",
                onChange: e => x({
                    ...p,
                    searchCod: e.target.value
                }),
                className: "flex-1 px-4 py-2 border rounded-lg"
            }), p.searchCod && React.createElement("button", {
                onClick: () => x({
                    ...p,
                    searchCod: ""
                }),
                className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
            }, "‚úï Limpar"))), p.searchCod && (() => {
                const e = q.filter(e => e.user_cod.toLowerCase().includes(p.searchCod.toLowerCase()));
                return React.createElement(React.Fragment, null, React.createElement("div", {
                    className: "grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"
                }, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Total"), React.createElement("p", {
                    className: "text-2xl font-bold text-purple-600"
                }, e.length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Aguardando"), React.createElement("p", {
                    className: "text-2xl font-bold text-yellow-600"
                }, e.filter(e => "aguardando_aprovacao" === e.status).length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Aprovadas"), React.createElement("p", {
                    className: "text-2xl font-bold text-green-600"
                }, e.filter(e => "aprovado" === e.status).length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Aprov. Gratuidade"), React.createElement("p", {
                    className: "text-2xl font-bold text-blue-600"
                }, e.filter(e => "aprovado_gratuidade" === e.status).length)), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Rejeitadas"), React.createElement("p", {
                    className: "text-2xl font-bold text-red-600"
                }, e.filter(e => "rejeitado" === e.status).length))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow overflow-hidden"
                }, React.createElement("div", {
                    className: "p-4 border-b"
                }, React.createElement("div", {
                    className: "flex flex-wrap gap-2"
                }, React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        resumoFilter: ""
                    }),
                    className: "px-4 py-2 rounded-lg font-semibold text-sm " + (p.resumoFilter ? "bg-gray-100 hover:bg-gray-200" : "bg-purple-600 text-white")
                }, "üìã Todas (", e.length, ")"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        resumoFilter: "aguardando_aprovacao"
                    }),
                    className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("aguardando_aprovacao" === p.resumoFilter ? "bg-yellow-500 text-white" : "bg-gray-100 hover:bg-gray-200")
                }, "‚è≥ Aguardando (", e.filter(e => "aguardando_aprovacao" === e.status).length, ")"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        resumoFilter: "aprovado"
                    }),
                    className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("aprovado" === p.resumoFilter ? "bg-green-600 text-white" : "bg-gray-100 hover:bg-gray-200")
                }, "‚úÖ Aprovadas (", e.filter(e => "aprovado" === e.status).length, ")"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        resumoFilter: "aprovado_gratuidade"
                    }),
                    className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("aprovado_gratuidade" === p.resumoFilter ? "bg-blue-600 text-white" : "bg-gray-100 hover:bg-gray-200")
                }, "üéÅ Aprov. Gratuidade (", e.filter(e => "aprovado_gratuidade" === e.status).length, ")"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        resumoFilter: "rejeitado"
                    }),
                    className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("rejeitado" === p.resumoFilter ? "bg-red-600 text-white" : "bg-gray-100 hover:bg-gray-200")
                }, "‚ùå Rejeitadas (", e.filter(e => "rejeitado" === e.status).length, ")"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        resumoFilter: "inativo"
                    }),
                    className: "px-4 py-2 rounded-lg font-semibold text-sm " + ("inativo" === p.resumoFilter ? "bg-orange-500 text-white" : "bg-gray-100 hover:bg-gray-200")
                }, "‚ö†Ô∏è Inativo (", e.filter(e => "inativo" === e.status).length, ")"))), React.createElement("div", {
                    className: "overflow-x-auto"
                }, React.createElement("table", {
                    className: "w-full text-sm"
                }, React.createElement("thead", {
                    className: "bg-gray-50"
                }, React.createElement("tr", null, React.createElement("th", {
                    className: "px-4 py-3 text-left"
                }, "Datas"), React.createElement("th", {
                    className: "px-4 py-3 text-left"
                }, "Nome"), React.createElement("th", {
                    className: "px-4 py-3 text-left"
                }, "CPF"), React.createElement("th", {
                    className: "px-4 py-3 text-left"
                }, "C√≥digo"), React.createElement("th", {
                    className: "px-4 py-3 text-right"
                }, "Solicitado"), React.createElement("th", {
                    className: "px-4 py-3 text-right"
                }, "Valor Profissional"), React.createElement("th", {
                    className: "px-4 py-3 text-left"
                }, "PIX"), React.createElement("th", {
                    className: "px-4 py-3 text-center"
                }, "Gratuidade"), React.createElement("th", {
                    className: "px-4 py-3 text-center"
                }, "Status"))), React.createElement("tbody", null, e.filter(e => !p.resumoFilter || e.status === p.resumoFilter).map(e => {
                    const t = new Date(e.created_at),
                        a = t.toLocaleDateString("pt-BR"),
                        l = t.toLocaleTimeString("pt-BR", {
                            hour: "2-digit",
                            minute: "2-digit"
                        }),
                        r = e.approved_at ? new Date(e.approved_at) : null,
                        o = r ? r.toLocaleDateString("pt-BR") : "-",
                        c = r ? r.toLocaleTimeString("pt-BR", {
                            hour: "2-digit",
                            minute: "2-digit"
                        }) : "",
                        s = "aprovado" === e.status || "aprovado_gratuidade" === e.status;
                    return React.createElement("tr", {
                        key: e.id,
                        className: `border-t hover:bg-gray-50 ${e.has_gratuity?"bg-blue-50 border-l-4 border-l-blue-500":""} ${e.is_restricted?"row-red":""}`
                    }, React.createElement("td", {
                        className: "px-4 py-3"
                    }, React.createElement("div", {
                        className: "flex flex-col text-[10px]"
                    }, React.createElement("span", {
                        className: "text-gray-600"
                    }, "Solicitado: ", React.createElement("span", {
                        className: "font-medium text-gray-800"
                    }, a), " √†s ", React.createElement("span", {
                        className: "font-medium text-gray-800"
                    }, l)), s && React.createElement("span", {
                        className: "text-green-600"
                    }, "Realizado: ", React.createElement("span", {
                        className: "font-medium text-green-700"
                    }, o), c && React.createElement(React.Fragment, null, " √†s ", React.createElement("span", {
                        className: "font-medium text-green-700"
                    }, c))))), React.createElement("td", {
                        className: "px-4 py-3"
                    }, e.user_name), React.createElement("td", {
                        className: "px-4 py-3"
                    }, e.cpf), React.createElement("td", {
                        className: "px-4 py-3 font-mono"
                    }, e.user_cod), React.createElement("td", {
                        className: "px-4 py-3 text-right font-semibold"
                    }, er(e.requested_amount)), React.createElement("td", {
                        className: "px-4 py-3 text-right"
                    }, er(e.final_amount)), React.createElement("td", {
                        className: "px-4 py-3"
                    }, React.createElement("span", {
                        className: "text-xs max-w-[120px] truncate"
                    }, e.pix_key)), React.createElement("td", {
                        className: "px-4 py-3 text-center"
                    }, e.has_gratuity ? React.createElement("span", {
                        className: "text-xs font-bold text-blue-700 bg-blue-100 px-2 py-1 rounded"
                    }, "SIM") : React.createElement("span", {
                        className: "text-xs text-gray-400"
                    }, "-")), React.createElement("td", {
                        className: "px-4 py-3"
                    }, React.createElement("span", {
                        className: "px-2 py-1 rounded text-xs font-bold " + ("aprovado" === e.status ? "bg-green-500 text-white" : "aprovado_gratuidade" === e.status ? "bg-blue-500 text-white" : "rejeitado" === e.status ? "bg-red-500 text-white" : "inativo" === e.status ? "bg-orange-500 text-white" : "bg-yellow-500 text-white")
                    }, "aguardando_aprovacao" === e.status ? "‚è≥ Aguardando" : "aprovado" === e.status ? "‚úÖ Aprovado" : "aprovado_gratuidade" === e.status ? "üéÅ c/ Gratuidade" : "rejeitado" === e.status ? "‚ùå Rejeitado" : "‚ö†Ô∏è Inativo"), e.reject_reason && "rejeitado" === e.status && React.createElement("p", {
                        className: "text-xs text-red-600 mt-1"
                    }, "Motivo: ", e.reject_reason), e.admin_name && "aguardando_aprovacao" !== e.status && React.createElement("p", {
                        className: "text-xs text-purple-600 mt-1 font-medium"
                    }, "üë§ ", e.admin_name)))
                }))))))
            })(), !p.searchCod && React.createElement("div", {
                className: "bg-white rounded-xl shadow p-8 text-center"
            }, React.createElement("p", {
                className: "text-gray-500 text-lg"
            }, "üîç Digite o c√≥digo do profissional para ver o resumo"))), "gratuidades" === p.finTab && React.createElement("div", {
                className: "space-y-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h3", {
                className: "text-lg font-semibold mb-4"
            }, "‚ûï Cadastrar Gratuidade"), React.createElement("div", {
                className: "grid md:grid-cols-2 lg:grid-cols-6 gap-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "C√≥digo *"), React.createElement("input", {
                type: "text",
                placeholder: "C√≥digo",
                value: p.gratUserCod || "",
                onChange: async e => {
                    const t = e.target.value;
                    if (x({
                            ...p,
                            gratUserCod: t,
                            gratUserName: ""
                        }), t.length >= 3) {
                        const e = A.find(e => e.codProfissional?.toLowerCase() === t.toLowerCase());
                        e && x(a => ({
                            ...a,
                            gratUserCod: t,
                            gratUserName: e.fullName
                        }))
                    }
                },
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "Nome"), React.createElement("input", {
                type: "text",
                placeholder: "Nome do usu√°rio",
                value: p.gratUserName || "",
                readOnly: !0,
                className: "w-full px-4 py-2 border rounded-lg bg-gray-50 text-gray-700"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "Quantidade *"), React.createElement("input", {
                type: "number",
                placeholder: "Qtd",
                value: p.gratQty || "",
                onChange: e => x({
                    ...p,
                    gratQty: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "Valor (R$) *"), React.createElement("input", {
                type: "number",
                placeholder: "Valor",
                value: p.gratValue || "",
                onChange: e => x({
                    ...p,
                    gratValue: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "Motivo"), React.createElement("input", {
                type: "text",
                placeholder: "Motivo",
                value: p.gratReason || "",
                onChange: e => x({
                    ...p,
                    gratReason: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", {
                className: "flex items-end"
            }, React.createElement("button", {
                onClick: Hl,
                disabled: c || !p.gratUserName,
                className: "w-full px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold disabled:opacity-50"
            }, "‚ûï Adicionar"))), p.gratUserCod && !p.gratUserName && p.gratUserCod.length >= 3 && React.createElement("p", {
                className: "text-red-500 text-xs mt-2"
            }, "‚ö†Ô∏è Usu√°rio n√£o encontrado com este c√≥digo"), p.gratUserName && React.createElement("p", {
                className: "text-green-600 text-xs mt-2"
            }, "‚úÖ Usu√°rio encontrado: ", p.gratUserName)), React.createElement("div", {
                className: "bg-white rounded-xl shadow overflow-hidden"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "C√≥digo"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Nome"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Qtd"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Rest."), React.createElement("th", {
                className: "px-4 py-3 text-right"
            }, "Valor"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Motivo"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Cadastrado por"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Status"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "A√ß√£o"))), React.createElement("tbody", null, Q.map(e => React.createElement("tr", {
                key: e.id,
                className: "border-t " + ("ativa" === e.status ? "bg-green-50" : "")
            }, React.createElement("td", {
                className: "px-4 py-3 font-mono"
            }, e.user_cod), React.createElement("td", {
                className: "px-4 py-3 font-semibold"
            }, e.user_name || "-"), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, e.quantity), React.createElement("td", {
                className: "px-4 py-3 text-center font-bold"
            }, e.remaining), React.createElement("td", {
                className: "px-4 py-3 text-right"
            }, er(e.value)), React.createElement("td", {
                className: "px-4 py-3"
            }, e.reason || "-"), React.createElement("td", {
                className: "px-4 py-3 text-xs text-gray-600"
            }, e.created_by || "-"), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, React.createElement("span", {
                className: "px-2 py-1 rounded text-xs font-bold " + ("ativa" === e.status ? "bg-green-500 text-white" : "bg-gray-400 text-white")
            }, e.status)), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, React.createElement("button", {
                onClick: () => {
                    confirm(`‚ö†Ô∏è Excluir gratuidade de ${e.user_name||e.user_cod}?\n\nValor: ${er(e.value)}\nRestante: ${e.remaining}/${e.quantity}\n\nEsta a√ß√£o n√£o pode ser desfeita!`) && (async e => {
                        s(!0);
                        try {
                            await fetch(`${API_URL}/gratuities/${e}`, {
                                method: "DELETE"
                            }), ja("üóëÔ∏è Gratuidade exclu√≠da!", "success"), za()
                        } catch (e) {
                            ja("Erro ao excluir", "error")
                        }
                        s(!1)
                    })(e.id)
                },
                className: "px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700"
            }, "üóëÔ∏è Excluir")))))))), "restritos" === p.finTab && React.createElement("div", {
                className: "space-y-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h3", {
                className: "text-lg font-semibold mb-4"
            }, "‚ûï Adicionar Restri√ß√£o"), React.createElement("div", {
                className: "grid md:grid-cols-4 gap-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "C√≥digo *"), React.createElement("input", {
                type: "text",
                placeholder: "C√≥digo",
                value: p.restUserCod || "",
                onChange: async e => {
                    const t = e.target.value;
                    if (x({
                            ...p,
                            restUserCod: t,
                            restUserName: ""
                        }), t.length >= 3) {
                        const e = A.find(e => e.codProfissional?.toLowerCase() === t.toLowerCase());
                        e && x(a => ({
                            ...a,
                            restUserCod: t,
                            restUserName: e.fullName
                        }))
                    }
                },
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "Nome"), React.createElement("input", {
                type: "text",
                placeholder: "Nome do usu√°rio",
                value: p.restUserName || "",
                readOnly: !0,
                className: "w-full px-4 py-2 border rounded-lg bg-gray-50 text-gray-700"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-xs font-semibold mb-1 text-gray-600"
            }, "Motivo *"), React.createElement("input", {
                type: "text",
                placeholder: "Motivo",
                value: p.restReason || "",
                onChange: e => x({
                    ...p,
                    restReason: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", {
                className: "flex items-end"
            }, React.createElement("button", {
                onClick: Gl,
                disabled: c || !p.restUserName,
                className: "w-full px-4 py-2 bg-red-600 text-white rounded-lg font-semibold disabled:opacity-50"
            }, "üö´ Adicionar"))), p.restUserCod && !p.restUserName && p.restUserCod.length >= 3 && React.createElement("p", {
                className: "text-red-500 text-xs mt-2"
            }, "‚ö†Ô∏è Usu√°rio n√£o encontrado com este c√≥digo"), p.restUserName && React.createElement("p", {
                className: "text-green-600 text-xs mt-2"
            }, "‚úÖ Usu√°rio encontrado: ", p.restUserName)), React.createElement("div", {
                className: "bg-white rounded-xl shadow overflow-hidden"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "C√≥digo"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Nome"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Motivo"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Cadastrado por"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Data"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Status"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "A√ß√£o"))), React.createElement("tbody", null, Z.map(e => React.createElement("tr", {
                key: e.id,
                className: "border-t " + ("ativo" === e.status ? "bg-red-50" : "")
            }, React.createElement("td", {
                className: "px-4 py-3 font-mono"
            }, e.user_cod), React.createElement("td", {
                className: "px-4 py-3 font-semibold"
            }, e.user_name || "-"), React.createElement("td", {
                className: "px-4 py-3"
            }, e.reason), React.createElement("td", {
                className: "px-4 py-3 text-xs text-gray-600"
            }, e.created_by || "-"), React.createElement("td", {
                className: "px-4 py-3"
            }, new Date(e.created_at).toLocaleDateString("pt-BR")), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, React.createElement("span", {
                className: "px-2 py-1 rounded text-xs font-bold " + ("ativo" === e.status ? "bg-red-500 text-white" : "bg-gray-400 text-white")
            }, e.status)), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, "ativo" === e.status && React.createElement("button", {
                onClick: () => (async e => {
                    try {
                        await fetch(`${API_URL}/restricted/${e}/remove`, {
                            method: "PATCH",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                removedReason: "Suspensa pelo admin"
                            })
                        }), ja("‚úÖ Restri√ß√£o removida!", "success"), Ba()
                    } catch (e) {
                        ja("Erro", "error")
                    }
                })(e.id),
                className: "px-3 py-1 bg-green-600 text-white rounded text-xs"
            }, "Suspender")))))))), "indicacoes" === p.finTab && React.createElement(React.Fragment, null, p.modalRejeitar && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow-2xl p-6 max-w-md w-full"
            }, React.createElement("h3", {
                className: "text-xl font-bold text-red-600 mb-4"
            }, "‚ùå Rejeitar Indica√ß√£o"), React.createElement("div", {
                className: "bg-gray-50 rounded-lg p-4 mb-4"
            }, React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Profissional:"), " ", p.modalRejeitar.user_name), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Indicado:"), " ", p.modalRejeitar.indicado_nome), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Regi√£o:"), " ", p.modalRejeitar.regiao)), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Motivo da Rejei√ß√£o *"), React.createElement("textarea", {
                value: p.motivoRejeicao || "",
                onChange: e => x({
                    ...p,
                    motivoRejeicao: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                rows: "3",
                placeholder: "Informe o motivo..."
            })), React.createElement("div", {
                className: "flex gap-3"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    modalRejeitar: null,
                    motivoRejeicao: ""
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "Cancelar"), React.createElement("button", {
                onClick: () => (async e => {
                    if (p.motivoRejeicao) {
                        s(!0);
                        try {
                            if (!(await fetch(`${API_URL}/indicacoes/${e}/rejeitar`, {
                                    method: "PATCH",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        motivo_rejeicao: p.motivoRejeicao,
                                        resolved_by: l.fullName
                                    })
                                })).ok) throw new Error("Erro ao rejeitar");
                            ja("‚ùå Indica√ß√£o rejeitada", "success"), x({
                                ...p,
                                modalRejeitar: null,
                                motivoRejeicao: ""
                            }), await wl()
                        } catch (e) {
                            ja(e.message, "error")
                        }
                        s(!1)
                    } else ja("Informe o motivo da rejei√ß√£o", "error")
                })(p.modalRejeitar.id),
                disabled: !p.motivoRejeicao || c,
                className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 disabled:opacity-50"
            }, c ? "..." : "‚ùå Rejeitar")))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6 mb-6"
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-4"
            }, React.createElement("h2", {
                className: "text-xl font-bold text-green-800"
            }, p.editPromo ? "‚úèÔ∏è Editar Promo√ß√£o" : "üì£ Cadastrar Nova Promo√ß√£o"), p.editPromo && React.createElement("button", {
                onClick: () => x({
                    ...p,
                    editPromo: null,
                    promoRegiao: "",
                    promoValor: "",
                    promoDetalhes: ""
                }),
                className: "text-sm text-gray-500 hover:text-gray-700"
            }, "‚úï Cancelar edi√ß√£o")), React.createElement("div", {
                className: "grid md:grid-cols-2 gap-4 mb-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Regi√£o *"), React.createElement("input", {
                type: "text",
                value: p.promoRegiao || "",
                onChange: e => x({
                    ...p,
                    promoRegiao: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "Ex: Salvador - BA"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Valor do B√¥nus (R$) *"), React.createElement("input", {
                type: "number",
                step: "0.01",
                value: p.promoValor || "",
                onChange: e => x({
                    ...p,
                    promoValor: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "Ex: 100.00"
            }))), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Detalhes da Promo√ß√£o (opcional)"), React.createElement("textarea", {
                value: p.promoDetalhes || "",
                onChange: e => x({
                    ...p,
                    promoDetalhes: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                rows: "3",
                placeholder: "Ex: Vaga para instalador com experi√™ncia em fibra √≥ptica. In√≠cio imediato. Benef√≠cios: vale transporte + alimenta√ß√£o..."
            })), React.createElement("button", {
                onClick: p.editPromo ? Ol : Ml,
                disabled: c,
                className: "w-full md:w-auto px-6 py-2 text-white rounded-lg font-semibold disabled:opacity-50 " + (p.editPromo ? "bg-blue-600 hover:bg-blue-700" : "bg-green-600 hover:bg-green-700")
            }, c ? "..." : p.editPromo ? "üíæ Salvar Altera√ß√µes" : "‚ûï Criar Promo√ß√£o")), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6 mb-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üìã Promo√ß√µes Cadastradas"), 0 === ee.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-4"
            }, "Nenhuma promo√ß√£o cadastrada") : React.createElement("div", {
                className: "grid md:grid-cols-4 gap-3"
            }, ee.map(e => React.createElement("div", {
                key: e.id,
                className: "border rounded-lg p-3 " + ("ativa" === e.status ? "border-green-300 bg-green-50" : "border-gray-300 bg-gray-50")
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-1"
            }, React.createElement("span", {
                className: "px-2 py-0.5 rounded text-xs font-bold " + ("ativa" === e.status ? "bg-green-500 text-white" : "bg-gray-500 text-white")
            }, "ativa" === e.status ? "‚úÖ" : "‚è∏Ô∏è"), React.createElement("div", {
                className: "flex gap-1"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    editPromo: e,
                    promoRegiao: e.regiao,
                    promoValor: e.valor_bonus,
                    promoDetalhes: e.detalhes || ""
                }),
                className: "text-xs text-blue-500 hover:text-blue-700"
            }, "‚úèÔ∏è"), React.createElement("button", {
                onClick: async () => {
                    await fetch(`${API_URL}/promocoes/${e.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            status: "ativa" === e.status ? "inativa" : "ativa"
                        })
                    }), gl()
                },
                className: "text-xs text-gray-500 hover:text-gray-700"
            }, "ativa" === e.status ? "‚è∏Ô∏è" : "‚ñ∂Ô∏è"))), React.createElement("p", {
                className: "font-semibold text-sm"
            }, "üìç ", e.regiao), React.createElement("p", {
                className: "text-lg font-bold text-green-600"
            }, er(e.valor_bonus)), e.detalhes && React.createElement("p", {
                className: "text-xs text-gray-600 mt-1 whitespace-pre-wrap line-clamp-3",
                title: e.detalhes
            }, e.detalhes))))), React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
            }, React.createElement("div", {
                className: "bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-yellow-600"
            }, ae.filter(e => "pendente" === e.status).length), React.createElement("p", {
                className: "text-sm text-yellow-700"
            }, "Pendentes")), React.createElement("div", {
                className: "bg-green-50 border border-green-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-green-600"
            }, ae.filter(e => "aprovada" === e.status).length), React.createElement("p", {
                className: "text-sm text-green-700"
            }, "Aprovadas")), React.createElement("div", {
                className: "bg-red-50 border border-red-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-red-600"
            }, ae.filter(e => "rejeitada" === e.status).length), React.createElement("p", {
                className: "text-sm text-red-700"
            }, "Rejeitadas")), React.createElement("div", {
                className: "bg-gray-50 border border-gray-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-gray-600"
            }, ae.filter(e => "expirada" === e.status).length), React.createElement("p", {
                className: "text-sm text-gray-700"
            }, "Expiradas"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üë• Indica√ß√µes Recebidas"), 0 === ae.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Nenhuma indica√ß√£o recebida") : React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Data"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Profissional"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Indicado"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Contato"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Regi√£o"), React.createElement("th", {
                className: "px-2 py-3 text-center text-xs"
            }, "B√¥nus"), React.createElement("th", {
                className: "px-2 py-3 text-center text-xs"
            }, "Expira"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "Status"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "Cr√©dito Lan√ßado"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "A√ß√µes"))), React.createElement("tbody", null, ae.map(e => {
                const t = Math.ceil((new Date(e.expires_at) - new Date) / 864e5),
                    a = e.indicado_contato ? e.indicado_contato.replace(/\D/g, "") : "",
                    r = a ? `https://wa.me/55${a}` : "#";
                return React.createElement("tr", {
                    key: e.id,
                    className: "border-t " + ("pendente" === e.status ? "bg-yellow-50" : "")
                }, React.createElement("td", {
                    className: "px-2 py-3 whitespace-nowrap text-xs"
                }, new Date(e.created_at).toLocaleDateString("pt-BR")), React.createElement("td", {
                    className: "px-2 py-3"
                }, React.createElement("p", {
                    className: "font-semibold text-xs"
                }, e.user_name), React.createElement("p", {
                    className: "text-xs text-gray-500"
                }, e.user_cod)), React.createElement("td", {
                    className: "px-2 py-3"
                }, React.createElement("p", {
                    className: "font-semibold text-xs"
                }, e.indicado_nome), e.indicado_cpf && React.createElement("p", {
                    className: "text-xs text-gray-500"
                }, e.indicado_cpf)), React.createElement("td", {
                    className: "px-2 py-3"
                }, React.createElement("a", {
                    href: r,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className: "text-green-600 hover:text-green-800 font-semibold text-xs flex items-center gap-1"
                }, "üì± ", e.indicado_contato)), React.createElement("td", {
                    className: "px-2 py-3 text-xs"
                }, e.regiao), React.createElement("td", {
                    className: "px-2 py-3 text-center font-bold text-green-600 text-xs"
                }, er(e.valor_bonus)), React.createElement("td", {
                    className: "px-2 py-3 text-center"
                }, "pendente" === e.status ? React.createElement("span", {
                    className: "text-xs font-bold " + (t <= 5 ? "text-red-600" : "text-gray-600")
                }, t > 0 ? `${t}d` : "Exp") : "-"), React.createElement("td", {
                    className: "px-3 py-3 text-center"
                }, React.createElement("div", {
                    className: "flex flex-col items-center"
                }, React.createElement("span", {
                    className: "px-2 py-1 rounded-full text-xs font-bold " + ("pendente" === e.status ? "bg-yellow-500 text-white" : "aprovada" === e.status ? "bg-green-500 text-white" : "rejeitada" === e.status ? "bg-red-500 text-white" : "bg-gray-500 text-white")
                }, "pendente" === e.status ? "‚è≥ Pendente" : "aprovada" === e.status ? "‚úÖ Aprovada" : "rejeitada" === e.status ? "‚ùå Rejeitada" : "‚è∞ Expirada"), ("aprovada" === e.status || "rejeitada" === e.status) && e.resolved_by && React.createElement("span", {
                    className: "text-xs text-gray-500 mt-1"
                }, e.resolved_by))), React.createElement("td", {
                    className: "px-3 py-3 text-center"
                }, "aprovada" === e.status && React.createElement("div", {
                    className: "flex flex-col items-center"
                }, React.createElement("input", {
                    type: "checkbox",
                    checked: e.credito_lancado || !1,
                    onChange: async t => {
                        try {
                            await fetch(`${API_URL}/indicacoes/${e.id}/credito`, {
                                method: "PATCH",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    credito_lancado: t.target.checked,
                                    lancado_por: l.fullName
                                })
                            }), wl()
                        } catch (e) {
                            ja("Erro ao atualizar", "error")
                        }
                    },
                    className: "w-5 h-5 cursor-pointer"
                }), e.credito_lancado && e.lancado_por && React.createElement("span", {
                    className: "text-xs text-gray-500 mt-1"
                }, e.lancado_por))), React.createElement("td", {
                    className: "px-3 py-3 text-center"
                }, "pendente" === e.status && React.createElement("div", {
                    className: "flex gap-2 justify-center"
                }, React.createElement("button", {
                    onClick: () => (async e => {
                        s(!0);
                        try {
                            if (!(await fetch(`${API_URL}/indicacoes/${e}/aprovar`, {
                                    method: "PATCH",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        resolved_by: l.fullName
                                    })
                                })).ok) throw new Error("Erro ao aprovar");
                            ja("‚úÖ Indica√ß√£o aprovada!", "success"), await wl()
                        } catch (e) {
                            ja(e.message, "error")
                        }
                        s(!1)
                    })(e.id),
                    className: "px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700"
                }, "‚úÖ Aprovar"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        modalRejeitar: e
                    }),
                    className: "px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700"
                }, "‚ùå Rejeitar")), "rejeitada" === e.status && e.motivo_rejeicao && React.createElement("span", {
                    className: "text-xs text-red-600",
                    title: e.motivo_rejeicao
                }, "üìù ", e.motivo_rejeicao.substring(0, 20), "...")))
            })))))), "promo-novatos" === p.finTab && React.createElement(React.Fragment, null, p.modalRejeitarNovatos && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl p-6 w-full max-w-md"
            }, React.createElement("h3", {
                className: "text-lg font-bold mb-4"
            }, "‚ùå Rejeitar Inscri√ß√£o"), React.createElement("p", {
                className: "text-sm text-gray-600 mb-3"
            }, "Profissional: ", React.createElement("strong", null, p.modalRejeitarNovatos.user_name), React.createElement("br", null), "Cliente: ", React.createElement("strong", null, p.modalRejeitarNovatos.cliente)), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Motivo da Rejei√ß√£o *"), React.createElement("textarea", {
                value: p.motivoRejeicaoNovato || "",
                onChange: e => x({
                    ...p,
                    motivoRejeicaoNovato: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                rows: "3",
                placeholder: "Informe o motivo..."
            })), React.createElement("div", {
                className: "flex gap-3"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    modalRejeitarNovatos: null,
                    motivoRejeicaoNovato: ""
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "Cancelar"), React.createElement("button", {
                onClick: () => rejeitarInscNovato(p.modalRejeitarNovatos.id),
                disabled: !p.motivoRejeicaoNovato || c,
                className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 disabled:opacity-50"
            }, c ? "..." : "‚ùå Rejeitar")))), React.createElement("div", {
                className: "bg-gradient-to-r from-purple-600 to-purple-800 rounded-xl shadow-lg mb-6 text-white overflow-hidden"
            }, React.createElement("div", {
                className: "p-4 flex justify-between items-center cursor-pointer hover:bg-white/10 transition",
                onClick: () => $e(!Fe)
            }, React.createElement("div", {
                className: "flex items-center gap-3"
            }, React.createElement("span", {
                className: "text-2xl"
            }, "üéØ"), React.createElement("div", null, React.createElement("h2", {
                className: "text-lg font-bold"
            }, "Quiz de Procedimentos"), React.createElement("p", {
                className: "text-purple-200 text-xs"
            }, "Clique para ", Fe ? "recolher" : "expandir", " configura√ß√µes"))), React.createElement("div", {
                className: "flex items-center gap-3"
            }, React.createElement("span", {
                className: "px-3 py-1 rounded-full text-xs font-bold " + (fe.ativo ? "bg-green-500" : "bg-red-500")
            }, fe.ativo ? "‚úÖ ATIVO" : "‚ùå INATIVO"), React.createElement("span", {
                className: "text-2xl transition-transform",
                style: {
                    transform: Fe ? "rotate(180deg)" : "rotate(0deg)"
                }
            }, "‚ñº"))), Fe && React.createElement("div", {
                className: "p-6 pt-2 border-t border-white/20"
            }, React.createElement("div", {
                className: "flex justify-end mb-4"
            }, React.createElement("button", {
                onClick: () => Ne({
                    ...fe,
                    ativo: !fe.ativo
                }),
                className: "px-4 py-2 rounded-lg font-semibold text-sm " + (fe.ativo ? "bg-red-500 hover:bg-red-600" : "bg-green-500 hover:bg-green-600")
            }, fe.ativo ? "‚è∏Ô∏è Desativar Quiz" : "‚ñ∂Ô∏è Ativar Quiz")), React.createElement("div", {
                className: "grid md:grid-cols-2 gap-4 mb-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "T√≠tulo da Promo√ß√£o"), React.createElement("input", {
                type: "text",
                value: fe.titulo,
                onChange: e => Ne({
                    ...fe,
                    titulo: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg text-gray-800",
                placeholder: "Acerte os procedimentos..."
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Valor da Gratuidade (R$)"), React.createElement("input", {
                type: "number",
                step: "0.01",
                value: fe.valor_gratuidade,
                onChange: e => Ne({
                    ...fe,
                    valor_gratuidade: parseFloat(e.target.value) || 0
                }),
                className: "w-full px-4 py-2 border rounded-lg text-gray-800"
            }))), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("label", {
                className: "block text-sm font-semibold mb-2"
            }, "üì∏ 4 Imagens do Carrossel"), React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-4 gap-3"
            }, [0, 1, 2, 3].map(e => React.createElement("div", {
                key: e,
                className: "relative"
            }, React.createElement("div", {
                className: "aspect-video bg-white/20 rounded-lg overflow-hidden border-2 border-dashed border-white/50 flex items-center justify-center"
            }, fe.imagens[e] ? React.createElement("img", {
                src: fe.imagens[e],
                alt: `Imagem ${e+1}`,
                className: "w-full h-full object-cover"
            }) : React.createElement("span", {
                className: "text-white/70 text-sm"
            }, "Imagem ", e + 1)), React.createElement("input", {
                type: "file",
                accept: "image/*",
                onChange: t => (async (e, t) => {
                    if (!t) return;
                    const a = new FileReader;
                    a.onload = t => {
                        const a = [...fe.imagens];
                        a[e] = t.target.result, Ne({
                            ...fe,
                            imagens: a
                        })
                    }, a.readAsDataURL(t)
                })(e, t.target.files[0]),
                className: "absolute inset-0 opacity-0 cursor-pointer"
            }), fe.imagens[e] && React.createElement("button", {
                onClick: () => {
                    const t = [...fe.imagens];
                    t[e] = null, Ne({
                        ...fe,
                        imagens: t
                    })
                },
                className: "absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600"
            }, "‚úï"))))), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("label", {
                className: "block text-sm font-semibold mb-2"
            }, "‚ùì 5 Afirma√ß√µes (CERTO ou ERRADO)"), React.createElement("div", {
                className: "space-y-3"
            }, [0, 1, 2, 3, 4].map(e => React.createElement("div", {
                key: e,
                className: "flex gap-3 items-center bg-white/10 rounded-lg p-3"
            }, React.createElement("span", {
                className: "font-bold text-lg"
            }, e + 1, "."), React.createElement("input", {
                type: "text",
                value: fe.perguntas[e]?.texto || "",
                onChange: t => {
                    const a = [...fe.perguntas];
                    a[e] = {
                        ...a[e],
                        texto: t.target.value
                    }, Ne({
                        ...fe,
                        perguntas: a
                    })
                },
                className: "flex-1 px-3 py-2 border rounded-lg text-gray-800",
                placeholder: `Afirma√ß√£o ${e+1}...`
            }), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("button", {
                onClick: () => {
                    const t = [...fe.perguntas];
                    t[e] = {
                        ...t[e],
                        resposta: !0
                    }, Ne({
                        ...fe,
                        perguntas: t
                    })
                },
                className: "px-3 py-2 rounded-lg font-semibold text-sm " + (!0 === fe.perguntas[e]?.resposta ? "bg-green-500" : "bg-white/20 hover:bg-white/30")
            }, "CERTO"), React.createElement("button", {
                onClick: () => {
                    const t = [...fe.perguntas];
                    t[e] = {
                        ...t[e],
                        resposta: !1
                    }, Ne({
                        ...fe,
                        perguntas: t
                    })
                },
                className: "px-3 py-2 rounded-lg font-semibold text-sm " + (!1 === fe.perguntas[e]?.resposta ? "bg-red-500" : "bg-white/20 hover:bg-white/30")
            }, "ERRADO")))))), React.createElement("button", {
                onClick: Fl,
                disabled: c,
                className: "w-full py-3 bg-white text-purple-700 rounded-lg font-bold hover:bg-purple-50 disabled:opacity-50"
            }, c ? "Salvando..." : "üíæ Salvar Configura√ß√£o do Quiz"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6 mb-6"
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-4"
            }, React.createElement("h3", {
                className: "font-bold text-lg text-purple-700"
            }, "üìä Hist√≥rico do Quiz"), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("span", {
                className: "px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-bold"
            }, ye.length, " participantes"), React.createElement("span", {
                className: "px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold"
            }, ye.filter(e => e.passou).length, " contemplados"))), React.createElement("div", {
                className: "grid grid-cols-4 gap-3 mb-4"
            }, React.createElement("div", {
                className: "bg-blue-50 border border-blue-200 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-2xl font-bold text-blue-600"
            }, ye.length), React.createElement("p", {
                className: "text-xs text-blue-700"
            }, "Total")), React.createElement("div", {
                className: "bg-green-50 border border-green-200 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-2xl font-bold text-green-600"
            }, ye.filter(e => e.passou).length), React.createElement("p", {
                className: "text-xs text-green-700"
            }, "Contemplados")), React.createElement("div", {
                className: "bg-red-50 border border-red-200 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-2xl font-bold text-red-600"
            }, ye.filter(e => !e.passou).length), React.createElement("p", {
                className: "text-xs text-red-700"
            }, "N√£o passou")), React.createElement("div", {
                className: "bg-purple-50 border border-purple-200 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-2xl font-bold text-purple-600"
            }, er(ye.filter(e => e.passou).length * (fe.valor_gratuidade || 500))), React.createElement("p", {
                className: "text-xs text-purple-700"
            }, "Total Gratuidades"))), 0 === ye.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Nenhum participante ainda") : React.createElement("div", {
                className: "overflow-x-auto max-h-80"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-100 sticky top-0"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-3 py-2 text-left font-semibold"
            }, "Data/Hora"), React.createElement("th", {
                className: "px-3 py-2 text-left font-semibold"
            }, "Profissional"), React.createElement("th", {
                className: "px-3 py-2 text-left font-semibold"
            }, "COD"), React.createElement("th", {
                className: "px-3 py-2 text-center font-semibold"
            }, "Acertos"), React.createElement("th", {
                className: "px-3 py-2 text-center font-semibold"
            }, "Resultado"), React.createElement("th", {
                className: "px-3 py-2 text-center font-semibold"
            }, "Gratuidade"))), React.createElement("tbody", null, ye.map(e => React.createElement("tr", {
                key: e.id,
                className: "border-b hover:bg-gray-50 " + (e.passou ? "bg-green-50" : "")
            }, React.createElement("td", {
                className: "px-3 py-2 text-xs text-gray-600"
            }, new Date(e.created_at).toLocaleDateString("pt-BR"), " ", new Date(e.created_at).toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            })), React.createElement("td", {
                className: "px-3 py-2 font-medium"
            }, e.user_name), React.createElement("td", {
                className: "px-3 py-2 text-gray-600"
            }, e.user_cod), React.createElement("td", {
                className: "px-3 py-2 text-center"
            }, React.createElement("span", {
                className: "font-bold " + (5 === e.acertos ? "text-green-600" : "text-red-600")
            }, e.acertos, "/5")), React.createElement("td", {
                className: "px-3 py-2 text-center"
            }, React.createElement("span", {
                className: "px-2 py-1 rounded-full text-xs font-bold " + (e.passou ? "bg-green-500 text-white" : "bg-red-400 text-white")
            }, e.passou ? "‚úÖ Contemplado" : "‚ùå N√£o passou")), React.createElement("td", {
                className: "px-3 py-2 text-center"
            }, e.passou ? React.createElement("span", {
                className: "font-bold text-green-600"
            }, er(fe.valor_gratuidade || 500)) : React.createElement("span", {
                className: "text-gray-400"
            }, "-")))))))), React.createElement("hr", {
                className: "my-6 border-gray-300"
            }), React.createElement("h3", {
                className: "text-lg font-bold text-gray-700 mb-4"
            }, "üìã Promo√ß√µes por Cliente/Regi√£o"), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6 mb-6"
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-4"
            }, React.createElement("h2", {
                className: "text-xl font-bold text-green-800"
            }, p.editPromoNovatos ? "‚úèÔ∏è Editar Promo√ß√£o Novatos" : "üöÄ Cadastrar Nova Promo√ß√£o Novatos"), p.editPromoNovatos && React.createElement("button", {
                onClick: () => x({
                    ...p,
                    editPromoNovatos: null,
                    novatosRegiao: "",
                    novatosCliente: "",
                    novatosValor: "",
                    novatosDetalhes: ""
                }),
                className: "text-sm text-gray-500 hover:text-gray-700"
            }, "‚úï Cancelar edi√ß√£o")), React.createElement("div", {
                className: "grid md:grid-cols-3 gap-4 mb-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Regi√£o *"), React.createElement("select", {
                value: p.novatosRegiao || "",
                onChange: e => x({
                    ...p,
                    novatosRegiao: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg bg-white"
            }, React.createElement("option", { value: "" }, "Selecione uma regi√£o..."),
               React.createElement("option", { value: "Todas" }, "üåç Todas as Regi√µes"),
               regioesNovatos.map(regiao => React.createElement("option", { key: regiao, value: regiao }, regiao))
            )), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Cliente *"), React.createElement("input", {
                type: "text",
                value: p.novatosCliente || "",
                onChange: e => x({
                    ...p,
                    novatosCliente: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "Ex: Magazine Luiza"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Valor do B√¥nus (R$) *"), React.createElement("input", {
                type: "number",
                step: "0.01",
                value: p.novatosValor || "",
                onChange: e => x({
                    ...p,
                    novatosValor: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "Ex: 150.00"
            }))), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Detalhes da Promo√ß√£o (opcional)"), React.createElement("textarea", {
                value: p.novatosDetalhes || "",
                onChange: e => x({
                    ...p,
                    novatosDetalhes: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                rows: "3",
                placeholder: "Ex: Vaga para motoboy com moto pr√≥pria. In√≠cio imediato..."
            })), React.createElement("div", {
                className: "flex items-center gap-4"
            }, React.createElement("button", {
                onClick: p.editPromoNovatos ? Tl : Pl,
                disabled: c,
                className: "px-6 py-2 text-white rounded-lg font-semibold disabled:opacity-50 " + (p.editPromoNovatos ? "bg-blue-600 hover:bg-blue-700" : "bg-green-600 hover:bg-green-700")
            }, c ? "..." : p.editPromoNovatos ? "üíæ Salvar Altera√ß√µes" : "‚ûï Criar Promo√ß√£o"), React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "‚è±Ô∏è Inscri√ß√µes expiram automaticamente em 10 dias"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6 mb-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üìã Promo√ß√µes Novatos Cadastradas"), 0 === ce.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-4"
            }, "Nenhuma promo√ß√£o cadastrada") : React.createElement("div", {
                className: "grid md:grid-cols-3 gap-3"
            }, ce.map(e => React.createElement("div", {
                key: e.id,
                className: "border rounded-lg p-3 " + ("ativa" === e.status ? "border-green-300 bg-green-50" : "border-gray-300 bg-gray-50")
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-1"
            }, React.createElement("span", {
                className: "px-2 py-0.5 rounded text-xs font-bold " + ("ativa" === e.status ? "bg-green-500 text-white" : "bg-gray-500 text-white")
            }, "ativa" === e.status ? "‚úÖ" : "‚è∏Ô∏è"), React.createElement("div", {
                className: "flex gap-1"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    editPromoNovatos: e,
                    novatosRegiao: e.regiao,
                    novatosCliente: e.cliente,
                    novatosValor: e.valor_bonus,
                    novatosDetalhes: e.detalhes || ""
                }),
                className: "text-xs text-blue-500 hover:text-blue-700",
                title: "Editar"
            }, "‚úèÔ∏è"), React.createElement("button", {
                onClick: async () => {
                    await fetch(`${API_URL}/promocoes-novatos/${e.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            status: "ativa" === e.status ? "inativa" : "ativa"
                        })
                    }), Cl()
                },
                className: "text-xs text-gray-500 hover:text-gray-700",
                title: "ativa" === e.status ? "Desativar" : "Ativar"
            }, "ativa" === e.status ? "‚è∏Ô∏è" : "‚ñ∂Ô∏è"), React.createElement("button", {
                onClick: () => (async e => {
                    if (confirm("Tem certeza que deseja excluir esta promo√ß√£o?")) {
                        s(!0);
                        try {
                            const t = await fetch(`${API_URL}/promocoes-novatos/${e}`, {
                                method: "DELETE"
                            });
                            if (!t.ok) {
                                const e = await t.json();
                                throw new Error(e.error || "Erro ao excluir")
                            }
                            ja("üóëÔ∏è Promo√ß√£o exclu√≠da!", "success"), await Cl()
                        } catch (e) {
                            ja(e.message, "error")
                        } finally {
                            s(!1)
                        }
                    }
                })(e.id),
                className: "text-xs text-red-500 hover:text-red-700",
                title: "Excluir"
            }, "üóëÔ∏è"))), React.createElement("p", {
                className: "font-semibold text-sm"
            }, "üìç ", e.regiao), React.createElement("p", {
                className: "text-sm text-gray-700"
            }, "üè¢ ", e.cliente), React.createElement("p", {
                className: "text-lg font-bold text-green-600"
            }, er(e.valor_bonus)), e.detalhes && React.createElement("p", {
                className: "text-xs text-gray-600 mt-1 whitespace-pre-wrap line-clamp-2",
                title: e.detalhes
            }, e.detalhes))))), React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
            }, React.createElement("div", {
                className: "bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-yellow-600"
            }, ne.filter(e => "pendente" === e.status).length), React.createElement("p", {
                className: "text-sm text-yellow-700"
            }, "Pendentes")), React.createElement("div", {
                className: "bg-green-50 border border-green-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-green-600"
            }, ne.filter(e => "aprovada" === e.status).length), React.createElement("p", {
                className: "text-sm text-green-700"
            }, "Aprovadas")), React.createElement("div", {
                className: "bg-red-50 border border-red-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-red-600"
            }, ne.filter(e => "rejeitada" === e.status).length), React.createElement("p", {
                className: "text-sm text-red-700"
            }, "Rejeitadas")), React.createElement("div", {
                className: "bg-gray-50 border border-gray-200 rounded-xl p-4 text-center"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-gray-600"
            }, ne.filter(e => "expirada" === e.status).length), React.createElement("p", {
                className: "text-sm text-gray-700"
            }, "Expiradas"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üöÄ Inscri√ß√µes de Novatos"), 0 === ne.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Nenhuma inscri√ß√£o recebida") : React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Data"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Profissional"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "COD"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Regi√£o"), React.createElement("th", {
                className: "px-2 py-3 text-left text-xs"
            }, "Cliente"), React.createElement("th", {
                className: "px-2 py-3 text-center text-xs"
            }, "B√¥nus"), React.createElement("th", {
                className: "px-2 py-3 text-center text-xs"
            }, "Expira"), React.createElement("th", {
                className: "px-2 py-3 text-center text-xs"
            }, "Cr√©dito"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "Status"), React.createElement("th", {
                className: "px-2 py-3 text-center text-xs"
            }, "Admin"), React.createElement("th", {
                className: "px-2 py-3 text-center text-xs"
            }, "A√ß√µes"))), React.createElement("tbody", null, ne.map(e => {
                const t = e.expires_at ? new Date(e.expires_at) : null,
                    a = t && new Date > t;
                return React.createElement("tr", {
                    key: e.id,
                    className: "border-b " + ("aprovada" === e.status ? "bg-green-50" : "rejeitada" === e.status ? "bg-red-50" : a && "pendente" === e.status ? "bg-gray-100" : "")
                }, React.createElement("td", {
                    className: "px-2 py-3 text-xs"
                }, new Date(e.created_at).toLocaleDateString("pt-BR")), React.createElement("td", {
                    className: "px-2 py-3 text-xs font-medium"
                }, e.user_name), React.createElement("td", {
                    className: "px-2 py-3 text-xs"
                }, e.user_cod), React.createElement("td", {
                    className: "px-2 py-3 text-xs"
                }, e.regiao), React.createElement("td", {
                    className: "px-2 py-3 text-xs"
                }, e.cliente), React.createElement("td", {
                    className: "px-2 py-3 text-center text-xs font-bold text-green-600"
                }, er(e.valor_bonus)), React.createElement("td", {
                    className: "px-2 py-3 text-center text-xs"
                }, t ? React.createElement("span", {
                    className: a ? "text-red-500" : "text-gray-600"
                }, t.toLocaleDateString("pt-BR")) : "-"), React.createElement("td", {
                    className: "px-2 py-3 text-center"
                }, "aprovada" === e.status ? e.credito_lancado ? React.createElement("div", null, React.createElement("span", {
                    className: "text-xs text-green-600 font-bold"
                }, "‚úÖ Lan√ßado"), e.lancado_por && React.createElement("p", {
                    className: "text-xs text-gray-400"
                }, e.lancado_por)) : React.createElement("button", {
                    onClick: () => (async e => {
                        s(!0);
                        try {
                            if (!(await fetch(`${API_URL}/inscricoes-novatos/${e.id}/credito`, {
                                    method: "PATCH",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        credito_lancado: !0,
                                        lancado_por: l.fullName
                                    })
                                })).ok) throw new Error("Erro ao creditar");
                            ja("‚úÖ Cr√©dito lan√ßado!", "success"), await Sl()
                        } catch (e) {
                            ja("Erro ao creditar", "error")
                        } finally {
                            s(!1)
                        }
                    })(e),
                    className: "px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",
                    disabled: c
                }, "üí∞ Lan√ßar") : "-"), React.createElement("td", {
                    className: "px-3 py-3 text-center"
                }, React.createElement("span", {
                    className: "px-2 py-1 rounded-full text-xs font-bold " + ("pendente" === e.status ? a ? "bg-gray-200 text-gray-700" : "bg-yellow-100 text-yellow-700" : "aprovada" === e.status ? "bg-green-100 text-green-700" : "rejeitada" === e.status ? "bg-red-100 text-red-700" : "bg-gray-100 text-gray-700")
                }, "pendente" === e.status && a ? "‚è∞ Expirada" : "pendente" === e.status ? "‚è≥ Pendente" : "aprovada" === e.status ? "‚úÖ Aprovada" : "rejeitada" === e.status ? "‚ùå Rejeitada" : e.status)), React.createElement("td", {
                    className: "px-2 py-3 text-center text-xs text-gray-500"
                }, e.resolved_by || "-"), React.createElement("td", {
                    className: "px-2 py-3 text-center"
                }, "pendente" === e.status && !a && React.createElement("div", {
                    className: "flex gap-1 justify-center"
                }, React.createElement("button", {
                    onClick: () => (async e => {
                        s(!0);
                        try {
                            await fetch(`${API_URL}/inscricoes-novatos/${e}/aprovar`, {
                                method: "PATCH",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    resolved_by: l.fullName
                                })
                            }), ja("‚úÖ Inscri√ß√£o aprovada!", "success"), await Sl()
                        } catch (e) {
                            ja("Erro ao aprovar", "error")
                        } finally {
                            s(!1)
                        }
                    })(e.id),
                    className: "p-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",
                    disabled: c
                }, "‚úì"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        modalRejeitarNovatos: e
                    }),
                    className: "p-1 bg-red-500 text-white rounded text-xs hover:bg-red-600"
                }, "‚úó")), "rejeitada" === e.status && e.motivo_rejeicao && React.createElement("span", {
                    className: "text-xs text-red-500",
                    title: e.motivo_rejeicao
                }, "üìù")))
            })))))), "loja" === p.finTab && React.createElement(React.Fragment, null, React.createElement("div", {
                className: "bg-white rounded-xl shadow mb-6"
            }, React.createElement("div", {
                className: "flex border-b"
            }, ["produtos", "estoque", "pedidos", "sugestoes"].map(e => React.createElement("button", {
                key: e,
                onClick: () => {
                    mt(e), "estoque" === e && Ja(), "produtos" === e && (Ha(), Ja()), "pedidos" === e && Wa(), "sugestoes" === e && Ya()
                },
                className: "flex-1 px-4 py-3 text-sm font-semibold relative " + (nt === e ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600 hover:bg-gray-50")
            }, "produtos" === e && "üè∑Ô∏è Produtos", "estoque" === e && "üì¶ Estoque", "pedidos" === e && "üõçÔ∏è Pedidos", "sugestoes" === e && React.createElement(React.Fragment, null, "üí° Sugest√µes", ut.filter(e => "pendente" === e.status).length > 0 && React.createElement("span", {
                className: "absolute -top-1 -right-1 bg-orange-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"
            }, ut.filter(e => "pendente" === e.status).length))))), React.createElement("div", {
                className: "p-6"
            }, "estoque" === nt && React.createElement(React.Fragment, null, React.createElement("div", {
                className: "flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6"
            }, React.createElement("div", null, React.createElement("h2", {
                className: "text-xl font-bold text-gray-800"
            }, "üì¶ Controle de Estoque"), React.createElement("p", {
                className: "text-sm text-gray-500"
            }, "Gerencie produtos, entradas e sa√≠das")), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("div", {
                className: "flex bg-gray-100 rounded-lg p-1"
            }, React.createElement("button", {
                onClick: () => {
                    xt("lista")
                },
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("lista" === pt ? "bg-white shadow text-purple-700" : "text-gray-600 hover:text-gray-800")
            }, "üìã Produtos"), React.createElement("button", {
                onClick: () => {
                    xt("movimentacoes"), Qa()
                },
                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("movimentacoes" === pt ? "bg-white shadow text-purple-700" : "text-gray-600 hover:text-gray-800")
            }, "üìä Hist√≥rico")), React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaEstoqueModal: !0,
                    lojaEstoqueEdit: null
                }),
                className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "‚ûï Novo Item"))), React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Total de Itens"), React.createElement("p", {
                className: "text-2xl font-bold text-purple-600"
            }, Ze.length)), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Itens Ativos"), React.createElement("p", {
                className: "text-2xl font-bold text-green-600"
            }, Ze.filter(e => "ativo" === e.status).length)), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Qtd. Total em Estoque"), React.createElement("p", {
                className: "text-2xl font-bold text-blue-600"
            }, Ze.reduce((e, t) => t.tem_tamanho && t.tamanhos ? e + t.tamanhos.reduce((e, t) => e + (t.quantidade || 0), 0) : e + (t.quantidade || 0), 0))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Valor Total"), React.createElement("p", {
                className: "text-2xl font-bold text-green-600"
            }, "R$ ", Ze.reduce((e, t) => {
                const a = t.tem_tamanho && t.tamanhos ? t.tamanhos.reduce((e, t) => e + (t.quantidade || 0), 0) : t.quantidade || 0;
                return e + parseFloat(t.valor) * a
            }, 0).toFixed(2).replace(".", ",")))), "lista" === pt && React.createElement("div", {
                className: "grid gap-4"
            }, 0 === Ze.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Nenhum item no estoque") : Ze.map(e => {
                const t = e.tem_tamanho && e.tamanhos ? e.tamanhos.reduce((e, t) => e + (t.quantidade || 0), 0) : e.quantidade || 0,
                    a = t > 0 && t <= 3,
                    l = 0 === t;
                return React.createElement("div", {
                    key: e.id,
                    className: "border-2 rounded-xl p-4 hover:shadow-md transition-shadow " + (l ? "border-red-200 bg-red-50" : a ? "border-yellow-200 bg-yellow-50" : "border-gray-200")
                }, React.createElement("div", {
                    className: "flex gap-4"
                }, e.imagem_url && React.createElement("img", {
                    src: e.imagem_url,
                    alt: e.nome,
                    className: "w-24 h-24 object-contain rounded-lg bg-gray-100"
                }), React.createElement("div", {
                    className: "flex-1"
                }, React.createElement("div", {
                    className: "flex justify-between items-start"
                }, React.createElement("div", null, React.createElement("h3", {
                    className: "font-bold text-gray-800 text-lg"
                }, e.nome), e.marca && React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Marca: ", e.marca), React.createElement("p", {
                    className: "text-lg font-bold text-green-600"
                }, "R$ ", parseFloat(e.valor).toFixed(2).replace(".", ","))), React.createElement("div", {
                    className: "flex flex-col items-end gap-1"
                }, React.createElement("span", {
                    className: "px-3 py-1 rounded-full text-xs font-bold " + ("ativo" === e.status ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700")
                }, "ativo" === e.status ? "‚úÖ Ativo" : "‚ùå Inativo"), l && React.createElement("span", {
                    className: "px-2 py-0.5 bg-red-500 text-white text-xs rounded-full"
                }, "SEM ESTOQUE"), a && !l && React.createElement("span", {
                    className: "px-2 py-0.5 bg-yellow-500 text-white text-xs rounded-full"
                }, "ESTOQUE BAIXO"))), e.tem_tamanho && e.tamanhos && e.tamanhos.length > 0 ? React.createElement("div", {
                    className: "mt-3"
                }, React.createElement("p", {
                    className: "text-xs text-gray-500 mb-1"
                }, "Tamanhos em estoque:"), React.createElement("div", {
                    className: "flex flex-wrap gap-2"
                }, e.tamanhos.map(e => React.createElement("span", {
                    key: e.id,
                    className: "px-3 py-1 rounded-lg text-sm font-semibold " + (e.quantidade <= 0 ? "bg-red-100 text-red-700" : e.quantidade <= 3 ? "bg-yellow-100 text-yellow-700" : "bg-green-100 text-green-700")
                }, e.tamanho, ": ", React.createElement("strong", null, e.quantidade))))) : React.createElement("div", {
                    className: "mt-3 flex items-center gap-2"
                }, React.createElement("span", {
                    className: "text-sm text-gray-600"
                }, "Quantidade:"), React.createElement("span", {
                    className: "px-3 py-1 rounded-lg text-lg font-bold " + (e.quantidade <= 0 ? "bg-red-100 text-red-700" : e.quantidade <= 3 ? "bg-yellow-100 text-yellow-700" : "bg-green-100 text-green-700")
                }, e.quantidade))), React.createElement("div", {
                    className: "flex flex-col gap-2"
                }, React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        lojaMovModal: !0,
                        lojaMovItem: e,
                        lojaMovTipo: "entrada"
                    }),
                    className: "px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-xs font-semibold hover:bg-green-200 flex items-center gap-1"
                }, "üì• Entrada"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        lojaMovModal: !0,
                        lojaMovItem: e,
                        lojaMovTipo: "saida"
                    }),
                    className: "px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-xs font-semibold hover:bg-red-200 flex items-center gap-1"
                }, "üì§ Sa√≠da"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        lojaEstoqueModal: !0,
                        lojaEstoqueEdit: e
                    }),
                    className: "px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg text-xs font-semibold hover:bg-blue-200"
                }, "‚úèÔ∏è Editar"), React.createElement("button", {
                    onClick: async () => {
                        confirm("Excluir este item do estoque?") && (await fetch(`${API_URL}/loja/estoque/${e.id}`, {
                            method: "DELETE"
                        }), Ja(), ja("üóëÔ∏è Item exclu√≠do!", "success"))
                    },
                    className: "px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-semibold hover:bg-gray-200"
                }, "üóëÔ∏è"))))
            })), "movimentacoes" === pt && React.createElement("div", {
                className: "bg-white rounded-xl shadow"
            }, React.createElement("div", {
                className: "p-4 border-b"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800"
            }, "üìä Hist√≥rico de Movimenta√ß√µes"), React.createElement("p", {
                className: "text-sm text-gray-500"
            }, "Todas as entradas e sa√≠das do estoque")), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Data/Hora"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Produto"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Tipo"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Tam."), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Qtd."), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Motivo"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Por"))), React.createElement("tbody", null, 0 === it.length ? React.createElement("tr", null, React.createElement("td", {
                colSpan: "7",
                className: "text-center py-8 text-gray-500"
            }, "Nenhuma movimenta√ß√£o registrada")) : it.map(e => React.createElement("tr", {
                key: e.id,
                className: "border-t hover:bg-gray-50"
            }, React.createElement("td", {
                className: "px-4 py-3 text-xs"
            }, new Date(e.created_at).toLocaleDateString("pt-BR"), React.createElement("br", null), React.createElement("span", {
                className: "text-gray-500"
            }, new Date(e.created_at).toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            }))), React.createElement("td", {
                className: "px-4 py-3"
            }, React.createElement("p", {
                className: "font-semibold"
            }, e.produto_nome), e.marca && React.createElement("p", {
                className: "text-xs text-gray-500"
            }, e.marca)), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, React.createElement("span", {
                className: "px-2 py-1 rounded-full text-xs font-bold " + ("entrada" === e.tipo ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700")
            }, "entrada" === e.tipo ? "üì• Entrada" : "üì§ Sa√≠da")), React.createElement("td", {
                className: "px-4 py-3 text-center font-semibold"
            }, e.tamanho || "-"), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, React.createElement("span", {
                className: "text-lg font-bold " + ("entrada" === e.tipo ? "text-green-600" : "text-red-600")
            }, "entrada" === e.tipo ? "+" : "-", e.quantidade)), React.createElement("td", {
                className: "px-4 py-3 text-sm text-gray-600"
            }, e.motivo || "-"), React.createElement("td", {
                className: "px-4 py-3 text-sm"
            }, e.created_by || "-"))))))), p.lojaEstoqueModal && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto"
            }, React.createElement("div", {
                className: "p-6"
            }, React.createElement("h2", {
                className: "text-xl font-bold mb-4"
            }, p.lojaEstoqueEdit ? "‚úèÔ∏è Editar Item" : "‚ûï Novo Item no Estoque"), React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Nome do Produto *"), React.createElement("input", {
                type: "text",
                value: p.lojaEstoqueNome ?? p.lojaEstoqueEdit?.nome ?? "",
                onChange: e => x({
                    ...p,
                    lojaEstoqueNome: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "Ex: Camiseta Polo"
            })), React.createElement("div", {
                className: "grid grid-cols-2 gap-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Marca"), React.createElement("input", {
                type: "text",
                value: p.lojaEstoqueMarca ?? p.lojaEstoqueEdit?.marca ?? "",
                onChange: e => x({
                    ...p,
                    lojaEstoqueMarca: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "Ex: Nike"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Valor (R$) *"), React.createElement("input", {
                type: "number",
                step: "0.01",
                value: p.lojaEstoqueValor ?? p.lojaEstoqueEdit?.valor ?? "",
                onChange: e => x({
                    ...p,
                    lojaEstoqueValor: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "99.90"
            }))), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Imagem do Produto"), React.createElement("div", {
                className: "space-y-2"
            }, (p.lojaEstoqueImagem || p.lojaEstoqueEdit?.imagem_url) && React.createElement("div", {
                className: "relative inline-block"
            }, React.createElement("img", {
                src: p.lojaEstoqueImagem || p.lojaEstoqueEdit?.imagem_url,
                alt: "Preview",
                className: "w-20 h-20 object-cover rounded-lg border"
            }), React.createElement("button", {
                type: "button",
                onClick: () => x({
                    ...p,
                    lojaEstoqueImagem: ""
                }),
                className: "absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600"
            }, "‚úï")), React.createElement("label", {
                className: "block cursor-pointer"
            }, React.createElement("div", {
                className: "px-4 py-2 bg-purple-100 text-purple-700 rounded-lg text-center font-semibold hover:bg-purple-200 transition-colors text-sm"
            }, p.uploadingEstoqueImage ? "‚è≥ Enviando..." : "üì∑ Fazer Upload"), React.createElement("input", {
                type: "file",
                accept: "image/*",
                className: "hidden",
                disabled: p.uploadingEstoqueImage,
                onChange: async e => {
                    const t = e.target.files?.[0];
                    if (t)
                        if (t.size > 15728640) ja("Imagem muito grande (m√°x 15MB)", "error");
                        else {
                            x({
                                ...p,
                                uploadingEstoqueImage: !0
                            });
                            try {
                                const e = new FileReader;
                                e.onload = e => {
                                    const t = e.target.result;
                                    x({
                                        ...p,
                                        lojaEstoqueImagem: t,
                                        uploadingEstoqueImage: !1
                                    }), ja("‚úÖ Imagem carregada!", "success")
                                }, e.onerror = () => {
                                    throw new Error("Erro ao ler arquivo")
                                }, e.readAsDataURL(t)
                            } catch (e) {
                                console.error("Erro upload:", e), ja("Erro ao carregar imagem", "error"), x({
                                    ...p,
                                    uploadingEstoqueImage: !1
                                })
                            }
                        }
                }
            })), React.createElement("details", {
                className: "text-xs"
            }, React.createElement("summary", {
                className: "cursor-pointer text-gray-500"
            }, "Ou cole uma URL"), React.createElement("input", {
                type: "text",
                placeholder: "https://...",
                value: p.lojaEstoqueImagem ?? p.lojaEstoqueEdit?.imagem_url ?? "",
                onChange: e => x({
                    ...p,
                    lojaEstoqueImagem: e.target.value
                }),
                className: "w-full px-3 py-1 border rounded mt-1 text-sm"
            })))), React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("input", {
                type: "checkbox",
                id: "temTamanho",
                checked: p.lojaEstoqueTemTamanho ?? p.lojaEstoqueEdit?.tem_tamanho ?? !1,
                onChange: e => x({
                    ...p,
                    lojaEstoqueTemTamanho: e.target.checked
                }),
                className: "w-5 h-5"
            }), React.createElement("label", {
                htmlFor: "temTamanho",
                className: "text-sm font-semibold"
            }, "Este produto tem tamanhos")), (p.lojaEstoqueTemTamanho ?? p.lojaEstoqueEdit?.tem_tamanho) && React.createElement("div", null, React.createElement("div", {
                className: "flex gap-2 mb-3"
            }, React.createElement("button", {
                type: "button",
                onClick: () => x({
                    ...p,
                    lojaEstoqueTipoTamanho: "letras"
                }),
                className: "flex-1 px-3 py-2 rounded-lg text-sm font-semibold border-2 " + ("letras" === (p.lojaEstoqueTipoTamanho ?? p.lojaEstoqueEdit?.tipo_tamanho ?? "letras") ? "border-purple-500 bg-purple-50 text-purple-700" : "border-gray-200 text-gray-600")
            }, "PP, P, M, G..."), React.createElement("button", {
                type: "button",
                onClick: () => x({
                    ...p,
                    lojaEstoqueTipoTamanho: "numeros"
                }),
                className: "flex-1 px-3 py-2 rounded-lg text-sm font-semibold border-2 " + ("numeros" === (p.lojaEstoqueTipoTamanho ?? p.lojaEstoqueEdit?.tipo_tamanho) ? "border-purple-500 bg-purple-50 text-purple-700" : "border-gray-200 text-gray-600")
            }, "Numera√ß√£o (34, 36...)")), "letras" === (p.lojaEstoqueTipoTamanho ?? p.lojaEstoqueEdit?.tipo_tamanho ?? "letras") ? React.createElement(React.Fragment, null, React.createElement("label", {
                className: "block text-sm font-semibold mb-2"
            }, "Tamanhos e Quantidades"), React.createElement("div", {
                className: "grid grid-cols-2 gap-2"
            }, ["PP", "P", "M", "G", "GG", "XG", "XXG"].map(e => {
                const t = (p.lojaEstoqueEdit?.tamanhos || []).find(t => t.tamanho === e);
                return React.createElement("div", {
                    key: e,
                    className: "flex items-center gap-2 bg-gray-50 p-2 rounded"
                }, React.createElement("span", {
                    className: "w-10 text-sm font-bold text-purple-700"
                }, e), React.createElement("input", {
                    type: "number",
                    min: "0",
                    value: p[`lojaEstoqueTam_${e}`] ?? t?.quantidade ?? 0,
                    onChange: t => x({
                        ...p,
                        [`lojaEstoqueTam_${e}`]: parseInt(t.target.value) || 0
                    }),
                    className: "flex-1 px-2 py-1 border rounded text-center",
                    placeholder: "0"
                }))
            }))) : React.createElement(React.Fragment, null, React.createElement("label", {
                className: "block text-sm font-semibold mb-2"
            }, "Numera√ß√µes e Quantidades"), React.createElement("div", {
                className: "space-y-2"
            }, (p.lojaEstoqueNumeracoes ?? p.lojaEstoqueEdit?.tamanhos?.map(e => ({
                num: e.tamanho,
                qtd: e.quantidade
            })) ?? [{
                num: "",
                qtd: 0
            }]).map((e, t) => React.createElement("div", {
                key: t,
                className: "flex items-center gap-2"
            }, React.createElement("input", {
                type: "text",
                placeholder: "Ex: 38",
                value: e.num,
                onChange: e => {
                    const a = [...p.lojaEstoqueNumeracoes ?? p.lojaEstoqueEdit?.tamanhos?.map(e => ({
                        num: e.tamanho,
                        qtd: e.quantidade
                    })) ?? [{
                        num: "",
                        qtd: 0
                    }]];
                    a[t].num = e.target.value, x({
                        ...p,
                        lojaEstoqueNumeracoes: a
                    })
                },
                className: "w-20 px-2 py-1 border rounded text-center font-bold"
            }), React.createElement("input", {
                type: "number",
                min: "0",
                placeholder: "Qtd",
                value: e.qtd,
                onChange: e => {
                    const a = [...p.lojaEstoqueNumeracoes ?? p.lojaEstoqueEdit?.tamanhos?.map(e => ({
                        num: e.tamanho,
                        qtd: e.quantidade
                    })) ?? [{
                        num: "",
                        qtd: 0
                    }]];
                    a[t].qtd = parseInt(e.target.value) || 0, x({
                        ...p,
                        lojaEstoqueNumeracoes: a
                    })
                },
                className: "w-20 px-2 py-1 border rounded text-center"
            }), React.createElement("button", {
                type: "button",
                onClick: () => {
                    const e = [...p.lojaEstoqueNumeracoes ?? p.lojaEstoqueEdit?.tamanhos?.map(e => ({
                        num: e.tamanho,
                        qtd: e.quantidade
                    })) ?? [{
                        num: "",
                        qtd: 0
                    }]];
                    e.splice(t, 1), x({
                        ...p,
                        lojaEstoqueNumeracoes: e.length ? e : [{
                            num: "",
                            qtd: 0
                        }]
                    })
                },
                className: "px-2 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200"
            }, "üóëÔ∏è"))), React.createElement("button", {
                type: "button",
                onClick: () => {
                    const e = [...p.lojaEstoqueNumeracoes ?? p.lojaEstoqueEdit?.tamanhos?.map(e => ({
                        num: e.tamanho,
                        qtd: e.quantidade
                    })) ?? [{
                        num: "",
                        qtd: 0
                    }]];
                    e.push({
                        num: "",
                        qtd: 0
                    }), x({
                        ...p,
                        lojaEstoqueNumeracoes: e
                    })
                },
                className: "w-full px-3 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-semibold hover:bg-purple-200"
            }, "‚ûï Adicionar Numera√ß√£o")))), !(p.lojaEstoqueTemTamanho ?? p.lojaEstoqueEdit?.tem_tamanho) && React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Quantidade em Estoque *"), React.createElement("input", {
                type: "number",
                min: "0",
                value: p.lojaEstoqueQtd ?? p.lojaEstoqueEdit?.quantidade ?? 0,
                onChange: e => x({
                    ...p,
                    lojaEstoqueQtd: parseInt(e.target.value) || 0
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            }))), React.createElement("div", {
                className: "flex gap-3 mt-6"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaEstoqueModal: !1,
                    lojaEstoqueEdit: null,
                    lojaEstoqueNome: "",
                    lojaEstoqueMarca: "",
                    lojaEstoqueValor: "",
                    lojaEstoqueImagem: "",
                    lojaEstoqueTemTamanho: !1,
                    lojaEstoqueQtd: 0,
                    lojaEstoqueTipoTamanho: null,
                    lojaEstoqueNumeracoes: null
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
            }, "Cancelar"), React.createElement("button", {
                onClick: async () => {
                    const e = p.lojaEstoqueNome ?? p.lojaEstoqueEdit?.nome,
                        t = p.lojaEstoqueValor ?? p.lojaEstoqueEdit?.valor;
                    if (!e || !t) return void ja("Preencha nome e valor", "error");
                    const a = p.lojaEstoqueTemTamanho ?? p.lojaEstoqueEdit?.tem_tamanho,
                        r = p.lojaEstoqueTipoTamanho ?? p.lojaEstoqueEdit?.tipo_tamanho ?? "letras";
                    let o = [];
                    if (a)
                        if ("letras" === r)["PP", "P", "M", "G", "GG", "XG", "XXG"].forEach(e => {
                            const t = p[`lojaEstoqueTam_${e}`] ?? (p.lojaEstoqueEdit?.tamanhos || []).find(t => t.tamanho === e)?.quantidade ?? 0;
                            t > 0 && o.push({
                                tamanho: e,
                                quantidade: t
                            })
                        });
                        else {
                            (p.lojaEstoqueNumeracoes ?? p.lojaEstoqueEdit?.tamanhos?.map(e => ({
                                num: e.tamanho,
                                qtd: e.quantidade
                            })) ?? []).forEach(e => {
                                e.num && e.qtd > 0 && o.push({
                                    tamanho: e.num,
                                    quantidade: e.qtd
                                })
                            })
                        } const c = {
                        nome: e,
                        marca: p.lojaEstoqueMarca ?? p.lojaEstoqueEdit?.marca ?? "",
                        valor: parseFloat(t),
                        quantidade: a ? 0 : p.lojaEstoqueQtd ?? p.lojaEstoqueEdit?.quantidade ?? 0,
                        tem_tamanho: a,
                        tipo_tamanho: r,
                        tamanhos: o,
                        imagem_url: p.lojaEstoqueImagem ?? p.lojaEstoqueEdit?.imagem_url ?? "",
                        created_by: l.fullName
                    };
                    if (!!p.lojaEstoqueEdit) await fetch(`${API_URL}/loja/estoque/${p.lojaEstoqueEdit.id}`, {
                        method: "PUT",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(c)
                    }), ja("‚úÖ Item atualizado!", "success");
                    else {
                        const e = await fetch(`${API_URL}/loja/estoque`, {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify(c)
                            }),
                            t = await e.json(),
                            r = a ? o.reduce((e, t) => e + t.quantidade, 0) : c.quantidade || 0;
                        r > 0 && await fetch(`${API_URL}/loja/estoque/${t.id}/entrada`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                quantidade: r,
                                motivo: "Estoque inicial",
                                created_by: l.fullName
                            })
                        }), ja("‚úÖ Item adicionado!", "success")
                    }
                    x({
                        ...p,
                        lojaEstoqueModal: !1,
                        lojaEstoqueEdit: null,
                        lojaEstoqueNome: "",
                        lojaEstoqueMarca: "",
                        lojaEstoqueValor: "",
                        lojaEstoqueImagem: "",
                        lojaEstoqueTemTamanho: !1,
                        lojaEstoqueQtd: 0
                    }), Ja(), Qa()
                },
                className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, p.lojaEstoqueEdit ? "üíæ Salvar" : "‚ûï Adicionar"))))), p.lojaMovModal && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl max-w-md w-full"
            }, React.createElement("div", {
                className: `p-4 rounded-t-2xl ${"entrada"===p.lojaMovTipo?"bg-green-600":"bg-red-600"} text-white`
            }, React.createElement("h2", {
                className: "text-xl font-bold"
            }, "entrada" === p.lojaMovTipo ? "üì• Registrar Entrada" : "üì§ Registrar Sa√≠da"), React.createElement("p", {
                className: "text-sm opacity-80"
            }, p.lojaMovItem?.nome)), React.createElement("div", {
                className: "p-6 space-y-4"
            }, p.lojaMovItem?.tem_tamanho && p.lojaMovItem?.tamanhos?.length > 0 && React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-2"
            }, "Tamanho"), React.createElement("select", {
                value: p.lojaMovTamanho || "",
                onChange: e => x({
                    ...p,
                    lojaMovTamanho: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            }, React.createElement("option", {
                value: ""
            }, "Selecione o tamanho"), p.lojaMovItem.tamanhos.map(e => React.createElement("option", {
                key: e.tamanho,
                value: e.tamanho
            }, e.tamanho, " (atual: ", e.quantidade, ")")))), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-2"
            }, "Quantidade *"), React.createElement("input", {
                type: "number",
                min: "1",
                value: p.lojaMovQtd || "",
                onChange: e => x({
                    ...p,
                    lojaMovQtd: parseInt(e.target.value) || 0
                }),
                className: "w-full px-4 py-2 border rounded-lg text-2xl font-bold text-center",
                placeholder: "0"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-2"
            }, "Motivo"), React.createElement("input", {
                type: "text",
                value: p.lojaMovMotivo || "",
                onChange: e => x({
                    ...p,
                    lojaMovMotivo: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                placeholder: "entrada" === p.lojaMovTipo ? "Ex: Compra de fornecedor" : "Ex: Produto danificado"
            })), React.createElement("div", {
                className: "flex gap-3 mt-6"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaMovModal: !1,
                    lojaMovItem: null,
                    lojaMovTipo: null,
                    lojaMovQtd: 0,
                    lojaMovMotivo: "",
                    lojaMovTamanho: ""
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
            }, "Cancelar"), React.createElement("button", {
                onClick: async () => {
                    if (!p.lojaMovQtd || p.lojaMovQtd <= 0) return void ja("Informe a quantidade", "error");
                    if (p.lojaMovItem?.tem_tamanho && !p.lojaMovTamanho) return void ja("Selecione o tamanho", "error");
                    const e = "entrada" === p.lojaMovTipo ? "entrada" : "saida";
                    await fetch(`${API_URL}/loja/estoque/${p.lojaMovItem.id}/${e}`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            quantidade: p.lojaMovQtd,
                            tamanho: p.lojaMovTamanho || null,
                            motivo: p.lojaMovMotivo || ("entrada" === p.lojaMovTipo ? "Entrada manual" : "Sa√≠da manual"),
                            created_by: l.fullName
                        })
                    }), ja("entrada" === p.lojaMovTipo ? "üì• Entrada registrada!" : "üì§ Sa√≠da registrada!", "success"), x({
                        ...p,
                        lojaMovModal: !1,
                        lojaMovItem: null,
                        lojaMovTipo: null,
                        lojaMovQtd: 0,
                        lojaMovMotivo: "",
                        lojaMovTamanho: ""
                    }), Ja(), Qa()
                },
                className: "flex-1 px-4 py-2 text-white rounded-lg font-semibold " + ("entrada" === p.lojaMovTipo ? "bg-green-600 hover:bg-green-700" : "bg-red-600 hover:bg-red-700")
            }, "entrada" === p.lojaMovTipo ? "üì• Confirmar Entrada" : "üì§ Confirmar Sa√≠da")))))), "produtos" === nt && React.createElement(React.Fragment, null, React.createElement("div", {
                className: "flex justify-between items-center mb-6"
            }, React.createElement("h2", {
                className: "text-xl font-bold text-gray-800"
            }, "üè∑Ô∏è Produtos √† Venda"), React.createElement("button", {
                onClick: () => {
                    Ja(), x({
                        ...p,
                        lojaProdutoModal: !0,
                        lojaProdutoEdit: null
                    })
                },
                className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "‚ûï Novo Produto")), React.createElement("div", {
                className: "grid md:grid-cols-2 lg:grid-cols-3 gap-4"
            }, 0 === Ke.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8 col-span-full"
            }, "Nenhum produto cadastrado") : Ke.map(e => React.createElement("div", {
                key: e.id,
                className: "border rounded-xl overflow-hidden hover:shadow-lg transition-shadow " + ("ativo" !== e.status ? "opacity-60" : "")
            }, e.imagem_url && React.createElement("img", {
                src: e.imagem_url,
                alt: e.nome,
                className: "w-full h-40 object-cover"
            }), React.createElement("div", {
                className: "p-4"
            }, React.createElement("div", {
                className: "flex justify-between items-start mb-2"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800"
            }, e.nome), React.createElement("span", {
                className: "px-2 py-0.5 rounded text-xs font-bold " + ("ativo" === e.status ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700")
            }, "ativo" === e.status ? "Ativo" : "Inativo")), e.marca && React.createElement("p", {
                className: "text-sm text-gray-500"
            }, e.marca), React.createElement("p", {
                className: "text-xl font-bold text-green-600 mt-2"
            }, "R$ ", parseFloat(e.valor).toFixed(2).replace(".", ",")), React.createElement("div", {
                className: "mt-3 text-xs text-gray-500"
            }, e.parcelas_config && e.parcelas_config.filter(e => e && parseFloat(e.valor_parcela) > 0).length > 0 ? React.createElement("div", {
                className: "flex flex-wrap gap-1"
            }, e.parcelas_config.filter(e => e && parseFloat(e.valor_parcela) > 0).map((e, t) => React.createElement("span", {
                key: t,
                className: "bg-purple-100 text-purple-700 px-2 py-0.5 rounded"
            }, e.parcelas, "x R$ ", parseFloat(e.valor_parcela).toFixed(2).replace(".", ",")))) : React.createElement("p", {
                className: "text-gray-400"
            }, "Sem parcelas configuradas")), React.createElement("div", {
                className: "flex gap-2 mt-3"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaProdutoModal: !0,
                    lojaProdutoEdit: e
                }),
                className: "flex-1 px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold hover:bg-blue-200"
            }, "‚úèÔ∏è Editar"), React.createElement("button", {
                onClick: async () => {
                    confirm("Excluir este produto?") && (await fetch(`${API_URL}/loja/produtos/${e.id}`, {
                        method: "DELETE"
                    }), Ha(), ja("üóëÔ∏è Produto exclu√≠do!", "success"))
                },
                className: "px-3 py-1 bg-red-100 text-red-700 rounded text-xs font-semibold hover:bg-red-200"
            }, "üóëÔ∏è")))))), p.lojaProdutoModal && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto"
            }, React.createElement("div", {
                className: "p-6"
            }, React.createElement("h2", {
                className: "text-xl font-bold mb-4"
            }, p.lojaProdutoEdit ? "‚úèÔ∏è Editar Produto" : "‚ûï Novo Produto √† Venda"), React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Produto do Estoque *"), React.createElement("select", {
                value: p.lojaProdutoEstoqueId ?? p.lojaProdutoEdit?.estoque_id ?? "",
                onChange: e => {
                    const t = Ze.find(t => t.id === parseInt(e.target.value));
                    x({
                        ...p,
                        lojaProdutoEstoqueId: e.target.value,
                        lojaProdutoNome: t?.nome || "",
                        lojaProdutoMarca: t?.marca || "",
                        lojaProdutoValor: t?.valor || "",
                        lojaProdutoImagem: t?.imagem_url || ""
                    })
                },
                className: "w-full px-4 py-2 border rounded-lg bg-white"
            }, React.createElement("option", {
                value: ""
            }, "Selecione..."), Ze.filter(e => "ativo" === e.status).map(e => React.createElement("option", {
                key: e.id,
                value: e.id
            }, e.nome, " - R$ ", parseFloat(e.valor).toFixed(2))))), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Nome do Produto *"), React.createElement("input", {
                type: "text",
                value: p.lojaProdutoNome ?? p.lojaProdutoEdit?.nome ?? "",
                onChange: e => x({
                    ...p,
                    lojaProdutoNome: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Descri√ß√£o"), React.createElement("textarea", {
                value: p.lojaProdutoDesc ?? p.lojaProdutoEdit?.descricao ?? "",
                onChange: e => x({
                    ...p,
                    lojaProdutoDesc: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg",
                rows: 3,
                placeholder: "Descreva o produto..."
            })), React.createElement("div", {
                className: "grid grid-cols-2 gap-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Marca"), React.createElement("input", {
                type: "text",
                value: p.lojaProdutoMarca ?? p.lojaProdutoEdit?.marca ?? "",
                onChange: e => x({
                    ...p,
                    lojaProdutoMarca: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Valor Original (R$)"), React.createElement("input", {
                type: "number",
                step: "0.01",
                value: p.lojaProdutoValor ?? p.lojaProdutoEdit?.valor ?? "",
                onChange: e => x({
                    ...p,
                    lojaProdutoValor: e.target.value
                }),
                className: "w-full px-4 py-2 border rounded-lg"
            }))), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold mb-1"
            }, "Imagem do Produto"), React.createElement("div", {
                className: "space-y-2"
            }, (p.lojaProdutoImagem || p.lojaProdutoEdit?.imagem_url) && React.createElement("div", {
                className: "relative inline-block"
            }, React.createElement("img", {
                src: p.lojaProdutoImagem || p.lojaProdutoEdit?.imagem_url,
                alt: "Preview",
                className: "w-24 h-24 object-cover rounded-lg border"
            }), React.createElement("button", {
                type: "button",
                onClick: () => x({
                    ...p,
                    lojaProdutoImagem: ""
                }),
                className: "absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600"
            }, "‚úï")), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("label", {
                className: "flex-1 cursor-pointer"
            }, React.createElement("div", {
                className: "px-4 py-2 bg-purple-100 text-purple-700 rounded-lg text-center font-semibold hover:bg-purple-200 transition-colors"
            }, p.uploadingImage ? "‚è≥ Enviando..." : "üì∑ Fazer Upload"), React.createElement("input", {
                type: "file",
                accept: "image/*",
                className: "hidden",
                disabled: p.uploadingImage,
                onChange: async e => {
                    const t = e.target.files?.[0];
                    if (t)
                        if (t.size > 15728640) ja("Imagem muito grande (m√°x 15MB)", "error");
                        else {
                            x({
                                ...p,
                                uploadingImage: !0
                            });
                            try {
                                const e = new FileReader;
                                e.onload = e => {
                                    const t = e.target.result;
                                    x({
                                        ...p,
                                        lojaProdutoImagem: t,
                                        uploadingImage: !1
                                    }), ja("‚úÖ Imagem carregada!", "success")
                                }, e.onerror = () => {
                                    throw new Error("Erro ao ler arquivo")
                                }, e.readAsDataURL(t)
                            } catch (e) {
                                console.error("Erro upload:", e), ja("Erro ao carregar imagem", "error"), x({
                                    ...p,
                                    uploadingImage: !1
                                })
                            }
                        }
                }
            }))), React.createElement("details", {
                className: "text-sm"
            }, React.createElement("summary", {
                className: "cursor-pointer text-gray-500 hover:text-gray-700"
            }, "Ou cole uma URL"), React.createElement("input", {
                type: "text",
                placeholder: "https://...",
                value: p.lojaProdutoImagem ?? p.lojaProdutoEdit?.imagem_url ?? "",
                onChange: e => x({
                    ...p,
                    lojaProdutoImagem: e.target.value
                }),
                className: "w-full px-3 py-2 border rounded-lg mt-2 text-sm"
            })))), React.createElement("div", {
                className: "bg-purple-50 rounded-lg p-4"
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-3"
            }, React.createElement("h3", {
                className: "font-bold text-purple-800"
            }, "üí∞ Op√ß√µes de Parcelamento"), React.createElement("button", {
                type: "button",
                onClick: () => {
                    const e = p.lojaProdutoParcelas ?? (p.lojaProdutoEdit?.parcelas_config ? [...p.lojaProdutoEdit.parcelas_config] : []);
                    x({
                        ...p,
                        lojaProdutoParcelas: [...e, {
                            parcelas: 1,
                            valor_parcela: ""
                        }]
                    })
                },
                className: "px-3 py-1 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700"
            }, "‚ûï Adicionar")), React.createElement("div", {
                className: "space-y-2"
            }, 0 === ((p.lojaProdutoParcelas ?? p.lojaProdutoEdit?.parcelas_config) || []).length ? React.createElement("p", {
                className: "text-sm text-gray-500 text-center py-3 bg-white rounded-lg"
            }, "Nenhuma op√ß√£o de parcelamento.", React.createElement("br", null), 'Clique em "‚ûï Adicionar" acima.') : ((p.lojaProdutoParcelas ?? p.lojaProdutoEdit?.parcelas_config) || []).map((e, t) => React.createElement("div", {
                key: t,
                className: "flex gap-2 items-center bg-white p-3 rounded-lg border"
            }, React.createElement("div", {
                className: "w-24"
            }, React.createElement("label", {
                className: "block text-xs text-gray-500 mb-1"
            }, "Parcelas"), React.createElement("select", {
                value: e.parcelas || 1,
                onChange: e => {
                    const a = [...(p.lojaProdutoParcelas ?? p.lojaProdutoEdit?.parcelas_config) || []];
                    a[t] = {
                        ...a[t],
                        parcelas: parseInt(e.target.value)
                    }, x({
                        ...p,
                        lojaProdutoParcelas: a
                    })
                },
                className: "w-full px-2 py-1.5 border rounded text-sm bg-white"
            }, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map(e => React.createElement("option", {
                key: e,
                value: e
            }, e, "x")))), React.createElement("div", {
                className: "flex-1"
            }, React.createElement("label", {
                className: "block text-xs text-gray-500 mb-1"
            }, "Valor da Parcela (R$)"), React.createElement("input", {
                type: "number",
                step: "0.01",
                value: e.valor_parcela ?? "",
                onChange: e => {
                    const a = [...(p.lojaProdutoParcelas ?? p.lojaProdutoEdit?.parcelas_config) || []];
                    a[t] = {
                        ...a[t],
                        valor_parcela: e.target.value
                    }, x({
                        ...p,
                        lojaProdutoParcelas: a
                    })
                },
                className: "w-full px-2 py-1.5 border rounded text-sm",
                placeholder: "0.00"
            })), React.createElement("div", {
                className: "w-24 text-right"
            }, React.createElement("label", {
                className: "block text-xs text-gray-500 mb-1"
            }, "Total"), React.createElement("span", {
                className: "text-sm font-bold text-green-600"
            }, "R$ ", ((e.parcelas || 1) * (parseFloat(e.valor_parcela) || 0)).toFixed(2).replace(".", ","))), React.createElement("button", {
                type: "button",
                onClick: () => {
                    const e = [...(p.lojaProdutoParcelas ?? p.lojaProdutoEdit?.parcelas_config) || []];
                    e.splice(t, 1), x({
                        ...p,
                        lojaProdutoParcelas: e
                    })
                },
                className: "p-2 text-red-500 hover:bg-red-50 rounded"
            }, "üóëÔ∏è")))))), React.createElement("div", {
                className: "flex gap-3 mt-6"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaProdutoModal: !1,
                    lojaProdutoEdit: null,
                    lojaProdutoParcelas: null
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
            }, "Cancelar"), React.createElement("button", {
                onClick: async () => {
                    const e = p.lojaProdutoNome ?? p.lojaProdutoEdit?.nome,
                        t = p.lojaProdutoValor ?? p.lojaProdutoEdit?.valor;
                    if (!e || !t) return void ja("Preencha nome e valor", "error");
                    const a = p.lojaProdutoParcelas ?? p.lojaProdutoEdit?.parcelas_config ?? [];
                    if (0 === a.length) return void ja("Adicione pelo menos uma op√ß√£o de parcelamento", "error");
                    for (const e of a)
                        if (!e.valor_parcela || parseFloat(e.valor_parcela) <= 0) return void ja("Preencha o valor de todas as parcelas", "error");
                    const r = {
                        estoque_id: p.lojaProdutoEstoqueId ?? p.lojaProdutoEdit?.estoque_id,
                        nome: e,
                        descricao: p.lojaProdutoDesc ?? p.lojaProdutoEdit?.descricao ?? "",
                        marca: p.lojaProdutoMarca ?? p.lojaProdutoEdit?.marca ?? "",
                        valor: parseFloat(t),
                        imagem_url: p.lojaProdutoImagem ?? p.lojaProdutoEdit?.imagem_url ?? "",
                        parcelas_config: a.map(e => ({
                            parcelas: parseInt(e.parcelas) || 1,
                            valor_parcela: parseFloat(e.valor_parcela) || 0
                        })),
                        created_by: l.fullName
                    };
                    p.lojaProdutoEdit ? (await fetch(`${API_URL}/loja/produtos/${p.lojaProdutoEdit.id}`, {
                        method: "PUT",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            ...r,
                            status: p.lojaProdutoEdit.status
                        })
                    }), ja("‚úÖ Produto atualizado!", "success")) : (await fetch(`${API_URL}/loja/produtos`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(r)
                    }), ja("‚úÖ Produto adicionado!", "success")), x({
                        ...p,
                        lojaProdutoModal: !1,
                        lojaProdutoEdit: null,
                        lojaProdutoParcelas: null
                    }), Ha()
                },
                className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, p.lojaProdutoEdit ? "üíæ Salvar" : "‚ûï Adicionar")))))), "pedidos" === nt && React.createElement(React.Fragment, null, React.createElement("h2", {
                className: "text-xl font-bold text-gray-800 mb-6"
            }, "üõçÔ∏è Pedidos"), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-3 py-3 text-left"
            }, "Data"), React.createElement("th", {
                className: "px-3 py-3 text-left"
            }, "Profissional"), React.createElement("th", {
                className: "px-3 py-3 text-left"
            }, "Produto"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "Tam."), React.createElement("th", {
                className: "px-3 py-3 text-right"
            }, "Valor"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "Parcelas"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "Status"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "D√©bito Lan√ßado"), React.createElement("th", {
                className: "px-3 py-3 text-center"
            }, "A√ß√µes"))), React.createElement("tbody", null, 0 === et.length ? React.createElement("tr", null, React.createElement("td", {
                colSpan: "9",
                className: "text-center py-8 text-gray-500"
            }, "Nenhum pedido")) : et.map(e => React.createElement("tr", {
                key: e.id,
                className: "border-t hover:bg-gray-50"
            }, React.createElement("td", {
                className: "px-3 py-3 text-xs"
            }, new Date(e.created_at).toLocaleDateString("pt-BR")), React.createElement("td", {
                className: "px-3 py-3"
            }, React.createElement("p", {
                className: "font-semibold text-sm"
            }, e.user_name), React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "COD: ", e.user_cod)), React.createElement("td", {
                className: "px-3 py-3 text-sm"
            }, e.produto_nome), React.createElement("td", {
                className: "px-3 py-3 text-center font-bold"
            }, e.tamanho || "-"), React.createElement("td", {
                className: "px-3 py-3 text-right"
            }, React.createElement("p", {
                className: "font-bold"
            }, "R$ ", parseFloat(e.valor_final).toFixed(2).replace(".", ",")), e.parcelas > 1 && React.createElement("p", {
                className: "text-xs text-gray-500"
            }, e.parcelas, "x R$ ", parseFloat(e.valor_parcela).toFixed(2).replace(".", ","))), React.createElement("td", {
                className: "px-3 py-3 text-center text-xs"
            }, e.tipo_abatimento), React.createElement("td", {
                className: "px-3 py-3 text-center"
            }, React.createElement("span", {
                className: "px-2 py-1 rounded text-xs font-bold " + ("pendente" === e.status ? "bg-yellow-100 text-yellow-700" : "aprovado" === e.status ? "bg-green-100 text-green-700" : "rejeitado" === e.status ? "bg-red-100 text-red-700" : "bg-gray-100 text-gray-700")
            }, "pendente" === e.status ? "‚è≥" : "aprovado" === e.status ? "‚úÖ" : "‚ùå"), e.observacao && "rejeitado" === e.status && React.createElement("p", {
                className: "text-xs text-red-600 mt-1 max-w-[100px] truncate",
                title: e.observacao
            }, e.observacao)), React.createElement("td", {
                className: "px-3 py-3 text-center"
            }, "aprovado" === e.status && React.createElement("div", {
                className: "flex flex-col items-center"
            }, React.createElement("input", {
                type: "checkbox",
                checked: e.debito_lancado || !1,
                onChange: async t => {
                    await fetch(`${API_URL}/loja/pedidos/${e.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            debito_lancado: t.target.checked,
                            debito_lancado_em: t.target.checked ? (new Date).toISOString() : null,
                            debito_lancado_por: t.target.checked ? l.fullName : null
                        })
                    }), Wa(), ja(t.target.checked ? "‚úÖ D√©bito marcado!" : "D√©bito desmarcado", "success")
                },
                className: "w-5 h-5 accent-green-600"
            }), e.debito_lancado && e.debito_lancado_em && React.createElement("p", {
                className: "text-xs text-gray-500 mt-1"
            }, new Date(e.debito_lancado_em).toLocaleDateString("pt-BR"), React.createElement("br", null), new Date(e.debito_lancado_em).toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            }))), "aprovado" !== e.status && React.createElement("span", {
                className: "text-gray-400"
            }, "-")), React.createElement("td", {
                className: "px-3 py-3 text-center"
            }, React.createElement("div", {
                className: "flex gap-1 justify-center"
            }, "pendente" === e.status && React.createElement(React.Fragment, null, React.createElement("button", {
                onClick: async () => {
                    await fetch(`${API_URL}/loja/pedidos/${e.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            status: "aprovado",
                            admin_id: l.codProfissional,
                            admin_name: l.fullName
                        })
                    }), Wa(), ja("‚úÖ Pedido aprovado!", "success")
                },
                className: "px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",
                title: "Aprovar"
            }, "‚úÖ"), React.createElement("button", {
                onClick: async () => {
                    const t = prompt("Motivo da rejei√ß√£o:");
                    t && (await fetch(`${API_URL}/loja/pedidos/${e.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            status: "rejeitado",
                            admin_id: l.codProfissional,
                            admin_name: l.fullName,
                            observacao: t
                        })
                    }), Wa(), ja("‚ùå Pedido rejeitado", "success"))
                },
                className: "px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",
                title: "Rejeitar"
            }, "‚ùå")), React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaPedidoDeleteConfirm: e
                }),
                className: "px-2 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700",
                title: "Excluir"
            }, "üóëÔ∏è")))))))), p.lojaPedidoDeleteConfirm && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow-2xl p-6 max-w-md w-full"
            }, React.createElement("h3", {
                className: "text-xl font-bold text-red-600 mb-4"
            }, "‚ö†Ô∏è Excluir Pedido"), React.createElement("p", {
                className: "text-gray-700 mb-4"
            }, "Tem certeza que deseja excluir este pedido?"), React.createElement("div", {
                className: "bg-gray-50 rounded-lg p-4 mb-4"
            }, React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Profissional:"), " ", p.lojaPedidoDeleteConfirm.user_name), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Produto:"), " ", p.lojaPedidoDeleteConfirm.produto_nome), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Valor:"), " R$ ", parseFloat(p.lojaPedidoDeleteConfirm.valor_final).toFixed(2).replace(".", ",")), React.createElement("p", {
                className: "text-sm"
            }, React.createElement("strong", null, "Status:"), " ", p.lojaPedidoDeleteConfirm.status)), React.createElement("p", {
                className: "text-red-600 text-sm mb-4 font-semibold"
            }, "Esta a√ß√£o n√£o pode ser desfeita!"), React.createElement("div", {
                className: "flex gap-3"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaPedidoDeleteConfirm: null
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "Cancelar"), React.createElement("button", {
                onClick: async () => {
                    await fetch(`${API_URL}/loja/pedidos/${p.lojaPedidoDeleteConfirm.id}`, {
                        method: "DELETE"
                    }), x({
                        ...p,
                        lojaPedidoDeleteConfirm: null
                    }), Wa(), ja("üóëÔ∏è Pedido exclu√≠do!", "success")
                },
                className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700"
            }, "üóëÔ∏è Excluir"))))), "sugestoes" === nt && React.createElement(React.Fragment, null, React.createElement("div", {
                className: "flex justify-between items-center mb-6"
            }, React.createElement("div", null, React.createElement("h2", {
                className: "text-xl font-bold text-gray-800"
            }, "üí° Sugest√µes de Produtos"), React.createElement("p", {
                className: "text-sm text-gray-500"
            }, "Veja o que os profissionais gostariam de ter na loja")), React.createElement("div", {
                className: "flex gap-2 text-sm"
            }, React.createElement("span", {
                className: "px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full font-semibold"
            }, "‚è≥ ", ut.filter(e => "pendente" === e.status).length, " Pendentes"), React.createElement("span", {
                className: "px-3 py-1 bg-green-100 text-green-700 rounded-full font-semibold"
            }, "‚úÖ ", ut.filter(e => "respondido" === e.status).length, " Respondidas"))), React.createElement("div", {
                className: "space-y-4"
            }, 0 === ut.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Nenhuma sugest√£o recebida") : ut.map(e => React.createElement("div", {
                key: e.id,
                className: "border-2 rounded-xl p-4 " + ("pendente" === e.status ? "border-yellow-200 bg-yellow-50" : "respondido" === e.status ? "border-green-200 bg-green-50" : "border-red-200 bg-red-50")
            }, React.createElement("div", {
                className: "flex justify-between items-start gap-4"
            }, React.createElement("div", {
                className: "flex-1"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-2"
            }, React.createElement("span", {
                className: "font-bold text-gray-800"
            }, e.user_name), React.createElement("span", {
                className: "text-xs text-gray-500"
            }, "COD: ", e.user_cod), React.createElement("span", {
                className: "px-2 py-0.5 rounded-full text-xs font-bold " + ("pendente" === e.status ? "bg-yellow-200 text-yellow-800" : "respondido" === e.status ? "bg-green-200 text-green-800" : "bg-red-200 text-red-800")
            }, "pendente" === e.status ? "‚è≥ Pendente" : "respondido" === e.status ? "‚úÖ Respondido" : "‚ùå Recusado")), React.createElement("p", {
                className: "text-gray-700 bg-white p-3 rounded-lg border"
            }, e.sugestao), React.createElement("p", {
                className: "text-xs text-gray-500 mt-2"
            }, "Enviado em ", new Date(e.created_at).toLocaleDateString("pt-BR"), " √†s ", new Date(e.created_at).toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            })), e.resposta && React.createElement("div", {
                className: "mt-3 p-3 rounded-lg " + ("respondido" === e.status ? "bg-green-100" : "bg-red-100")
            }, React.createElement("p", {
                className: "text-xs font-semibold text-gray-600"
            }, "Resposta de ", e.respondido_por, ":"), React.createElement("p", {
                className: "text-sm text-gray-800 mt-1"
            }, e.resposta))), "pendente" === e.status && React.createElement("div", {
                className: "flex flex-col gap-2"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaSugestaoResponder: e,
                    lojaSugestaoResposta: ""
                }),
                className: "px-3 py-1.5 bg-green-600 text-white rounded-lg text-xs font-semibold hover:bg-green-700"
            }, "‚úÖ Responder"), React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaSugestaoRecusar: e,
                    lojaSugestaoResposta: ""
                }),
                className: "px-3 py-1.5 bg-red-600 text-white rounded-lg text-xs font-semibold hover:bg-red-700"
            }, "‚ùå Recusar"), React.createElement("button", {
                onClick: async () => {
                    confirm("Excluir esta sugest√£o?") && (await fetch(`${API_URL}/loja/sugestoes/${e.id}`, {
                        method: "DELETE"
                    }), Ya(), ja("üóëÔ∏è Sugest√£o exclu√≠da!", "success"))
                },
                className: "px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg text-xs font-semibold hover:bg-gray-300"
            }, "üóëÔ∏è")))))), p.lojaSugestaoResponder && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl max-w-md w-full"
            }, React.createElement("div", {
                className: "bg-green-600 p-4 rounded-t-2xl text-white"
            }, React.createElement("h2", {
                className: "text-xl font-bold"
            }, "‚úÖ Responder Sugest√£o")), React.createElement("div", {
                className: "p-6"
            }, React.createElement("div", {
                className: "bg-gray-50 p-3 rounded-lg mb-4"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, React.createElement("strong", null, p.lojaSugestaoResponder.user_name, ":")), React.createElement("p", {
                className: "text-gray-800"
            }, p.lojaSugestaoResponder.sugestao)), React.createElement("textarea", {
                value: p.lojaSugestaoResposta || "",
                onChange: e => x({
                    ...p,
                    lojaSugestaoResposta: e.target.value
                }),
                placeholder: "Escreva sua resposta... Ex: √ìtima sugest√£o! Vamos providenciar esse produto.",
                className: "w-full px-4 py-3 border rounded-xl h-24 resize-none"
            }), React.createElement("div", {
                className: "flex gap-3 mt-4"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaSugestaoResponder: null,
                    lojaSugestaoResposta: ""
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
            }, "Cancelar"), React.createElement("button", {
                onClick: async () => {
                    await fetch(`${API_URL}/loja/sugestoes/${p.lojaSugestaoResponder.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            status: "respondido",
                            resposta: p.lojaSugestaoResposta || "Obrigado pela sugest√£o!",
                            respondido_por: l.fullName
                        })
                    }), ja("‚úÖ Sugest√£o respondida!", "success"), x({
                        ...p,
                        lojaSugestaoResponder: null,
                        lojaSugestaoResposta: ""
                    }), Ya()
                },
                className: "flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700"
            }, "‚úÖ Enviar Resposta"))))), p.lojaSugestaoRecusar && React.createElement("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl max-w-md w-full"
            }, React.createElement("div", {
                className: "bg-red-600 p-4 rounded-t-2xl text-white"
            }, React.createElement("h2", {
                className: "text-xl font-bold"
            }, "‚ùå Recusar Sugest√£o")), React.createElement("div", {
                className: "p-6"
            }, React.createElement("div", {
                className: "bg-gray-50 p-3 rounded-lg mb-4"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, React.createElement("strong", null, p.lojaSugestaoRecusar.user_name, ":")), React.createElement("p", {
                className: "text-gray-800"
            }, p.lojaSugestaoRecusar.sugestao)), React.createElement("textarea", {
                value: p.lojaSugestaoResposta || "",
                onChange: e => x({
                    ...p,
                    lojaSugestaoResposta: e.target.value
                }),
                placeholder: "Motivo da recusa... Ex: Infelizmente n√£o conseguimos esse produto no momento.",
                className: "w-full px-4 py-3 border rounded-xl h-24 resize-none"
            }), React.createElement("div", {
                className: "flex gap-3 mt-4"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    lojaSugestaoRecusar: null,
                    lojaSugestaoResposta: ""
                }),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
            }, "Cancelar"), React.createElement("button", {
                onClick: async () => {
                    await fetch(`${API_URL}/loja/sugestoes/${p.lojaSugestaoRecusar.id}`, {
                        method: "PATCH",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            status: "recusado",
                            resposta: p.lojaSugestaoResposta || "N√£o foi poss√≠vel atender esta sugest√£o.",
                            respondido_por: l.fullName
                        })
                    }), ja("‚ùå Sugest√£o recusada", "success"), x({
                        ...p,
                        lojaSugestaoRecusar: null,
                        lojaSugestaoResposta: ""
                    }), Ya()
                },
                className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700"
            }, "‚ùå Confirmar Recusa"))))))))), "relatorios" === p.finTab && React.createElement(React.Fragment, null, (() => {
                const e = new Date,
                    t = e.getMonth(),
                    a = e.getFullYear(),
                    l = void 0 !== p.relMes ? parseInt(p.relMes) : t,
                    r = void 0 !== p.relAno ? parseInt(p.relAno) : a,
                    o = e => {
                        const t = new Date(e),
                            a = t.getDay(),
                            l = t.getHours() + t.getMinutes() / 60;
                        return 0 !== a && (6 === a ? l >= 9 && l < 12 : l >= 9 && l < 18)
                    },
                    c = q.filter(e => {
                        const t = new Date(e.created_at);
                        return t.getMonth() === l && t.getFullYear() === r
                    }),
                    s = c.filter(e => "aprovado" === e.status || "aprovado_gratuidade" === e.status),
                    n = c.filter(e => "aprovado" === e.status),
                    m = c.filter(e => "aprovado_gratuidade" === e.status),
                    i = 2025,
                    d = e => {
                        const t = new Date(e);
                        return t.getFullYear() > i || !(t.getFullYear() < i) && (t.getMonth() > 11 || !(t.getMonth() < 11) && t.getDate() >= 13)
                    },
                    u = s.filter(e => !(!e.updated_at || !e.created_at) && (!!o(e.created_at) && !!d(e.created_at))).map(e => (new Date(e.updated_at) - new Date(e.created_at)) / 6e4).filter(e => e > 0 && e <= 1440),
                    g = u.length > 0 ? Math.round(u.reduce((e, t) => e + t, 0) / u.length) : 0,
                    b = s.filter(e => {
                        if (!e.updated_at || !e.created_at || !o(e.created_at)) return !1;
                        if (!d(e.created_at)) return !1;
                        const t = (new Date(e.updated_at) - new Date(e.created_at)) / 6e4;
                        return t > 60 && t <= 1440
                    }),
                    R = [],
                    E = new Date(r, l + 1, 0).getDate();
                for (let e = 1; e <= E; e++) {
                    if (r === i && 11 === l && e < 13) {
                        R.push({
                            dia: e,
                            tempoMedio: 0,
                            qtd: 0
                        });
                        continue
                    }
                    const t = s.filter(t => new Date(t.created_at).getDate() === e && o(t.created_at)),
                        a = t.filter(e => e.updated_at).map(e => (new Date(e.updated_at) - new Date(e.created_at)) / 6e4).filter(e => e > 0 && e <= 1440),
                        c = a.length > 0 ? Math.round(a.reduce((e, t) => e + t, 0) / a.length) : 0;
                    R.push({
                        dia: e,
                        tempoMedio: c,
                        qtd: t.length
                    })
                }
                const h = Math.max(...R.map(e => e.tempoMedio), 1),
                    f = {};
                n.forEach(e => {
                    const t = e.user_cod + "|" + e.user_name;
                    f[t] || (f[t] = {
                        cod: e.user_cod,
                        nome: e.user_name,
                        qtd: 0,
                        valor: 0,
                        lucro: 0
                    }), f[t].qtd++, f[t].valor += parseFloat(e.final_amount || 0), f[t].lucro += parseFloat(e.requested_amount || 0) - parseFloat(e.final_amount || 0)
                });
                const N = Object.values(f).sort((e, t) => t.qtd - e.qtd).slice(0, 10),
                    y = {};
                m.forEach(e => {
                    const t = e.user_cod + "|" + e.user_name;
                    y[t] || (y[t] = {
                        cod: e.user_cod,
                        nome: e.user_name,
                        qtd: 0,
                        valor: 0,
                        deixouArrecadar: 0
                    }), y[t].qtd++, y[t].valor += parseFloat(e.final_amount || 0), y[t].deixouArrecadar += .045 * parseFloat(e.requested_amount || 0)
                });
                const v = Object.values(y).sort((e, t) => t.qtd - e.qtd).slice(0, 10),
                    w = ["Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
                    _ = w[l],
                    j = c.filter(e => "rejeitado" === e.status),
                    C = c.filter(e => "aguardando_aprovacao" === e.status),
                    A = c.reduce((e, t) => e + parseFloat(t.requested_amount || 0), 0),
                    S = s.reduce((e, t) => e + parseFloat(t.final_amount || 0), 0),
                    k = n.reduce((e, t) => e + (parseFloat(t.requested_amount || 0) - parseFloat(t.final_amount || 0)), 0),
                    P = m.reduce((e, t) => e + .045 * parseFloat(t.requested_amount || 0), 0),
                    T = [{
                        nome: "Semana 1",
                        dias: [1, 7]
                    }, {
                        nome: "Semana 2",
                        dias: [8, 14]
                    }, {
                        nome: "Semana 3",
                        dias: [15, 21]
                    }, {
                        nome: "Semana 4",
                        dias: [22, 31]
                    }].map(e => {
                        const t = s.filter(t => {
                            const a = new Date(t.created_at).getDate();
                            return a >= e.dias[0] && a <= e.dias[1]
                        });
                        return {
                            nome: e.nome,
                            valor: t.reduce((e, t) => e + parseFloat(t.final_amount || 0), 0),
                            qtd: t.length
                        }
                    }),
                    D = Math.max(...T.map(e => e.valor), 1),
                    L = 0 === l ? 11 : l - 1,
                    I = 0 === l ? r - 1 : r,
                    F = q.filter(e => {
                        const t = new Date(e.created_at);
                        return t.getMonth() === L && t.getFullYear() === I && ("aprovado" === e.status || "aprovado_gratuidade" === e.status)
                    }).reduce((e, t) => e + parseFloat(t.final_amount || 0), 0),
                    $ = F > 0 ? (S - F) / F * 100 : 0;
                return React.createElement(React.Fragment, null, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 mb-6"
                }, React.createElement("div", {
                    className: "flex flex-wrap gap-4 items-center justify-between"
                }, React.createElement("div", {
                    className: "flex gap-4 items-center"
                }, React.createElement("span", {
                    className: "font-semibold text-gray-700"
                }, "üìÖ Per√≠odo:"), React.createElement("select", {
                    value: l,
                    onChange: e => x({
                        ...p,
                        relMes: e.target.value
                    }),
                    className: "px-4 py-2 border rounded-lg"
                }, w.map((e, t) => React.createElement("option", {
                    key: t,
                    value: t
                }, e))), React.createElement("select", {
                    value: r,
                    onChange: e => x({
                        ...p,
                        relAno: e.target.value
                    }),
                    className: "px-4 py-2 border rounded-lg"
                }, [2024, 2025, 2026].map(e => React.createElement("option", {
                    key: e,
                    value: e
                }, e)))), React.createElement("button", {
                    onClick: () => {
                        const e = `\n                        <html>\n                        <head>\n                          <title>Relat√≥rio ${_} ${r}</title>\n                          <style>\n                            body { font-family: Arial, sans-serif; padding: 40px; font-size: 12px; }\n                            h1 { color: #166534; border-bottom: 3px solid #166534; padding-bottom: 10px; }\n                            h2 { color: #374151; margin-top: 25px; }\n                            .cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0; }\n                            .card { background: #f3f4f6; padding: 15px; border-radius: 8px; text-align: center; }\n                            .card-value { font-size: 20px; font-weight: bold; color: #166534; }\n                            .card-label { font-size: 11px; color: #6b7280; }\n                            table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 11px; }\n                            th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }\n                            th { background: #166534; color: white; }\n                            .footer { margin-top: 30px; text-align: center; color: #9ca3af; font-size: 10px; }\n                          </style>\n                        </head>\n                        <body>\n                          <h1>üìä Relat√≥rio Financeiro - ${_} ${r}</h1>\n                          <p><strong>Gerado em:</strong> ${(new Date).toLocaleString("pt-BR")}</p>\n                          <div class="cards">\n                            <div class="card"><div class="card-value">R$ ${A.toFixed(2)}</div><div class="card-label">Total Solicitado</div></div>\n                            <div class="card"><div class="card-value">R$ ${S.toFixed(2)}</div><div class="card-label">Total Pago</div></div>\n                            <div class="card"><div class="card-value" style="color:#059669">R$ ${k.toFixed(2)}</div><div class="card-label">Lucro (Taxas)</div></div>\n                            <div class="card"><div class="card-value" style="color:#dc2626">R$ ${P.toFixed(2)}</div><div class="card-label">Deixou Arrecadar</div></div>\n                          </div>\n                          <h2>üìã Detalhamento</h2>\n                          <table>\n                            <thead><tr><th>Data</th><th>Profissional</th><th>C√≥digo</th><th>Solicitado</th><th>Pago</th><th>Status</th></tr></thead>\n                            <tbody>\n                              ${c.slice(0,100).map(e=>`\n                                <tr>\n                                  <td>${new Date(e.created_at).toLocaleDateString("pt-BR")}</td>\n                                  <td>${e.user_name||"-"}</td>\n                                  <td>${e.user_cod}</td>\n                                  <td>R$ ${parseFloat(e.requested_amount).toFixed(2)}</td>\n                                  <td>R$ ${parseFloat(e.final_amount).toFixed(2)}</td>\n                                  <td>${"aprovado"===e.status?"‚úÖ":"aprovado_gratuidade"===e.status?"üéÅ":"rejeitado"===e.status?"‚ùå":"‚è≥"}</td>\n                                </tr>\n                              `).join("")}\n                            </tbody>\n                          </table>\n                          <div class="footer"><p>Central do Entregador Tutts</p></div>\n                        </body>\n                        </html>\n                      `,
                            t = window.open("", "_blank");
                        t.document.write(e), t.document.close(), t.print()
                    },
                    className: "px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700"
                }, "üìÑ Gerar PDF"))), React.createElement("div", {
                    className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
                }, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Total Solicitado"), React.createElement("p", {
                    className: "text-2xl font-bold text-blue-600"
                }, er(A))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "Total Pago"), React.createElement("p", {
                    className: "text-2xl font-bold text-green-600"
                }, er(S))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "üí∞ Lucro (Taxas 4,5%)"), React.createElement("p", {
                    className: "text-2xl font-bold text-violet-600"
                }, er(k))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("p", {
                    className: "text-sm text-gray-600"
                }, "‚ùå Deixou Arrecadar"), React.createElement("p", {
                    className: "text-2xl font-bold text-red-600"
                }, er(P)))), React.createElement("div", {
                    className: "grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"
                }, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-3 text-center"
                }, React.createElement("p", {
                    className: "text-2xl font-bold text-purple-600"
                }, c.length), React.createElement("p", {
                    className: "text-xs text-gray-600"
                }, "Total")), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-3 text-center"
                }, React.createElement("p", {
                    className: "text-2xl font-bold text-green-600"
                }, n.length), React.createElement("p", {
                    className: "text-xs text-gray-600"
                }, "Aprovados")), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-3 text-center"
                }, React.createElement("p", {
                    className: "text-2xl font-bold text-blue-600"
                }, m.length), React.createElement("p", {
                    className: "text-xs text-gray-600"
                }, "Com Gratuidade")), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-3 text-center"
                }, React.createElement("p", {
                    className: "text-2xl font-bold text-red-600"
                }, j.length), React.createElement("p", {
                    className: "text-xs text-gray-600"
                }, "Rejeitados")), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-3 text-center"
                }, React.createElement("p", {
                    className: "text-2xl font-bold text-yellow-600"
                }, C.length), React.createElement("p", {
                    className: "text-xs text-gray-600"
                }, "Pendentes"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 mb-6"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 mb-2"
                }, "üìä Comparativo com M√™s Anterior"), React.createElement("div", {
                    className: "flex items-center gap-4 flex-wrap"
                }, React.createElement("span", null, "M√™s anterior: ", React.createElement("strong", null, er(F))), React.createElement("span", null, "‚Üí"), React.createElement("span", null, "M√™s atual: ", React.createElement("strong", null, er(S))), React.createElement("span", {
                    className: "px-3 py-1 rounded-full text-sm font-bold " + ($ >= 0 ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700")
                }, $ >= 0 ? "‚Üë" : "‚Üì", " ", Math.abs($).toFixed(1), "%"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-4 mb-6"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 mb-4"
                }, "üìà Evolu√ß√£o por Semana"), React.createElement("div", {
                    className: "flex items-end justify-around gap-4",
                    style: {
                        height: "180px"
                    }
                }, T.map((e, t) => React.createElement("div", {
                    key: t,
                    className: "flex flex-col items-center"
                }, React.createElement("span", {
                    className: "text-xs font-semibold text-green-700 mb-1"
                }, er(e.valor)), React.createElement("div", {
                    className: "bg-gradient-to-t from-green-600 to-green-400 rounded-t w-16",
                    style: {
                        height: `${Math.max(e.valor/D*140,10)}px`
                    }
                }), React.createElement("span", {
                    className: "text-xs font-semibold mt-2"
                }, e.nome), React.createElement("span", {
                    className: "text-xs text-gray-500"
                }, e.qtd, " saque(s)"))))), React.createElement("div", {
                    className: "border-t-4 border-purple-500 pt-6 mt-6"
                }, React.createElement("h2", {
                    className: "text-xl font-bold text-purple-800 mb-4"
                }, "üìä M√©tricas de Atendimento")), React.createElement("div", {
                    className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
                }, React.createElement("div", {
                    className: "bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow p-4 text-white"
                }, React.createElement("p", {
                    className: "text-blue-100 text-sm"
                }, "‚è±Ô∏è Tempo M√©dio Geral"), React.createElement("p", {
                    className: "text-3xl font-bold"
                }, g < 60 ? `${g}min` : `${Math.floor(g/60)}h${g%60}m`), React.createElement("p", {
                    className: "text-xs text-blue-200"
                }, "de atendimento")), React.createElement("div", {
                    className: "bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow p-4 text-white"
                }, React.createElement("p", {
                    className: "text-green-100 text-sm"
                }, "‚úÖ Total Aprovados"), React.createElement("p", {
                    className: "text-3xl font-bold"
                }, s.length), React.createElement("p", {
                    className: "text-xs text-green-200"
                }, "saques no per√≠odo")), React.createElement("div", {
                    className: "bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow p-4 text-white"
                }, React.createElement("p", {
                    className: "text-red-100 text-sm"
                }, "üö® Acima de 1h"), React.createElement("p", {
                    className: "text-3xl font-bold"
                }, b.length), React.createElement("p", {
                    className: "text-xs text-red-200"
                }, "saques demorados")), React.createElement("div", {
                    className: "bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow p-4 text-white"
                }, React.createElement("p", {
                    className: "text-purple-100 text-sm"
                }, "üéÅ Com Gratuidade"), React.createElement("p", {
                    className: "text-3xl font-bold"
                }, m.length), React.createElement("p", {
                    className: "text-xs text-purple-200"
                }, "saques sem taxa"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-6 mb-6"
                }, React.createElement("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4"
                }, "üìä Tempo M√©dio de Atendimento por Dia"), React.createElement("div", {
                    className: "overflow-x-auto"
                }, React.createElement("div", {
                    className: "flex items-end gap-1 min-w-max",
                    style: {
                        height: "200px"
                    }
                }, R.map((e, t) => React.createElement("div", {
                    key: t,
                    className: "flex flex-col items-center",
                    style: {
                        width: "28px"
                    }
                }, React.createElement("div", {
                    className: "text-xs text-gray-500 mb-1"
                }, e.tempoMedio > 0 ? `${e.tempoMedio}m` : ""), React.createElement("div", {
                    className: "w-5 rounded-t " + (e.tempoMedio > 60 ? "bg-red-500" : e.tempoMedio > 30 ? "bg-yellow-500" : "bg-green-500"),
                    style: {
                        height: `${Math.max(e.tempoMedio/h*150,e.tempoMedio>0?10:0)}px`
                    },
                    title: `Dia ${e.dia}: ${e.tempoMedio}min (${e.qtd} saques)`
                }), React.createElement("div", {
                    className: "text-xs text-gray-600 mt-1"
                }, e.dia))))), React.createElement("div", {
                    className: "flex gap-4 mt-4 text-xs"
                }, React.createElement("span", {
                    className: "flex items-center gap-1"
                }, React.createElement("span", {
                    className: "w-3 h-3 bg-green-500 rounded"
                }), " At√© 30min"), React.createElement("span", {
                    className: "flex items-center gap-1"
                }, React.createElement("span", {
                    className: "w-3 h-3 bg-yellow-500 rounded"
                }), " 30-60min"), React.createElement("span", {
                    className: "flex items-center gap-1"
                }, React.createElement("span", {
                    className: "w-3 h-3 bg-red-500 rounded"
                }), " Acima de 60min"))), React.createElement("div", {
                    className: "grid md:grid-cols-2 gap-6 mb-6"
                }, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-6"
                }, React.createElement("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4"
                }, "üèÜ Top 10 - Mais Solicitam Saques"), 0 === N.length ? React.createElement("p", {
                    className: "text-gray-500 text-center py-4"
                }, "Nenhum dado no per√≠odo") : React.createElement("div", {
                    className: "space-y-2"
                }, N.map((e, t) => React.createElement("div", {
                    key: t,
                    className: "flex items-center justify-between p-3 rounded-lg " + (0 === t ? "bg-yellow-50 border border-yellow-200" : 1 === t ? "bg-gray-100" : 2 === t ? "bg-orange-50" : "bg-gray-50")
                }, React.createElement("div", {
                    className: "flex items-center gap-3"
                }, React.createElement("span", {
                    className: "text-xl " + (0 === t ? "ü•á" : 1 === t ? "ü•à" : 2 === t ? "ü•â" : "")
                }, t >= 3 ? `${t+1}¬∫` : ""), React.createElement("div", null, React.createElement("p", {
                    className: "font-semibold text-gray-800"
                }, e.nome || e.cod), React.createElement("p", {
                    className: "text-xs text-gray-500"
                }, "C√≥d: ", e.cod))), React.createElement("div", {
                    className: "text-right"
                }, React.createElement("p", {
                    className: "font-bold text-green-600"
                }, er(e.valor)), React.createElement("p", {
                    className: "text-xs text-gray-600"
                }, e.qtd, " saques"), React.createElement("p", {
                    className: "text-xs text-blue-600"
                }, "Lucro: ", er(e.lucro))))))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-6"
                }, React.createElement("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4"
                }, "üéÅ Top 10 - Saques com Gratuidade"), 0 === v.length ? React.createElement("p", {
                    className: "text-gray-500 text-center py-4"
                }, "Nenhum dado no per√≠odo") : React.createElement("div", {
                    className: "space-y-2"
                }, v.map((e, t) => React.createElement("div", {
                    key: t,
                    className: "flex items-center justify-between p-3 rounded-lg " + (0 === t ? "bg-purple-50 border border-purple-200" : "bg-gray-50")
                }, React.createElement("div", {
                    className: "flex items-center gap-3"
                }, React.createElement("span", {
                    className: "text-xl " + (0 === t ? "ü•á" : 1 === t ? "ü•à" : 2 === t ? "ü•â" : "")
                }, t >= 3 ? `${t+1}¬∫` : ""), React.createElement("div", null, React.createElement("p", {
                    className: "font-semibold text-gray-800"
                }, e.nome || e.cod), React.createElement("p", {
                    className: "text-xs text-gray-500"
                }, "C√≥d: ", e.cod))), React.createElement("div", {
                    className: "text-right"
                }, React.createElement("p", {
                    className: "font-bold text-purple-600"
                }, er(e.valor)), React.createElement("p", {
                    className: "text-xs text-gray-600"
                }, e.qtd, " saques"), React.createElement("p", {
                    className: "text-xs text-red-600"
                }, "Deixou: ", er(e.deixouArrecadar)))))))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-6"
                }, React.createElement("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4"
                }, "üö® Saques Realizados Acima de 1 Hora (", b.length, ")"), 0 === b.length ? React.createElement("p", {
                    className: "text-gray-500 text-center py-4"
                }, "‚úÖ Nenhum saque acima de 1 hora no per√≠odo!") : React.createElement("div", {
                    className: "overflow-x-auto"
                }, React.createElement("table", {
                    className: "w-full text-sm"
                }, React.createElement("thead", {
                    className: "bg-red-50"
                }, React.createElement("tr", null, React.createElement("th", {
                    className: "px-3 py-2 text-left"
                }, "Profissional"), React.createElement("th", {
                    className: "px-3 py-2 text-left"
                }, "Data"), React.createElement("th", {
                    className: "px-3 py-2 text-right"
                }, "Valor"), React.createElement("th", {
                    className: "px-3 py-2 text-right"
                }, "Tempo"))), React.createElement("tbody", null, b.slice(0, 20).map((e, t) => {
                    const a = Math.round((new Date(e.updated_at) - new Date(e.created_at)) / 6e4);
                    return React.createElement("tr", {
                        key: t,
                        className: "border-b hover:bg-red-50"
                    }, React.createElement("td", {
                        className: "px-3 py-2"
                    }, React.createElement("p", {
                        className: "font-semibold"
                    }, e.user_name), React.createElement("p", {
                        className: "text-xs text-gray-500"
                    }, e.user_cod)), React.createElement("td", {
                        className: "px-3 py-2"
                    }, new Date(e.created_at).toLocaleDateString("pt-BR")), React.createElement("td", {
                        className: "px-3 py-2 text-right"
                    }, er(e.final_amount)), React.createElement("td", {
                        className: "px-3 py-2 text-right"
                    }, React.createElement("span", {
                        className: "px-2 py-1 bg-red-100 text-red-700 rounded font-semibold"
                    }, a < 60 ? `${a}min` : `${Math.floor(a/60)}h${a%60}m`)))
                }))), b.length > 20 && React.createElement("p", {
                    className: "text-center text-gray-500 text-sm mt-2"
                }, "Mostrando 20 de ", b.length, " registros"))))
            })()), "horarios" === p.finTab && React.createElement(React.Fragment, null, Me.loading ? React.createElement("div", {
                className: "flex items-center justify-center py-12"
            }, React.createElement("div", {
                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"
            }), React.createElement("span", {
                className: "ml-3"
            }, "Carregando...")) : React.createElement("div", {
                className: "space-y-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "üïê Hor√°rios de Atendimento"), React.createElement("p", {
                className: "text-sm text-gray-600 mb-4"
            }, "Configure os hor√°rios de funcionamento para cada dia da semana."), React.createElement("div", {
                className: "space-y-2"
            }, Me.horarios.map(e => React.createElement("div", {
                key: e.id,
                className: "flex items-center gap-3 p-3 bg-gray-50 rounded-lg"
            }, React.createElement("div", {
                className: "w-32 font-semibold text-sm"
            }, bl[e.dia_semana]), React.createElement("label", {
                className: "flex items-center gap-2"
            }, React.createElement("input", {
                type: "checkbox",
                checked: e.ativo,
                onChange: t => Rl(e.id, {
                    ...e,
                    ativo: t.target.checked
                }),
                className: "w-4 h-4"
            }), React.createElement("span", {
                className: "text-sm"
            }, "Aberto")), e.ativo && React.createElement(React.Fragment, null, React.createElement("input", {
                type: "time",
                value: e.hora_inicio || "09:00",
                onChange: t => Rl(e.id, {
                    ...e,
                    hora_inicio: t.target.value
                }),
                className: "px-2 py-1 border rounded text-sm"
            }), React.createElement("span", {
                className: "text-gray-500"
            }, "√†s"), React.createElement("input", {
                type: "time",
                value: e.hora_fim || "18:00",
                onChange: t => Rl(e.id, {
                    ...e,
                    hora_fim: t.target.value
                }),
                className: "px-2 py-1 border rounded text-sm"
            })), !e.ativo && React.createElement("span", {
                className: "text-red-500 text-sm font-semibold"
            }, "FECHADO"))))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "üìÖ Hor√°rios Especiais (Feriados, Datas espec√≠ficas)"), React.createElement("div", {
                className: "bg-blue-50 p-4 rounded-lg mb-4"
            }, React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-5 gap-3"
            }, React.createElement("input", {
                type: "date",
                value: p.novoEspData || "",
                onChange: e => x(t => ({
                    ...t,
                    novoEspData: e.target.value
                })),
                className: "px-3 py-2 border rounded text-sm"
            }), React.createElement("input", {
                type: "text",
                placeholder: "Descri√ß√£o (ex: Feriado)",
                value: p.novoEspDesc || "",
                onChange: e => x(t => ({
                    ...t,
                    novoEspDesc: e.target.value
                })),
                className: "px-3 py-2 border rounded text-sm"
            }), React.createElement("label", {
                className: "flex items-center gap-2"
            }, React.createElement("input", {
                type: "checkbox",
                checked: p.novoEspFechado || !1,
                onChange: e => x(t => ({
                    ...t,
                    novoEspFechado: e.target.checked
                })),
                className: "w-4 h-4"
            }), React.createElement("span", {
                className: "text-sm"
            }, "Fechado")), !p.novoEspFechado && React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("input", {
                type: "time",
                value: p.novoEspInicio || "09:00",
                onChange: e => x(t => ({
                    ...t,
                    novoEspInicio: e.target.value
                })),
                className: "px-2 py-1 border rounded text-sm w-24"
            }), React.createElement("span", null, "√†s"), React.createElement("input", {
                type: "time",
                value: p.novoEspFim || "18:00",
                onChange: e => x(t => ({
                    ...t,
                    novoEspFim: e.target.value
                })),
                className: "px-2 py-1 border rounded text-sm w-24"
            })), React.createElement("button", {
                onClick: El,
                className: "px-4 py-2 bg-blue-600 text-white rounded font-semibold text-sm hover:bg-blue-700"
            }, "+ Adicionar"))), 0 === Me.especiais.length ? React.createElement("p", {
                className: "text-gray-500 text-sm"
            }, "Nenhum hor√°rio especial programado.") : React.createElement("div", {
                className: "space-y-2"
            }, Me.especiais.map(e => {
                let t = "Data inv√°lida";
                try {
                    console.log("esp.data original:", e.data, typeof e.data);
                    let a = e.data;
                    if (a && "object" == typeof a && (a = a.toISOString ? a.toISOString() : String(a)), a) {
                        const e = String(a).substring(0, 10).split("-");
                        3 === e.length && 4 === e[0].length && (t = `${e[2]}/${e[1]}/${e[0]}`)
                    }
                } catch (t) {
                    console.error("Erro ao formatar data:", t, e.data)
                }
                return React.createElement("div", {
                    key: e.id,
                    className: "flex items-center justify-between p-3 bg-gray-50 rounded-lg"
                }, React.createElement("div", {
                    className: "flex items-center gap-4"
                }, React.createElement("span", {
                    className: "font-mono font-bold text-purple-600"
                }, t), React.createElement("span", {
                    className: "text-sm text-gray-700"
                }, e.descricao), e.fechado ? React.createElement("span", {
                    className: "px-2 py-0.5 bg-red-500 text-white text-xs rounded font-bold"
                }, "FECHADO") : React.createElement("span", {
                    className: "text-sm text-green-600 font-semibold"
                }, e.hora_inicio, " √†s ", e.hora_fim)), React.createElement("button", {
                    onClick: () => (async e => {
                        if (confirm("Remover este hor√°rio especial?")) try {
                            await fetch(`${API_URL}/horarios/especiais/${e}`, {
                                method: "DELETE"
                            }), ja("‚úÖ Removido!", "success");
                            const t = await fetch(`${API_URL}/horarios/especiais`),
                                a = await t.json();
                            Oe(e => ({
                                ...e,
                                especiais: a
                            }))
                        } catch (e) {
                            ja("Erro", "error")
                        }
                    })(e.id),
                    className: "px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600"
                }, "üóëÔ∏è Remover"))
            }))))), "avisos" === p.finTab && React.createElement(React.Fragment, null, qe.loading ? React.createElement("div", {
                className: "flex items-center justify-center py-12"
            }, React.createElement("div", {
                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"
            }), React.createElement("span", {
                className: "ml-3"
            }, "Carregando...")) : React.createElement("div", {
                className: "space-y-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "üì¢ Criar Novo Aviso"), React.createElement("p", {
                className: "text-sm text-gray-600 mb-4"
            }, "Os avisos criados aqui ser√£o exibidos para os usu√°rios na tela de Saque Emergencial."), React.createElement("div", {
                className: "bg-yellow-50 p-4 rounded-lg"
            }, React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"
            }, React.createElement("input", {
                type: "text",
                placeholder: "T√≠tulo do aviso",
                value: p.novoAvisoTitulo || "",
                onChange: e => x(t => ({
                    ...t,
                    novoAvisoTitulo: e.target.value
                })),
                className: "px-3 py-2 border rounded text-sm"
            }), React.createElement("select", {
                value: p.novoAvisoTipo || "info",
                onChange: e => x(t => ({
                    ...t,
                    novoAvisoTipo: e.target.value
                })),
                className: "px-3 py-2 border rounded text-sm"
            }, React.createElement("option", {
                value: "info"
            }, "‚ÑπÔ∏è Informativo (Azul)"), React.createElement("option", {
                value: "warning"
            }, "‚ö†Ô∏è Aten√ß√£o (Amarelo)"), React.createElement("option", {
                value: "error"
            }, "üö® Urgente (Vermelho)"), React.createElement("option", {
                value: "success"
            }, "‚úÖ Positivo (Verde)"))), React.createElement("textarea", {
                placeholder: "Mensagem do aviso...",
                value: p.novoAvisoMensagem || "",
                onChange: e => x(t => ({
                    ...t,
                    novoAvisoMensagem: e.target.value
                })),
                className: "w-full px-3 py-2 border rounded text-sm mb-3",
                rows: 3
            }), React.createElement("div", {
                className: "flex items-center justify-between flex-wrap gap-3"
            }, React.createElement("label", {
                className: "flex items-center gap-2"
            }, React.createElement("input", {
                type: "checkbox",
                checked: p.novoAvisoExibirFora || !1,
                onChange: e => x(t => ({
                    ...t,
                    novoAvisoExibirFora: e.target.checked
                })),
                className: "w-4 h-4"
            }), React.createElement("span", {
                className: "text-sm"
            }, "Exibir apenas fora do hor√°rio de atendimento")), React.createElement("button", {
                onClick: hl,
                className: "px-6 py-2 bg-yellow-500 text-white rounded-lg font-semibold text-sm hover:bg-yellow-600"
            }, "+ Criar Aviso")))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "‚úÖ Avisos Ativos (", qe.avisos.filter(e => e.ativo).length, ")"), 0 === qe.avisos.filter(e => e.ativo).length ? React.createElement("div", {
                className: "text-center py-8 text-gray-500"
            }, React.createElement("p", {
                className: "text-4xl mb-2"
            }, "üì≠"), React.createElement("p", null, "Nenhum aviso ativo no momento.")) : React.createElement("div", {
                className: "space-y-3"
            }, qe.avisos.filter(e => e.ativo).map(e => React.createElement("div", {
                key: e.id,
                className: "p-4 rounded-lg border-l-4 " + ("error" === e.tipo ? "bg-red-50 border-red-500" : "warning" === e.tipo ? "bg-yellow-50 border-yellow-500" : "success" === e.tipo ? "bg-green-50 border-green-500" : "bg-blue-50 border-blue-500")
            }, React.createElement("div", {
                className: "flex items-start justify-between gap-4"
            }, React.createElement("div", {
                className: "flex-1"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-2"
            }, React.createElement("span", {
                className: "text-lg"
            }, "error" === e.tipo ? "üö®" : "warning" === e.tipo ? "‚ö†Ô∏è" : "success" === e.tipo ? "‚úÖ" : "‚ÑπÔ∏è"), React.createElement("span", {
                className: "font-bold"
            }, e.titulo), e.exibir_fora_horario && React.createElement("span", {
                className: "px-2 py-0.5 bg-orange-200 text-orange-700 text-[10px] rounded-full font-semibold"
            }, "üïê S√≥ fora do hor√°rio")), React.createElement("p", {
                className: "text-sm text-gray-700"
            }, e.mensagem), React.createElement("p", {
                className: "text-xs text-gray-400 mt-2"
            }, "Criado em: ", new Date(e.created_at).toLocaleString("pt-BR"))), React.createElement("div", {
                className: "flex flex-col gap-2"
            }, React.createElement("button", {
                onClick: () => fl(e),
                className: "px-3 py-1.5 bg-gray-500 text-white rounded text-xs font-bold hover:bg-gray-600"
            }, "‚è∏Ô∏è Desativar"), React.createElement("button", {
                onClick: () => Nl(e.id),
                className: "px-3 py-1.5 bg-red-500 text-white rounded text-xs font-bold hover:bg-red-600"
            }, "üóëÔ∏è Excluir"))))))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "üìú Hist√≥rico de Avisos (", qe.avisos.filter(e => !e.ativo).length, ")"), 0 === qe.avisos.filter(e => !e.ativo).length ? React.createElement("div", {
                className: "text-center py-6 text-gray-400"
            }, React.createElement("p", {
                className: "text-sm"
            }, "Nenhum aviso no hist√≥rico.")) : React.createElement("div", {
                className: "space-y-2"
            }, qe.avisos.filter(e => !e.ativo).map(e => React.createElement("div", {
                key: e.id,
                className: "p-3 rounded-lg bg-gray-100 border border-gray-200 opacity-70"
            }, React.createElement("div", {
                className: "flex items-start justify-between gap-4"
            }, React.createElement("div", {
                className: "flex-1"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-1"
            }, React.createElement("span", {
                className: "text-sm"
            }, "error" === e.tipo ? "üö®" : "warning" === e.tipo ? "‚ö†Ô∏è" : "success" === e.tipo ? "‚úÖ" : "‚ÑπÔ∏è"), React.createElement("span", {
                className: "font-semibold text-sm text-gray-600"
            }, e.titulo), React.createElement("span", {
                className: "px-1.5 py-0.5 bg-gray-400 text-white text-[10px] rounded"
            }, "INATIVO")), React.createElement("p", {
                className: "text-xs text-gray-500"
            }, e.mensagem), React.createElement("p", {
                className: "text-[10px] text-gray-400 mt-1"
            }, "Criado: ", new Date(e.created_at).toLocaleString("pt-BR"))), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("button", {
                onClick: () => fl(e),
                className: "px-2 py-1 bg-green-500 text-white rounded text-xs font-bold hover:bg-green-600"
            }, "‚ñ∂Ô∏è Ativar"), React.createElement("button", {
                onClick: () => Nl(e.id),
                className: "px-2 py-1 bg-red-500 text-white rounded text-xs font-bold hover:bg-red-600"
            }, "üóëÔ∏è"))))))))), "backup" === p.finTab && React.createElement(React.Fragment, null, (() => {
                const e = (e, t) => {
                        const a = JSON.stringify(e, null, 2),
                            l = new Blob([a], {
                                type: "application/json"
                            }),
                            r = URL.createObjectURL(l),
                            o = document.createElement("a");
                        o.href = r, o.download = t, o.click(), URL.revokeObjectURL(r), ja(`‚úÖ ${t} exportado com sucesso!`, "success")
                    },
                    t = (e, t, a) => {
                        const l = [t.map(e => e.label).join(";"), ...e.map(e => t.map(t => {
                                let a = e[t.key] || "";
                                return "string" == typeof a && a.includes(";") && (a = `"${a}"`), a
                            }).join(";"))].join("\n"),
                            r = new Blob(["\ufeff" + l], {
                                type: "text/csv;charset=utf-8"
                            }),
                            o = URL.createObjectURL(r),
                            c = document.createElement("a");
                        c.href = o, c.download = a, c.click(), URL.revokeObjectURL(o), ja(`‚úÖ ${a} exportado com sucesso!`, "success")
                    },
                    a = (new Date).toISOString().split("T")[0],
                    l = [{
                        key: "id",
                        label: "ID"
                    }, {
                        key: "user_cod",
                        label: "C√≥digo"
                    }, {
                        key: "user_name",
                        label: "Nome"
                    }, {
                        key: "cpf",
                        label: "CPF"
                    }, {
                        key: "pix_key",
                        label: "Chave PIX"
                    }, {
                        key: "requested_amount",
                        label: "Valor Solicitado"
                    }, {
                        key: "final_amount",
                        label: "Valor Final"
                    }, {
                        key: "status",
                        label: "Status"
                    }, {
                        key: "reject_reason",
                        label: "Motivo Rejei√ß√£o"
                    }, {
                        key: "admin_name",
                        label: "Admin"
                    }, {
                        key: "created_at",
                        label: "Data Cria√ß√£o"
                    }, {
                        key: "updated_at",
                        label: "Data Atualiza√ß√£o"
                    }],
                    r = [{
                        key: "id",
                        label: "ID"
                    }, {
                        key: "codProfissional",
                        label: "C√≥digo"
                    }, {
                        key: "fullName",
                        label: "Nome"
                    }, {
                        key: "role",
                        label: "Tipo"
                    }, {
                        key: "createdAt",
                        label: "Data Cadastro"
                    }],
                    o = [{
                        key: "id",
                        label: "ID"
                    }, {
                        key: "user_cod",
                        label: "C√≥digo"
                    }, {
                        key: "user_name",
                        label: "Nome"
                    }, {
                        key: "reason",
                        label: "Motivo"
                    }, {
                        key: "created_at",
                        label: "Data"
                    }],
                    c = [{
                        key: "id",
                        label: "ID"
                    }, {
                        key: "user_cod",
                        label: "C√≥digo"
                    }, {
                        key: "user_name",
                        label: "Nome"
                    }, {
                        key: "reason",
                        label: "Motivo"
                    }, {
                        key: "created_at",
                        label: "Data"
                    }],
                    s = [{
                        key: "id",
                        label: "ID"
                    }, {
                        key: "indicador_cod",
                        label: "C√≥d Indicador"
                    }, {
                        key: "indicador_nome",
                        label: "Nome Indicador"
                    }, {
                        key: "indicado_nome",
                        label: "Nome Indicado"
                    }, {
                        key: "indicado_contato",
                        label: "Contato"
                    }, {
                        key: "status",
                        label: "Status"
                    }, {
                        key: "created_at",
                        label: "Data"
                    }],
                    n = {
                        data_backup: (new Date).toISOString(),
                        versao: "1.0",
                        dados: {
                            withdrawals: q,
                            users: A,
                            gratuities: Q,
                            restricted: Z,
                            indicacoes: ae
                        },
                        estatisticas: {
                            total_withdrawals: q.length,
                            total_users: A.length,
                            total_gratuities: Q.length,
                            total_restricted: Z.length,
                            total_indicacoes: ae.length
                        }
                    };
                return React.createElement("div", {
                    className: "space-y-6"
                }, React.createElement("div", {
                    className: "bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 text-white"
                }, React.createElement("h2", {
                    className: "text-2xl font-bold flex items-center gap-2"
                }, "üíæ Backup e Exporta√ß√£o de Dados"), React.createElement("p", {
                    className: "text-blue-100 mt-2"
                }, "Exporte seus dados para manter backups seguros ou analisar em outras ferramentas.")), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-6"
                }, React.createElement("div", {
                    className: "flex items-center justify-between"
                }, React.createElement("div", null, React.createElement("h3", {
                    className: "text-lg font-bold text-gray-800 flex items-center gap-2"
                }, "üóÑÔ∏è Backup Completo"), React.createElement("p", {
                    className: "text-sm text-gray-600 mt-1"
                }, "Exporta todos os dados do sistema em um √∫nico arquivo JSON."), React.createElement("div", {
                    className: "flex gap-4 mt-2 text-xs text-gray-500"
                }, React.createElement("span", null, "üìã ", q.length, " solicita√ß√µes"), React.createElement("span", null, "üë• ", A.length, " usu√°rios"), React.createElement("span", null, "üéÅ ", Q.length, " gratuidades"), React.createElement("span", null, "üö´ ", Z.length, " restritos"), React.createElement("span", null, "ü§ù ", ae.length, " indica√ß√µes"))), React.createElement("button", {
                    onClick: () => e(n, `backup_completo_${a}.json`),
                    className: "px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 flex items-center gap-2"
                }, "‚¨áÔ∏è Baixar Backup Completo"))), React.createElement("div", {
                    className: "grid grid-cols-1 md:grid-cols-2 gap-4"
                }, React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-5"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 flex items-center gap-2 mb-3"
                }, "üìã Solicita√ß√µes de Saque"), React.createElement("p", {
                    className: "text-sm text-gray-600 mb-3"
                }, q.length, " registros"), React.createElement("div", {
                    className: "flex gap-2"
                }, React.createElement("button", {
                    onClick: () => t(q, l, `solicitacoes_${a}.csv`),
                    className: "flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 text-sm"
                }, "üìä CSV"), React.createElement("button", {
                    onClick: () => e(q, `solicitacoes_${a}.json`),
                    className: "flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 text-sm"
                }, "üìÑ JSON"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-5"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 flex items-center gap-2 mb-3"
                }, "üë• Usu√°rios"), React.createElement("p", {
                    className: "text-sm text-gray-600 mb-3"
                }, A.length, " registros"), React.createElement("div", {
                    className: "flex gap-2"
                }, React.createElement("button", {
                    onClick: () => t(A, r, `usuarios_${a}.csv`),
                    className: "flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 text-sm"
                }, "üìä CSV"), React.createElement("button", {
                    onClick: () => e(A, `usuarios_${a}.json`),
                    className: "flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 text-sm"
                }, "üìÑ JSON"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-5"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 flex items-center gap-2 mb-3"
                }, "üéÅ Gratuidades"), React.createElement("p", {
                    className: "text-sm text-gray-600 mb-3"
                }, Q.length, " registros"), React.createElement("div", {
                    className: "flex gap-2"
                }, React.createElement("button", {
                    onClick: () => t(Q, o, `gratuidades_${a}.csv`),
                    className: "flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 text-sm"
                }, "üìä CSV"), React.createElement("button", {
                    onClick: () => e(Q, `gratuidades_${a}.json`),
                    className: "flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 text-sm"
                }, "üìÑ JSON"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-5"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 flex items-center gap-2 mb-3"
                }, "üö´ Lista de Restritos"), React.createElement("p", {
                    className: "text-sm text-gray-600 mb-3"
                }, Z.length, " registros"), React.createElement("div", {
                    className: "flex gap-2"
                }, React.createElement("button", {
                    onClick: () => t(Z, c, `restritos_${a}.csv`),
                    className: "flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 text-sm"
                }, "üìä CSV"), React.createElement("button", {
                    onClick: () => e(Z, `restritos_${a}.json`),
                    className: "flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 text-sm"
                }, "üìÑ JSON"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-5"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 flex items-center gap-2 mb-3"
                }, "ü§ù Indica√ß√µes"), React.createElement("p", {
                    className: "text-sm text-gray-600 mb-3"
                }, ae.length, " registros"), React.createElement("div", {
                    className: "flex gap-2"
                }, React.createElement("button", {
                    onClick: () => t(ae, s, `indicacoes_${a}.csv`),
                    className: "flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 text-sm"
                }, "üìä CSV"), React.createElement("button", {
                    onClick: () => e(ae, `indicacoes_${a}.json`),
                    className: "flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 text-sm"
                }, "üìÑ JSON"))), React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-5"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 flex items-center gap-2 mb-3"
                }, "üîç Solicita√ß√µes por Status"), React.createElement("div", {
                    className: "space-y-2"
                }, React.createElement("button", {
                    onClick: () => t(q.filter(e => "aprovado" === e.status || "aprovado_gratuidade" === e.status), l, `aprovados_${a}.csv`),
                    className: "w-full px-4 py-2 bg-green-100 text-green-700 rounded-lg font-semibold hover:bg-green-200 text-sm text-left"
                }, "‚úÖ Aprovados (", q.filter(e => "aprovado" === e.status || "aprovado_gratuidade" === e.status).length, ")"), React.createElement("button", {
                    onClick: () => t(q.filter(e => "aguardando_aprovacao" === e.status), l, `pendentes_${a}.csv`),
                    className: "w-full px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg font-semibold hover:bg-yellow-200 text-sm text-left"
                }, "‚è≥ Pendentes (", q.filter(e => "aguardando_aprovacao" === e.status).length, ")"), React.createElement("button", {
                    onClick: () => t(q.filter(e => "rejeitado" === e.status), l, `rejeitados_${a}.csv`),
                    className: "w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold hover:bg-red-200 text-sm text-left"
                }, "‚ùå Rejeitados (", q.filter(e => "rejeitado" === e.status).length, ")")))), React.createElement("div", {
                    className: "bg-amber-50 border border-amber-200 rounded-xl p-4"
                }, React.createElement("h4", {
                    className: "font-semibold text-amber-800 flex items-center gap-2"
                }, "üí° Dicas de Backup"), React.createElement("ul", {
                    className: "text-sm text-amber-700 mt-2 space-y-1"
                }, React.createElement("li", null, "‚Ä¢ Fa√ßa backups regularmente (recomendado: semanalmente)"), React.createElement("li", null, "‚Ä¢ O arquivo JSON pode ser usado para restaurar dados"), React.createElement("li", null, "‚Ä¢ O arquivo CSV pode ser aberto no Excel ou Google Sheets"), React.createElement("li", null, "‚Ä¢ Guarde os backups em local seguro (Google Drive, OneDrive, etc.)"))))
            })())), "saldo-plific" === p.finTab && React.createElement("div", {className: "max-w-7xl mx-auto p-6 space-y-6"},
    // Header
    React.createElement("div", {className: "bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-6 text-white"},
        React.createElement("h2", {className: "text-2xl font-bold mb-2"}, "üí≥ Saldo Plific"),
        React.createElement("p", {className: "text-purple-100"}, "Consulte e gerencie saldos dos profissionais")
    ),
    
    // Consulta Individual
    React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"},
        React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "üîç Consulta Individual"),
        React.createElement("div", {className: "flex gap-3 items-end flex-wrap"},
            React.createElement("div", {className: "flex-1 min-w-[200px]"},
                React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "ID do Profissional"),
                React.createElement("input", {
                    type: "number",
                    value: plificState.idBusca,
                    onChange: function(e) { setPlificState(Object.assign({}, plificState, {idBusca: e.target.value})); },
                    placeholder: "Digite o ID...",
                    className: "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500"
                })
            ),
            React.createElement("button", {
                onClick: function() { consultarSaldoPlific(plificState.idBusca); },
                disabled: plificState.loading,
                className: "px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"
            }, plificState.loading ? "Consultando..." : "üîç Consultar")
        ),
        plificState.consultaIndividual && plificState.consultaIndividual.profissional && React.createElement("div", {className: "mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200"},
            React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-5 gap-4"},
                React.createElement("div", null,
                    React.createElement("p", {className: "text-sm text-gray-500"}, "Nome"),
                    React.createElement("p", {className: "font-semibold text-gray-800"}, plificState.consultaIndividual.profissional.nome || "-")
                ),
                React.createElement("div", null,
                    React.createElement("p", {className: "text-sm text-gray-500"}, "CPF"),
                    React.createElement("p", {className: "font-semibold text-gray-800"}, plificState.consultaIndividual.profissional.cpf || "-")
                ),
                React.createElement("div", null,
                    React.createElement("p", {className: "text-sm text-gray-500"}, "Celular"),
                    React.createElement("p", {className: "font-semibold text-gray-800"}, plificState.consultaIndividual.profissional.celular || "-")
                ),
                React.createElement("div", null,
                    React.createElement("p", {className: "text-sm text-gray-500"}, "Saldo"),
                    React.createElement("p", {className: "text-2xl font-bold " + (parseSaldoBR(plificState.consultaIndividual.profissional.saldo) >= 0 ? "text-green-600" : "text-red-600")}, "R$ " + parseSaldoBR(plificState.consultaIndividual.profissional.saldo).toFixed(2).replace(".", ","))
                ),
                React.createElement("div", {className: "flex items-end"},
                    React.createElement("button", {
                        onClick: function() { setModalDebitoPlific(plificState.consultaIndividual.profissional); setDebitoFormPlific({valor: "", descricao: ""}); },
                        className: "px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm"
                    }, "üí≥ Lan√ßar D√©bito")
                )
            )
        )
    ),
    
    // Hist√≥rico de Saldos
    React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"},
        React.createElement("div", {className: "flex items-center justify-between mb-4 flex-wrap gap-2"},
            React.createElement("div", null,
                React.createElement("h3", {className: "text-lg font-bold text-gray-800"}, "üìä Hist√≥rico de Saldos"),
                plificState.total > 0 && React.createElement("p", {className: "text-sm text-gray-500"}, 
                    plificState.total + " profissionais | Soma total: R$ " + (plificState.somaTotal || 0).toFixed(2).replace(".", ",")
                )
            ),
            React.createElement("div", {className: "flex gap-2"},
                React.createElement("button", {
                    onClick: function() { consultarSaldosLotePlific(1); },
                    disabled: plificState.loadingLote,
                    className: "px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50"
                }, plificState.loadingLote ? "‚è≥ Carregando..." : "üîÑ Atualizar"),
                plificState.consultaLote.length > 0 && React.createElement("button", {
                    onClick: exportarSaldosCSVPlific,
                    className: "px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"
                }, "üì• CSV")
            )
        ),
        plificState.loadingLote ? React.createElement("div", {className: "text-center py-12"},
            React.createElement("div", {className: "animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),
            React.createElement("p", {className: "mt-4 text-gray-500"}, "Consultando saldos... isso pode demorar alguns segundos")
        ) : plificState.consultaLote.length > 0 ? React.createElement(React.Fragment, null,
            React.createElement("div", {className: "overflow-x-auto"},
                React.createElement("table", {className: "w-full"},
                    React.createElement("thead", {className: "bg-gray-100"},
                        React.createElement("tr", null,
                            React.createElement("th", {className: "px-4 py-3 text-left text-xs font-semibold text-gray-600"}, "#"),
                            React.createElement("th", {className: "px-4 py-3 text-left text-xs font-semibold text-gray-600"}, "C√≥digo"),
                            React.createElement("th", {className: "px-4 py-3 text-left text-xs font-semibold text-gray-600"}, "Nome"),
                            React.createElement("th", {className: "px-4 py-3 text-left text-xs font-semibold text-gray-600"}, "CPF"),
                            React.createElement("th", {className: "px-4 py-3 text-right text-xs font-semibold text-gray-600"}, "Saldo"),
                            React.createElement("th", {className: "px-4 py-3 text-center text-xs font-semibold text-gray-600"}, "A√ß√µes")
                        )
                    ),
                    React.createElement("tbody", null,
                        plificState.consultaLote.map(function(prof, idx) {
                            var saldoNum = typeof prof.saldo === "string" ? parseFloat(prof.saldo.replace(/\./g, "").replace(",", ".")) : parseFloat(prof.saldo || 0);
                            var posicao = ((plificState.pagina - 1) * 15) + idx + 1;
                            return React.createElement("tr", {key: prof.codigo || idx, className: idx % 2 === 0 ? "bg-white hover:bg-gray-50" : "bg-gray-50 hover:bg-gray-100"},
                                React.createElement("td", {className: "px-4 py-3 text-sm text-gray-400"}, posicao),
                                React.createElement("td", {className: "px-4 py-3 text-sm font-mono"}, prof.codigo),
                                React.createElement("td", {className: "px-4 py-3 text-sm font-medium"}, prof.nome || "-"),
                                React.createElement("td", {className: "px-4 py-3 text-sm text-gray-600"}, prof.cpf || "-"),
                                React.createElement("td", {className: "px-4 py-3 text-sm text-right font-bold " + (saldoNum > 0 ? "text-green-600" : saldoNum < 0 ? "text-red-600" : "text-gray-400")}, 
                                    "R$ " + saldoNum.toFixed(2).replace(".", ",")
                                ),
                                React.createElement("td", {className: "px-4 py-3 text-center"},
                                    React.createElement("button", {
                                        onClick: function() { setModalDebitoPlific({...prof, id: prof.codigo}); setDebitoFormPlific({valor: "", descricao: ""}); },
                                        className: "px-3 py-1 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 text-xs font-medium"
                                    }, "üí≥ D√©bito")
                                )
                            );
                        })
                    )
                )
            ),
            // Pagina√ß√£o
            plificState.totalPaginas > 1 && React.createElement("div", {className: "flex items-center justify-between mt-4 pt-4 border-t"},
                React.createElement("p", {className: "text-sm text-gray-500"},
                    "P√°gina " + plificState.pagina + " de " + plificState.totalPaginas
                ),
                React.createElement("div", {className: "flex gap-2"},
                    React.createElement("button", {
                        onClick: function() { consultarSaldosLotePlific(plificState.pagina - 1); },
                        disabled: plificState.pagina <= 1 || plificState.loadingLote,
                        className: "px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"
                    }, "‚Üê Anterior"),
                    React.createElement("button", {
                        onClick: function() { consultarSaldosLotePlific(plificState.pagina + 1); },
                        disabled: plificState.pagina >= plificState.totalPaginas || plificState.loadingLote,
                        className: "px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"
                    }, "Pr√≥xima ‚Üí")
                )
            )
        ) : React.createElement("div", {className: "text-center py-12 text-gray-500"},
            React.createElement("div", {className: "text-5xl mb-4"}, "üìä"),
            React.createElement("p", {className: "font-medium"}, "Hist√≥rico de Saldos"),
            React.createElement("p", {className: "text-sm mt-2"}, "Clique em \"Atualizar\" para carregar os saldos de todos os profissionais"),
            React.createElement("p", {className: "text-xs mt-1 text-gray-400"}, "Ordenado do maior para o menor saldo")
        )
    ),
    
    // Modal de D√©bito
    modalDebitoPlific && React.createElement("div", {className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50", onClick: function() { setModalDebitoPlific(null); }},
        React.createElement("div", {className: "bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4", onClick: function(e) { e.stopPropagation(); }},
            React.createElement("h3", {className: "text-xl font-bold text-gray-800 mb-4"}, "üí≥ Lan√ßar D√©bito"),
            React.createElement("div", {className: "bg-gray-50 rounded-lg p-3 mb-4"},
                React.createElement("p", {className: "text-sm text-gray-600"}, "Profissional:"),
                React.createElement("p", {className: "font-semibold text-lg"}, modalDebitoPlific.nome || "ID " + (modalDebitoPlific.idProf || modalDebitoPlific.id || modalDebitoPlific.codigo)),
                React.createElement("p", {className: "text-sm text-gray-500"}, "Saldo atual: R$ " + parseSaldoBR(modalDebitoPlific.saldo).toFixed(2).replace(".", ","))
            ),
            React.createElement("div", {className: "space-y-4"},
                React.createElement("div", null,
                    React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "Valor do D√©bito *"),
                    React.createElement("input", {
                        type: "number",
                        step: "0.01",
                        min: "0.01",
                        value: debitoFormPlific.valor,
                        onChange: function(e) { setDebitoFormPlific(Object.assign({}, debitoFormPlific, {valor: e.target.value})); },
                        placeholder: "0,00",
                        className: "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"
                    })
                ),
                React.createElement("div", null,
                    React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "Descri√ß√£o *"),
                    React.createElement("input", {
                        type: "text",
                        value: debitoFormPlific.descricao,
                        onChange: function(e) { setDebitoFormPlific(Object.assign({}, debitoFormPlific, {descricao: e.target.value})); },
                        placeholder: "Ex: Saque emergencial, Taxa de servi√ßo...",
                        className: "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500"
                    })
                )
            ),
            React.createElement("div", {className: "flex gap-3 mt-6"},
                React.createElement("button", {
                    onClick: function() { setModalDebitoPlific(null); },
                    className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                }, "Cancelar"),
                React.createElement("button", {
                    onClick: async function() {
                        var idProf = modalDebitoPlific.idProf || modalDebitoPlific.id || modalDebitoPlific.codigo;
                        var sucesso = await lancarDebitoPlific(idProf, debitoFormPlific.valor, debitoFormPlific.descricao);
                        if (sucesso) { setModalDebitoPlific(null); }
                    },
                    disabled: !debitoFormPlific.valor || !debitoFormPlific.descricao || plificState.loadingDebito,
                    className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50"
                }, plificState.loadingDebito ? "Processando..." : "üí≥ Confirmar D√©bito")
            )
        )
    ),
    
    // Info
    React.createElement("div", {className: "bg-amber-50 border border-amber-200 rounded-lg p-4"},
        React.createElement("p", {className: "text-sm text-amber-800 font-medium"}, "‚ÑπÔ∏è Informa√ß√µes"),
        React.createElement("ul", {className: "text-xs text-amber-700 mt-2 space-y-1"},
            React.createElement("li", null, "‚Ä¢ Rate limit: m√°ximo 10 requisi√ß√µes por segundo"),
            React.createElement("li", null, "‚Ä¢ Cache: saldos s√£o cacheados por 5 minutos"),
            React.createElement("li", null, "‚Ä¢ Consulta em lote: m√°ximo 100 profissionais por vez")
        )
    )
))
        }
        // Verificar permiss√£o para TO-DO (admin comum)
        const canAccessTodo = hasModuleAccess(l, "todo");
        if (canAccessTodo && "todo" === Ee) {
            // Calcular m√©tricas das tarefas atuais
            const tarefasAtuais = todoViewMode === "meudia" ? todoMeuDia : todoTarefas;
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);
            
            const pendentes = tarefasAtuais.filter(t => t.status === "pendente" || t.status === "em_andamento");
            const atrasadas = tarefasAtuais.filter(t => {
                if (t.status === "concluida") return false;
                if (!t.data_prazo) return false;
                const dataVenc = new Date(t.data_prazo);
                dataVenc.setHours(0, 0, 0, 0);
                return dataVenc < hoje;
            });
            const concluidas = tarefasAtuais.filter(t => t.status === "concluida");
            
            // Filtrar tarefas baseado no card selecionado
            let tarefasFiltradas = tarefasAtuais;
            if (todoFiltroCard === "pendentes") tarefasFiltradas = pendentes;
            else if (todoFiltroCard === "atrasadas") tarefasFiltradas = atrasadas;
            else if (todoFiltroCard === "concluidas") tarefasFiltradas = concluidas;
            
            return React.createElement("div", {
                className: "h-screen bg-gray-100 flex overflow-hidden"
            }, i && React.createElement(Toast, i), todoLoading && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50"
            }, React.createElement("div", {
                className: "bg-white rounded-xl p-6 text-center"
            }, React.createElement("div", {
                className: "animate-spin w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-3"
            }), React.createElement("p", null, "Carregando TO-DO..."))),
            
            // Modal de notifica√ß√£o de pendentes
            todoNotifModal && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"
            }, React.createElement("div", {
                className: "bg-gradient-to-r from-orange-500 to-red-500 p-4 text-white"
            }, React.createElement("h2", {className: "text-xl font-bold flex items-center gap-2"}, "‚ö†Ô∏è Aten√ß√£o!"),
                React.createElement("p", {className: "text-orange-100 text-sm"}, "Voc√™ possui tarefas pendentes")
            ), React.createElement("div", {className: "p-4 max-h-60 overflow-y-auto"},
                React.createElement("p", {className: "text-gray-600 mb-3"}, "üìã ", todoPendentesNotif.length, " tarefa(s) precisam da sua aten√ß√£o:"),
                React.createElement("div", {className: "space-y-2"},
                    todoPendentesNotif.slice(0, 5).map(t => React.createElement("div", {
                        key: t.id,
                        className: "bg-orange-50 border-l-4 border-orange-500 p-3 rounded"
                    }, React.createElement("p", {className: "font-semibold text-gray-800"}, t.titulo),
                        t.data_prazo && React.createElement("p", {className: "text-xs text-orange-600"}, "üìÖ Vence: ", new Date(t.data_prazo).toLocaleDateString("pt-BR"))
                    ))
                ),
                todoPendentesNotif.length > 5 && React.createElement("p", {className: "text-sm text-gray-500 mt-2"}, "... e mais ", todoPendentesNotif.length - 5, " tarefa(s)")
            ), React.createElement("div", {className: "flex gap-3 p-4 border-t"},
                React.createElement("button", {
                    onClick: () => setTodoNotifModal(false),
                    className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
                }, "Fechar"),
                React.createElement("button", {
                    onClick: () => { setTodoNotifModal(false); he("todo"); },
                    className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                }, "üìã Ir para Tarefas")
            ))),
            
            // Sidebar Esquerda - Apenas Listas e Grupos
            React.createElement("div", {
                className: "w-56 bg-white shadow-lg flex flex-col h-screen border-r"
            }, 
                // Header da Sidebar
                React.createElement("div", {
                    className: "bg-gradient-to-r from-purple-600 to-indigo-600 p-4 text-white"
                }, React.createElement("div", {className: "flex items-center gap-3"},
                    socialProfile?.profile_photo ? React.createElement("img", {
                        src: socialProfile.profile_photo,
                        className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
                    }) : React.createElement("div", {
                        className: "w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold border-2 border-white/50"
                    }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
                    React.createElement("div", null,
                        React.createElement("h1", {className: "text-lg font-bold"}, "üìã TO-DO"),
                        React.createElement("p", {className: "text-purple-200 text-xs truncate"}, socialProfile?.display_name || l.fullName)
                    )
                )),
                
                // Listas
                React.createElement("div", {className: "flex-1 overflow-y-auto p-3"},
                    // Meu Dia
                    React.createElement("button", {
                        onClick: async () => {
                            setTodoViewMode("meudia");
                            setTodoGrupoAtivo(null);
                            setTodoFiltroCard(null);
                            setTodoLoading(true);
                            await loadTodoMeuDia();
                            setTodoLoading(false);
                        },
                        className: "w-full text-left px-3 py-3 rounded-xl mb-2 flex items-center gap-3 transition-all " + 
                            (todoViewMode === "meudia" ? "bg-gradient-to-r from-purple-500 to-indigo-500 text-white shadow-md" : "hover:bg-gray-100")
                    }, React.createElement("span", {className: "text-xl"}, "‚òÄÔ∏è"), 
                        React.createElement("span", {className: "flex-1 font-semibold"}, "Meu Dia"),
                        React.createElement("span", {className: "text-sm px-2 py-0.5 rounded-full " + (todoViewMode === "meudia" ? "bg-white/20" : "bg-purple-100 text-purple-700")}, todoMeuDia.length)
                    ),
                    
                    React.createElement("div", {className: "border-t my-3"}),
                    
                    React.createElement("p", {className: "text-xs font-semibold text-gray-400 uppercase mb-2 px-1"}, "Meus Grupos"),
                    
                    todoGrupos.map(g => React.createElement("button", {
                        key: g.id,
                        onClick: async () => {
                            setTodoViewMode("grupo");
                            setTodoGrupoAtivo(g);
                            setTodoFiltroCard(null);
                            setTodoLoading(true);
                            const tarefas = await loadTodoTarefas(g.id);
                            setTodoTarefas(tarefas);
                            setTodoLoading(false);
                        },
                        className: "w-full text-left px-3 py-2 rounded-lg mb-1 flex items-center gap-2 transition-all " + 
                            (todoViewMode === "grupo" && todoGrupoAtivo?.id === g.id ? "bg-purple-100 text-purple-700 font-semibold" : "hover:bg-gray-100 text-gray-700")
                    }, React.createElement("span", null, g.icone || "üìã"), 
                        React.createElement("span", {className: "flex-1 truncate"}, g.nome),
                        g.tipo === "pessoal" && React.createElement("span", {className: "text-xs"}, "üîí")
                    )),
                    
                    React.createElement("button", {
                        onClick: () => setTodoModal({tipo: "novoGrupo"}),
                        className: "w-full text-left px-3 py-2 rounded-lg text-purple-600 hover:bg-purple-50 flex items-center gap-2 mt-2"
                    }, React.createElement("span", null, "‚ûï"), "Novo Grupo")
                ),
                
                // Footer
                React.createElement("div", {className: "p-3 border-t"},
                    React.createElement("button", {
                        onClick: () => he("home"),
                        className: "w-full py-2 bg-gray-100 text-gray-600 rounded-lg font-semibold hover:bg-gray-200 text-sm flex items-center justify-center gap-2"
                    }, "‚Üê Voltar")
                )
            ),
            
            // Modal de Detalhe da Tarefa (Subtarefas, Timer, etc)
            todoTarefaDetalhe && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col"
            },
                // Header
                React.createElement("div", {
                    className: "bg-gradient-to-r from-purple-600 to-indigo-600 p-4 text-white flex justify-between items-start"
                },
                    React.createElement("div", {className: "flex-1"},
                        React.createElement("h2", {className: "text-xl font-bold"}, todoTarefaDetalhe.titulo),
                        React.createElement("p", {className: "text-purple-200 text-sm mt-1"}, 
                            todoTarefaDetalhe.grupo_nome || "Sem grupo", " ‚Ä¢ ", 
                            todoTarefaDetalhe.status === "concluida" ? "‚úÖ Conclu√≠da" : 
                            todoTarefaDetalhe.status === "em_andamento" ? "üîÑ Em andamento" : "üìã Pendente"
                        )
                    ),
                    React.createElement("button", {
                        onClick: () => setTodoTarefaDetalhe(null),
                        className: "text-white/70 hover:text-white text-2xl"
                    }, "√ó")
                ),
                
                // Conte√∫do com scroll
                React.createElement("div", {className: "flex-1 overflow-y-auto p-4 space-y-6"},
                    // Descri√ß√£o
                    todoTarefaDetalhe.descricao && React.createElement("div", null,
                        React.createElement("h4", {className: "font-semibold text-gray-700 mb-2"}, "üìù Descri√ß√£o"),
                        React.createElement("p", {className: "text-gray-600 bg-gray-50 p-3 rounded-lg"}, todoTarefaDetalhe.descricao)
                    ),
                    
                    // Info cards
                    React.createElement("div", {className: "grid grid-cols-2 gap-3"},
                        React.createElement("div", {className: "bg-purple-50 p-3 rounded-lg text-center"},
                            React.createElement("p", {className: "text-xs text-purple-600 font-semibold"}, "Prioridade"),
                            React.createElement("p", {className: "font-bold text-purple-800"}, 
                                todoTarefaDetalhe.prioridade === "urgente" ? "üî¥ Urgente" :
                                todoTarefaDetalhe.prioridade === "alta" ? "üü† Alta" :
                                todoTarefaDetalhe.prioridade === "media" ? "üü° M√©dia" : "üü¢ Baixa"
                            )
                        ),
                        React.createElement("div", {className: "bg-blue-50 p-3 rounded-lg text-center"},
                            React.createElement("p", {className: "text-xs text-blue-600 font-semibold"}, "Prazo"),
                            React.createElement("p", {className: "font-bold text-blue-800"}, 
                                todoTarefaDetalhe.data_prazo ? new Date(todoTarefaDetalhe.data_prazo).toLocaleDateString("pt-BR") : "Sem prazo"
                            )
                        )
                    ),
                    
                    // Subtarefas/Checklist
                    React.createElement("div", {className: "bg-gray-50 rounded-xl p-4"},
                        React.createElement("div", {className: "flex items-center justify-between mb-3"},
                            React.createElement("h4", {className: "font-semibold text-gray-700 flex items-center gap-2"}, 
                                "‚òëÔ∏è Checklist",
                                (todoSubtarefas[todoTarefaDetalhe.id]?.length || 0) > 0 && React.createElement("span", {className: "text-sm font-normal text-gray-500"},
                                    "(" + (todoSubtarefas[todoTarefaDetalhe.id]?.filter(s => s.concluida).length || 0) + "/" + (todoSubtarefas[todoTarefaDetalhe.id]?.length || 0) + ")"
                                )
                            ),
                            (todoSubtarefas[todoTarefaDetalhe.id]?.length || 0) > 0 && React.createElement("span", {
                                className: "text-sm font-bold " + ((todoSubtarefas[todoTarefaDetalhe.id]?.filter(s => s.concluida).length || 0) === (todoSubtarefas[todoTarefaDetalhe.id]?.length || 0) ? "text-green-600" : "text-purple-600")
                            }, Math.round(((todoSubtarefas[todoTarefaDetalhe.id]?.filter(s => s.concluida).length || 0) / (todoSubtarefas[todoTarefaDetalhe.id]?.length || 1)) * 100), "%")
                        ),
                        
                        // Barra de progresso
                        (todoSubtarefas[todoTarefaDetalhe.id]?.length || 0) > 0 && React.createElement("div", {className: "w-full bg-gray-200 rounded-full h-2 mb-3"},
                            React.createElement("div", {
                                className: "h-2 rounded-full transition-all " + ((todoSubtarefas[todoTarefaDetalhe.id]?.filter(s => s.concluida).length || 0) === (todoSubtarefas[todoTarefaDetalhe.id]?.length || 0) ? "bg-green-500" : "bg-purple-500"),
                                style: { width: Math.round(((todoSubtarefas[todoTarefaDetalhe.id]?.filter(s => s.concluida).length || 0) / (todoSubtarefas[todoTarefaDetalhe.id]?.length || 1)) * 100) + "%" }
                            })
                        ),
                        
                        // Lista de subtarefas
                        React.createElement("div", {className: "space-y-2 mb-3"},
                            (todoSubtarefas[todoTarefaDetalhe.id] || []).map(sub =>
                                React.createElement("div", {
                                    key: sub.id,
                                    className: "flex items-center gap-2 p-2 rounded-lg " + (sub.concluida ? "bg-green-50" : "bg-white") + " group"
                                },
                                    React.createElement("button", {
                                        onClick: () => toggleTodoSubtarefa(sub.id, sub.concluida, todoTarefaDetalhe.id),
                                        className: "w-5 h-5 rounded border-2 flex items-center justify-center transition-colors " + 
                                            (sub.concluida ? "bg-green-500 border-green-500 text-white" : "border-gray-300 hover:border-purple-500")
                                    }, sub.concluida && "‚úì"),
                                    React.createElement("span", {
                                        className: "flex-1 text-sm " + (sub.concluida ? "line-through text-gray-400" : "text-gray-700")
                                    }, sub.titulo),
                                    React.createElement("button", {
                                        onClick: () => deleteTodoSubtarefa(sub.id, todoTarefaDetalhe.id),
                                        className: "opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-600 transition-opacity"
                                    }, "√ó")
                                )
                            )
                        ),
                        
                        // Input para nova subtarefa
                        React.createElement("div", {className: "flex gap-2"},
                            React.createElement("input", {
                                type: "text",
                                placeholder: "Adicionar item...",
                                className: "flex-1 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500",
                                onKeyPress: async (e) => {
                                    if (e.key === 'Enter' && e.target.value.trim()) {
                                        await addTodoSubtarefa(todoTarefaDetalhe.id, e.target.value.trim());
                                        e.target.value = '';
                                    }
                                }
                            }),
                            React.createElement("button", {
                                onClick: async () => {
                                    const input = document.querySelector('input[placeholder="Adicionar item..."]');
                                    if (input && input.value.trim()) {
                                        await addTodoSubtarefa(todoTarefaDetalhe.id, input.value.trim());
                                        input.value = '';
                                    }
                                },
                                className: "px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-semibold hover:bg-purple-700"
                            }, "+ Adicionar")
                        )
                    )
                ),
                
                // Footer com a√ß√µes
                React.createElement("div", {className: "border-t p-4 flex justify-between items-center bg-gray-50"},
                    React.createElement("button", {
                        onClick: () => {
                            abrirEditarTarefa(todoTarefaDetalhe);
                            setTodoTarefaDetalhe(null);
                        },
                        className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
                    }, "‚úèÔ∏è Editar"),
                    React.createElement("div", {className: "flex gap-2"},
                        todoTarefaDetalhe.status !== "concluida" && React.createElement("button", {
                            onClick: async () => {
                                await fetch(`${API_URL}/todo/tarefas/${todoTarefaDetalhe.id}`, {
                                    method: 'PUT',
                                    headers: {'Content-Type': 'application/json'},
                                    body: JSON.stringify({status: 'concluida', user_cod: l.codProfissional, user_name: l.fullName})
                                });
                                setTodoTarefaDetalhe(null);
                                ja("‚úÖ Tarefa conclu√≠da!", "success");
                                if (todoViewMode === "meudia") await loadTodoMeuDia();
                                else if (todoGrupoAtivo) {
                                    const tarefas = await loadTodoTarefas(todoGrupoAtivo.id);
                                    setTodoTarefas(tarefas);
                                }
                            },
                            className: "px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700"
                        }, "‚úÖ Concluir Tarefa"),
                        React.createElement("button", {
                            onClick: () => setTodoTarefaDetalhe(null),
                            className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                        }, "Fechar")
                    )
                )
            )),
            
            // √Årea Principal
            React.createElement("div", {className: "flex-1 flex flex-col h-screen"},
                // Header da √°rea (FIXO) com filtros
                React.createElement("div", {className: "bg-white shadow-sm px-6 py-4 flex justify-between items-center flex-shrink-0 border-b"},
                    React.createElement("div", {className: "flex items-center gap-6"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-xl font-bold text-gray-800"}, 
                                todoViewMode === "meudia" ? "‚òÄÔ∏è Meu Dia" : (todoGrupoAtivo?.icone + " " + todoGrupoAtivo?.nome || "Selecione uma lista")
                            ),
                            React.createElement("p", {className: "text-sm text-gray-500"}, 
                                tarefasFiltradas.length, " tarefa(s)"
                            )
                        ),
                        // Cards de Filtro Horizontal
                        React.createElement("div", {className: "flex gap-2"},
                            React.createElement("button", {
                                onClick: () => setTodoFiltroCard(todoFiltroCard === "pendentes" ? null : "pendentes"),
                                className: "px-3 py-1.5 rounded-lg flex items-center gap-2 text-sm font-semibold transition-all " + 
                                    (todoFiltroCard === "pendentes" ? "bg-yellow-500 text-white" : "bg-yellow-100 text-yellow-700 hover:bg-yellow-200")
                            }, "‚è≥ Pendentes (", pendentes.length, ")"),
                            React.createElement("button", {
                                onClick: () => setTodoFiltroCard(todoFiltroCard === "atrasadas" ? null : "atrasadas"),
                                className: "px-3 py-1.5 rounded-lg flex items-center gap-2 text-sm font-semibold transition-all " + 
                                    (todoFiltroCard === "atrasadas" ? "bg-red-500 text-white" : "bg-red-100 text-red-700 hover:bg-red-200")
                            }, "üî• Atrasadas (", atrasadas.length, ")"),
                            React.createElement("button", {
                                onClick: () => setTodoFiltroCard(todoFiltroCard === "concluidas" ? null : "concluidas"),
                                className: "px-3 py-1.5 rounded-lg flex items-center gap-2 text-sm font-semibold transition-all " + 
                                    (todoFiltroCard === "concluidas" ? "bg-green-500 text-white" : "bg-green-100 text-green-700 hover:bg-green-200")
                            }, "‚úÖ Conclu√≠das (", concluidas.length, ")"),
                            todoFiltroCard && React.createElement("button", {
                                onClick: () => setTodoFiltroCard(null),
                                className: "px-2 py-1.5 text-gray-400 hover:text-gray-600"
                            }, "‚úï")
                        )
                    ),
                    React.createElement("div", {className: "flex items-center gap-3"},
                        // Toggle Lista/Kanban
                        React.createElement("div", {className: "flex bg-gray-100 rounded-lg p-1"},
                            React.createElement("button", {
                                onClick: () => setTodoViewType("lista"),
                                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + 
                                    (todoViewType === "lista" ? "bg-white shadow text-purple-700" : "text-gray-600 hover:text-gray-800")
                            }, "üìã Lista"),
                            React.createElement("button", {
                                onClick: () => setTodoViewType("kanban"),
                                className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + 
                                    (todoViewType === "kanban" ? "bg-white shadow text-purple-700" : "text-gray-600 hover:text-gray-800")
                            }, "üìä Kanban")
                        ),
                        React.createElement("button", {
                            onClick: () => he("home"),
                            className: "px-4 py-2 text-gray-600 rounded-lg font-semibold hover:bg-gray-100"
                        }, "‚Üê Voltar"),
                        React.createElement("button", {
                            onClick: () => setTodoModal({tipo: "novaTarefa"}),
                            className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 flex items-center gap-2"
                        }, "‚ûï Nova Tarefa")
                    )
                ),
                
                // √Årea de conte√∫do com scroll
                React.createElement("div", {className: "flex-1 overflow-y-auto p-6 bg-gray-50"},
                
                // KANBAN VIEW
                todoViewType === "kanban" ? React.createElement("div", {className: "flex gap-4 h-full"},
                    // Coluna A FAZER
                    React.createElement("div", {
                        className: "flex-1 bg-yellow-50 rounded-xl p-4 min-w-[300px] transition-all",
                        onDragOver: (e) => { 
                            e.preventDefault(); 
                            e.stopPropagation();
                            e.currentTarget.style.opacity = '0.7';
                        },
                        onDragLeave: (e) => {
                            e.currentTarget.style.opacity = '1';
                        },
                        onDrop: async (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            e.currentTarget.style.opacity = '1';
                            const tarefaId = e.dataTransfer.getData('text/plain');
                            console.log('Drop na coluna TODO, tarefaId:', tarefaId);
                            if (tarefaId) await moverTodoKanban(parseInt(tarefaId), 'todo');
                        }
                    },
                        React.createElement("div", {className: "flex items-center justify-between mb-4 pb-2 border-b-2 border-yellow-200"},
                            React.createElement("div", {className: "flex items-center gap-2"},
                                React.createElement("span", {className: "text-xl"}, "üìã"),
                                React.createElement("h3", {className: "font-bold text-gray-800"}, "A Fazer"),
                                React.createElement("span", {className: "px-2 py-0.5 rounded-full text-xs font-bold bg-yellow-200 text-yellow-800"},
                                    tarefasFiltradas.filter(t => (t.coluna_kanban || 'todo') === 'todo' && t.status !== 'concluida').length
                                )
                            )
                        ),
                        React.createElement("div", {className: "space-y-3 max-h-[calc(100vh-280px)] overflow-y-auto"},
                            tarefasFiltradas.filter(t => (t.coluna_kanban || 'todo') === 'todo' && t.status !== 'concluida').map(t => 
                                React.createElement("div", {
                                    key: t.id,
                                    draggable: "true",
                                    onDragStart: (e) => {
                                        e.dataTransfer.setData('text/plain', t.id.toString());
                                        e.dataTransfer.effectAllowed = 'move';
                                        e.currentTarget.style.opacity = '0.5';
                                    },
                                    onDragEnd: (e) => {
                                        e.currentTarget.style.opacity = '1';
                                    },
                                    onClick: () => abrirTodoDetalhe(t),
                                    className: "bg-white rounded-lg p-3 shadow-sm border-l-4 cursor-move hover:shadow-md transition-all select-none " +
                                        (t.prioridade === 'urgente' ? 'border-l-red-500' : t.prioridade === 'alta' ? 'border-l-orange-500' : t.prioridade === 'media' ? 'border-l-yellow-500' : 'border-l-gray-300')
                                },
                                    React.createElement("h4", {className: "font-semibold text-gray-800 mb-1 pointer-events-none"}, t.titulo),
                                    React.createElement("div", {className: "flex flex-wrap gap-1 mt-2 pointer-events-none"},
                                        t.data_prazo && React.createElement("span", {
                                            className: "text-xs px-2 py-0.5 rounded-full " + (new Date(t.data_prazo) < hoje ? "bg-red-100 text-red-700" : "bg-gray-100 text-gray-600")
                                        }, "üìÖ ", new Date(t.data_prazo).toLocaleDateString('pt-BR')),
                                        t.qtd_subtarefas > 0 && React.createElement("span", {className: "text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-700"},
                                            "‚òëÔ∏è ", t.qtd_subtarefas_concluidas || 0, "/", t.qtd_subtarefas
                                        )
                                    )
                                )
                            ),
                            tarefasFiltradas.filter(t => (t.coluna_kanban || 'todo') === 'todo' && t.status !== 'concluida').length === 0 && React.createElement("div", {className: "text-center py-8 text-gray-400"},
                                React.createElement("span", {className: "text-3xl block mb-2"}, "üìã"),
                                React.createElement("p", {className: "text-sm"}, "Nenhuma tarefa")
                            )
                        )
                    ),
                    
                    // Coluna FAZENDO
                    React.createElement("div", {
                        className: "flex-1 bg-blue-50 rounded-xl p-4 min-w-[300px] transition-all",
                        onDragOver: (e) => { 
                            e.preventDefault(); 
                            e.stopPropagation();
                            e.currentTarget.style.opacity = '0.7';
                        },
                        onDragLeave: (e) => {
                            e.currentTarget.style.opacity = '1';
                        },
                        onDrop: async (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            e.currentTarget.style.opacity = '1';
                            const tarefaId = e.dataTransfer.getData('text/plain');
                            console.log('Drop na coluna DOING, tarefaId:', tarefaId);
                            if (tarefaId) await moverTodoKanban(parseInt(tarefaId), 'doing');
                        }
                    },
                        React.createElement("div", {className: "flex items-center justify-between mb-4 pb-2 border-b-2 border-blue-200"},
                            React.createElement("div", {className: "flex items-center gap-2"},
                                React.createElement("span", {className: "text-xl"}, "üîÑ"),
                                React.createElement("h3", {className: "font-bold text-gray-800"}, "Fazendo"),
                                React.createElement("span", {className: "px-2 py-0.5 rounded-full text-xs font-bold bg-blue-200 text-blue-800"},
                                    tarefasFiltradas.filter(t => t.coluna_kanban === 'doing').length
                                )
                            )
                        ),
                        React.createElement("div", {className: "space-y-3 max-h-[calc(100vh-280px)] overflow-y-auto"},
                            tarefasFiltradas.filter(t => t.coluna_kanban === 'doing').map(t => 
                                React.createElement("div", {
                                    key: t.id,
                                    draggable: "true",
                                    onDragStart: (e) => {
                                        e.dataTransfer.setData('text/plain', t.id.toString());
                                        e.dataTransfer.effectAllowed = 'move';
                                        e.currentTarget.style.opacity = '0.5';
                                    },
                                    onDragEnd: (e) => {
                                        e.currentTarget.style.opacity = '1';
                                    },
                                    onClick: () => abrirTodoDetalhe(t),
                                    className: "bg-white rounded-lg p-3 shadow-sm border-l-4 cursor-move hover:shadow-md transition-all select-none " +
                                        (t.prioridade === 'urgente' ? 'border-l-red-500' : t.prioridade === 'alta' ? 'border-l-orange-500' : t.prioridade === 'media' ? 'border-l-yellow-500' : 'border-l-gray-300')
                                },
                                    React.createElement("h4", {className: "font-semibold text-gray-800 mb-1 pointer-events-none"}, t.titulo),
                                    React.createElement("div", {className: "flex flex-wrap gap-1 mt-2 pointer-events-none"},
                                        t.data_prazo && React.createElement("span", {
                                            className: "text-xs px-2 py-0.5 rounded-full " + (new Date(t.data_prazo) < hoje ? "bg-red-100 text-red-700" : "bg-gray-100 text-gray-600")
                                        }, "üìÖ ", new Date(t.data_prazo).toLocaleDateString('pt-BR')),
                                        t.qtd_subtarefas > 0 && React.createElement("span", {className: "text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-700"},
                                            "‚òëÔ∏è ", t.qtd_subtarefas_concluidas || 0, "/", t.qtd_subtarefas
                                        )
                                    )
                                )
                            ),
                            tarefasFiltradas.filter(t => t.coluna_kanban === 'doing').length === 0 && React.createElement("div", {className: "text-center py-8 text-gray-400"},
                                React.createElement("span", {className: "text-3xl block mb-2"}, "üîÑ"),
                                React.createElement("p", {className: "text-sm"}, "Arraste tarefas para c√°")
                            )
                        )
                    ),
                    
                    // Coluna CONCLU√çDO
                    React.createElement("div", {
                        className: "flex-1 bg-green-50 rounded-xl p-4 min-w-[300px] transition-all",
                        onDragOver: (e) => { 
                            e.preventDefault(); 
                            e.stopPropagation();
                            e.currentTarget.style.opacity = '0.7';
                        },
                        onDragLeave: (e) => {
                            e.currentTarget.style.opacity = '1';
                        },
                        onDrop: async (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            e.currentTarget.style.opacity = '1';
                            const tarefaId = e.dataTransfer.getData('text/plain');
                            console.log('Drop na coluna DONE, tarefaId:', tarefaId);
                            if (tarefaId) await moverTodoKanban(parseInt(tarefaId), 'done');
                        }
                    },
                        React.createElement("div", {className: "flex items-center justify-between mb-4 pb-2 border-b-2 border-green-200"},
                            React.createElement("div", {className: "flex items-center gap-2"},
                                React.createElement("span", {className: "text-xl"}, "‚úÖ"),
                                React.createElement("h3", {className: "font-bold text-gray-800"}, "Conclu√≠do"),
                                React.createElement("span", {className: "px-2 py-0.5 rounded-full text-xs font-bold bg-green-200 text-green-800"},
                                    tarefasFiltradas.filter(t => t.coluna_kanban === 'done' || t.status === 'concluida').length
                                )
                            )
                        ),
                        React.createElement("div", {className: "space-y-3 max-h-[calc(100vh-280px)] overflow-y-auto"},
                            tarefasFiltradas.filter(t => t.coluna_kanban === 'done' || t.status === 'concluida').map(t => 
                                React.createElement("div", {
                                    key: t.id,
                                    draggable: "true",
                                    onDragStart: (e) => {
                                        e.dataTransfer.setData('text/plain', t.id.toString());
                                        e.dataTransfer.effectAllowed = 'move';
                                        e.currentTarget.style.opacity = '0.5';
                                    },
                                    onDragEnd: (e) => {
                                        e.currentTarget.style.opacity = '1';
                                    },
                                    onClick: () => abrirTodoDetalhe(t),
                                    className: "bg-white rounded-lg p-3 shadow-sm border-l-4 border-l-green-500 cursor-move hover:shadow-md transition-all opacity-75 select-none"
                                },
                                    React.createElement("h4", {className: "font-semibold text-gray-500 mb-1 line-through pointer-events-none"}, t.titulo),
                                    t.data_conclusao && React.createElement("span", {className: "text-xs text-gray-400 pointer-events-none"},
                                        "Conclu√≠do em ", new Date(t.data_conclusao).toLocaleDateString('pt-BR')
                                    )
                                )
                            ),
                            tarefasFiltradas.filter(t => t.coluna_kanban === 'done' || t.status === 'concluida').length === 0 && React.createElement("div", {className: "text-center py-8 text-gray-400"},
                                React.createElement("span", {className: "text-3xl block mb-2"}, "‚úÖ"),
                                React.createElement("p", {className: "text-sm"}, "Nenhuma tarefa conclu√≠da")
                            )
                        )
                    )
                ) :
                
                // LISTA VIEW (original)
                tarefasFiltradas.length === 0 ? 
                    React.createElement("div", {className: "text-center py-12"},
                        React.createElement("span", {className: "text-6xl block mb-4"}, todoViewMode === "meudia" ? "üéâ" : "üìã"),
                        React.createElement("p", {className: "text-gray-500 text-lg"}, 
                            todoViewMode === "meudia" ? "Nenhuma tarefa para hoje! Aproveite seu dia." : "Nenhuma tarefa neste grupo"
                        )
                    ) :
                    React.createElement("div", {className: "grid grid-cols-3 gap-4"},
                        tarefasFiltradas.map(t => {
                            const isAtrasada = t.data_prazo && new Date(t.data_prazo) < hoje && t.status !== "concluida";
                            const isHoje = t.data_prazo && new Date(t.data_prazo).toDateString() === hoje.toDateString();
                            
                            return React.createElement("div", {
                                key: t.id,
                                onClick: () => abrirTodoDetalhe(t),
                                className: "bg-white rounded-xl shadow-md p-4 border-l-4 hover:shadow-lg transition-shadow cursor-pointer " + 
                                    (t.status === "concluida" ? "border-green-500 opacity-75" : 
                                     isAtrasada ? "border-red-500" : 
                                     isHoje ? "border-orange-500" : 
                                     t.prioridade === "alta" ? "border-red-400" : 
                                     t.prioridade === "media" ? "border-yellow-400" : "border-blue-400")
                            },
                                // Header do card
                                React.createElement("div", {className: "flex justify-between items-start mb-2"},
                                    React.createElement("h3", {className: "font-bold text-gray-800 flex-1 " + (t.status === "concluida" ? "line-through text-gray-500" : "")}, t.titulo),
                                    React.createElement("div", {className: "flex gap-1"},
                                        React.createElement("button", {
                                            onClick: (e) => { e.stopPropagation(); abrirEditarTarefa(t); },
                                            className: "p-1 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded"
                                        }, "‚úèÔ∏è"),
                                        React.createElement("button", {
                                            onClick: async (e) => {
                                                e.stopPropagation();
                                                if (confirm("Excluir esta tarefa?")) {
                                                    await fetch(`${API_URL}/todo/tarefas/${t.id}`, {method: "DELETE"});
                                                    if (todoViewMode === "meudia") await loadTodoMeuDia();
                                                    else {
                                                        const tarefas = await loadTodoTarefas(todoGrupoAtivo.id);
                                                        setTodoTarefas(tarefas);
                                                    }
                                                    ja("üóëÔ∏è Tarefa exclu√≠da", "success");
                                                }
                                            },
                                            className: "p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded"
                                        }, "üóëÔ∏è")
                                    )
                                ),
                                
                                // Descri√ß√£o
                                t.descricao && React.createElement("p", {className: "text-sm text-gray-600 mb-3 line-clamp-2"}, t.descricao),
                                
                                // Tags
                                React.createElement("div", {className: "flex flex-wrap gap-1 mb-3"},
                                    React.createElement("span", {
                                        className: "text-xs px-2 py-0.5 rounded-full " + 
                                            (t.prioridade === "alta" ? "bg-red-100 text-red-700" : 
                                             t.prioridade === "media" ? "bg-yellow-100 text-yellow-700" : "bg-blue-100 text-blue-700")
                                    }, t.prioridade === "alta" ? "üî¥ Alta" : t.prioridade === "media" ? "üü° M√©dia" : "üîµ Baixa"),
                                    isAtrasada && React.createElement("span", {className: "text-xs px-2 py-0.5 rounded-full bg-red-100 text-red-700"}, "üî• Atrasada"),
                                    isHoje && !isAtrasada && React.createElement("span", {className: "text-xs px-2 py-0.5 rounded-full bg-orange-100 text-orange-700"}, "üìÖ Hoje"),
                                    // Badge de Recorrente com tipo
                                    t.recorrente && React.createElement("span", {
                                        className: "text-xs px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700"
                                    }, "üîÑ ", 
                                        (t.tipo_recorrencia === "diaria" || t.tipo_recorrencia === "diario") ? "Di√°rio" :
                                        t.tipo_recorrencia === "semanal" ? "Semanal" :
                                        t.tipo_recorrencia === "mensal" ? "Mensal" : 
                                        t.tipo_recorrencia === "personalizado" ? `A cada ${t.intervalo_recorrencia || 1} dias` : "Recorrente"
                                    ),
                                    // Indicador de Subtarefas
                                    t.qtd_subtarefas > 0 && React.createElement("span", {
                                        className: "text-xs px-2 py-0.5 rounded-full " + 
                                            (t.qtd_subtarefas_concluidas === t.qtd_subtarefas ? "bg-green-100 text-green-700" : "bg-purple-100 text-purple-700")
                                    }, "‚òëÔ∏è ", t.qtd_subtarefas_concluidas || 0, "/", t.qtd_subtarefas)
                                ),
                                
                                // Data
                                React.createElement("div", {className: "text-xs text-gray-500"},
                                    t.data_prazo && React.createElement("p", {className: "mb-1"}, "üìÖ ", new Date(t.data_prazo).toLocaleDateString("pt-BR"))
                                ),
                                
                                // Atribu√≠do a - com fotos dos respons√°veis
                                (() => {
                                    try {
                                        let resp = t.responsaveis;
                                        if (typeof resp === 'string') resp = JSON.parse(resp);
                                        if (!Array.isArray(resp) || resp.length === 0) return null;
                                        
                                        return React.createElement("div", {className: "flex items-center gap-2 mt-2 pt-2 border-t border-gray-100"},
                                            React.createElement("span", {className: "text-xs text-gray-500"}, "Atribu√≠do a:"),
                                            React.createElement("div", {className: "flex -space-x-2"},
                                                resp.slice(0, 5).map((r, idx) => {
                                                    const respCod = typeof r === 'string' ? r : (r.cod || r.user_cod);
                                                    const usuario = todoAdmins.find(a => a.cod === respCod || a.nome === respCod);
                                                    const nome = usuario?.nome || (typeof r === 'string' ? r : (r.nome || r.name || '?'));
                                                    
                                                    return usuario?.foto 
                                                        ? React.createElement("img", {
                                                            key: idx,
                                                            src: usuario.foto,
                                                            className: "w-7 h-7 rounded-full object-cover border-2 border-white",
                                                            title: nome
                                                        })
                                                        : React.createElement("div", {
                                                            key: idx,
                                                            className: "w-7 h-7 rounded-full bg-purple-200 flex items-center justify-center text-xs font-bold text-purple-700 border-2 border-white",
                                                            title: nome
                                                        }, nome.charAt(0).toUpperCase());
                                                }),
                                                resp.length > 5 && React.createElement("div", {
                                                    className: "w-7 h-7 rounded-full bg-gray-300 flex items-center justify-center text-xs font-bold text-gray-600 border-2 border-white"
                                                }, "+", resp.length - 5)
                                            )
                                        );
                                    } catch (e) { return null; }
                                })(),
                                
                                // Bot√£o de status
                                React.createElement("div", {className: "mt-3 pt-3 border-t"},
                                    t.status === "concluida" ? 
                                        React.createElement("button", {
                                            onClick: async () => {
                                                await fetch(`${API_URL}/todo/tarefas/${t.id}`, {
                                                    method: "PATCH",
                                                    headers: {"Content-Type": "application/json"},
                                                    body: JSON.stringify({status: "pendente"})
                                                });
                                                if (todoViewMode === "meudia") await loadTodoMeuDia();
                                                else {
                                                    const tarefas = await loadTodoTarefas(todoGrupoAtivo.id);
                                                    setTodoTarefas(tarefas);
                                                }
                                            },
                                            className: "w-full py-2 bg-gray-100 text-gray-600 rounded-lg text-sm font-semibold hover:bg-gray-200"
                                        }, "‚Ü©Ô∏è Reabrir") :
                                        React.createElement("button", {
                                            onClick: async () => {
                                                await fetch(`${API_URL}/todo/tarefas/${t.id}`, {
                                                    method: "PATCH",
                                                    headers: {"Content-Type": "application/json"},
                                                    body: JSON.stringify({status: "concluida"})
                                                });
                                                if (todoViewMode === "meudia") await loadTodoMeuDia();
                                                else {
                                                    const tarefas = await loadTodoTarefas(todoGrupoAtivo.id);
                                                    setTodoTarefas(tarefas);
                                                }
                                                ja("‚úÖ Tarefa conclu√≠da!", "success");
                                            },
                                            className: "w-full py-2 bg-green-500 text-white rounded-lg text-sm font-semibold hover:bg-green-600"
                                        }, "‚úÖ Concluir")
                                )
                            );
                        })
                    ),
                
                // Tabs e M√©tricas (apenas admin_master)
                "admin_master" === l.role && todoTab === "metricas" && todoMetricas && React.createElement("div", {className: "mt-8"},
                    React.createElement("h2", {className: "text-2xl font-bold text-gray-800 mb-6"}, "üìä M√©tricas de Produtividade"),
                    React.createElement("div", {className: "grid grid-cols-4 gap-4"},
                        React.createElement("div", {className: "bg-white rounded-xl shadow p-4"},
                            React.createElement("p", {className: "text-gray-500 text-sm"}, "Total de Tarefas"),
                            React.createElement("p", {className: "text-3xl font-bold text-gray-800"}, todoMetricas.totais?.total || 0)
                        ),
                        React.createElement("div", {className: "bg-white rounded-xl shadow p-4"},
                            React.createElement("p", {className: "text-gray-500 text-sm"}, "Conclu√≠das"),
                            React.createElement("p", {className: "text-3xl font-bold text-green-600"}, todoMetricas.totais?.concluidas || 0)
                        ),
                        React.createElement("div", {className: "bg-white rounded-xl shadow p-4"},
                            React.createElement("p", {className: "text-gray-500 text-sm"}, "No Prazo"),
                            React.createElement("p", {className: "text-3xl font-bold text-blue-600"}, todoMetricas.totais?.no_prazo || 0)
                        ),
                        React.createElement("div", {className: "bg-white rounded-xl shadow p-4"},
                            React.createElement("p", {className: "text-gray-500 text-sm"}, "Vencidas"),
                            React.createElement("p", {className: "text-3xl font-bold text-red-600"}, todoMetricas.totais?.vencidas || 0)
                        )
                    )
                )
                ) // Fecha div de scroll
            ),
            
            // Modal de Novo Grupo
            todoModal?.tipo === "novoGrupo" && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"
            }, React.createElement("div", {
                className: "bg-gradient-to-r from-purple-600 to-indigo-600 p-4 text-white flex justify-between items-center"
            }, React.createElement("h2", {className: "text-xl font-bold"}, "üìÅ Novo Grupo"), React.createElement("button", {
                onClick: () => setTodoModal(null),
                className: "text-white/80 hover:text-white text-xl"
            }, "‚úï")), React.createElement("div", {className: "p-6 space-y-4"},
                React.createElement("div", null,
                    React.createElement("label", {className: "block text-sm font-semibold mb-1"}, "Nome do Grupo *"),
                    React.createElement("input", {
                        type: "text",
                        value: todoModal.nome || "",
                        onChange: e => setTodoModal({...todoModal, nome: e.target.value}),
                        className: "w-full px-3 py-2 border rounded-lg",
                        placeholder: "Ex: Projetos Q1"
                    })
                ),
                React.createElement("div", null,
                    React.createElement("label", {className: "block text-sm font-semibold mb-1"}, "√çcone"),
                    React.createElement("select", {
                        value: todoModal.icone || "üìã",
                        onChange: e => setTodoModal({...todoModal, icone: e.target.value}),
                        className: "w-full px-3 py-2 border rounded-lg bg-white"
                    }, ["üìã", "üìÅ", "üéØ", "üíº", "üöÄ", "‚≠ê", "üî•", "üí°", "üìä", "üõ†Ô∏è"].map(ic => 
                        React.createElement("option", {key: ic, value: ic}, ic)
                    ))
                ),
                React.createElement("div", null,
                    React.createElement("label", {className: "block text-sm font-semibold mb-1"}, "Tipo"),
                    React.createElement("select", {
                        value: todoModal.tipoGrupo || "compartilhado",
                        onChange: e => setTodoModal({...todoModal, tipoGrupo: e.target.value}),
                        className: "w-full px-3 py-2 border rounded-lg bg-white"
                    }, React.createElement("option", {value: "compartilhado"}, "üë• Compartilhado"),
                        React.createElement("option", {value: "pessoal"}, "üîí Pessoal"))
                ),
                React.createElement("div", {className: "flex gap-3 pt-4"},
                    React.createElement("button", {
                        onClick: () => setTodoModal(null),
                        className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold"
                    }, "Cancelar"),
                    React.createElement("button", {
                        onClick: async () => {
                            if (!todoModal.nome?.trim()) {
                                ja("Informe o nome do grupo", "error");
                                return;
                            }
                            await fetch(`${API_URL}/todo/grupos`, {
                                method: "POST",
                                headers: {"Content-Type": "application/json"},
                                body: JSON.stringify({
                                    nome: todoModal.nome,
                                    icone: todoModal.icone || "üìã",
                                    tipo: todoModal.tipoGrupo || "compartilhado",
                                    criado_por: l.fullName
                                })
                            });
                            const grupos = await loadTodoGrupos();
                            setTodoGrupos(grupos);
                            setTodoModal(null);
                            ja("‚úÖ Grupo criado!", "success");
                        },
                        className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                    }, "Criar Grupo")
                )
            ))),
            
            // Modal de Nova/Editar Tarefa
            (todoModal?.tipo === "novaTarefa" || todoModal?.tipo === "editarTarefa") && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col"
            }, React.createElement("div", {
                className: "bg-gradient-to-r from-purple-600 to-indigo-600 p-4 text-white flex justify-between items-center flex-shrink-0"
            }, React.createElement("div", {className: "flex items-center gap-4"},
                    React.createElement("h2", {className: "text-xl font-bold"}, todoModal.tipo === "novaTarefa" ? "üìù Nova Tarefa" : "‚úèÔ∏è Editar Tarefa"),
                    // Info do criador inline no header
                    todoModal.tipo === "novaTarefa" && React.createElement("div", {className: "flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full"},
                        socialProfile?.profile_photo 
                            ? React.createElement("img", {src: socialProfile.profile_photo, className: "w-6 h-6 rounded-full object-cover"})
                            : React.createElement("div", {className: "w-6 h-6 rounded-full bg-white/30 flex items-center justify-center text-white text-xs font-bold"}, 
                                (l.fullName || "?").charAt(0).toUpperCase()
                            ),
                        React.createElement("span", {className: "text-sm"}, l.fullName || l.username)
                    )
                ),
                React.createElement("div", {className: "flex items-center gap-4"},
                    // Toggle de Recorr√™ncia
                    React.createElement("div", {className: "flex items-center gap-2 bg-white/20 px-3 py-1.5 rounded-lg"},
                        React.createElement("span", {className: "text-sm"}, "üîÑ Recorrente"),
                        React.createElement("button", {
                            type: "button",
                            onClick: () => setTodoModal({...todoModal, recorrente: !todoModal.recorrente}),
                            className: `relative w-10 h-5 rounded-full transition-colors ${todoModal.recorrente ? 'bg-green-400' : 'bg-white/30'}`
                        },
                            React.createElement("div", {
                                className: `absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${todoModal.recorrente ? 'translate-x-5' : ''}`
                            })
                        )
                    ),
                    React.createElement("button", {
                        onClick: () => setTodoModal(null),
                        className: "text-white/80 hover:text-white text-xl"
                    }, "‚úï")
                )
            ), 
            
            // Op√ß√µes de Recorr√™ncia (aparece se toggle ativo)
            todoModal.recorrente && React.createElement("div", {className: "px-6 py-2 bg-indigo-50 border-b flex items-center gap-4 flex-wrap"},
                React.createElement("span", {className: "text-sm text-indigo-700 font-medium"}, "‚è∞ Repetir:"),
                ["diaria", "semanal", "mensal", "personalizado"].map(tipo => 
                    React.createElement("button", {
                        key: tipo,
                        type: "button",
                        onClick: () => setTodoModal({...todoModal, tipoRecorrencia: tipo}),
                        className: `px-3 py-1 rounded-lg text-sm font-medium transition-all ${
                            (todoModal.tipoRecorrencia || "diaria") === tipo 
                                ? 'bg-indigo-600 text-white' 
                                : 'bg-white text-gray-600 hover:bg-gray-100'
                        }`
                    }, tipo === "diaria" ? "Di√°rio" : tipo === "semanal" ? "Semanal" : tipo === "mensal" ? "Mensal" : "Personalizado")
                ),
                (todoModal.tipoRecorrencia === "personalizado") && React.createElement("div", {className: "flex items-center gap-2"},
                    React.createElement("span", {className: "text-sm text-gray-600"}, "A cada"),
                    React.createElement("input", {
                        type: "number",
                        min: 1,
                        value: todoModal.intervaloRecorrencia || 1,
                        onChange: e => setTodoModal({...todoModal, intervaloRecorrencia: parseInt(e.target.value) || 1}),
                        className: "w-14 px-2 py-1 border rounded text-sm text-center"
                    }),
                    React.createElement("span", {className: "text-sm text-gray-600"}, "dias")
                )
            ),
            
            // Conte√∫do principal - Layout horizontal em 3 colunas
            React.createElement("div", {className: "p-6 overflow-y-auto flex-1"},
                React.createElement("div", {className: "grid grid-cols-3 gap-6"},
                    
                    // COLUNA 1 - T√≠tulo e Descri√ß√£o
                    React.createElement("div", {className: "space-y-4"},
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "T√≠tulo *"),
                            React.createElement("input", {
                                type: "text",
                                value: todoModal.titulo || todoModal.tarefa?.titulo || "",
                                onChange: e => setTodoModal({...todoModal, titulo: e.target.value}),
                                className: "w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:ring-0 transition-colors",
                                placeholder: "O que precisa ser feito?"
                            })
                        ),
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Descri√ß√£o"),
                            React.createElement("textarea", {
                                value: todoModal.descricao || todoModal.tarefa?.descricao || "",
                                onChange: e => setTodoModal({...todoModal, descricao: e.target.value}),
                                className: "w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:ring-0 transition-colors h-32 resize-none",
                                placeholder: "Detalhes da tarefa..."
                            })
                        ),
                        // Checklist compacto
                        React.createElement("div", {className: "bg-gray-50 rounded-xl p-3"},
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "‚òëÔ∏è Checklist"),
                            (todoModal.checklist || []).length > 0 && React.createElement("div", {className: "space-y-1 mb-2"},
                                (todoModal.checklist || []).map((item, idx) =>
                                    React.createElement("div", {
                                        key: idx,
                                        className: "flex items-center gap-2 bg-white px-2 py-1 rounded text-sm"
                                    },
                                        React.createElement("span", {className: "text-gray-400"}, idx + 1 + "."),
                                        React.createElement("span", {className: "flex-1 text-gray-700"}, item),
                                        React.createElement("button", {
                                            onClick: () => {
                                                const newChecklist = [...(todoModal.checklist || [])];
                                                newChecklist.splice(idx, 1);
                                                setTodoModal({...todoModal, checklist: newChecklist});
                                            },
                                            className: "text-red-400 hover:text-red-600 text-xs"
                                        }, "‚úï")
                                    )
                                )
                            ),
                            React.createElement("div", {className: "flex gap-2"},
                                React.createElement("input", {
                                    type: "text",
                                    id: "novo-checklist-item",
                                    placeholder: "Adicionar item...",
                                    className: "flex-1 px-3 py-2 border rounded-lg text-sm",
                                    onKeyPress: (e) => {
                                        if (e.key === 'Enter' && e.target.value.trim()) {
                                            const newChecklist = [...(todoModal.checklist || []), e.target.value.trim()];
                                            setTodoModal({...todoModal, checklist: newChecklist});
                                            e.target.value = '';
                                        }
                                    }
                                }),
                                React.createElement("button", {
                                    onClick: () => {
                                        const input = document.getElementById('novo-checklist-item');
                                        if (input && input.value.trim()) {
                                            const newChecklist = [...(todoModal.checklist || []), input.value.trim()];
                                            setTodoModal({...todoModal, checklist: newChecklist});
                                            input.value = '';
                                        }
                                    },
                                    className: "px-3 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-semibold hover:bg-purple-200"
                                }, "+")
                            )
                        )
                    ),
                    
                    // COLUNA 2 - Configura√ß√µes (Prioridade, Data, Grupo)
                    React.createElement("div", {className: "space-y-4"},
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Prioridade"),
                            React.createElement("div", {className: "grid grid-cols-3 gap-2"},
                                ["baixa", "media", "alta"].map(p => 
                                    React.createElement("button", {
                                        key: p,
                                        type: "button",
                                        onClick: () => setTodoModal({...todoModal, prioridade: p}),
                                        className: `px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                                            (todoModal.prioridade || todoModal.tarefa?.prioridade || "media") === p 
                                                ? (p === "alta" ? "bg-red-500 text-white" : p === "media" ? "bg-yellow-500 text-white" : "bg-blue-500 text-white")
                                                : "bg-gray-100 text-gray-600 hover:bg-gray-200"
                                        }`
                                    }, p === "baixa" ? "üîµ Baixa" : p === "media" ? "üü° M√©dia" : "üî¥ Alta")
                                )
                            )
                        ),
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üìÖ Data de Vencimento"),
                            React.createElement("input", {
                                type: "date",
                                value: todoModal.dataVencimento || (todoModal.tarefa?.data_vencimento ? todoModal.tarefa.data_vencimento.split("T")[0] : ""),
                                onChange: e => setTodoModal({...todoModal, dataVencimento: e.target.value}),
                                className: "w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500"
                            })
                        ),
                        todoModal.tipo === "novaTarefa" && React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üìÅ Grupo"),
                            React.createElement("select", {
                                value: todoModal.grupoId || todoGrupoAtivo?.id || "",
                                onChange: e => setTodoModal({...todoModal, grupoId: e.target.value}),
                                className: "w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 bg-white"
                            }, React.createElement("option", {value: ""}, "Selecione um grupo..."),
                                // Filtra apenas grupos que o usu√°rio criou ou que s√£o compartilhados
                                todoGrupos
                                    .filter(g => g.criado_por === l.codProfissional || g.tipo === 'compartilhado' || l.role === 'admin_master')
                                    .map(g => React.createElement("option", {key: g.id, value: g.id}, g.icone + " " + g.nome))
                            )
                        )
                    ),
                    
                    // COLUNA 3 - Respons√°veis
                    React.createElement("div", {className: "space-y-3"},
                        React.createElement("label", {className: "block text-sm font-semibold text-gray-700"}, "üë• Atribuir para"),
                        
                        // Usu√°rios selecionados
                        (todoModal.responsaveisSelecionados || []).length > 0 && React.createElement("div", {className: "flex flex-wrap gap-2 p-3 bg-purple-50 rounded-xl"},
                            (todoModal.responsaveisSelecionados || []).map(resp => {
                                const usuario = todoAdmins.find(a => a.cod === resp || a.nome === resp);
                                return React.createElement("div", {
                                    key: resp,
                                    className: "flex items-center gap-2 bg-white text-purple-800 px-3 py-1.5 rounded-full shadow-sm"
                                },
                                    usuario?.foto 
                                        ? React.createElement("img", {src: usuario.foto, className: "w-6 h-6 rounded-full object-cover"})
                                        : React.createElement("div", {className: "w-6 h-6 rounded-full bg-purple-200 flex items-center justify-center text-xs font-bold text-purple-700"}, 
                                            (usuario?.nome || resp).charAt(0).toUpperCase()
                                        ),
                                    React.createElement("span", {className: "text-sm font-medium"}, usuario?.nome || resp),
                                    React.createElement("button", {
                                        onClick: () => {
                                            const novos = (todoModal.responsaveisSelecionados || []).filter(r => r !== resp);
                                            setTodoModal({...todoModal, responsaveisSelecionados: novos});
                                        },
                                        className: "text-purple-400 hover:text-purple-600"
                                    }, "‚úï")
                                );
                            })
                        ),
                        
                        // Lista de usu√°rios dispon√≠veis
                        React.createElement("div", {className: "border-2 border-gray-200 rounded-xl overflow-hidden"},
                            React.createElement("div", {className: "max-h-64 overflow-y-auto"},
                                todoAdmins
                                    .filter(a => !(todoModal.responsaveisSelecionados || []).includes(a.cod) && !(todoModal.responsaveisSelecionados || []).includes(a.nome))
                                    .map(a => React.createElement("div", {
                                        key: a.cod,
                                        className: "flex items-center gap-3 p-3 hover:bg-purple-50 cursor-pointer border-b last:border-b-0 transition-colors",
                                        onClick: () => {
                                            const atuais = todoModal.responsaveisSelecionados || [];
                                            if (!atuais.includes(a.cod)) {
                                                setTodoModal({...todoModal, responsaveisSelecionados: [...atuais, a.cod]});
                                            }
                                        }
                                    },
                                        a.foto 
                                            ? React.createElement("img", {src: a.foto, className: "w-10 h-10 rounded-full object-cover"})
                                            : React.createElement("div", {className: "w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600"}, 
                                                (a.nome || "?").charAt(0).toUpperCase()
                                            ),
                                        React.createElement("div", {className: "flex-1"},
                                            React.createElement("p", {className: "font-medium text-gray-800"}, a.nome),
                                            React.createElement("p", {className: "text-xs text-gray-500"}, a.role === "admin_master" ? "üëë Master" : "üëë Admin")
                                        ),
                                        React.createElement("div", {className: "w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600"}, "+")
                                    ))
                            ),
                            todoAdmins.filter(a => !(todoModal.responsaveisSelecionados || []).includes(a.cod)).length === 0 &&
                                React.createElement("div", {className: "p-4 text-center text-gray-500 text-sm"}, "Todos os usu√°rios j√° foram selecionados")
                        )
                    )
                )
            ),
            
            // Footer com bot√µes
            React.createElement("div", {className: "px-6 py-4 bg-gray-50 border-t flex justify-end gap-3"},
                React.createElement("button", {
                    onClick: () => setTodoModal(null),
                    className: "px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors"
                }, "Cancelar"),
                React.createElement("button", {
                    onClick: async () => {
                        const titulo = todoModal.titulo || todoModal.tarefa?.titulo;
                        if (!titulo?.trim()) {
                            ja("Informe o t√≠tulo", "error");
                            return;
                        }
                        const grupoId = todoModal.grupoId || todoGrupoAtivo?.id || todoModal.tarefa?.grupo_id;
                        if (!grupoId) {
                            ja("Selecione um grupo", "error");
                            return;
                        }
                        
                        // Preparar array de respons√°veis (cod dos usu√°rios)
                        const responsaveisFinais = todoModal.responsaveisSelecionados || [];
                        
                        if (todoModal.tipo === "novaTarefa") {
                            const res = await fetch(`${API_URL}/todo/tarefas`, {
                                method: "POST",
                                headers: {"Content-Type": "application/json"},
                                body: JSON.stringify({
                                    grupo_id: grupoId,
                                    titulo: titulo,
                                    descricao: todoModal.descricao || "",
                                    prioridade: todoModal.prioridade || "media",
                                    data_prazo: todoModal.dataVencimento || null,
                                    responsaveis: responsaveisFinais,
                                    criado_por: l.codProfissional,
                                    criado_por_nome: l.fullName,
                                    criado_por_foto: socialProfile?.profile_photo || null,
                                    recorrente: todoModal.recorrente || false,
                                    tipo_recorrencia: todoModal.recorrente ? (todoModal.tipoRecorrencia || "diaria") : null,
                                    intervalo_recorrencia: todoModal.recorrente ? (todoModal.intervaloRecorrencia || 1) : 1
                                })
                            });
                            const novaTarefa = await res.json();
                            
                            // Criar subtarefas do checklist
                            if (todoModal.checklist && todoModal.checklist.length > 0) {
                                for (let i = 0; i < todoModal.checklist.length; i++) {
                                    await fetch(`${API_URL}/todo/tarefas/${novaTarefa.id}/subtarefas`, {
                                        method: "POST",
                                        headers: {"Content-Type": "application/json"},
                                        body: JSON.stringify({ titulo: todoModal.checklist[i], ordem: i })
                                    });
                                }
                            }
                            
                            ja("‚úÖ Tarefa criada!", "success");
                        } else {
                            await fetch(`${API_URL}/todo/tarefas/${todoModal.tarefa.id}`, {
                                method: "PUT",
                                headers: {"Content-Type": "application/json"},
                                body: JSON.stringify({
                                    titulo: titulo,
                                    descricao: todoModal.descricao ?? todoModal.tarefa.descricao,
                                    prioridade: todoModal.prioridade || todoModal.tarefa.prioridade,
                                    data_prazo: todoModal.dataVencimento || todoModal.tarefa.data_prazo,
                                    responsaveis: responsaveisFinais.length > 0 ? responsaveisFinais : (todoModal.tarefa.responsaveis || []),
                                    user_cod: l.codProfissional,
                                    user_name: l.fullName,
                                    recorrente: todoModal.recorrente || false,
                                    tipo_recorrencia: todoModal.recorrente ? (todoModal.tipoRecorrencia || "diaria") : null,
                                    intervalo_recorrencia: todoModal.recorrente ? (todoModal.intervaloRecorrencia || 1) : 1
                                })
                            });
                            ja("‚úÖ Tarefa atualizada!", "success");
                        }
                        
                        if (todoViewMode === "meudia") await loadTodoMeuDia();
                        else if (todoGrupoAtivo) {
                            const tarefas = await loadTodoTarefas(todoGrupoAtivo.id);
                            setTodoTarefas(tarefas);
                        }
                        setTodoModal(null);
                    },
                    className: "px-8 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg"
                }, todoModal.tipo === "novaTarefa" ? "üìù Criar Tarefa" : "üíæ Salvar Altera√ß√µes")
            )))
            )
        }
        
        // ========== M√ìDULO SOCIAL ==========
        if ("social" === Ee) {
            return React.createElement("div", {
                className: "min-h-screen bg-gradient-to-br from-purple-50 to-pink-50"
            }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null),
            
            // Modal para enviar mensagem/rea√ß√£o
            socialModalUser && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",
                onClick: () => setSocialModalUser(null)
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",
                onClick: e => e.stopPropagation()
            }, React.createElement("div", {
                className: "bg-gradient-to-r from-purple-600 to-pink-600 p-4 text-white"
            }, React.createElement("div", {className: "flex items-center gap-3"},
                socialModalUser.profile_photo ? React.createElement("img", {
                    src: socialModalUser.profile_photo,
                    className: "w-12 h-12 rounded-full object-cover border-2 border-white"
                }) : React.createElement("div", {
                    className: "w-12 h-12 rounded-full bg-white/20 flex items-center justify-center text-xl font-bold"
                }, socialModalUser.display_name?.charAt(0)?.toUpperCase() || "?"),
                React.createElement("div", null,
                    React.createElement("p", {className: "font-bold"}, socialModalUser.display_name),
                    React.createElement("p", {className: "text-sm text-purple-200"}, socialModalUser.is_online ? "üü¢ Online" : "‚ö´ Offline")
                )
            )),
            React.createElement("div", {className: "p-6"},
                React.createElement("p", {className: "text-gray-600 text-sm mb-4 text-center italic"}, 
                    "üíú Pratique a gentileza! Envie uma mensagem positiva ao seu colega."),
                React.createElement("div", {className: "mb-4"},
                    React.createElement("p", {className: "font-semibold text-gray-700 mb-2"}, "Escolha uma rea√ß√£o (opcional):"),
                    React.createElement("div", {className: "flex justify-center gap-3"},
                        ["üíú", "ü•á", "üòä", "üòÅ", "ü§©"].map(emoji => 
                            React.createElement("button", {
                                key: emoji,
                                onClick: () => x({...p, socialSelectedEmoji: p.socialSelectedEmoji === emoji ? null : emoji}),
                                className: "text-3xl transition-transform p-2 rounded-full " + 
                                    (p.socialSelectedEmoji === emoji ? "bg-purple-200 scale-125 ring-2 ring-purple-500" : "hover:scale-110 hover:bg-purple-100")
                            }, emoji)
                        )
                    ),
                    p.socialSelectedEmoji && React.createElement("p", {className: "text-center text-sm text-purple-600 mt-2"}, 
                        "‚úì Rea√ß√£o selecionada: ", p.socialSelectedEmoji)
                ),
                React.createElement("div", null,
                    React.createElement("p", {className: "font-semibold text-gray-700 mb-2"}, "Escreva uma mensagem (opcional):"),
                    React.createElement("textarea", {
                        placeholder: "Escreva uma mensagem gentil...",
                        value: p.socialMsgText || "",
                        onChange: e => x({...p, socialMsgText: e.target.value}),
                        className: "w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-2 focus:ring-purple-500 h-24 resize-none"
                    }),
                    React.createElement("button", {
                        onClick: async () => {
                            const hasEmoji = p.socialSelectedEmoji;
                            const hasText = p.socialMsgText?.trim();
                            
                            if (!hasEmoji && !hasText) {
                                ja("Selecione uma rea√ß√£o ou escreva uma mensagem", "error");
                                return;
                            }
                            
                            // Envia rea√ß√£o se selecionada
                            if (hasEmoji) {
                                await sendSocialMessage(socialModalUser.cod_profissional, "reaction", p.socialSelectedEmoji);
                            }
                            
                            // Envia mensagem de texto se preenchida
                            if (hasText) {
                                await sendSocialMessage(socialModalUser.cod_profissional, "message", p.socialMsgText);
                            }
                            
                            // Limpa os campos
                            x({...p, socialMsgText: "", socialSelectedEmoji: null});
                        },
                        disabled: !p.socialSelectedEmoji && !p.socialMsgText?.trim(),
                        className: "w-full mt-3 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-semibold disabled:opacity-50"
                    }, "üíå Enviar")
                )
            ))),
            
            // Navbar
            React.createElement("nav", {
                className: "bg-gradient-to-r from-purple-700 to-pink-700 shadow-lg"
            }, React.createElement("div", {
                className: "max-w-4xl mx-auto px-4 py-4 flex justify-between items-center"
            }, React.createElement("div", {className: "flex items-center gap-3"},
                socialProfile?.profile_photo ? React.createElement("img", {
                    src: socialProfile.profile_photo,
                    className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
                }) : React.createElement("div", {
                    className: "w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-white font-bold"
                }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
                React.createElement("h1", {className: "text-xl font-bold text-white"}, "üíú Social")
            ),
            React.createElement("div", {className: "flex items-center gap-2"},
                React.createElement("button", {
                    onClick: () => he("home"),
                    className: "px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 text-sm"
                }, "‚Üê Voltar"),
                React.createElement("button", {
                    onClick: () => o(null),
                    className: "px-4 py-2 text-white hover:bg-white/20 rounded-lg"
                }, "Sair")
            ))),
            
            // Tabs
            React.createElement("div", {
                className: "bg-white border-b sticky top-0 z-10"
            }, React.createElement("div", {
                className: "max-w-4xl mx-auto flex overflow-x-auto"
            },
                React.createElement("button", {
                    onClick: () => setSocialTab("perfil"),
                    className: "flex-1 py-4 text-center font-semibold whitespace-nowrap px-2 " + (socialTab === "perfil" ? "text-purple-600 border-b-2 border-purple-600" : "text-gray-500")
                }, "üë§ Perfil"),
                React.createElement("button", {
                    onClick: () => { setSocialTab("comunidade"); loadSocialUsers(); },
                    className: "flex-1 py-4 text-center font-semibold whitespace-nowrap px-2 " + (socialTab === "comunidade" ? "text-purple-600 border-b-2 border-purple-600" : "text-gray-500")
                }, "üë• Comunidade"),
                React.createElement("button", {
                    onClick: () => { setSocialTab("mensagens"); loadSocialMessages(); markMessagesAsRead(); },
                    className: "flex-1 py-4 text-center font-semibold relative whitespace-nowrap px-2 " + (socialTab === "mensagens" ? "text-purple-600 border-b-2 border-purple-600" : "text-gray-500")
                }, "üíå Mensagens", socialUnread > 0 && React.createElement("span", {
                    className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"
                }, socialUnread > 9 ? "9+" : socialUnread)),
                // Aba Mensagens da Lideran√ßa (para todos admins verem o hist√≥rico)
                ["admin", "admin_master", "admin_financeiro"].includes(l.role) && React.createElement("button", {
                    onClick: () => { setSocialTab("lideranca_historico"); loadLiderancaHistorico(); },
                    className: "flex-1 py-4 text-center font-semibold whitespace-nowrap px-2 relative " + (socialTab === "lideranca_historico" ? "text-purple-600 border-b-2 border-purple-600" : "text-gray-500")
                }, "üì¢ Lideran√ßa", liderancaPendentes.length > 0 && React.createElement("span", {
                    className: "absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"
                }, liderancaPendentes.length)),
                // Aba Gerenciar (apenas admin_master)
                l.role === "admin_master" && React.createElement("button", {
                    onClick: () => { setSocialTab("lideranca_gerenciar"); loadLiderancaMensagens(); },
                    className: "flex-1 py-4 text-center font-semibold whitespace-nowrap px-2 " + (socialTab === "lideranca_gerenciar" ? "text-purple-600 border-b-2 border-purple-600" : "text-gray-500")
                }, "‚öôÔ∏è Gerenciar")
            )),
            
            React.createElement("div", {className: "max-w-4xl mx-auto p-4"},
                // Aba Perfil
                socialTab === "perfil" && React.createElement("div", {className: "bg-white rounded-2xl shadow-lg p-6"},
                    React.createElement("h2", {className: "text-xl font-bold text-gray-800 mb-6 text-center"}, "‚ú® Editar Meu Perfil"),
                    React.createElement("div", {className: "flex flex-col items-center mb-6"},
                        React.createElement("div", {className: "relative"},
                            p.socialPhotoPreview || socialProfile?.profile_photo ? 
                                React.createElement("img", {
                                    src: p.socialPhotoPreview || socialProfile?.profile_photo,
                                    className: "w-32 h-32 rounded-full object-cover border-4 border-purple-200"
                                }) : 
                                React.createElement("div", {
                                    className: "w-32 h-32 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-4xl font-bold border-4 border-purple-200"
                                }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
                            React.createElement("label", {
                                className: "absolute bottom-0 right-0 bg-purple-600 text-white p-2 rounded-full cursor-pointer hover:bg-purple-700 shadow-lg"
                            }, "üì∑", React.createElement("input", {
                                type: "file",
                                accept: "image/*",
                                className: "hidden",
                                onChange: e => {
                                    const file = e.target.files[0];
                                    if (file) handlePhotoEditorOpen(file);
                                    e.target.value = '';
                                }
                            }))
                        ),
                        React.createElement("p", {className: "text-sm text-gray-500 mt-2"}, "üì∑ Clique para alterar (m√°x. 10MB)")
                    ),
                    React.createElement("div", {className: "mb-4"},
                        React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Nome de Exibi√ß√£o"),
                        React.createElement("input", {
                            type: "text",
                            value: p.socialDisplayName !== undefined ? p.socialDisplayName : (socialProfile?.display_name || l.fullName || ""),
                            onChange: e => x({...p, socialDisplayName: e.target.value}),
                            className: "w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-2 focus:ring-purple-500",
                            placeholder: "Como voc√™ quer ser chamado?"
                        })
                    ),
                    React.createElement("button", {
                        onClick: async () => {
                            const displayName = p.socialDisplayName !== undefined ? p.socialDisplayName : (socialProfile?.display_name || l.fullName);
                            const photo = p.socialPhotoPreview || socialProfile?.profile_photo;
                            await saveSocialProfile(displayName, photo);
                            x({...p, socialPhotoPreview: undefined, socialDisplayName: undefined});
                        },
                        disabled: socialLoading,
                        className: "w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-bold text-lg disabled:opacity-50"
                    }, socialLoading ? "Salvando..." : "üíæ Salvar Perfil")
                ),
                
                // Aba Comunidade
                socialTab === "comunidade" && React.createElement("div", null,
                    React.createElement("div", {className: "mb-4 text-center"},
                        React.createElement("p", {className: "text-gray-600"}, "üë• ", socialUsers.filter(u => u.role === "admin" || u.role === "admin_master" || u.role === "admin_financeiro").length, " admins | üü¢ ", socialUsers.filter(u => u.is_online && (u.role === "admin" || u.role === "admin_master" || u.role === "admin_financeiro")).length, " online")
                    ),
                    React.createElement("div", {className: "grid gap-3"},
                        socialUsers.filter(u => u.cod_profissional !== l.codProfissional && (u.role === "admin" || u.role === "admin_master" || u.role === "admin_financeiro")).map(user => 
                            React.createElement("div", {
                                key: user.cod_profissional,
                                className: "bg-white rounded-xl shadow p-4 flex items-center justify-between hover:shadow-lg transition-shadow"
                            },
                                React.createElement("div", {className: "flex items-center gap-3"},
                                    React.createElement("div", {className: "relative"},
                                        user.profile_photo ? 
                                            React.createElement("img", {
                                                src: user.profile_photo,
                                                className: "w-12 h-12 rounded-full object-cover"
                                            }) : 
                                            React.createElement("div", {
                                                className: "w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold"
                                            }, user.display_name?.charAt(0)?.toUpperCase() || "?"),
                                        React.createElement("span", {
                                            className: "absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white " + (user.is_online ? "bg-green-500" : "bg-gray-400")
                                        })
                                    ),
                                    React.createElement("div", null,
                                        React.createElement("p", {className: "font-semibold text-gray-800"}, user.display_name),
                                        React.createElement("p", {className: "text-xs text-gray-500"}, user.is_online ? "üü¢ Online agora" : 
                                            user.last_seen ? "Visto: " + new Date(user.last_seen).toLocaleString("pt-BR") : "Offline")
                                    )
                                ),
                                React.createElement("button", {
                                    onClick: () => setSocialModalUser(user),
                                    className: "px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600"
                                }, "üíú Interagir")
                            )
                        )
                    )
                ),
                
                // Aba Mensagens
                socialTab === "mensagens" && React.createElement("div", null,
                    socialMessages.length === 0 ? 
                        React.createElement("div", {className: "bg-white rounded-2xl shadow-lg p-8 text-center"},
                            React.createElement("span", {className: "text-6xl block mb-4"}, "üíå"),
                            React.createElement("p", {className: "text-gray-500"}, "Nenhuma mensagem ainda"),
                            React.createElement("p", {className: "text-sm text-gray-400 mt-2"}, "Quando algu√©m enviar uma mensagem ou rea√ß√£o, aparecer√° aqui!")
                        ) :
                        React.createElement("div", {className: "space-y-3"},
                            socialMessages.map(msg => 
                                React.createElement("div", {
                                    key: msg.id,
                                    className: "bg-white rounded-xl shadow p-4 " + (!msg.is_read ? "border-l-4 border-purple-500" : "")
                                },
                                    React.createElement("div", {className: "flex items-start gap-3"},
                                        React.createElement("div", {
                                            className: "w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold flex-shrink-0"
                                        }, msg.from_user_name?.charAt(0)?.toUpperCase() || "?"),
                                        React.createElement("div", {className: "flex-1"},
                                            React.createElement("div", {className: "flex items-center justify-between"},
                                                React.createElement("p", {className: "font-semibold text-gray-800"}, msg.from_user_name),
                                                React.createElement("p", {className: "text-xs text-gray-400"}, new Date(msg.created_at).toLocaleString("pt-BR"))
                                            ),
                                            msg.message_type === "reaction" ?
                                                React.createElement("p", {className: "text-4xl mt-2"}, msg.content) :
                                                React.createElement("p", {className: "text-gray-600 mt-1 bg-purple-50 p-3 rounded-lg"}, msg.content)
                                        )
                                    )
                                )
                            )
                        )
                ),
                
                // ========== ABA MENSAGENS DA LIDERAN√áA (HIST√ìRICO) ==========
                socialTab === "lideranca_historico" && React.createElement("div", null,
                    React.createElement("div", {className: "bg-gradient-to-r from-orange-500 to-amber-500 rounded-2xl p-4 mb-4 text-white"},
                        React.createElement("h2", {className: "text-xl font-bold flex items-center gap-2"}, "üì¢ Mensagens da Lideran√ßa"),
                        React.createElement("p", {className: "text-sm text-orange-100 mt-1"}, "Comunicados importantes para a equipe")
                    ),
                    liderancaHistorico.length === 0 ?
                        React.createElement("div", {className: "bg-white rounded-2xl shadow-lg p-8 text-center"},
                            React.createElement("span", {className: "text-6xl block mb-4"}, "üì≠"),
                            React.createElement("p", {className: "text-gray-500"}, "Nenhuma mensagem visualizada ainda"),
                            React.createElement("p", {className: "text-sm text-gray-400 mt-2"}, "Quando voc√™ visualizar uma mensagem da lideran√ßa, ela aparecer√° aqui")
                        ) :
                        React.createElement("div", {className: "space-y-4"},
                            liderancaHistorico.map(msg => 
                                React.createElement("div", {
                                    key: msg.id,
                                    className: "bg-white rounded-xl shadow-lg overflow-hidden"
                                },
                                    React.createElement("div", {className: "bg-gradient-to-r from-orange-100 to-amber-100 p-4 border-b"},
                                        React.createElement("div", {className: "flex items-center gap-3"},
                                            msg.criado_por_foto ? 
                                                React.createElement("img", {src: msg.criado_por_foto, className: "w-12 h-12 rounded-full object-cover border-2 border-orange-300"}) :
                                                React.createElement("div", {className: "w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-amber-400 flex items-center justify-center text-white font-bold text-lg"}, 
                                                    msg.criado_por_nome?.charAt(0)?.toUpperCase() || "?"
                                                ),
                                            React.createElement("div", {className: "flex-1"},
                                                React.createElement("p", {className: "font-bold text-gray-800"}, msg.titulo),
                                                React.createElement("p", {className: "text-sm text-gray-600"}, "Por: ", msg.criado_por_nome)
                                            ),
                                            React.createElement("div", {className: "text-right text-xs text-gray-500"},
                                                React.createElement("p", null, "Criada: ", new Date(msg.created_at).toLocaleDateString("pt-BR")),
                                                React.createElement("p", null, "Visualizada: ", new Date(msg.visualizado_em).toLocaleDateString("pt-BR"))
                                            )
                                        )
                                    ),
                                    React.createElement("div", {className: "p-4"},
                                        React.createElement("div", {
                                            className: "prose prose-sm max-w-none text-gray-700",
                                            dangerouslySetInnerHTML: {__html: msg.conteudo?.replace(/\n/g, '<br>') || ''}
                                        }),
                                        msg.midia_url && msg.midia_tipo === 'video' && React.createElement("div", {className: "mt-4"},
                                            msg.midia_url.includes('youtube') || msg.midia_url.includes('youtu.be') ?
                                                React.createElement("iframe", {
                                                    src: msg.midia_url.replace('watch?v=', 'embed/').replace('youtu.be/', 'youtube.com/embed/'),
                                                    className: "w-full aspect-video rounded-lg",
                                                    allowFullScreen: true
                                                }) :
                                                React.createElement("video", {src: msg.midia_url, controls: true, className: "w-full rounded-lg"})
                                        ),
                                        msg.midia_url && msg.midia_tipo === 'imagem' && React.createElement("img", {
                                            src: msg.midia_url,
                                            onClick: () => setLiderancaImagemExpandida(msg.midia_url),
                                            className: "mt-4 w-full rounded-lg max-h-96 object-contain cursor-pointer hover:opacity-90 transition-opacity",
                                            title: "Clique para expandir"
                                        }),
                                        msg.midia_url && msg.midia_tipo === 'audio' && React.createElement("audio", {
                                            src: msg.midia_url,
                                            controls: true,
                                            className: "mt-4 w-full"
                                        }),
                                        msg.recorrente && React.createElement("div", {className: "mt-3 flex items-center gap-2 text-xs text-orange-600 bg-orange-50 px-3 py-1 rounded-full w-fit"},
                                            React.createElement("span", null, "üîÑ"),
                                            React.createElement("span", null, "Recorrente: ", msg.tipo_recorrencia)
                                        )
                                    ),
                                    // Rodap√© com visualiza√ß√µes e rea√ß√µes
                                    React.createElement("div", {className: "px-4 py-3 bg-gray-50 border-t flex items-center justify-between"},
                                        // Fotos dos usu√°rios que visualizaram
                                        React.createElement("div", {className: "flex items-center gap-2"},
                                            React.createElement("span", {className: "text-xs text-gray-500 mr-1"}, "üëÅÔ∏è Visto por:"),
                                            React.createElement("div", {className: "flex -space-x-2"},
                                                (liderancaVizPorMsg[msg.id] || []).slice(0, 8).map((viz, idx) => 
                                                    viz.user_foto ?
                                                        React.createElement("img", {
                                                            key: idx,
                                                            src: viz.user_foto,
                                                            title: viz.user_nome,
                                                            className: "w-7 h-7 rounded-full border-2 border-white object-cover hover:scale-110 transition-transform cursor-pointer"
                                                        }) :
                                                        React.createElement("div", {
                                                            key: idx,
                                                            title: viz.user_nome,
                                                            className: "w-7 h-7 rounded-full border-2 border-white bg-gradient-to-br from-orange-400 to-amber-400 flex items-center justify-center text-white text-xs font-bold hover:scale-110 transition-transform cursor-pointer"
                                                        }, viz.user_nome?.charAt(0)?.toUpperCase() || "?")
                                                ),
                                                (liderancaVizPorMsg[msg.id] || []).length > 8 && React.createElement("div", {
                                                    className: "w-7 h-7 rounded-full border-2 border-white bg-gray-400 flex items-center justify-center text-white text-xs font-bold"
                                                }, "+", (liderancaVizPorMsg[msg.id] || []).length - 8)
                                            )
                                        ),
                                        // Rea√ß√µes
                                        React.createElement("div", {className: "flex items-center gap-1"},
                                            (liderancaReacoes[msg.id] || []).length > 0 && React.createElement("div", {className: "flex items-center gap-1 mr-2 bg-white px-2 py-1 rounded-full shadow-sm"},
                                                [...new Set((liderancaReacoes[msg.id] || []).map(r => r.emoji))].map((emoji, idx) => 
                                                    React.createElement("span", {key: idx, className: "text-sm", title: (liderancaReacoes[msg.id] || []).filter(r => r.emoji === emoji).map(r => r.user_nome).join(', ')}, emoji)
                                                ),
                                                React.createElement("span", {className: "text-xs text-gray-500 ml-1"}, (liderancaReacoes[msg.id] || []).length)
                                            ),
                                            // Bot√µes de rea√ß√£o
                                            ["‚úÖ", "üî•", "üéâ", "üíú", "üòç"].map(emoji => 
                                                React.createElement("button", {
                                                    key: emoji,
                                                    onClick: () => enviarReacaoLideranca(msg.id, emoji),
                                                    className: "text-lg hover:scale-125 transition-transform hover:bg-gray-200 rounded-full p-1"
                                                }, emoji)
                                            )
                                        )
                                    )
                                )
                            )
                        )
                ),
                
                // ========== ABA GERENCIAR MENSAGENS (ADMIN_MASTER) ==========
                socialTab === "lideranca_gerenciar" && l.role === "admin_master" && React.createElement("div", null,
                    React.createElement("div", {className: "bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-4 mb-4 text-white flex justify-between items-center"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-xl font-bold flex items-center gap-2"}, "‚öôÔ∏è Gerenciar Mensagens"),
                            React.createElement("p", {className: "text-sm text-purple-200 mt-1"}, "Crie e gerencie comunicados para a equipe")
                        ),
                        React.createElement("button", {
                            onClick: () => setLiderancaModal({tipo: 'criar', dados: {}}),
                            className: "px-4 py-2 bg-white text-purple-600 rounded-xl font-bold hover:bg-purple-50 flex items-center gap-2"
                        }, "‚ûï Nova Mensagem")
                    ),
                    liderancaMensagens.length === 0 ?
                        React.createElement("div", {className: "bg-white rounded-2xl shadow-lg p-8 text-center"},
                            React.createElement("span", {className: "text-6xl block mb-4"}, "üìù"),
                            React.createElement("p", {className: "text-gray-500"}, "Nenhuma mensagem criada ainda"),
                            React.createElement("button", {
                                onClick: () => setLiderancaModal({tipo: 'criar', dados: {}}),
                                className: "mt-4 px-6 py-3 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700"
                            }, "‚ûï Criar Primeira Mensagem")
                        ) :
                        React.createElement("div", {className: "space-y-4"},
                            liderancaMensagens.map(msg => 
                                React.createElement("div", {
                                    key: msg.id,
                                    className: "bg-white rounded-xl shadow-lg overflow-hidden"
                                },
                                    React.createElement("div", {className: "p-4 border-b flex items-center justify-between"},
                                        React.createElement("div", {className: "flex items-center gap-3"},
                                            msg.criado_por_foto ? 
                                                React.createElement("img", {src: msg.criado_por_foto, className: "w-10 h-10 rounded-full object-cover"}) :
                                                React.createElement("div", {className: "w-10 h-10 rounded-full bg-purple-200 flex items-center justify-center font-bold text-purple-700"}, 
                                                    msg.criado_por_nome?.charAt(0)?.toUpperCase() || "?"
                                                ),
                                            React.createElement("div", null,
                                                React.createElement("p", {className: "font-bold text-gray-800"}, msg.titulo),
                                                React.createElement("p", {className: "text-xs text-gray-500"}, "Criada em ", new Date(msg.created_at).toLocaleString("pt-BR"))
                                            )
                                        ),
                                        React.createElement("div", {className: "flex items-center gap-2"},
                                            React.createElement("span", {
                                                className: "px-3 py-1 rounded-full text-xs font-semibold " + (msg.ativo ? "bg-green-100 text-green-700" : "bg-gray-100 text-gray-500")
                                            }, msg.ativo ? "‚úì Ativo" : "Inativo"),
                                            msg.recorrente && React.createElement("span", {className: "px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700"}, "üîÑ ", msg.tipo_recorrencia)
                                        )
                                    ),
                                    React.createElement("div", {className: "p-4 bg-gray-50"},
                                        React.createElement("p", {className: "text-sm text-gray-600 line-clamp-2"}, msg.conteudo?.substring(0, 150), msg.conteudo?.length > 150 ? "..." : "")
                                    ),
                                    React.createElement("div", {className: "p-4 flex justify-between items-center border-t"},
                                        React.createElement("button", {
                                            onClick: async () => { await loadVisualizacoes(msg.id); setLiderancaModal({tipo: 'visualizacoes', dados: msg}); },
                                            className: "text-sm text-purple-600 hover:underline flex items-center gap-1"
                                        }, "üëÅÔ∏è ", msg.total_visualizacoes || 0, " visualiza√ß√£o(√µes)"),
                                        React.createElement("div", {className: "flex gap-2"},
                                            React.createElement("button", {
                                                onClick: () => setLiderancaModal({tipo: 'editar', dados: msg}),
                                                className: "px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm hover:bg-blue-200"
                                            }, "‚úèÔ∏è Editar"),
                                            React.createElement("button", {
                                                onClick: () => deletarLiderancaMensagem(msg.id),
                                                className: "px-3 py-1 bg-red-100 text-red-700 rounded-lg text-sm hover:bg-red-200"
                                            }, "üóëÔ∏è Excluir")
                                        )
                                    )
                                )
                            )
                        )
                ),
                
                // ========== MODAL CRIAR/EDITAR MENSAGEM DA LIDERAN√áA ==========
                (liderancaModal?.tipo === 'criar' || liderancaModal?.tipo === 'editar') && React.createElement("div", {
                    className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",
                    onClick: () => setLiderancaModal(null)
                },
                    React.createElement("div", {
                        className: "bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",
                        onClick: e => e.stopPropagation()
                    },
                        React.createElement("div", {className: "bg-gradient-to-r from-purple-600 to-indigo-600 p-4 text-white sticky top-0"},
                            React.createElement("h2", {className: "text-xl font-bold"}, liderancaModal?.tipo === 'criar' ? "‚ûï Nova Mensagem" : "‚úèÔ∏è Editar Mensagem"),
                            React.createElement("p", {className: "text-sm text-purple-200"}, "Crie um comunicado para todos os admins")
                        ),
                        React.createElement("div", {className: "p-6 space-y-4"},
                            // T√≠tulo
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üìù T√≠tulo"),
                                React.createElement("input", {
                                    type: "text",
                                    value: liderancaModal?.dados?.titulo || '',
                                    onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, titulo: e.target.value}}),
                                    className: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500",
                                    placeholder: "T√≠tulo da mensagem..."
                                })
                            ),
                            // Conte√∫do
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üí¨ Conte√∫do"),
                                React.createElement("textarea", {
                                    value: liderancaModal?.dados?.conteudo || '',
                                    onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, conteudo: e.target.value}}),
                                    className: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 h-40 resize-none",
                                    placeholder: "Digite o conte√∫do da mensagem...\n\nVoc√™ pode usar quebras de linha para formatar."
                                }),
                                React.createElement("p", {className: "text-xs text-gray-500 mt-1"}, "üí° Use Enter para quebrar linhas. A formata√ß√£o ser√° preservada.")
                            ),
                            // M√≠dia
                            React.createElement("div", {className: "bg-gray-50 rounded-xl p-4"},
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "üìé M√≠dia (opcional)"),
                                React.createElement("div", {className: "flex gap-2 mb-3 flex-wrap"},
                                    React.createElement("button", {
                                        onClick: () => { limparLiderancaMidia(); setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, midia_tipo: 'video', midia_url: ''}}); },
                                        className: "px-3 py-2 rounded-lg text-sm " + (liderancaModal?.dados?.midia_tipo === 'video' ? "bg-purple-600 text-white" : "bg-gray-200 text-gray-700")
                                    }, "üé¨ V√≠deo"),
                                    React.createElement("button", {
                                        onClick: () => { limparLiderancaMidia(); setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, midia_tipo: 'imagem', midia_url: ''}}); },
                                        className: "px-3 py-2 rounded-lg text-sm " + (liderancaModal?.dados?.midia_tipo === 'imagem' ? "bg-purple-600 text-white" : "bg-gray-200 text-gray-700")
                                    }, "üñºÔ∏è Imagem"),
                                    React.createElement("button", {
                                        onClick: () => { limparLiderancaMidia(); setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, midia_tipo: 'audio', midia_url: ''}}); },
                                        className: "px-3 py-2 rounded-lg text-sm " + (liderancaModal?.dados?.midia_tipo === 'audio' ? "bg-purple-600 text-white" : "bg-gray-200 text-gray-700")
                                    }, "üéµ √Åudio"),
                                    liderancaModal?.dados?.midia_tipo && React.createElement("button", {
                                        onClick: limparLiderancaMidia,
                                        className: "px-3 py-2 rounded-lg text-sm bg-red-100 text-red-600 hover:bg-red-200"
                                    }, "‚úï Limpar")
                                ),
                                
                                // V√≠deo - Input de URL
                                liderancaModal?.dados?.midia_tipo === 'video' && React.createElement("div", null,
                                    React.createElement("input", {
                                        type: "text",
                                        value: liderancaModal?.dados?.midia_url || '',
                                        onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, midia_url: e.target.value}}),
                                        className: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500",
                                        placeholder: "Cole o link do YouTube ou URL do v√≠deo..."
                                    }),
                                    React.createElement("p", {className: "text-xs text-gray-500 mt-2"}, "üí° Links do YouTube ser√£o reproduzidos automaticamente!")
                                ),
                                
                                // Imagem - Upload ou URL
                                liderancaModal?.dados?.midia_tipo === 'imagem' && React.createElement("div", {className: "space-y-3"},
                                    React.createElement("div", {className: "flex gap-2"},
                                        React.createElement("label", {
                                            className: "flex-1 py-3 bg-purple-100 text-purple-700 rounded-xl font-semibold text-center cursor-pointer hover:bg-purple-200 transition-colors"
                                        },
                                            "üì§ Fazer Upload",
                                            React.createElement("input", {
                                                type: "file",
                                                accept: "image/*",
                                                className: "hidden",
                                                onChange: e => handleLiderancaImagemUpload(e.target.files[0])
                                            })
                                        )
                                    ),
                                    React.createElement("div", {className: "flex items-center gap-2"},
                                        React.createElement("div", {className: "flex-1 h-px bg-gray-300"}),
                                        React.createElement("span", {className: "text-xs text-gray-500"}, "ou cole uma URL"),
                                        React.createElement("div", {className: "flex-1 h-px bg-gray-300"})
                                    ),
                                    React.createElement("input", {
                                        type: "text",
                                        value: !liderancaModal?.dados?.midia_url?.startsWith('data:') ? (liderancaModal?.dados?.midia_url || '') : '',
                                        onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, midia_url: e.target.value}}),
                                        className: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500",
                                        placeholder: "Cole a URL da imagem..."
                                    }),
                                    // Preview da imagem
                                    (liderancaImagemPreview || liderancaModal?.dados?.midia_url) && React.createElement("div", {className: "mt-3"},
                                        React.createElement("p", {className: "text-xs text-gray-500 mb-2"}, "üì∑ Preview:"),
                                        React.createElement("img", {
                                            src: liderancaImagemPreview || liderancaModal?.dados?.midia_url,
                                            className: "max-h-48 rounded-lg border object-contain"
                                        })
                                    )
                                ),
                                
                                // √Åudio - Grava√ß√£o ou URL
                                liderancaModal?.dados?.midia_tipo === 'audio' && React.createElement("div", {className: "space-y-3"},
                                    // Bot√µes de grava√ß√£o
                                    React.createElement("div", {className: "flex gap-2"},
                                        !liderancaGravando ? 
                                            React.createElement("button", {
                                                onClick: iniciarGravacaoAudio,
                                                className: "flex-1 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 flex items-center justify-center gap-2"
                                            }, "üéôÔ∏è Iniciar Grava√ß√£o") :
                                            React.createElement("button", {
                                                onClick: pararGravacaoAudio,
                                                className: "flex-1 py-3 bg-gray-800 text-white rounded-xl font-semibold hover:bg-gray-900 flex items-center justify-center gap-2 animate-pulse"
                                            }, "‚èπÔ∏è Parar Grava√ß√£o")
                                    ),
                                    liderancaGravando && React.createElement("div", {className: "flex items-center justify-center gap-2 text-red-600"},
                                        React.createElement("span", {className: "w-3 h-3 bg-red-600 rounded-full animate-pulse"}),
                                        React.createElement("span", {className: "text-sm font-medium"}, "Gravando...")
                                    ),
                                    React.createElement("div", {className: "flex items-center gap-2"},
                                        React.createElement("div", {className: "flex-1 h-px bg-gray-300"}),
                                        React.createElement("span", {className: "text-xs text-gray-500"}, "ou cole uma URL"),
                                        React.createElement("div", {className: "flex-1 h-px bg-gray-300"})
                                    ),
                                    React.createElement("input", {
                                        type: "text",
                                        value: !liderancaModal?.dados?.midia_url?.startsWith('data:') ? (liderancaModal?.dados?.midia_url || '') : '',
                                        onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, midia_url: e.target.value}}),
                                        className: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500",
                                        placeholder: "Cole a URL do √°udio..."
                                    }),
                                    // Preview do √°udio
                                    (liderancaAudioPreview || liderancaModal?.dados?.midia_url) && React.createElement("div", {className: "mt-3"},
                                        React.createElement("p", {className: "text-xs text-gray-500 mb-2"}, "üéµ Preview:"),
                                        React.createElement("audio", {
                                            src: liderancaAudioPreview || liderancaModal?.dados?.midia_url,
                                            controls: true,
                                            className: "w-full"
                                        })
                                    )
                                )
                            ),
                            // Recorr√™ncia
                            React.createElement("div", {className: "bg-orange-50 rounded-xl p-4"},
                                React.createElement("div", {className: "flex items-center gap-3 mb-3"},
                                    React.createElement("input", {
                                        type: "checkbox",
                                        id: "recorrente",
                                        checked: liderancaModal?.dados?.recorrente || false,
                                        onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, recorrente: e.target.checked}}),
                                        className: "w-5 h-5 text-orange-600 rounded"
                                    }),
                                    React.createElement("label", {htmlFor: "recorrente", className: "font-semibold text-gray-700"}, "üîÑ Mensagem Recorrente")
                                ),
                                liderancaModal?.dados?.recorrente && React.createElement("div", {className: "grid grid-cols-2 gap-3"},
                                    React.createElement("div", null,
                                        React.createElement("label", {className: "block text-xs text-gray-600 mb-1"}, "Tipo"),
                                        React.createElement("select", {
                                            value: liderancaModal?.dados?.tipo_recorrencia || 'diaria',
                                            onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, tipo_recorrencia: e.target.value}}),
                                            className: "w-full px-3 py-2 border rounded-lg"
                                        },
                                            React.createElement("option", {value: "diaria"}, "Di√°ria"),
                                            React.createElement("option", {value: "semanal"}, "Semanal"),
                                            React.createElement("option", {value: "mensal"}, "Mensal")
                                        )
                                    ),
                                    React.createElement("div", null,
                                        React.createElement("label", {className: "block text-xs text-gray-600 mb-1"}, "Intervalo"),
                                        React.createElement("input", {
                                            type: "number",
                                            min: "1",
                                            value: liderancaModal?.dados?.intervalo_recorrencia || 1,
                                            onChange: e => setLiderancaModal({...liderancaModal, dados: {...liderancaModal.dados, intervalo_recorrencia: parseInt(e.target.value) || 1}}),
                                            className: "w-full px-3 py-2 border rounded-lg"
                                        })
                                    )
                                ),
                                liderancaModal?.dados?.recorrente && React.createElement("p", {className: "text-xs text-orange-600 mt-2"}, 
                                    "üìÖ A mensagem ser√° reexibida a cada ", liderancaModal?.dados?.intervalo_recorrencia || 1, " ",
                                    liderancaModal?.dados?.tipo_recorrencia === 'diaria' ? 'dia(s)' : 
                                    liderancaModal?.dados?.tipo_recorrencia === 'semanal' ? 'semana(s)' : 'm√™s(es)'
                                )
                            ),
                            // Bot√µes
                            React.createElement("div", {className: "flex gap-3 pt-4"},
                                React.createElement("button", {
                                    onClick: () => setLiderancaModal(null),
                                    className: "flex-1 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50"
                                }, "Cancelar"),
                                React.createElement("button", {
                                    onClick: async () => {
                                        if (!liderancaModal?.dados?.titulo?.trim()) {
                                            ja("Informe o t√≠tulo", "error");
                                            return;
                                        }
                                        if (!liderancaModal?.dados?.conteudo?.trim()) {
                                            ja("Informe o conte√∫do", "error");
                                            return;
                                        }
                                        if (liderancaModal.tipo === 'criar') {
                                            await criarLiderancaMensagem(liderancaModal.dados);
                                        } else {
                                            // Editar
                                            try {
                                                const res = await fetch(`${API_URL}/lideranca/mensagens/${liderancaModal.dados.id}`, {
                                                    method: "PUT",
                                                    headers: {"Content-Type": "application/json"},
                                                    body: JSON.stringify(liderancaModal.dados)
                                                });
                                                if (res.ok) {
                                                    ja("‚úÖ Mensagem atualizada!", "success");
                                                    setLiderancaModal(null);
                                                    await loadLiderancaMensagens();
                                                }
                                            } catch (err) {
                                                ja("Erro ao atualizar", "error");
                                            }
                                        }
                                    },
                                    className: "flex-1 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-semibold hover:opacity-90"
                                }, liderancaModal?.tipo === 'criar' ? "üì¢ Publicar Mensagem" : "üíæ Salvar Altera√ß√µes")
                            )
                        )
                    )
                ),
                
                // ========== MODAL NOTIFICA√á√ÉO DE MENSAGEM ==========
                liderancaModal?.tipo === 'notificacao' && React.createElement("div", {
                    className: "fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4"
                },
                    React.createElement("div", {
                        className: "bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-bounce-in"
                    },
                        React.createElement("div", {className: "bg-gradient-to-r from-orange-500 to-amber-500 p-6 text-white text-center"},
                            React.createElement("div", {className: "text-5xl mb-2"}, "üì¢"),
                            React.createElement("h2", {className: "text-2xl font-bold"}, "Mensagem da Lideran√ßa"),
                            liderancaModal?.fila?.length > 1 && React.createElement("p", {className: "text-sm text-orange-100 mt-1"}, 
                                "1 de ", liderancaModal.fila.length, " mensagens"
                            )
                        ),
                        React.createElement("div", {className: "p-6"},
                            // Autor
                            React.createElement("div", {className: "flex items-center gap-3 mb-4 pb-4 border-b"},
                                liderancaModal?.dados?.criado_por_foto ?
                                    React.createElement("img", {src: liderancaModal.dados.criado_por_foto, className: "w-14 h-14 rounded-full object-cover border-2 border-orange-300"}) :
                                    React.createElement("div", {className: "w-14 h-14 rounded-full bg-gradient-to-br from-orange-400 to-amber-400 flex items-center justify-center text-white font-bold text-xl"}, 
                                        liderancaModal?.dados?.criado_por_nome?.charAt(0)?.toUpperCase() || "?"
                                    ),
                                React.createElement("div", null,
                                    React.createElement("p", {className: "font-bold text-lg text-gray-800"}, liderancaModal?.dados?.criado_por_nome),
                                    React.createElement("p", {className: "text-sm text-gray-500"}, new Date(liderancaModal?.dados?.created_at).toLocaleString("pt-BR"))
                                )
                            ),
                            // T√≠tulo
                            React.createElement("h3", {className: "text-xl font-bold text-gray-800 mb-3"}, liderancaModal?.dados?.titulo),
                            // Conte√∫do
                            React.createElement("div", {
                                className: "text-gray-700 whitespace-pre-wrap mb-4",
                                dangerouslySetInnerHTML: {__html: liderancaModal?.dados?.conteudo?.replace(/\n/g, '<br>') || ''}
                            }),
                            // M√≠dia
                            liderancaModal?.dados?.midia_url && liderancaModal?.dados?.midia_tipo === 'video' && React.createElement("div", {className: "mb-4"},
                                (liderancaModal.dados.midia_url.includes('youtube') || liderancaModal.dados.midia_url.includes('youtu.be')) ?
                                    React.createElement("iframe", {
                                        src: liderancaModal.dados.midia_url.replace('watch?v=', 'embed/').replace('youtu.be/', 'youtube.com/embed/'),
                                        className: "w-full aspect-video rounded-lg",
                                        allowFullScreen: true
                                    }) :
                                    React.createElement("video", {src: liderancaModal.dados.midia_url, controls: true, className: "w-full rounded-lg"})
                            ),
                            liderancaModal?.dados?.midia_url && liderancaModal?.dados?.midia_tipo === 'imagem' && React.createElement("img", {
                                src: liderancaModal.dados.midia_url,
                                onClick: () => setLiderancaImagemExpandida(liderancaModal.dados.midia_url),
                                className: "mb-4 w-full rounded-lg max-h-64 object-contain cursor-pointer hover:opacity-90 transition-opacity",
                                title: "Clique para expandir"
                            }),
                            liderancaModal?.dados?.midia_url && liderancaModal?.dados?.midia_tipo === 'audio' && React.createElement("audio", {
                                src: liderancaModal.dados.midia_url,
                                controls: true,
                                className: "mb-4 w-full"
                            }),
                            // Emojis de rea√ß√£o
                            React.createElement("div", {className: "mb-4"},
                                React.createElement("p", {className: "text-sm text-gray-600 mb-2 text-center"}, "Deixe sua rea√ß√£o:"),
                                React.createElement("div", {className: "flex justify-center gap-2"},
                                    ["‚úÖ", "üî•", "üéâ", "üíú", "üòç"].map(emoji => 
                                        React.createElement("button", {
                                            key: emoji,
                                            onClick: async () => {
                                                await enviarReacaoLideranca(liderancaModal.dados.id, emoji);
                                                ja(`${emoji} Rea√ß√£o enviada!`, "success");
                                            },
                                            className: "text-3xl hover:scale-125 transition-transform hover:bg-orange-100 rounded-full p-2"
                                        }, emoji)
                                    )
                                )
                            ),
                            // Bot√£o
                            React.createElement("button", {
                                onClick: async () => {
                                    await marcarLiderancaVisualizada(liderancaModal.dados.id);
                                    const filaRestante = liderancaModal.fila?.slice(1) || [];
                                    if (filaRestante.length > 0) {
                                        setLiderancaModal({tipo: 'notificacao', dados: filaRestante[0], fila: filaRestante});
                                    } else {
                                        setLiderancaModal(null);
                                        await loadLiderancaHistorico();
                                    }
                                },
                                className: "w-full py-4 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl font-bold text-lg hover:opacity-90"
                            }, liderancaModal?.fila?.length > 1 ? "‚úì Entendido - Pr√≥xima" : "‚úì Entendido")
                        )
                    )
                ),
                
                // ========== MODAL IMAGEM EXPANDIDA ==========
                liderancaImagemExpandida && React.createElement("div", {
                    className: "fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4 cursor-pointer",
                    onClick: () => setLiderancaImagemExpandida(null)
                },
                    React.createElement("button", {
                        onClick: () => setLiderancaImagemExpandida(null),
                        className: "absolute top-4 right-4 text-white text-4xl hover:text-gray-300 z-10"
                    }, "‚úï"),
                    React.createElement("img", {
                        src: liderancaImagemExpandida,
                        className: "max-w-full max-h-full object-contain rounded-lg shadow-2xl",
                        onClick: e => e.stopPropagation()
                    }),
                    React.createElement("p", {
                        className: "absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white/70 text-sm"
                    }, "Clique fora da imagem ou no ‚úï para fechar")
                ),
                
                // ========== MODAL VISUALIZA√á√ïES ==========
                liderancaModal?.tipo === 'visualizacoes' && React.createElement("div", {
                    className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",
                    onClick: () => setLiderancaModal(null)
                },
                    React.createElement("div", {
                        className: "bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] overflow-hidden",
                        onClick: e => e.stopPropagation()
                    },
                        React.createElement("div", {className: "bg-gradient-to-r from-purple-600 to-indigo-600 p-4 text-white"},
                            React.createElement("h2", {className: "text-lg font-bold"}, "üëÅÔ∏è Visualiza√ß√µes"),
                            React.createElement("p", {className: "text-sm text-purple-200"}, liderancaModal?.dados?.titulo)
                        ),
                        React.createElement("div", {className: "p-4 max-h-[60vh] overflow-y-auto"},
                            liderancaVisualizacoes.length === 0 ?
                                React.createElement("p", {className: "text-center text-gray-500 py-8"}, "Ningu√©m visualizou ainda") :
                                React.createElement("div", {className: "space-y-3"},
                                    liderancaVisualizacoes.map(v => 
                                        React.createElement("div", {key: v.id, className: "flex items-center gap-3 p-3 bg-gray-50 rounded-xl"},
                                            v.user_foto ?
                                                React.createElement("img", {src: v.user_foto, className: "w-10 h-10 rounded-full object-cover"}) :
                                                React.createElement("div", {className: "w-10 h-10 rounded-full bg-purple-200 flex items-center justify-center font-bold text-purple-700"}, 
                                                    v.user_nome?.charAt(0)?.toUpperCase() || "?"
                                                ),
                                            React.createElement("div", {className: "flex-1"},
                                                React.createElement("p", {className: "font-semibold text-gray-800"}, v.user_nome),
                                                React.createElement("p", {className: "text-xs text-gray-500"}, new Date(v.visualizado_em).toLocaleString("pt-BR"))
                                            ),
                                            React.createElement("span", {className: "text-green-500"}, "‚úì")
                                        )
                                    )
                                )
                        ),
                        React.createElement("div", {className: "p-4 border-t"},
                            React.createElement("button", {
                                onClick: () => setLiderancaModal(null),
                                className: "w-full py-2 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200"
                            }, "Fechar")
                        )
                    )
                ),
                
                // Modal do Editor de Foto de Perfil (dentro do m√≥dulo Social)
                photoEditorOpen && React.createElement("div", {
                    className: "fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4",
                    style: { zIndex: 10001 },
                    onClick: () => setPhotoEditorOpen(false)
                },
                    React.createElement("div", {
                        className: "bg-white rounded-3xl shadow-2xl w-full max-w-md p-6",
                        onClick: (e) => e.stopPropagation()
                    },
                        React.createElement("h3", {className: "text-xl font-bold text-gray-800 mb-4 text-center"}, "‚úÇÔ∏è Ajustar Foto de Perfil"),
                        React.createElement("p", {className: "text-sm text-gray-500 mb-4 text-center"}, "Arraste para posicionar e use o zoom para ajustar"),
                        
                        // √Årea de preview circular
                        React.createElement("div", {
                            className: "relative mx-auto mb-4",
                            style: {
                                width: '256px',
                                height: '256px',
                                overflow: 'hidden',
                                borderRadius: '50%',
                                border: '4px solid #7c3aed',
                                background: '#f3f4f6',
                                cursor: photoEditorDragging ? 'grabbing' : 'grab',
                                touchAction: 'none'
                            },
                            onMouseDown: handlePhotoEditorMouseDown,
                            onMouseMove: handlePhotoEditorMouseMove,
                            onMouseUp: handlePhotoEditorMouseUp,
                            onMouseLeave: handlePhotoEditorMouseUp,
                            onTouchStart: handlePhotoEditorMouseDown,
                            onTouchMove: handlePhotoEditorMouseMove,
                            onTouchEnd: handlePhotoEditorMouseUp
                        },
                            photoEditorSrc && React.createElement("img", {
                                src: photoEditorSrc,
                                style: {
                                    position: 'absolute',
                                    left: '50%',
                                    top: '50%',
                                    transform: `translate(calc(-50% + ${photoEditorPosition.x}px), calc(-50% + ${photoEditorPosition.y}px)) scale(${photoEditorZoom})`,
                                    minWidth: '100%',
                                    minHeight: '100%',
                                    objectFit: 'cover',
                                    pointerEvents: 'none',
                                    userSelect: 'none'
                                },
                                draggable: false
                            })
                        ),
                        
                        // Controle de Zoom
                        React.createElement("div", {className: "mb-6"},
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2 text-center"}, 
                                "üîç Zoom: ", Math.round(photoEditorZoom * 100), "%"
                            ),
                            React.createElement("input", {
                                type: "range",
                                min: "1",
                                max: "3",
                                step: "0.1",
                                value: photoEditorZoom,
                                onChange: e => {
                                    const newZoom = parseFloat(e.target.value);
                                    setPhotoEditorZoom(newZoom);
                                    const maxMove = 128 * (newZoom - 1);
                                    setPhotoEditorPosition({
                                        x: Math.max(-maxMove, Math.min(maxMove, photoEditorPosition.x)),
                                        y: Math.max(-maxMove, Math.min(maxMove, photoEditorPosition.y))
                                    });
                                },
                                className: "w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer accent-purple-600"
                            })
                        ),
                        
                        // Bot√µes
                        React.createElement("div", {className: "flex gap-3"},
                            React.createElement("button", {
                                onClick: () => setPhotoEditorOpen(false),
                                className: "flex-1 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50"
                            }, "Cancelar"),
                            React.createElement("button", {
                                onClick: handlePhotoEditorSave,
                                className: "flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-semibold hover:opacity-90"
                            }, "‚úÖ Aplicar")
                        )
                    )
                )
            ))
        }
        // ========== M√ìDULO OPERACIONAL / ATIVA√á√ÉO ==========
        // Verificar permiss√£o para Operacional (admin comum)
        const canAccessOperacional = hasModuleAccess(l, "operacional");
        if (canAccessOperacional && "operacional" === Ee) {
            return React.createElement("div", {
                className: "min-h-screen bg-gray-50"
            }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null),
            React.createElement("nav", {
                className: "bg-gradient-to-r from-teal-700 to-teal-900 shadow-lg"
            }, 
            // Primeira linha - Logo e usu√°rio
            React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 pt-3 pb-2 flex justify-between items-center border-b border-white/10"
            }, React.createElement("div", {
                className: "flex items-center gap-3"
            }, 
            socialProfile?.profile_photo ? React.createElement("img", {
                src: socialProfile.profile_photo,
                className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
            }) : React.createElement("div", {
                className: "w-10 h-10 rounded-full bg-teal-600 flex items-center justify-center text-white font-bold border-2 border-white/50"
            }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
            React.createElement("div", null, 
                React.createElement("h1", {className: "text-lg font-bold text-white"}, "‚öôÔ∏è Operacional"),
                React.createElement("p", {className: "text-xs text-teal-200"}, socialProfile?.display_name || l.fullName)
            )), 
            React.createElement("div", {className: "flex items-center gap-3"},
                React.createElement("button", {onClick: ul, className: "px-3 py-1.5 bg-white/20 text-white rounded-lg hover:bg-white/30 text-sm font-semibold"}, "üîÑ"),
                React.createElement("button", {onClick: function() { o(null); }, className: "px-3 py-1.5 text-white hover:bg-white/20 rounded-lg text-sm"}, "Sair")
            )),
            // Segunda linha - Navega√ß√£o
            React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 py-2"
            }, React.createElement("div", {
                className: "flex flex-wrap gap-1"
            },
                React.createElement("button", {
                    onClick: function() { he("home"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üè† In√≠cio"),
                hasModuleAccess(l, "solicitacoes") && React.createElement("button", {
                    onClick: function() { he("solicitacoes"); x(e => ({...e, adminTab: "dashboard"})); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìã Solicita√ß√µes"),
                hasModuleAccess(l, "financeiro") && React.createElement("button", {
                    onClick: function() { he("financeiro"); x(e => ({...e, finTab: getFirstAllowedTab(l, "financeiro", "home-fin")})); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üí∞ Financeiro"),
                hasModuleAccess(l, "disponibilidade") && React.createElement("button", {
                    onClick: function() { he("solicitacoes"); x(e => ({...e, adminTab: "disponibilidade"})); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìÖ Disponibilidade"),
                hasModuleAccess(l, "bi") && React.createElement("button", {
                    onClick: function() { he("bi"); ll(); tl(); al(); pl(); carregarPrazosProf(); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìä BI"),
                hasModuleAccess(l, "todo") && React.createElement("button", {
                    onClick: function() { he("todo"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìù TO-DO"),
                React.createElement("button", {
                    onClick: function() { he("social"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üíú Social"),
                React.createElement("button", {
                    onClick: function() { he("operacional"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all bg-white text-teal-800"
                }, "‚öôÔ∏è Operacional"),
                hasModuleAccess(l, "config") && React.createElement("button", {
                    onClick: function() { he("config"); x(e => ({...e, configTab: getFirstAllowedTab(l, "config", "usuarios")})); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üîß Config")
            ))),
            // Abas do Operacional
            React.createElement("div", {className: "bg-white border-b sticky top-0 z-10"},
                React.createElement("div", {className: "max-w-7xl mx-auto px-4 flex gap-1 overflow-x-auto"},
                    // Aba Indica√ß√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_indicacoes"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "indicacoes"})); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + ((p.opTab || "indicacoes") === "indicacoes" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "üë• Indica√ß√£o"),
                    // Aba Promo Novatos
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_promo-novatos"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "promo-novatos"})); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.opTab === "promo-novatos" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "üöÄ Promo Novato"),
                    // Aba Avisos - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_avisos"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "avisos"})); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.opTab === "avisos" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "üì¢ Avisos"),
                    // Aba Novas Opera√ß√µes - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_novas-operacoes"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "novas-operacoes"})); carregarOperacoes(); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.opTab === "novas-operacoes" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "üè¢ Novas Opera√ß√µes"),
                    // Aba Recrutamento - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_recrutamento"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "recrutamento"})); carregarRecrutamento(); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.opTab === "recrutamento" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "üèçÔ∏è Recrutamento"),
                    // Aba Localiza√ß√£o Clientes - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_localizacao-clientes"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "localizacao-clientes"})); carregarLocalizacaoClientes(); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.opTab === "localizacao-clientes" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "üìç Localiza√ß√£o Clientes"),
                    // Aba Relat√≥rio Di√°rio - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_relatorio-diario"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "relatorio-diario"})); carregarRelatoriosDiarios(); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.opTab === "relatorio-diario" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "üìù Relat√≥rio Di√°rio"),
                    // Bot√£o Score Prof
                    (() => {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["operacional_scoreprof"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x(e => ({...e, opTab: "score-prof"})); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.opTab === "score-prof" ? "text-teal-700 border-b-2 border-teal-600 bg-teal-50" : "text-gray-600 hover:bg-gray-100")
                    }, "‚≠ê Score Prof")
                )
            ),
            // Conte√∫do das abas
            React.createElement("div", {className: "max-w-7xl mx-auto p-6"},
                // Conte√∫do Indica√ß√£o
                (p.opTab || "indicacoes") === "indicacoes" && React.createElement("div", {className: "bg-teal-50 border border-teal-200 rounded-xl p-8 text-center"},
                    React.createElement("span", {className: "text-5xl mb-4 block"}, "üë•"),
                    React.createElement("h2", {className: "text-xl font-bold text-teal-800 mb-2"}, "Gest√£o de Indica√ß√µes"),
                    React.createElement("p", {className: "text-teal-600 mb-4"}, "Para gerenciar indica√ß√µes, acesse o m√≥dulo Financeiro na aba correspondente."),
                    React.createElement("button", {
                        onClick: () => { he("financeiro"); x({finTab: "indicacoes"}); },
                        className: "px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700"
                    }, "Ir para Indica√ß√µes ‚Üí")
                ),
                // Conte√∫do Promo Novatos
                p.opTab === "promo-novatos" && React.createElement("div", {className: "bg-teal-50 border border-teal-200 rounded-xl p-8 text-center"},
                    React.createElement("span", {className: "text-5xl mb-4 block"}, "üöÄ"),
                    React.createElement("h2", {className: "text-xl font-bold text-teal-800 mb-2"}, "Promo√ß√£o Novatos"),
                    React.createElement("p", {className: "text-teal-600 mb-4"}, "Para gerenciar promo√ß√µes de novatos, acesse o m√≥dulo Financeiro na aba correspondente."),
                    React.createElement("button", {
                        onClick: () => { he("financeiro"); x({finTab: "promo-novatos"}); },
                        className: "px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700"
                    }, "Ir para Promo Novatos ‚Üí")
                ),
                // Conte√∫do Avisos
                p.opTab === "avisos" && React.createElement("div", {className: "space-y-6"},
                    // Header
                    React.createElement("div", {className: "flex justify-between items-center"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-2xl font-bold text-gray-800"}, "üì¢ Gest√£o de Avisos"),
                            React.createElement("p", {className: "text-gray-600"}, "Crie avisos que aparecer√£o para os usu√°rios por regi√£o")
                        ),
                        React.createElement("button", {
                            onClick: () => { setAvisoEdit(null); setAvisoForm({ titulo: '', regioes: [], todas_regioes: false, data_inicio: '', data_fim: '', recorrencia_tipo: 'uma_vez', recorrencia_intervalo: 24, imagem_url: '' }); setAvisoModal(true); },
                            className: "px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 flex items-center gap-2"
                        }, "‚ûï Novo Aviso")
                    ),
                    // Lista de avisos
                    React.createElement("div", {className: "grid gap-4"},
                        (!avisosData || avisosData.length === 0) ? React.createElement("div", {className: "bg-white rounded-xl p-8 text-center shadow"},
                            React.createElement("span", {className: "text-5xl block mb-4"}, "üì≠"),
                            React.createElement("p", {className: "text-gray-500"}, "Nenhum aviso cadastrado"),
                            React.createElement("p", {className: "text-sm text-gray-400"}, "Clique em \"Novo Aviso\" para criar o primeiro")
                        ) : (Array.isArray(avisosData) ? avisosData : []).map(aviso => React.createElement("div", {
                            key: aviso.id,
                            className: "bg-white rounded-xl shadow-lg overflow-hidden " + (aviso.ativo ? "border-l-4 border-teal-500" : "border-l-4 border-gray-300 opacity-60")
                        },
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "flex justify-between items-start"},
                                    React.createElement("div", {className: "flex-1"},
                                        React.createElement("div", {className: "flex items-center gap-3 mb-2"},
                                            React.createElement("h3", {className: "text-lg font-bold text-gray-800"}, aviso.titulo),
                                            React.createElement("span", {className: "px-2 py-0.5 rounded-full text-xs font-semibold " + (aviso.ativo ? "bg-green-100 text-green-700" : "bg-gray-100 text-gray-600")}, aviso.ativo ? "Ativo" : "Inativo")
                                        ),
                                        React.createElement("div", {className: "flex flex-wrap gap-2 mb-3"},
                                            aviso.todas_regioes ? React.createElement("span", {className: "px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs"}, "üåé Todas as Regi√µes") :
                                            aviso.regioes?.map((r, i) => React.createElement("span", {key: i, className: "px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs"}, "üìç ", r))
                                        ),
                                        React.createElement("div", {className: "flex flex-wrap gap-4 text-sm text-gray-600"},
                                            React.createElement("span", null, "üìÖ ", new Date(aviso.data_inicio).toLocaleDateString("pt-BR"), " - ", new Date(aviso.data_fim).toLocaleDateString("pt-BR")),
                                            React.createElement("span", null, "üîÑ ", aviso.recorrencia_tipo === "uma_vez" ? "Uma vez" : aviso.recorrencia_tipo === "diario" ? "Di√°rio" : `A cada ${aviso.recorrencia_intervalo}h`),
                                            React.createElement("span", null, "üëÅÔ∏è ", aviso.total_visualizacoes || 0, " visualiza√ß√µes")
                                        )
                                    ),
                                    aviso.imagem_url && React.createElement("img", {
                                        src: aviso.imagem_url,
                                        className: "w-24 h-24 object-cover rounded-lg ml-4"
                                    })
                                ),
                                React.createElement("div", {className: "flex gap-2 mt-4 pt-4 border-t"},
                                    React.createElement("button", {
                                        onClick: () => { setAvisoEdit(aviso); setAvisoForm({ titulo: aviso.titulo, regioes: aviso.regioes || [], todas_regioes: aviso.todas_regioes, data_inicio: aviso.data_inicio?.slice(0,16), data_fim: aviso.data_fim?.slice(0,16), recorrencia_tipo: aviso.recorrencia_tipo, recorrencia_intervalo: aviso.recorrencia_intervalo, imagem_url: aviso.imagem_url }); setAvisoModal(true); },
                                        className: "px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-semibold hover:bg-blue-200"
                                    }, "‚úèÔ∏è Editar"),
                                    React.createElement("button", {
                                        onClick: async () => { await fetch(`${API_URL}/avisos-op/${aviso.id}`, { method: 'PUT', headers: {'Content-Type':'application/json'}, body: JSON.stringify({...aviso, ativo: !aviso.ativo})}); carregarAvisos(); },
                                        className: "px-4 py-2 rounded-lg font-semibold " + (aviso.ativo ? "bg-yellow-100 text-yellow-700 hover:bg-yellow-200" : "bg-green-100 text-green-700 hover:bg-green-200")
                                    }, aviso.ativo ? "‚è∏Ô∏è Desativar" : "‚ñ∂Ô∏è Ativar"),
                                    React.createElement("button", {
                                        onClick: () => deletarAviso(aviso.id),
                                        className: "px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold hover:bg-red-200"
                                    }, "üóëÔ∏è Excluir")
                                )
                            )
                        ))
                    )
                )
            ),
            // Modal de criar/editar aviso
            avisoModal && React.createElement("div", {className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},
                React.createElement("div", {className: "bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[95vh] overflow-y-auto"},
                    React.createElement("div", {className: "bg-gradient-to-r from-teal-600 to-teal-700 p-6 text-white"},
                        React.createElement("h2", {className: "text-xl font-bold"}, avisoEdit ? "‚úèÔ∏è Editar Aviso" : "‚ûï Novo Aviso"),
                        React.createElement("p", {className: "text-teal-100 text-sm"}, "Configure o aviso que ser√° exibido aos usu√°rios")
                    ),
                    React.createElement("div", {className: "p-6 space-y-6"},
                        // T√≠tulo
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "T√≠tulo do Aviso *"),
                            React.createElement("input", {
                                type: "text",
                                value: avisoForm.titulo,
                                onChange: e => setAvisoForm(f => ({...f, titulo: e.target.value})),
                                placeholder: "Ex: Manuten√ß√£o programada",
                                className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                            })
                        ),
                        // Regi√µes
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "Regi√µes *"),
                            React.createElement("label", {className: "flex items-center gap-2 mb-3 cursor-pointer"},
                                React.createElement("input", {
                                    type: "checkbox",
                                    checked: avisoForm.todas_regioes,
                                    onChange: e => setAvisoForm(f => ({...f, todas_regioes: e.target.checked, regioes: []})),
                                    className: "w-5 h-5 rounded text-teal-600"
                                }),
                                React.createElement("span", {className: "text-gray-700"}, "üåé Todas as regi√µes")
                            ),
                            !avisoForm.todas_regioes && React.createElement("div", {className: "max-h-64 overflow-y-auto border rounded-xl p-3 space-y-2 grid grid-cols-2 md:grid-cols-3 gap-2"},
                                avisosRegioes.map(regiao => React.createElement("label", {
                                    key: regiao,
                                    className: "flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded"
                                },
                                    React.createElement("input", {
                                        type: "checkbox",
                                        checked: avisoForm.regioes.includes(regiao),
                                        onChange: e => {
                                            if (e.target.checked) {
                                                setAvisoForm(f => ({...f, regioes: [...f.regioes, regiao]}));
                                            } else {
                                                setAvisoForm(f => ({...f, regioes: f.regioes.filter(r => r !== regiao)}));
                                            }
                                        },
                                        className: "w-4 h-4 rounded text-teal-600"
                                    }),
                                    React.createElement("span", {className: "text-gray-700"}, regiao)
                                ))
                            )
                        ),
                        // Per√≠odo
                        React.createElement("div", {className: "grid grid-cols-2 gap-4"},
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "Data/Hora In√≠cio *"),
                                React.createElement("input", {
                                    type: "datetime-local",
                                    value: avisoForm.data_inicio,
                                    onChange: e => setAvisoForm(f => ({...f, data_inicio: e.target.value})),
                                    className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "Data/Hora Fim *"),
                                React.createElement("input", {
                                    type: "datetime-local",
                                    value: avisoForm.data_fim,
                                    onChange: e => setAvisoForm(f => ({...f, data_fim: e.target.value})),
                                    className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                })
                            )
                        ),
                        // Recorr√™ncia
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "Recorr√™ncia"),
                            React.createElement("select", {
                                value: avisoForm.recorrencia_tipo,
                                onChange: e => setAvisoForm(f => ({...f, recorrencia_tipo: e.target.value})),
                                className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                            },
                                React.createElement("option", {value: "uma_vez"}, "Exibir apenas uma vez por usu√°rio"),
                                React.createElement("option", {value: "diario"}, "Exibir uma vez por dia"),
                                React.createElement("option", {value: "intervalo_horas"}, "Exibir a cada X horas")
                            ),
                            avisoForm.recorrencia_tipo === "intervalo_horas" && React.createElement("div", {className: "mt-3"},
                                React.createElement("label", {className: "block text-sm text-gray-600 mb-1"}, "Intervalo em horas"),
                                React.createElement("input", {
                                    type: "number",
                                    min: "1",
                                    value: avisoForm.recorrencia_intervalo,
                                    onChange: e => setAvisoForm(f => ({...f, recorrencia_intervalo: parseInt(e.target.value) || 1})),
                                    className: "w-32 px-4 py-2 border rounded-xl"
                                })
                            )
                        ),
                        // Upload de imagem
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, "Imagem do Aviso"),
                            React.createElement("div", {className: "border-2 border-dashed rounded-xl p-6 text-center"},
                                avisoForm.imagem_url ? React.createElement("div", {className: "space-y-3"},
                                    React.createElement("img", {
                                        src: avisoForm.imagem_url,
                                        className: "max-h-48 mx-auto rounded-lg"
                                    }),
                                    React.createElement("button", {
                                        onClick: () => setAvisoForm(f => ({...f, imagem_url: ''})),
                                        className: "text-red-600 text-sm hover:underline"
                                    }, "üóëÔ∏è Remover imagem")
                                ) : React.createElement("div", null,
                                    React.createElement("span", {className: "text-4xl block mb-2"}, "üì∑"),
                                    React.createElement("p", {className: "text-gray-500 mb-3"}, "Arraste uma imagem ou clique para selecionar"),
                                    React.createElement("input", {
                                        type: "file",
                                        accept: "image/*",
                                        onChange: handleAvisoImageUpload,
                                        className: "hidden",
                                        id: "aviso-img-upload"
                                    }),
                                    React.createElement("label", {
                                        htmlFor: "aviso-img-upload",
                                        className: "px-4 py-2 bg-teal-100 text-teal-700 rounded-lg cursor-pointer hover:bg-teal-200"
                                    }, "Selecionar Imagem")
                                )
                            )
                        )
                    ),
                    // Bot√µes
                    React.createElement("div", {className: "flex gap-3 p-6 border-t bg-gray-50"},
                        React.createElement("button", {
                            onClick: () => { setAvisoModal(false); setAvisoEdit(null); },
                            className: "flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300"
                        }, "Cancelar"),
                        React.createElement("button", {
                            onClick: salvarAviso,
                            disabled: !avisoForm.titulo || !avisoForm.data_inicio || !avisoForm.data_fim || (!avisoForm.todas_regioes && avisoForm.regioes.length === 0),
                            className: "flex-1 px-4 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed"
                        }, avisoEdit ? "üíæ Salvar Altera√ß√µes" : "‚ûï Criar Aviso")
                    )
                )
            ),
            // ==================== CONTE√öDO NOVAS OPERA√á√ïES ====================
            p.opTab === "novas-operacoes" && React.createElement("div", {className: "max-w-7xl mx-auto p-6"},
                React.createElement("div", {className: "space-y-6"},
                    // Header
                    React.createElement("div", {className: "flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-2xl font-bold text-gray-800"}, "üè¢ Novas Opera√ß√µes"),
                            React.createElement("p", {className: "text-gray-600"}, "Cadastre e gerencie opera√ß√µes de entrega")
                        ),
                        React.createElement("button", {
                        onClick: () => { 
                            setOperacaoEdit(null); 
                            setOperacaoForm({
                                regiao: '',
                                nome_cliente: '',
                                endereco: '',
                                modelo: 'nuvem',
                                quantidade_motos: 1,
                                obrigatoriedade_bau: false,
                                possui_garantido: false,
                                valor_garantido: '',
                                data_inicio: '',
                                observacoes: '',
                                faixas_km: [
                                    { km_inicio: 1, km_fim: 10, valor_motoboy: '' },
                                    { km_inicio: 11, km_fim: 15, valor_motoboy: '' },
                                    { km_inicio: 16, km_fim: 20, valor_motoboy: '' },
                                    { km_inicio: 21, km_fim: 25, valor_motoboy: '' },
                                    { km_inicio: 26, km_fim: 30, valor_motoboy: '' },
                                    { km_inicio: 31, km_fim: 35, valor_motoboy: '' },
                                    { km_inicio: 36, km_fim: 40, valor_motoboy: '' },
                                    { km_inicio: 41, km_fim: 45, valor_motoboy: '' },
                                    { km_inicio: 46, km_fim: 50, valor_motoboy: '' },
                                    { km_inicio: 51, km_fim: 60, valor_motoboy: '' }
                                ]
                            }); 
                            setOperacaoModal(true); 
                        },
                        className: "px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 flex items-center gap-2 shadow-lg"
                    }, "‚ûï Nova Opera√ß√£o")
                ),
                
                // Cards de estat√≠sticas
                React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-4"},
                    React.createElement("div", {className: "bg-white rounded-xl p-4 shadow border-l-4 border-teal-500"},
                        React.createElement("p", {className: "text-sm text-gray-500"}, "Total"),
                        React.createElement("p", {className: "text-2xl font-bold text-teal-600"}, operacoesData?.length || 0)
                    ),
                    React.createElement("div", {className: "bg-white rounded-xl p-4 shadow border-l-4 border-orange-500"},
                        React.createElement("p", {className: "text-sm text-gray-500"}, "Em Execu√ß√£o"),
                        React.createElement("p", {className: "text-2xl font-bold text-orange-600"}, operacoesData?.filter(o => o.status !== 'concluido').length || 0)
                    ),
                    React.createElement("div", {className: "bg-white rounded-xl p-4 shadow border-l-4 border-green-500"},
                        React.createElement("p", {className: "text-sm text-gray-500"}, "Conclu√≠das"),
                        React.createElement("p", {className: "text-2xl font-bold text-green-600"}, operacoesData?.filter(o => o.status === 'concluido').length || 0)
                    ),
                    React.createElement("div", {className: "bg-white rounded-xl p-4 shadow border-l-4 border-blue-500"},
                        React.createElement("p", {className: "text-sm text-gray-500"}, "Motos Totais"),
                        React.createElement("p", {className: "text-2xl font-bold text-blue-600"}, operacoesData?.reduce((acc, o) => acc + (o.quantidade_motos || 0), 0) || 0)
                    )
                ),
                
                // Sub-abas: Em Execu√ß√£o / Conclu√≠das
                React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                    // Tabs
                    React.createElement("div", {className: "flex border-b"},
                        React.createElement("button", {
                            onClick: () => setOperacaoSubTab('execucao'),
                            className: "flex-1 px-6 py-4 text-center font-semibold transition-all " + 
                                (operacaoSubTab === 'execucao' ? 'bg-orange-50 text-orange-700 border-b-2 border-orange-500' : 'text-gray-500 hover:bg-gray-50')
                        }, "üöÄ Em Execu√ß√£o (", operacoesData?.filter(o => o.status !== 'concluido').length || 0, ")"),
                        React.createElement("button", {
                            onClick: () => setOperacaoSubTab('concluidas'),
                            className: "flex-1 px-6 py-4 text-center font-semibold transition-all " + 
                                (operacaoSubTab === 'concluidas' ? 'bg-green-50 text-green-700 border-b-2 border-green-500' : 'text-gray-500 hover:bg-gray-50')
                        }, "‚úÖ Conclu√≠das (", operacoesData?.filter(o => o.status === 'concluido').length || 0, ")")
                    ),
                    
                    // Lista de opera√ß√µes filtrada
                    (function() {
                        const operacoesFiltradas = operacaoSubTab === 'execucao' 
                            ? operacoesData?.filter(o => o.status !== 'concluido') || []
                            : operacoesData?.filter(o => o.status === 'concluido') || [];
                        
                        if (operacoesFiltradas.length === 0) {
                            return React.createElement("div", {className: "p-12 text-center"},
                                React.createElement("span", {className: "text-6xl block mb-4"}, operacaoSubTab === 'execucao' ? "üì≠" : "üéâ"),
                                React.createElement("p", {className: "text-gray-500 text-lg"}, 
                                    operacaoSubTab === 'execucao' ? "Nenhuma opera√ß√£o em execu√ß√£o" : "Nenhuma opera√ß√£o conclu√≠da ainda"
                                ),
                                React.createElement("p", {className: "text-gray-400 text-sm"}, 
                                    operacaoSubTab === 'execucao' ? "Clique em \"Nova Opera√ß√£o\" para come√ßar" : "As opera√ß√µes conclu√≠das aparecer√£o aqui"
                                )
                            );
                        }
                        
                        return React.createElement("div", {className: "divide-y"},
                            operacoesFiltradas.map(op => {
                                const contador = calcularContadorRegressivo(op.data_inicio);
                                const checklist = checklistMotos[op.id] || {};
                                const motosEncontradas = Object.values(checklist).filter(v => v).length;
                                const todasMotosEncontradas = motosEncontradas === op.quantidade_motos;
                                
                                return React.createElement("div", {
                                    key: op.id,
                                    className: "p-6 hover:bg-gray-50 transition-colors"
                                },
                                    React.createElement("div", {className: "flex flex-col lg:flex-row lg:items-start justify-between gap-4"},
                                        // Info principal
                                        React.createElement("div", {className: "flex-1"},
                                            // Nome e badges
                                            React.createElement("div", {className: "flex flex-wrap items-center gap-3 mb-2"},
                                                React.createElement("h4", {className: "text-lg font-bold text-gray-800"}, op.nome_cliente),
                                                React.createElement("span", {
                                                    className: "px-2 py-0.5 rounded-full text-xs font-semibold " + 
                                                    (op.modelo === 'nuvem' ? 'bg-blue-100 text-blue-700' : 
                                                     op.modelo === 'dedicado' ? 'bg-purple-100 text-purple-700' : 
                                                     'bg-yellow-100 text-yellow-700')
                                                }, op.modelo === 'nuvem' ? '‚òÅÔ∏è Nuvem' : op.modelo === 'dedicado' ? 'üéØ Dedicado' : '‚ö° Flash'),
                                                React.createElement("span", {
                                                    className: "px-2 py-0.5 rounded-full text-xs font-semibold " + 
                                                    (op.status === 'ativo' ? 'bg-green-100 text-green-700' : 
                                                     op.status === 'concluido' ? 'bg-blue-100 text-blue-700' :
                                                     op.status === 'pausado' ? 'bg-yellow-100 text-yellow-700' : 
                                                     'bg-gray-100 text-gray-600')
                                                }, op.status === 'ativo' ? '‚úÖ Ativo' : op.status === 'concluido' ? '‚úîÔ∏è Conclu√≠do' : op.status === 'pausado' ? '‚è∏Ô∏è Pausado' : '‚ùå ' + op.status)
                                            ),
                                            // Informa√ß√µes
                                            React.createElement("div", {className: "flex flex-wrap gap-4 text-sm text-gray-600"},
                                                React.createElement("span", null, "üìç ", op.regiao),
                                                React.createElement("span", null, "üìå ", op.endereco?.substring(0, 40), op.endereco?.length > 40 ? '...' : ''),
                                                React.createElement("span", null, "üèçÔ∏è ", op.quantidade_motos, " moto(s)"),
                                                op.obrigatoriedade_bau && React.createElement("span", {className: "text-orange-600"}, "üì¶ Ba√∫ obrigat√≥rio"),
                                                op.possui_garantido && React.createElement("span", {className: "text-green-600"}, "üí∞ Garantido: R$ ", parseFloat(op.valor_garantido || 0).toFixed(2))
                                            ),
                                            // DATA DE IN√çCIO DESTACADA COM CONTADOR
                                            React.createElement("div", {
                                                className: "mt-3 inline-flex items-center gap-3 px-4 py-2 rounded-lg " +
                                                (contador.status === 'hoje' ? 'bg-green-100 border-2 border-green-400' :
                                                 contador.status === 'amanha' ? 'bg-yellow-100 border-2 border-yellow-400' :
                                                 contador.status === 'proximo' ? 'bg-orange-100 border-2 border-orange-300' :
                                                 contador.status === 'iniciado' ? 'bg-blue-100 border-2 border-blue-300' :
                                                 'bg-gray-100 border border-gray-300')
                                            },
                                                React.createElement("span", {className: "text-lg"}, "üìÖ"),
                                                React.createElement("div", null,
                                                    React.createElement("p", {className: "text-xs text-gray-500 font-medium"}, "Data de In√≠cio"),
                                                    React.createElement("p", {className: "font-bold text-gray-800"}, 
                                                        new Date(op.data_inicio).toLocaleDateString('pt-BR', { weekday: 'short', day: '2-digit', month: 'short', year: 'numeric' })
                                                    )
                                                ),
                                                React.createElement("span", {
                                                    className: "px-3 py-1 rounded-full text-sm font-bold " +
                                                    (contador.status === 'hoje' ? 'bg-green-500 text-white' :
                                                     contador.status === 'amanha' ? 'bg-yellow-500 text-white' :
                                                     contador.status === 'proximo' ? 'bg-orange-500 text-white' :
                                                     contador.status === 'iniciado' ? 'bg-blue-500 text-white' :
                                                     'bg-gray-500 text-white')
                                                }, contador.texto)
                                            ),
                                            // Criado por
                                            React.createElement("p", {className: "text-xs text-gray-400 mt-2"}, 
                                                "Criado por: ", op.criado_por || '-'
                                            )
                                        ),
                                        // A√ß√µes
                                        React.createElement("div", {className: "flex flex-wrap gap-2"},
                                            React.createElement("button", {
                                                onClick: () => gerarRelatorioOperacao(op),
                                                className: "px-4 py-2 bg-teal-100 text-teal-700 rounded-lg font-semibold hover:bg-teal-200 text-sm"
                                            }, "üìÑ Word"),
                                            React.createElement("button", {
                                                onClick: () => {
                                                    setOperacaoEdit(op);
                                                    setOperacaoForm({
                                                        regiao: op.regiao || '',
                                                        nome_cliente: op.nome_cliente || '',
                                                        endereco: op.endereco || '',
                                                        modelo: op.modelo || 'nuvem',
                                                        quantidade_motos: op.quantidade_motos || 1,
                                                        obrigatoriedade_bau: op.obrigatoriedade_bau || false,
                                                        possui_garantido: op.possui_garantido || false,
                                                        valor_garantido: op.valor_garantido || '',
                                                        data_inicio: op.data_inicio?.split('T')[0] || '',
                                                        observacoes: op.observacoes || '',
                                                        faixas_km: op.faixas_km && op.faixas_km.length > 0 ? op.faixas_km : [
                                                            { km_inicio: 1, km_fim: 10, valor_motoboy: '' },
                                                            { km_inicio: 11, km_fim: 15, valor_motoboy: '' },
                                                            { km_inicio: 16, km_fim: 20, valor_motoboy: '' },
                                                            { km_inicio: 21, km_fim: 25, valor_motoboy: '' },
                                                            { km_inicio: 26, km_fim: 30, valor_motoboy: '' },
                                                            { km_inicio: 31, km_fim: 35, valor_motoboy: '' },
                                                            { km_inicio: 36, km_fim: 40, valor_motoboy: '' },
                                                            { km_inicio: 41, km_fim: 45, valor_motoboy: '' },
                                                            { km_inicio: 46, km_fim: 50, valor_motoboy: '' },
                                                            { km_inicio: 51, km_fim: 60, valor_motoboy: '' }
                                                        ]
                                                    });
                                                    setOperacaoModal(true);
                                                },
                                                className: "px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-semibold hover:bg-blue-200 text-sm"
                                            }, "‚úèÔ∏è Editar"),
                                            op.status !== 'concluido' && React.createElement("button", {
                                                onClick: async () => {
                                                    const novoStatus = op.status === 'ativo' ? 'pausado' : 'ativo';
                                                    await fetch(`${API_URL}/operacoes/${op.id}`, {
                                                        method: 'PUT',
                                                        headers: {'Content-Type': 'application/json'},
                                                        body: JSON.stringify({ status: novoStatus })
                                                    });
                                                    carregarOperacoes();
                                                    ja(novoStatus === 'ativo' ? '‚úÖ Opera√ß√£o ativada!' : '‚è∏Ô∏è Opera√ß√£o pausada!', 'success');
                                                },
                                                className: "px-4 py-2 rounded-lg font-semibold text-sm " + 
                                                    (op.status === 'ativo' ? 'bg-yellow-100 text-yellow-700 hover:bg-yellow-200' : 'bg-green-100 text-green-700 hover:bg-green-200')
                                            }, op.status === 'ativo' ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'),
                                            React.createElement("button", {
                                                onClick: async () => {
                                                    if (confirm(`Excluir opera√ß√£o "${op.nome_cliente}"?`)) {
                                                        await fetch(`${API_URL}/operacoes/${op.id}`, { method: 'DELETE' });
                                                        carregarOperacoes();
                                                        ja('üóëÔ∏è Opera√ß√£o exclu√≠da!', 'success');
                                                    }
                                                },
                                                className: "px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold hover:bg-red-200 text-sm"
                                            }, "üóëÔ∏è")
                                        )
                                    ),
                                    
                                    // OBSERVA√á√ïES (sempre vis√≠vel se existir)
                                    op.observacoes && React.createElement("div", {className: "mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},
                                        React.createElement("p", {className: "text-sm font-semibold text-yellow-800 mb-1"}, "üìù Observa√ß√µes:"),
                                        React.createElement("p", {className: "text-sm text-yellow-900"}, op.observacoes)
                                    ),
                                    
                                    // Faixas de KM
                                    op.faixas_km && op.faixas_km.filter(f => f.valor_motoboy > 0).length > 0 && React.createElement("div", {className: "mt-4 pt-4 border-t"},
                                        React.createElement("p", {className: "text-sm font-semibold text-gray-700 mb-2"}, "üí∞ Valores por Faixa de KM:"),
                                        React.createElement("div", {className: "flex flex-wrap gap-2"},
                                            op.faixas_km.filter(f => f.valor_motoboy > 0).map((faixa, idx) => 
                                                React.createElement("span", {
                                                    key: idx,
                                                    className: "px-3 py-1 bg-teal-50 text-teal-700 rounded-lg text-sm"
                                                }, faixa.km_inicio, "-", faixa.km_fim, "km: R$ ", parseFloat(faixa.valor_motoboy).toFixed(2))
                                            )
                                        )
                                    ),
                                    
                                    // Checklist de Motos (s√≥ para n√£o conclu√≠das)
                                    op.status !== 'concluido' && React.createElement("div", {className: "mt-4 pt-4 border-t"},
                                        React.createElement("div", {className: "flex items-center justify-between mb-3"},
                                            React.createElement("p", {className: "text-sm font-semibold text-gray-700 flex items-center gap-2"}, 
                                                "üèçÔ∏è Checklist de Motos",
                                                React.createElement("span", {
                                                    className: "px-2 py-0.5 rounded-full text-xs font-semibold " +
                                                    (todasMotosEncontradas ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700')
                                                }, motosEncontradas, "/", op.quantidade_motos)
                                            ),
                                            todasMotosEncontradas && React.createElement("span", {className: "text-green-600 text-sm font-semibold"}, "‚úÖ Completo!")
                                        ),
                                        React.createElement("div", {className: "flex flex-wrap gap-2"},
                                            Array.from({length: op.quantidade_motos}, (_, i) => 
                                                React.createElement("label", {
                                                    key: i,
                                                    className: "flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-all text-sm " +
                                                    (checklist[i] ? 'bg-green-100 border border-green-400' : 'bg-gray-100 border border-gray-300 hover:border-gray-400')
                                                },
                                                    React.createElement("input", {
                                                        type: "checkbox",
                                                        checked: checklist[i] || false,
                                                        onChange: (e) => {
                                                            setChecklistMotos(prev => ({
                                                                ...prev,
                                                                [op.id]: {
                                                                    ...prev[op.id],
                                                                    [i]: e.target.checked
                                                                }
                                                            }));
                                                        },
                                                        className: "w-4 h-4 rounded text-green-600"
                                                    }),
                                                    React.createElement("span", {className: checklist[i] ? 'text-green-700 font-semibold' : 'text-gray-600'}, "Moto ", i + 1)
                                                )
                                            )
                                        )
                                    ),
                                    
                                    // Bot√£o Demanda Conclu√≠da (s√≥ para n√£o conclu√≠das)
                                    op.status !== 'concluido' && React.createElement("div", {className: "mt-4 pt-4 border-t flex justify-end"},
                                        React.createElement("button", {
                                            onClick: async () => {
                                                if (!todasMotosEncontradas) {
                                                    if (!confirm(`‚ö†Ô∏è Apenas ${motosEncontradas} de ${op.quantidade_motos} motos foram confirmadas.\n\nDeseja concluir mesmo assim?`)) {
                                                        return;
                                                    }
                                                }
                                                if (confirm(`‚úÖ Confirmar conclus√£o da demanda "${op.nome_cliente}"?`)) {
                                                    await fetch(`${API_URL}/operacoes/${op.id}`, {
                                                        method: 'PUT',
                                                        headers: {'Content-Type': 'application/json'},
                                                        body: JSON.stringify({ status: 'concluido' })
                                                    });
                                                    carregarOperacoes();
                                                    ja('üéâ Demanda conclu√≠da com sucesso!', 'success');
                                                }
                                            },
                                            className: "px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 shadow flex items-center gap-2"
                                        }, "‚úÖ Demanda Conclu√≠da")
                                    )
                                );
                            })
                        );
                    })()
                )
                )
            ),
            // ==================== MODAL NOVA OPERA√á√ÉO ====================
            operacaoModal && React.createElement("div", {className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},
                React.createElement("div", {className: "bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[95vh] overflow-y-auto"},
                    // Header do Modal
                    React.createElement("div", {className: "bg-gradient-to-r from-teal-600 to-teal-700 p-6 text-white sticky top-0 z-10"},
                        React.createElement("div", {className: "flex justify-between items-center"},
                            React.createElement("div", null,
                                React.createElement("h2", {className: "text-xl font-bold"}, operacaoEdit ? "‚úèÔ∏è Editar Opera√ß√£o" : "‚ûï Nova Opera√ß√£o"),
                                React.createElement("p", {className: "text-teal-100 text-sm"}, "Preencha os dados da opera√ß√£o")
                            ),
                            React.createElement("button", {
                                onClick: () => setOperacaoModal(false),
                                className: "text-white/80 hover:text-white text-2xl"
                            }, "‚úï")
                        )
                    ),
                    // Conte√∫do do Modal
                    React.createElement("div", {className: "p-6 space-y-6"},
                        // Se√ß√£o: Dados B√°sicos
                        React.createElement("div", {className: "bg-gray-50 rounded-xl p-4"},
                            React.createElement("h3", {className: "font-semibold text-gray-800 mb-4 flex items-center gap-2"}, "üìã Dados B√°sicos"),
                            React.createElement("div", {className: "grid md:grid-cols-2 gap-4"},
                                // Regi√£o
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Regi√£o *"),
                                    React.createElement("input", {
                                        type: "text",
                                        value: operacaoForm.regiao,
                                        onChange: e => setOperacaoForm(f => ({...f, regiao: e.target.value})),
                                        placeholder: "Ex: Bras√≠lia, Goi√¢nia, S√£o Paulo...",
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500"
                                    })
                                ),
                                // Nome do Cliente
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Nome do Cliente *"),
                                    React.createElement("input", {
                                        type: "text",
                                        value: operacaoForm.nome_cliente,
                                        onChange: e => setOperacaoForm(f => ({...f, nome_cliente: e.target.value})),
                                        placeholder: "Nome da empresa/loja",
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500"
                                    })
                                ),
                                // Endere√ßo (colspan 2)
                                React.createElement("div", {className: "md:col-span-2"},
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Endere√ßo *"),
                                    React.createElement("input", {
                                        type: "text",
                                        value: operacaoForm.endereco,
                                        onChange: e => setOperacaoForm(f => ({...f, endereco: e.target.value})),
                                        placeholder: "Endere√ßo completo da opera√ß√£o",
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500"
                                    })
                                )
                            )
                        ),
                        
                        // Se√ß√£o: Configura√ß√µes
                        React.createElement("div", {className: "bg-gray-50 rounded-xl p-4"},
                            React.createElement("h3", {className: "font-semibold text-gray-800 mb-4 flex items-center gap-2"}, "‚öôÔ∏è Configura√ß√µes"),
                            React.createElement("div", {className: "grid md:grid-cols-3 gap-4"},
                                // Modelo
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Modelo *"),
                                    React.createElement("select", {
                                        value: operacaoForm.modelo,
                                        onChange: e => setOperacaoForm(f => ({...f, modelo: e.target.value})),
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500 bg-white"
                                    },
                                        React.createElement("option", {value: "nuvem"}, "‚òÅÔ∏è Nuvem"),
                                        React.createElement("option", {value: "dedicado"}, "üéØ Dedicado"),
                                        React.createElement("option", {value: "flash"}, "‚ö° Flash")
                                    )
                                ),
                                // Quantidade de Motos
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Quantidade de Motos *"),
                                    React.createElement("input", {
                                        type: "number",
                                        min: "1",
                                        value: operacaoForm.quantidade_motos,
                                        onChange: e => setOperacaoForm(f => ({...f, quantidade_motos: parseInt(e.target.value) || 1})),
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                    })
                                ),
                                // Data de In√≠cio
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Data de In√≠cio *"),
                                    React.createElement("input", {
                                        type: "date",
                                        value: operacaoForm.data_inicio,
                                        onChange: e => setOperacaoForm(f => ({...f, data_inicio: e.target.value})),
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                    })
                                )
                            ),
                            // Checkboxes
                            React.createElement("div", {className: "grid md:grid-cols-2 gap-4 mt-4"},
                                // Obrigatoriedade de Ba√∫
                                React.createElement("label", {className: "flex items-center gap-3 p-4 bg-white rounded-xl border cursor-pointer hover:bg-gray-50"},
                                    React.createElement("input", {
                                        type: "checkbox",
                                        checked: operacaoForm.obrigatoriedade_bau,
                                        onChange: e => setOperacaoForm(f => ({...f, obrigatoriedade_bau: e.target.checked})),
                                        className: "w-5 h-5 rounded text-teal-600"
                                    }),
                                    React.createElement("div", null,
                                        React.createElement("span", {className: "font-semibold text-gray-700"}, "üì¶ Obrigatoriedade de Ba√∫"),
                                        React.createElement("p", {className: "text-sm text-gray-500"}, "Motoboy precisa ter ba√∫?")
                                    )
                                ),
                                // Garantido
                                React.createElement("label", {className: "flex items-center gap-3 p-4 bg-white rounded-xl border cursor-pointer hover:bg-gray-50"},
                                    React.createElement("input", {
                                        type: "checkbox",
                                        checked: operacaoForm.possui_garantido,
                                        onChange: e => setOperacaoForm(f => ({...f, possui_garantido: e.target.checked, valor_garantido: e.target.checked ? operacaoForm.valor_garantido : ''})),
                                        className: "w-5 h-5 rounded text-teal-600"
                                    }),
                                    React.createElement("div", null,
                                        React.createElement("span", {className: "font-semibold text-gray-700"}, "üí∞ Possui Garantido"),
                                        React.createElement("p", {className: "text-sm text-gray-500"}, "Loja paga garantido?")
                                    )
                                )
                            ),
                            // Campo de Valor Garantido (aparece se possui_garantido)
                            operacaoForm.possui_garantido && React.createElement("div", {className: "mt-4"},
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üí∞ Valor do Garantido (R$)"),
                                React.createElement("input", {
                                    type: "number",
                                    step: "0.01",
                                    min: "0",
                                    value: operacaoForm.valor_garantido,
                                    onChange: e => setOperacaoForm(f => ({...f, valor_garantido: e.target.value})),
                                    placeholder: "0.00",
                                    className: "w-full md:w-1/3 px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                })
                            )
                        ),
                        
                        // Se√ß√£o: Faixas de KM
                        React.createElement("div", {className: "bg-gray-50 rounded-xl p-4"},
                            React.createElement("h3", {className: "font-semibold text-gray-800 mb-4 flex items-center gap-2"}, "üí∞ Valores Pagos aos Motoboys por Faixa de KM"),
                            React.createElement("p", {className: "text-sm text-gray-500 mb-4"}, "Preencha os valores de cada faixa de quilometragem"),
                            React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-5 gap-3"},
                                operacaoForm.faixas_km.map((faixa, idx) => 
                                    React.createElement("div", {key: idx, className: "bg-white p-3 rounded-xl border"},
                                        React.createElement("p", {className: "text-xs font-semibold text-gray-600 mb-2 text-center"}, 
                                            faixa.km_inicio, " km √† ", faixa.km_fim, " km"
                                        ),
                                        React.createElement("div", {className: "relative"},
                                            React.createElement("span", {className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}, "R$"),
                                            React.createElement("input", {
                                                type: "number",
                                                step: "0.01",
                                                min: "0",
                                                value: faixa.valor_motoboy || '',
                                                onChange: e => {
                                                    const novasFaixas = [...operacaoForm.faixas_km];
                                                    novasFaixas[idx].valor_motoboy = e.target.value;
                                                    setOperacaoForm(f => ({...f, faixas_km: novasFaixas}));
                                                },
                                                placeholder: "0.00",
                                                className: "w-full pl-9 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500 text-center"
                                            })
                                        )
                                    )
                                )
                            )
                        ),
                        
                        // Se√ß√£o: Observa√ß√µes
                        React.createElement("div", {className: "bg-gray-50 rounded-xl p-4"},
                            React.createElement("h3", {className: "font-semibold text-gray-800 mb-4 flex items-center gap-2"}, "üìù Observa√ß√µes"),
                            React.createElement("textarea", {
                                value: operacaoForm.observacoes,
                                onChange: e => setOperacaoForm(f => ({...f, observacoes: e.target.value})),
                                placeholder: "Informa√ß√µes adicionais sobre a opera√ß√£o...",
                                rows: 3,
                                className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                            })
                        ),
                        
                        // Bot√µes
                        React.createElement("div", {className: "flex gap-3 pt-4"},
                            React.createElement("button", {
                                onClick: () => setOperacaoModal(false),
                                className: "flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300"
                            }, "Cancelar"),
                            React.createElement("button", {
                                onClick: async () => {
                                    // Valida√ß√µes
                                    if (!operacaoForm.regiao || !operacaoForm.nome_cliente || !operacaoForm.endereco || !operacaoForm.data_inicio) {
                                        ja('‚ùå Preencha todos os campos obrigat√≥rios!', 'error');
                                        return;
                                    }
                                    
                                    s(true);
                                    try {
                                        const url = operacaoEdit 
                                            ? `${API_URL}/operacoes/${operacaoEdit.id}`
                                            : `${API_URL}/operacoes`;
                                        
                                        const response = await fetch(url, {
                                            method: operacaoEdit ? 'PUT' : 'POST',
                                            headers: { 'Content-Type': 'application/json' },
                                            body: JSON.stringify({
                                                ...operacaoForm,
                                                criado_por: l.fullName
                                            })
                                        });
                                        
                                        if (response.ok) {
                                            ja(operacaoEdit ? '‚úÖ Opera√ß√£o atualizada!' : '‚úÖ Opera√ß√£o criada!', 'success');
                                            setOperacaoModal(false);
                                            carregarOperacoes();
                                        } else {
                                            throw new Error('Erro ao salvar');
                                        }
                                    } catch (error) {
                                        ja('‚ùå Erro ao salvar opera√ß√£o', 'error');
                                    }
                                    s(false);
                                },
                                className: "flex-1 px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700"
                            }, operacaoEdit ? "üíæ Salvar Altera√ß√µes" : "‚ûï Criar Opera√ß√£o")
                        )
                    )
                )
            ),
            // ==================== CONTE√öDO RECRUTAMENTO ====================
            p.opTab === "recrutamento" && React.createElement("div", {className: "max-w-7xl mx-auto p-6"},
                React.createElement("div", {className: "space-y-6"},
                    // Header
                    React.createElement("div", {className: "flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-2xl font-bold text-gray-800"}, "üèçÔ∏è Recrutamento de Motos"),
                            React.createElement("p", {className: "text-gray-600"}, "Gerencie as necessidades de recrutamento de motoboys")
                        ),
                        React.createElement("div", {className: "flex gap-3"},
                            React.createElement("button", {
                                onClick: carregarRecrutamento,
                                disabled: recrutamentoLoading,
                                className: "px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 disabled:opacity-50"
                            }, "üîÑ"),
                            React.createElement("button", {
                                onClick: () => {
                                    setRecrutamentoEdit(null);
                                    setRecrutamentoForm({
                                        nome_cliente: '',
                                        data_conclusao: '',
                                        quantidade_motos: 1,
                                        quantidade_backup: 0,
                                        observacao: ''
                                    });
                                    setRecrutamentoModal(true);
                                },
                                className: "px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 flex items-center gap-2 shadow-lg"
                            }, "‚ûï Nova Necessidade")
                        )
                    ),
                    
                    // Card de Progresso Geral
                    recrutamentoStats && React.createElement("div", {className: "bg-gradient-to-r from-teal-500 to-teal-600 rounded-2xl shadow-lg p-6 text-white"},
                        React.createElement("div", {className: "flex items-center justify-between mb-4"},
                            React.createElement("h3", {className: "text-xl font-bold"}, "üìä Progresso Geral de Recrutamento"),
                            React.createElement("span", {className: "text-4xl"}, "üéØ")
                        ),
                        React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},
                            React.createElement("div", {className: "text-center"},
                                React.createElement("p", {className: "text-3xl font-bold"}, recrutamentoStats.total_necessidades || 0),
                                React.createElement("p", {className: "text-sm opacity-80"}, "Total Demandas")
                            ),
                            React.createElement("div", {className: "text-center"},
                                React.createElement("p", {className: "text-3xl font-bold text-yellow-300"}, recrutamentoStats.em_andamento || 0),
                                React.createElement("p", {className: "text-sm opacity-80"}, "Em Andamento")
                            ),
                            React.createElement("div", {className: "text-center"},
                                React.createElement("p", {className: "text-3xl font-bold text-green-300"}, recrutamentoStats.concluidas || 0),
                                React.createElement("p", {className: "text-sm opacity-80"}, "Conclu√≠das")
                            ),
                            React.createElement("div", {className: "text-center"},
                                React.createElement("p", {className: "text-3xl font-bold"}, 
                                    (parseInt(recrutamentoStats.total_motos_atribuidas) || 0), " / ", (parseInt(recrutamentoStats.total_motos_necessarias) || 0)
                                ),
                                React.createElement("p", {className: "text-sm opacity-80"}, "Motos Atribu√≠das")
                            )
                        ),
                        // Barra de progresso geral
                        React.createElement("div", null,
                            React.createElement("div", {className: "flex justify-between text-sm mb-1"},
                                React.createElement("span", null, "Progresso Total"),
                                React.createElement("span", null, 
                                    Math.round(((parseInt(recrutamentoStats.total_motos_atribuidas) || 0) / Math.max(1, parseInt(recrutamentoStats.total_motos_necessarias) || 1)) * 100), "%"
                                )
                            ),
                            React.createElement("div", {className: "w-full h-4 bg-white/30 rounded-full overflow-hidden"},
                                React.createElement("div", {
                                    className: "h-full bg-white rounded-full transition-all duration-500",
                                    style: { width: `${Math.min(100, Math.round(((parseInt(recrutamentoStats.total_motos_atribuidas) || 0) / Math.max(1, parseInt(recrutamentoStats.total_motos_necessarias) || 1)) * 100))}%` }
                                })
                            )
                        )
                    ),
                    
                    // Sub-abas
                    React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                        React.createElement("div", {className: "flex border-b"},
                            React.createElement("button", {
                                onClick: () => setRecrutamentoSubTab('em_andamento'),
                                className: "flex-1 px-4 py-3 text-sm font-semibold " + 
                                    (recrutamentoSubTab === 'em_andamento' ? 'bg-teal-50 text-teal-700 border-b-2 border-teal-600' : 'text-gray-600 hover:bg-gray-50')
                            }, "üöÄ Em Andamento (", recrutamentoData.filter(r => r.status === 'em_andamento').length, ")"),
                            React.createElement("button", {
                                onClick: () => setRecrutamentoSubTab('concluido'),
                                className: "flex-1 px-4 py-3 text-sm font-semibold " + 
                                    (recrutamentoSubTab === 'concluido' ? 'bg-teal-50 text-teal-700 border-b-2 border-teal-600' : 'text-gray-600 hover:bg-gray-50')
                            }, "‚úÖ Conclu√≠das (", recrutamentoData.filter(r => r.status === 'concluido').length, ")"),
                            React.createElement("button", {
                                onClick: () => setRecrutamentoSubTab('todos'),
                                className: "flex-1 px-4 py-3 text-sm font-semibold " + 
                                    (recrutamentoSubTab === 'todos' ? 'bg-teal-50 text-teal-700 border-b-2 border-teal-600' : 'text-gray-600 hover:bg-gray-50')
                            }, "üìã Todas (", recrutamentoData.length, ")")
                        )
                    ),
                    
                    // Loading
                    recrutamentoLoading && React.createElement("div", {className: "bg-white rounded-xl shadow p-12 text-center"},
                        React.createElement("div", {className: "inline-block w-12 h-12 border-4 border-teal-500 border-t-transparent rounded-full animate-spin mb-4"}),
                        React.createElement("p", {className: "text-gray-500"}, "Carregando necessidades...")
                    ),
                    
                    // Lista de necessidades
                    !recrutamentoLoading && React.createElement("div", {className: "space-y-4"},
                        (recrutamentoData
                            .filter(r => recrutamentoSubTab === 'todos' ? true : r.status === recrutamentoSubTab)
                            .length === 0) && React.createElement("div", {className: "bg-white rounded-xl shadow p-12 text-center"},
                            React.createElement("span", {className: "text-6xl block mb-4"}, "üì≠"),
                            React.createElement("p", {className: "text-gray-500 text-lg"}, "Nenhuma necessidade encontrada"),
                            React.createElement("p", {className: "text-gray-400 text-sm"}, "Clique em \"Nova Necessidade\" para cadastrar")
                        ),
                        
                        recrutamentoData
                            .filter(r => recrutamentoSubTab === 'todos' ? true : r.status === recrutamentoSubTab)
                            .map(nec => {
                                const motosAtribuidas = nec.atribuicoes?.filter(a => a.tipo === 'titular').length || 0;
                                const backupsAtribuidos = nec.atribuicoes?.filter(a => a.tipo === 'backup').length || 0;
                                const progressoMotos = Math.round((motosAtribuidas / Math.max(1, nec.quantidade_motos)) * 100);
                                const progressoBackups = nec.quantidade_backup > 0 ? Math.round((backupsAtribuidos / nec.quantidade_backup) * 100) : 100;
                                const progressoTotal = Math.round(((motosAtribuidas + backupsAtribuidos) / Math.max(1, nec.quantidade_motos + nec.quantidade_backup)) * 100);
                                
                                // Calcular dias restantes
                                const hoje = new Date();
                                const dataConclusao = new Date(nec.data_conclusao);
                                const diasRestantes = Math.ceil((dataConclusao - hoje) / (1000 * 60 * 60 * 24));
                                
                                return React.createElement("div", {
                                    key: nec.id,
                                    className: "bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 " +
                                        (nec.status === 'concluido' ? 'border-green-500' : 
                                         diasRestantes < 0 ? 'border-red-500' :
                                         diasRestantes <= 3 ? 'border-yellow-500' : 'border-teal-500')
                                },
                                    // Header do card
                                    React.createElement("div", {className: "p-6"},
                                        React.createElement("div", {className: "flex justify-between items-start mb-4"},
                                            React.createElement("div", null,
                                                React.createElement("div", {className: "flex items-center gap-3 mb-2"},
                                                    React.createElement("h3", {className: "text-xl font-bold text-gray-800"}, nec.nome_cliente),
                                                    React.createElement("span", {
                                                        className: "px-3 py-1 rounded-full text-xs font-bold " +
                                                            (nec.status === 'concluido' ? 'bg-green-100 text-green-700' : 
                                                             nec.status === 'cancelado' ? 'bg-red-100 text-red-700' :
                                                             'bg-yellow-100 text-yellow-700')
                                                    }, nec.status === 'concluido' ? '‚úÖ Conclu√≠do' : 
                                                       nec.status === 'cancelado' ? '‚ùå Cancelado' : 'üöÄ Em Andamento')
                                                ),
                                                React.createElement("div", {className: "flex items-center gap-4 text-sm text-gray-600"},
                                                    React.createElement("span", {className: "flex items-center gap-1"},
                                                        "üìÖ Conclus√£o: ",
                                                        React.createElement("strong", null, new Date(nec.data_conclusao).toLocaleDateString('pt-BR'))
                                                    ),
                                                    React.createElement("span", {
                                                        className: "px-2 py-1 rounded text-xs font-bold " +
                                                            (diasRestantes < 0 ? 'bg-red-100 text-red-700' :
                                                             diasRestantes <= 3 ? 'bg-yellow-100 text-yellow-700' :
                                                             'bg-teal-100 text-teal-700')
                                                    }, diasRestantes < 0 ? `${Math.abs(diasRestantes)} dias atrasado` :
                                                       diasRestantes === 0 ? 'Hoje!' :
                                                       diasRestantes === 1 ? 'Amanh√£' :
                                                       `${diasRestantes} dias restantes`)
                                                )
                                            ),
                                            React.createElement("div", {className: "flex gap-2"},
                                                React.createElement("button", {
                                                    onClick: () => {
                                                        setRecrutamentoEdit(nec);
                                                        setRecrutamentoForm({
                                                            nome_cliente: nec.nome_cliente,
                                                            data_conclusao: nec.data_conclusao?.split('T')[0] || '',
                                                            quantidade_motos: nec.quantidade_motos,
                                                            quantidade_backup: nec.quantidade_backup,
                                                            observacao: nec.observacao || ''
                                                        });
                                                        setRecrutamentoModal(true);
                                                    },
                                                    className: "px-3 py-2 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200"
                                                }, "‚úèÔ∏è"),
                                                React.createElement("button", {
                                                    onClick: () => deletarRecrutamento(nec.id),
                                                    className: "px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200"
                                                }, "üóëÔ∏è")
                                            )
                                        ),
                                        
                                        // Barra de progresso geral do card
                                        React.createElement("div", {className: "mb-4"},
                                            React.createElement("div", {className: "flex justify-between text-sm mb-1"},
                                                React.createElement("span", {className: "text-gray-600"}, "Progresso Total"),
                                                React.createElement("span", {className: "font-bold " + (progressoTotal === 100 ? 'text-green-600' : 'text-teal-600')}, 
                                                    progressoTotal, "%"
                                                )
                                            ),
                                            React.createElement("div", {className: "w-full h-3 bg-gray-200 rounded-full overflow-hidden"},
                                                React.createElement("div", {
                                                    className: "h-full rounded-full transition-all duration-500 " +
                                                        (progressoTotal === 100 ? 'bg-green-500' : 'bg-teal-500'),
                                                    style: { width: `${progressoTotal}%` }
                                                })
                                            )
                                        ),
                                        
                                        // Observa√ß√£o
                                        nec.observacao && React.createElement("p", {className: "text-sm text-gray-500 italic mb-4"}, 
                                            "üìù ", nec.observacao
                                        ),
                                        
                                        // Grid de se√ß√µes: Titulares e Backups
                                        React.createElement("div", {className: "grid md:grid-cols-2 gap-4"},
                                            // Se√ß√£o Motos Titulares
                                            React.createElement("div", {className: "bg-gray-50 rounded-xl p-4"},
                                                React.createElement("div", {className: "flex justify-between items-center mb-3"},
                                                    React.createElement("h4", {className: "font-bold text-gray-700"}, 
                                                        "üèçÔ∏è Motos Titulares"
                                                    ),
                                                    React.createElement("span", {className: "text-sm font-bold " + 
                                                        (motosAtribuidas >= nec.quantidade_motos ? 'text-green-600' : 'text-orange-600')
                                                    }, motosAtribuidas, " / ", nec.quantidade_motos)
                                                ),
                                                // Barra de progresso titulares
                                                React.createElement("div", {className: "w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-3"},
                                                    React.createElement("div", {
                                                        className: "h-full rounded-full transition-all duration-500 " +
                                                            (progressoMotos === 100 ? 'bg-green-500' : 'bg-orange-500'),
                                                        style: { width: `${Math.min(100, progressoMotos)}%` }
                                                    })
                                                ),
                                                // Lista de atribu√≠dos
                                                React.createElement("div", {className: "space-y-2 mb-3 max-h-40 overflow-y-auto"},
                                                    (nec.atribuicoes?.filter(a => a.tipo === 'titular') || []).map(attr => 
                                                        React.createElement("div", {
                                                            key: attr.id,
                                                            className: "flex items-center justify-between bg-white rounded-lg p-2 shadow-sm"
                                                        },
                                                            React.createElement("div", null,
                                                                React.createElement("span", {className: "font-mono text-teal-600 font-bold"}, attr.cod_profissional),
                                                                attr.nome_profissional && React.createElement("span", {className: "ml-2 text-gray-600 text-sm"}, attr.nome_profissional)
                                                            ),
                                                            React.createElement("button", {
                                                                onClick: () => removerAtribuicaoRecrutamento(attr.id),
                                                                className: "text-red-500 hover:text-red-700 text-sm"
                                                            }, "‚úï")
                                                        )
                                                    )
                                                ),
                                                // Campo para adicionar
                                                motosAtribuidas < nec.quantidade_motos && React.createElement("div", {className: "flex gap-2"},
                                                    React.createElement("div", {className: "flex-1"},
                                                        React.createElement("input", {
                                                            type: "text",
                                                            placeholder: "C√≥digo do motoboy",
                                                            value: recrutamentoCodBusca[`${nec.id}_titular`]?.codigo || '',
                                                            onChange: (e) => {
                                                                const codigo = e.target.value;
                                                                setRecrutamentoCodBusca(prev => ({
                                                                    ...prev,
                                                                    [`${nec.id}_titular`]: { ...prev[`${nec.id}_titular`], codigo, nome: '', erro: '' }
                                                                }));
                                                                if (codigo.length >= 3) {
                                                                    buscarProfissionalRecrutamento(nec.id, 'titular', codigo);
                                                                }
                                                            },
                                                            className: "w-full px-3 py-2 border rounded-lg text-sm"
                                                        }),
                                                        recrutamentoCodBusca[`${nec.id}_titular`]?.loading && 
                                                            React.createElement("p", {className: "text-xs text-gray-400 mt-1"}, "Buscando..."),
                                                        recrutamentoCodBusca[`${nec.id}_titular`]?.nome && 
                                                            React.createElement("p", {className: "text-xs text-green-600 mt-1"}, 
                                                                "‚úÖ ", recrutamentoCodBusca[`${nec.id}_titular`].nome
                                                            ),
                                                        recrutamentoCodBusca[`${nec.id}_titular`]?.erro && 
                                                            React.createElement("p", {className: "text-xs text-red-500 mt-1"}, 
                                                                "‚ùå ", recrutamentoCodBusca[`${nec.id}_titular`].erro
                                                            )
                                                    ),
                                                    React.createElement("button", {
                                                        onClick: () => atribuirProfissionalRecrutamento(nec.id, 'titular'),
                                                        disabled: !recrutamentoCodBusca[`${nec.id}_titular`]?.nome,
                                                        className: "px-4 py-2 bg-teal-600 text-white rounded-lg font-semibold hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed"
                                                    }, "‚ûï")
                                                )
                                            ),
                                            
                                            // Se√ß√£o Motos Backup
                                            nec.quantidade_backup > 0 && React.createElement("div", {className: "bg-blue-50 rounded-xl p-4"},
                                                React.createElement("div", {className: "flex justify-between items-center mb-3"},
                                                    React.createElement("h4", {className: "font-bold text-gray-700"}, 
                                                        "üîÑ Motos Backup"
                                                    ),
                                                    React.createElement("span", {className: "text-sm font-bold " + 
                                                        (backupsAtribuidos >= nec.quantidade_backup ? 'text-green-600' : 'text-blue-600')
                                                    }, backupsAtribuidos, " / ", nec.quantidade_backup)
                                                ),
                                                // Barra de progresso backups
                                                React.createElement("div", {className: "w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-3"},
                                                    React.createElement("div", {
                                                        className: "h-full rounded-full transition-all duration-500 " +
                                                            (progressoBackups === 100 ? 'bg-green-500' : 'bg-blue-500'),
                                                        style: { width: `${Math.min(100, progressoBackups)}%` }
                                                    })
                                                ),
                                                // Lista de atribu√≠dos
                                                React.createElement("div", {className: "space-y-2 mb-3 max-h-40 overflow-y-auto"},
                                                    (nec.atribuicoes?.filter(a => a.tipo === 'backup') || []).map(attr => 
                                                        React.createElement("div", {
                                                            key: attr.id,
                                                            className: "flex items-center justify-between bg-white rounded-lg p-2 shadow-sm"
                                                        },
                                                            React.createElement("div", null,
                                                                React.createElement("span", {className: "font-mono text-blue-600 font-bold"}, attr.cod_profissional),
                                                                attr.nome_profissional && React.createElement("span", {className: "ml-2 text-gray-600 text-sm"}, attr.nome_profissional)
                                                            ),
                                                            React.createElement("button", {
                                                                onClick: () => removerAtribuicaoRecrutamento(attr.id),
                                                                className: "text-red-500 hover:text-red-700 text-sm"
                                                            }, "‚úï")
                                                        )
                                                    )
                                                ),
                                                // Campo para adicionar
                                                backupsAtribuidos < nec.quantidade_backup && React.createElement("div", {className: "flex gap-2"},
                                                    React.createElement("div", {className: "flex-1"},
                                                        React.createElement("input", {
                                                            type: "text",
                                                            placeholder: "C√≥digo do motoboy",
                                                            value: recrutamentoCodBusca[`${nec.id}_backup`]?.codigo || '',
                                                            onChange: (e) => {
                                                                const codigo = e.target.value;
                                                                setRecrutamentoCodBusca(prev => ({
                                                                    ...prev,
                                                                    [`${nec.id}_backup`]: { ...prev[`${nec.id}_backup`], codigo, nome: '', erro: '' }
                                                                }));
                                                                if (codigo.length >= 3) {
                                                                    buscarProfissionalRecrutamento(nec.id, 'backup', codigo);
                                                                }
                                                            },
                                                            className: "w-full px-3 py-2 border rounded-lg text-sm"
                                                        }),
                                                        recrutamentoCodBusca[`${nec.id}_backup`]?.loading && 
                                                            React.createElement("p", {className: "text-xs text-gray-400 mt-1"}, "Buscando..."),
                                                        recrutamentoCodBusca[`${nec.id}_backup`]?.nome && 
                                                            React.createElement("p", {className: "text-xs text-green-600 mt-1"}, 
                                                                "‚úÖ ", recrutamentoCodBusca[`${nec.id}_backup`].nome
                                                            ),
                                                        recrutamentoCodBusca[`${nec.id}_backup`]?.erro && 
                                                            React.createElement("p", {className: "text-xs text-red-500 mt-1"}, 
                                                                "‚ùå ", recrutamentoCodBusca[`${nec.id}_backup`].erro
                                                            )
                                                    ),
                                                    React.createElement("button", {
                                                        onClick: () => atribuirProfissionalRecrutamento(nec.id, 'backup'),
                                                        disabled: !recrutamentoCodBusca[`${nec.id}_backup`]?.nome,
                                                        className: "px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
                                                    }, "‚ûï")
                                                )
                                            ),
                                            
                                            // Se n√£o tem backup, ocupar espa√ßo vazio ou mostrar info
                                            nec.quantidade_backup === 0 && React.createElement("div", {className: "bg-gray-100 rounded-xl p-4 flex items-center justify-center"},
                                                React.createElement("p", {className: "text-gray-400 text-sm"}, "Sem necessidade de backup")
                                            )
                                        ),
                                        
                                        // Rodap√© com info de cria√ß√£o
                                        React.createElement("p", {className: "text-xs text-gray-400 mt-4 text-right"}, 
                                            "Criado por: ", nec.criado_por || '-', " em ", new Date(nec.created_at).toLocaleDateString('pt-BR')
                                        )
                                    )
                                );
                            })
                    )
                ),
                
                // Modal de criar/editar necessidade
                recrutamentoModal && React.createElement("div", {className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},
                    React.createElement("div", {className: "bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto"},
                        // Header do modal
                        React.createElement("div", {className: "p-6 border-b bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-t-2xl"},
                            React.createElement("h3", {className: "text-xl font-bold"}, 
                                recrutamentoEdit ? "‚úèÔ∏è Editar Necessidade" : "‚ûï Nova Necessidade de Recrutamento"
                            ),
                            React.createElement("p", {className: "text-sm opacity-80"}, 
                                "Preencha os dados da necessidade de motos"
                            )
                        ),
                        // Corpo do modal
                        React.createElement("div", {className: "p-6 space-y-4"},
                            // Nome do cliente
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Nome do Cliente *"),
                                React.createElement("input", {
                                    type: "text",
                                    value: recrutamentoForm.nome_cliente,
                                    onChange: (e) => setRecrutamentoForm(f => ({...f, nome_cliente: e.target.value})),
                                    placeholder: "Ex: Magazine Luiza",
                                    className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                })
                            ),
                            // Data de conclus√£o
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Data de Conclus√£o *"),
                                React.createElement("input", {
                                    type: "date",
                                    value: recrutamentoForm.data_conclusao,
                                    onChange: (e) => setRecrutamentoForm(f => ({...f, data_conclusao: e.target.value})),
                                    className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                })
                            ),
                            // Quantidades
                            React.createElement("div", {className: "grid grid-cols-2 gap-4"},
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üèçÔ∏è Quantidade de Motos *"),
                                    React.createElement("input", {
                                        type: "number",
                                        min: "1",
                                        value: recrutamentoForm.quantidade_motos,
                                        onChange: (e) => setRecrutamentoForm(f => ({...f, quantidade_motos: parseInt(e.target.value) || 1})),
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                    })
                                ),
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üîÑ Quantidade de Backup"),
                                    React.createElement("input", {
                                        type: "number",
                                        min: "0",
                                        value: recrutamentoForm.quantidade_backup,
                                        onChange: (e) => setRecrutamentoForm(f => ({...f, quantidade_backup: parseInt(e.target.value) || 0})),
                                        className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                    })
                                )
                            ),
                            // Observa√ß√£o
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "üìù Observa√ß√£o (opcional)"),
                                React.createElement("textarea", {
                                    value: recrutamentoForm.observacao,
                                    onChange: (e) => setRecrutamentoForm(f => ({...f, observacao: e.target.value})),
                                    placeholder: "Ex: Prefer√™ncia por motoboys com experi√™ncia em delivery de documentos",
                                    rows: 3,
                                    className: "w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-teal-500"
                                })
                            )
                        ),
                        // Footer do modal
                        React.createElement("div", {className: "p-6 border-t bg-gray-50 flex gap-3 rounded-b-2xl"},
                            React.createElement("button", {
                                onClick: () => { setRecrutamentoModal(false); setRecrutamentoEdit(null); },
                                className: "flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300"
                            }, "Cancelar"),
                            React.createElement("button", {
                                onClick: salvarRecrutamento,
                                disabled: !recrutamentoForm.nome_cliente || !recrutamentoForm.data_conclusao || !recrutamentoForm.quantidade_motos,
                                className: "flex-1 px-4 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed"
                            }, recrutamentoEdit ? "üíæ Salvar Altera√ß√µes" : "‚ûï Criar Necessidade")
                        )
                    )
                )
            ),
            // ==================== CONTE√öDO LOCALIZA√á√ÉO CLIENTES ====================
            p.opTab === "localizacao-clientes" && React.createElement("div", {className: "max-w-7xl mx-auto p-6"},
                React.createElement("div", {className: "space-y-6"},
                    // Header
                    React.createElement("div", {className: "flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-2xl font-bold text-gray-800"}, "üìç Localiza√ß√£o Clientes"),
                            React.createElement("p", {className: "text-gray-600"}, "Endere√ßos de coleta (Ponto 1) dos clientes do BI")
                        ),
                        React.createElement("div", {className: "flex gap-3"},
                            // BOT√ÉO DO ROTEIRIZADOR
                            React.createElement("button", {
                                onClick: async () => {
                                    console.log("üó∫Ô∏è Bot√£o Roteirizador clicado!");
                                    console.log("üó∫Ô∏è localizacaoClientes:", localizacaoClientes?.length || 0);
                                    
                                    let dadosClientes = localizacaoClientes;
                                    if (!dadosClientes || dadosClientes.length === 0) {
                                        console.log("üó∫Ô∏è Carregando clientes...");
                                        await carregarLocalizacaoClientes();
                                        // Aguarda um pouco para os dados carregarem
                                        await new Promise(r => setTimeout(r, 500));
                                        dadosClientes = localizacaoClientes;
                                    }
                                    
                                    console.log("üó∫Ô∏è Abrindo modal via DOM...");
                                    
                                    // Criar container se n√£o existir
                                    let portalDiv = document.getElementById('roteirizador-portal');
                                    if (!portalDiv) {
                                        portalDiv = document.createElement('div');
                                        portalDiv.id = 'roteirizador-portal';
                                        document.body.appendChild(portalDiv);
                                    }
                                    
                                    // Fun√ß√£o para fechar o modal
                                    const fecharModal = () => {
                                        console.log("üó∫Ô∏è Fechando modal");
                                        const portal = document.getElementById('roteirizador-portal');
                                        if (portal) {
                                            ReactDOM.unmountComponentAtNode(portal);
                                            portal.remove();
                                        }
                                    };
                                    
                                    // Renderizar o modal
                                    ReactDOM.render(
                                        React.createElement(RoteirizadorModule, {
                                            enderecosBi: dadosClientes,
                                            onClose: fecharModal,
                                            showToast: ja
                                        }),
                                        portalDiv
                                    );
                                    
                                    console.log("üó∫Ô∏è Modal renderizado!");
                                },
                                className: "px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl font-semibold hover:from-purple-700 hover:to-purple-800 flex items-center gap-2 shadow-lg hover:shadow-xl transition-all"
                            }, "üó∫Ô∏è Roteirizador"),
                            React.createElement("button", {
                                onClick: carregarLocalizacaoClientes,
                                disabled: localizacaoLoading,
                                className: "px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 flex items-center gap-2 shadow-lg disabled:opacity-50"
                            }, localizacaoLoading ? "üîÑ Carregando..." : "üîÑ Atualizar")
                        )
                    ),
                    
                    // Sub-abas Lista e Mapa
                    React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                        React.createElement("div", {className: "flex border-b"},
                            React.createElement("button", {
                                onClick: () => setLocalizacaoSubTab('lista'),
                                className: "flex-1 px-6 py-3 text-sm font-semibold transition-all " + (localizacaoSubTab === 'lista' ? "bg-teal-50 text-teal-700 border-b-2 border-teal-600" : "text-gray-600 hover:bg-gray-50")
                            }, "üìã Lista"),
                            React.createElement("button", {
                                onClick: () => { 
                                    setLocalizacaoSubTab('mapa'); 
                                    setTimeout(() => window.initMapaClientes(localizacaoClientes), 100);
                                },
                                className: "flex-1 px-6 py-3 text-sm font-semibold transition-all " + (localizacaoSubTab === 'mapa' ? "bg-teal-50 text-teal-700 border-b-2 border-teal-600" : "text-gray-600 hover:bg-gray-50")
                            }, "üó∫Ô∏è Mapa")
                        )
                    ),
                    
                    // Conte√∫do da sub-aba Lista
                    localizacaoSubTab === 'lista' && React.createElement(React.Fragment, null,
                        // Barra de busca
                        React.createElement("div", {className: "bg-white rounded-xl p-4 shadow"},
                            React.createElement("div", {className: "flex gap-3 items-center"},
                                React.createElement("span", {className: "text-2xl"}, "üîç"),
                                React.createElement("input", {
                                    type: "text",
                                    value: localizacaoFiltro,
                                    onChange: e => setLocalizacaoFiltro(e.target.value),
                                    placeholder: "Buscar por c√≥digo ou nome do cliente...",
                                    className: "flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                }),
                                localizacaoFiltro && React.createElement("button", {
                                    onClick: () => setLocalizacaoFiltro(""),
                                    className: "px-4 py-2 text-gray-500 hover:text-gray-700"
                                }, "‚úï Limpar")
                            )
                        ),
                        
                        // Lista de clientes
                        localizacaoLoading 
                            ? React.createElement("div", {className: "bg-white rounded-xl p-8 shadow text-center"},
                                React.createElement("div", {className: "w-12 h-12 border-4 border-teal-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),
                                React.createElement("p", {className: "text-gray-600"}, "Carregando dados dos clientes...")
                            )
                            : localizacaoClientes?.length === 0
                                ? React.createElement("div", {className: "bg-white rounded-xl p-8 shadow text-center"},
                                    React.createElement("span", {className: "text-5xl block mb-4"}, "üì≠"),
                                    React.createElement("p", {className: "text-gray-500"}, "Nenhum cliente encontrado"),
                                    React.createElement("p", {className: "text-sm text-gray-400 mt-2"}, "Fa√ßa upload de dados no m√≥dulo BI para ver os clientes aqui")
                                )
                                : React.createElement("div", {className: "space-y-4"},
                                    // Filtrar clientes
                                    (function() {
                                        const filtro = localizacaoFiltro.toLowerCase().trim();
                                        const clientesFiltrados = filtro 
                                            ? localizacaoClientes.filter(c => 
                                                String(c.cod_cliente).toLowerCase().includes(filtro) || 
                                                (c.nome_cliente || "").toLowerCase().includes(filtro)
                                            )
                                            : localizacaoClientes;
                                    
                                    return clientesFiltrados.length === 0
                                        ? React.createElement("div", {className: "bg-white rounded-xl p-8 shadow text-center"},
                                            React.createElement("span", {className: "text-3xl block mb-2"}, "üîç"),
                                            React.createElement("p", {className: "text-gray-500"}, "Nenhum cliente encontrado com \"", localizacaoFiltro, "\"")
                                        )
                                        : clientesFiltrados.map(cliente => React.createElement("div", {
                                            key: cliente.cod_cliente + (cliente.centro_custo || ''),
                                            className: "bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-teal-500"
                                        },
                                            // Cabe√ßalho do cliente
                                            React.createElement("div", {className: "bg-gradient-to-r from-teal-50 to-white p-4 border-b"},
                                                React.createElement("div", {className: "flex items-center justify-between"},
                                                    React.createElement("div", {className: "flex items-center gap-3"},
                                                        React.createElement("span", {className: "text-2xl"}, "üè¢"),
                                                        React.createElement("div", null,
                                                            React.createElement("p", {className: "font-bold text-teal-800 text-lg"}, 
                                                                cliente.cod_cliente, " - ", cliente.nome_cliente
                                                            ),
                                                            cliente.centro_custo && React.createElement("p", {className: "text-sm font-semibold text-purple-600"}, 
                                                                "üì¶ ", cliente.centro_custo
                                                            ),
                                                            React.createElement("p", {className: "text-sm text-gray-500"}, 
                                                                cliente.enderecos?.length || 0, " endere√ßo(s) de coleta"
                                                            )
                                                        )
                                                    ),
                                                    React.createElement("span", {className: "px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm font-semibold"},
                                                        "üìç ", cliente.enderecos?.length || 0
                                                    )
                                                )
                                            ),
                                            // Lista de endere√ßos
                                            React.createElement("div", {className: "divide-y"},
                                                (cliente.enderecos || []).map((end, idx) => React.createElement("div", {
                                                    key: idx,
                                                    className: "p-4 hover:bg-gray-50 transition-colors"
                                                },
                                                    React.createElement("div", {className: "flex flex-col md:flex-row md:items-center justify-between gap-4"},
                                                        // Info do endere√ßo
                                                        React.createElement("div", {className: "flex-1"},
                                                            React.createElement("p", {className: "font-semibold text-gray-800"}, "üìå ", end.endereco || "Sem endere√ßo"),
                                                            React.createElement("p", {className: "text-sm text-gray-600"}, 
                                                                [end.bairro, end.cidade, end.estado].filter(Boolean).join(" - ") || "Localiza√ß√£o n√£o especificada"
                                                            ),
                                                            React.createElement("div", {className: "flex items-center gap-4 mt-2"},
                                                                React.createElement("span", {className: "text-xs text-gray-500"}, 
                                                                    "üì¶ ", end.total_entregas || 0, " entregas"
                                                                ),
                                                                end.latitude && end.longitude
                                                                    ? React.createElement("span", {className: "text-xs text-green-600 flex items-center gap-1"},
                                                                        "‚úÖ Coordenadas: ", end.latitude?.toFixed(4), ", ", end.longitude?.toFixed(4)
                                                                    )
                                                                    : React.createElement("span", {className: "text-xs text-orange-500"},
                                                                        "‚ö†Ô∏è Sem coordenadas"
                                                                    )
                                                            )
                                                        ),
                                                        // Bot√µes de a√ß√£o - apenas Waze
                                                        React.createElement("div", {className: "flex flex-wrap gap-2"},
                                                            React.createElement("a", {
                                                                href: gerarLinkWaze(end.endereco + " " + (end.cidade || ""), end.latitude, end.longitude),
                                                                target: "_blank",
                                                                rel: "noopener noreferrer",
                                                                className: "px-4 py-2 bg-cyan-500 text-white rounded-lg text-sm font-semibold hover:bg-cyan-600 flex items-center gap-2 shadow"
                                                            }, "üöó Waze"),
                                                            React.createElement("button", {
                                                                onClick: () => copiarParaClipboard(
                                                                    gerarLinkWaze(end.endereco + " " + (end.cidade || ""), end.latitude, end.longitude),
                                                                    "Waze"
                                                                ),
                                                                className: "px-3 py-2 bg-cyan-100 text-cyan-700 rounded-lg text-sm font-semibold hover:bg-cyan-200"
                                                            }, "üìã")
                                                        )
                                                    )
                                                ))
                                            )
                                        ));
                                })()
                            )
                    ),
                    
                    // Conte√∫do da sub-aba Mapa
                    localizacaoSubTab === 'mapa' && React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                        // Legenda
                        React.createElement("div", {className: "p-4 border-b bg-gray-50 flex items-center gap-6"},
                            React.createElement("span", {className: "text-sm text-gray-600 font-semibold"}, "Legenda:"),
                            React.createElement("span", {className: "flex items-center gap-1 text-sm"}, "üè¢ Clientes"),
                            React.createElement("span", {className: "flex items-center gap-1 text-sm"}, "‚≠ê Cliente 767")
                        ),
                        // Container do mapa
                        React.createElement("div", {
                            id: "mapa-clientes-leaflet",
                            style: { height: "500px", width: "100%" }
                        }),
                        // Info
                        React.createElement("div", {className: "p-4 border-t bg-gray-50 text-center text-sm text-gray-500"},
                            "Clique em um marcador para ver detalhes e abrir no Waze"
                        )
                    )
                )
            ),
            // ==================== CONTE√öDO RELAT√ìRIO DI√ÅRIO ====================
            p.opTab === "relatorio-diario" && React.createElement("div", {className: "max-w-7xl mx-auto p-6"},
                React.createElement("div", {className: "space-y-6"},
                    // Header
                    React.createElement("div", {className: "flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-2xl font-bold text-gray-800"}, "üìù Relat√≥rio Di√°rio"),
                            React.createElement("p", {className: "text-gray-600"}, "Registre suas atividades e observa√ß√µes do dia")
                        ),
                        React.createElement("button", {
                            onClick: abrirNovoRelatorio,
                            className: "px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 flex items-center gap-2 shadow-lg"
                        }, "‚ûï Criar Relat√≥rio")
                    ),
                    
                    // Lista de relat√≥rios
                    relatoriosLoading 
                        ? React.createElement("div", {className: "bg-white rounded-xl p-8 shadow text-center"},
                            React.createElement("div", {className: "w-12 h-12 border-4 border-teal-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),
                            React.createElement("p", {className: "text-gray-600"}, "Carregando relat√≥rios...")
                        )
                        : relatoriosDiarios?.length === 0
                            ? React.createElement("div", {className: "bg-white rounded-xl p-12 shadow text-center"},
                                React.createElement("span", {className: "text-6xl block mb-4"}, "üìã"),
                                React.createElement("p", {className: "text-gray-500 text-lg"}, "Nenhum relat√≥rio encontrado"),
                                React.createElement("p", {className: "text-sm text-gray-400 mt-2"}, "Clique em \"+ Criar Relat√≥rio\" para come√ßar"),
                                React.createElement("button", {
                                    onClick: abrirNovoRelatorio,
                                    className: "mt-6 px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700"
                                }, "‚ûï Criar Primeiro Relat√≥rio")
                            )
                            : React.createElement("div", {className: "space-y-4"},
                                relatoriosDiarios.map(rel => React.createElement("div", {
                                    key: rel.id,
                                    className: "bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-teal-500"
                                },
                                    // Header do relat√≥rio
                                    React.createElement("div", {className: "bg-gradient-to-r from-teal-50 to-white p-4 border-b"},
                                        React.createElement("div", {className: "flex items-center justify-between"},
                                            React.createElement("div", {className: "flex items-center gap-3"},
                                                rel.usuario_foto 
                                                    ? React.createElement("img", {
                                                        src: rel.usuario_foto,
                                                        className: "w-12 h-12 rounded-full object-cover border-2 border-teal-200"
                                                    })
                                                    : React.createElement("div", {
                                                        className: "w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold text-lg"
                                                    }, (rel.usuario_nome || "?").charAt(0).toUpperCase()),
                                                React.createElement("div", null,
                                                    React.createElement("p", {className: "font-bold text-teal-800"}, rel.titulo),
                                                    React.createElement("p", {className: "text-sm text-gray-500"}, 
                                                        rel.usuario_nome, " ‚Ä¢ ", 
                                                        new Date(rel.created_at).toLocaleDateString('pt-BR', {
                                                            day: '2-digit', month: '2-digit', year: 'numeric',
                                                            hour: '2-digit', minute: '2-digit'
                                                        })
                                                    )
                                                )
                                            ),
                                            React.createElement("div", {className: "flex gap-2"},
                                                React.createElement("button", {
                                                    onClick: () => abrirEditarRelatorio(rel),
                                                    className: "p-2 text-blue-600 hover:bg-blue-50 rounded-lg",
                                                    title: "Editar"
                                                }, "‚úèÔ∏è"),
                                                React.createElement("button", {
                                                    onClick: () => excluirRelatorio(rel.id),
                                                    className: "p-2 text-red-600 hover:bg-red-50 rounded-lg",
                                                    title: "Excluir"
                                                }, "üóëÔ∏è")
                                            )
                                        )
                                    ),
                                    // Conte√∫do do relat√≥rio
                                    React.createElement("div", {className: "p-4"},
                                        React.createElement("div", {
                                            className: "text-gray-700 whitespace-pre-wrap",
                                            dangerouslySetInnerHTML: { __html: (rel.conteudo || '').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/_(.*?)_/g, '<em>$1</em>') }
                                        }),
                                        rel.imagem_url && React.createElement("div", {className: "mt-4"},
                                            React.createElement("img", {
                                                src: rel.imagem_url,
                                                className: "max-w-full md:max-w-md rounded-lg shadow cursor-pointer hover:opacity-90 transition-opacity",
                                                onClick: () => setRelatorioImagemAmpliada(rel.imagem_url)
                                            })
                                        )
                                    ),
                                    // Se√ß√£o de Visualiza√ß√µes
                                    React.createElement("div", {className: "px-4 pb-4 border-t pt-3 bg-gray-50"},
                                        React.createElement("div", {className: "flex items-center gap-2 flex-wrap"},
                                            React.createElement("span", {className: "text-sm text-gray-500 font-medium"}, "üëÅÔ∏è Visualiza√ß√µes:"),
                                            rel.visualizacoes && rel.visualizacoes.length > 0
                                                ? React.createElement("div", {className: "flex items-center gap-1 flex-wrap"},
                                                    rel.visualizacoes.slice(0, 10).map((vis, idx) => 
                                                        React.createElement("div", {
                                                            key: idx,
                                                            className: "relative group",
                                                            title: vis.usuario_nome + " - " + new Date(vis.visualizado_em).toLocaleDateString('pt-BR', {day: '2-digit', month: '2-digit', hour: '2-digit', minute: '2-digit'})
                                                        },
                                                            vis.usuario_foto 
                                                                ? React.createElement("img", {
                                                                    src: vis.usuario_foto,
                                                                    className: "w-8 h-8 rounded-full object-cover border-2 border-white shadow-sm hover:scale-110 transition-transform cursor-pointer"
                                                                })
                                                                : React.createElement("div", {
                                                                    className: "w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold text-xs border-2 border-white shadow-sm"
                                                                }, (vis.usuario_nome || "?").charAt(0).toUpperCase())
                                                        )
                                                    ),
                                                    rel.visualizacoes.length > 10 && React.createElement("span", {
                                                        className: "text-xs text-gray-500 ml-1"
                                                    }, "+", rel.visualizacoes.length - 10)
                                                )
                                                : React.createElement("span", {className: "text-sm text-gray-400 italic"}, "Nenhuma visualiza√ß√£o ainda")
                                        )
                                    )
                                ))
                            )
                )
            ),
            // Modal de criar/editar relat√≥rio
            showRelatorioModal && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",
                onClick: (e) => { if (e.target === e.currentTarget) setShowRelatorioModal(false); }
            },
                React.createElement("div", {className: "bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[95vh] overflow-hidden flex flex-col"},
                    // Header do modal
                    React.createElement("div", {className: "bg-gradient-to-r from-teal-600 to-teal-700 text-white p-4 flex items-center justify-between"},
                        React.createElement("h3", {className: "text-lg font-bold"}, relatorioEdit ? "‚úèÔ∏è Editar Relat√≥rio" : "üìù Novo Relat√≥rio"),
                        React.createElement("button", {
                            onClick: () => setShowRelatorioModal(false),
                            className: "text-white/80 hover:text-white text-2xl"
                        }, "‚úï")
                    ),
                    
                    // Info do usu√°rio e data
                    React.createElement("div", {className: "p-4 bg-gray-50 border-b flex items-center gap-3"},
                        socialProfile?.profile_photo 
                            ? React.createElement("img", {
                                src: socialProfile.profile_photo,
                                className: "w-10 h-10 rounded-full object-cover border-2 border-teal-200"
                            })
                            : React.createElement("div", {
                                className: "w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 font-bold"
                            }, (l.fullName || "?").charAt(0).toUpperCase()),
                        React.createElement("div", null,
                            React.createElement("p", {className: "font-semibold text-gray-800"}, l.fullName || l.username),
                            React.createElement("p", {className: "text-sm text-gray-500"}, 
                                new Date().toLocaleDateString('pt-BR', {
                                    weekday: 'long', day: '2-digit', month: 'long', year: 'numeric',
                                    hour: '2-digit', minute: '2-digit'
                                })
                            )
                        )
                    ),
                    
                    // Formul√°rio
                    React.createElement("div", {
                        className: "p-4 space-y-4 overflow-y-auto flex-1",
                        onKeyDown: (e) => { if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') e.preventDefault(); }
                    },
                        // ===== SELE√á√ÉO DE DESTINAT√ÅRIOS NO TOPO =====
                        React.createElement("div", {className: "bg-purple-50 rounded-xl p-4 space-y-3 border-2 border-purple-200"},
                            React.createElement("label", {className: "block text-sm font-bold text-purple-800"}, "üì¢ Quem deve ver este relat√≥rio?"),
                            
                            React.createElement("div", {className: "flex flex-wrap gap-3"},
                                // Toggle Para Todos
                                React.createElement("div", {
                                    className: `flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-all ${relatorioForm.para_todos ? 'bg-teal-600 text-white shadow-md' : 'bg-white text-gray-700 border hover:border-gray-400'}`,
                                    onClick: () => setRelatorioForm(prev => ({...prev, para_todos: true, setores_destino: []}))
                                },
                                    React.createElement("span", null, "üåê"),
                                    React.createElement("span", {className: "font-semibold"}, "Todos os usu√°rios")
                                ),
                                
                                // Toggle Por Setores
                                React.createElement("div", {
                                    className: `flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-all ${!relatorioForm.para_todos ? 'bg-teal-600 text-white shadow-md' : 'bg-white text-gray-700 border hover:border-gray-400'}`,
                                    onClick: () => {
                                        // Ao clicar em "Setores espec√≠ficos", j√° seleciona o setor "Monitoramento" por padr√£o
                                        const setorMonitoramento = setores.find(s => s.nome.toLowerCase() === 'monitoramento');
                                        const setoresDefault = setorMonitoramento ? [setorMonitoramento.id] : [];
                                        setRelatorioForm(prev => ({...prev, para_todos: false, setores_destino: setoresDefault}));
                                    }
                                },
                                    React.createElement("span", null, "üè¢"),
                                    React.createElement("span", {className: "font-semibold"}, "Setores espec√≠ficos")
                                )
                            ),
                            
                            // Lista de Setores (s√≥ aparece se n√£o for para todos)
                            !relatorioForm.para_todos && React.createElement("div", {className: "flex flex-wrap gap-2 mt-2"},
                                setores.length === 0 
                                    ? React.createElement("p", {className: "text-sm text-gray-500"}, 
                                        "Nenhum setor cadastrado."
                                    )
                                    : setores.filter(s => s.ativo).map(setor => 
                                        React.createElement("div", {
                                            key: setor.id,
                                            className: `flex items-center gap-2 px-3 py-1.5 rounded-full cursor-pointer transition-all text-sm ${
                                                relatorioForm.setores_destino?.includes(setor.id) 
                                                    ? 'text-white shadow-md' 
                                                    : 'bg-white border-2 border-gray-200 text-gray-700 hover:border-gray-400'
                                            }`,
                                            style: relatorioForm.setores_destino?.includes(setor.id) 
                                                ? { backgroundColor: setor.cor || '#6366f1' } 
                                                : {},
                                            onClick: () => {
                                                setRelatorioForm(prev => {
                                                    const atual = prev.setores_destino || [];
                                                    const novo = atual.includes(setor.id)
                                                        ? atual.filter(id => id !== setor.id)
                                                        : [...atual, setor.id];
                                                    return {...prev, setores_destino: novo};
                                                });
                                            }
                                        },
                                            !relatorioForm.setores_destino?.includes(setor.id) && React.createElement("div", {
                                                className: "w-3 h-3 rounded-full",
                                                style: { backgroundColor: setor.cor || '#6366f1' }
                                            }),
                                            React.createElement("span", {className: "font-medium"}, setor.nome),
                                            relatorioForm.setores_destino?.includes(setor.id) && React.createElement("span", null, "‚úì")
                                        )
                                    )
                            )
                        ),
                        
                        // T√≠tulo
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "T√≠tulo *"),
                            React.createElement("input", {
                                type: "text",
                                value: relatorioForm.titulo,
                                onChange: e => setRelatorioForm(prev => ({...prev, titulo: e.target.value})),
                                placeholder: "Ex: Relat√≥rio de entregas - Zona Norte",
                                className: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                            })
                        ),
                        
                        // Barra de formata√ß√£o
                        React.createElement("div", {className: "flex flex-wrap items-center gap-2 p-2 bg-gray-100 rounded-lg"},
                            React.createElement("span", {className: "text-sm text-gray-500 mr-2"}, "Emojis:"),
                            ['‚úÖ', '‚ùå', 'üë§', 'üíú', '‚ö†Ô∏è', 'üö®', '‚úçüèº', 'üî•', 'üõµ', 'üí∞', 'üìç', 'üñäÔ∏è'].map(emoji => 
                                React.createElement("button", {
                                    key: emoji,
                                    type: "button",
                                    onClick: () => inserirEmoji(emoji),
                                    className: "p-1.5 hover:bg-white rounded text-lg transition-colors",
                                    title: "Inserir " + emoji
                                }, emoji)
                            ),
                            React.createElement("div", {className: "h-6 w-px bg-gray-300 mx-2"}),
                            React.createElement("button", {
                                type: "button",
                                onClick: () => aplicarFormatacao('bold'),
                                className: "p-1.5 hover:bg-white rounded font-bold text-gray-700",
                                title: "Negrito (selecione o texto primeiro)"
                            }, "B"),
                            React.createElement("button", {
                                type: "button",
                                onClick: () => aplicarFormatacao('italic'),
                                className: "p-1.5 hover:bg-white rounded italic text-gray-700",
                                title: "It√°lico (selecione o texto primeiro)"
                            }, "I")
                        ),
                        
                        // Campo de conte√∫do
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Conte√∫do"),
                            React.createElement("textarea", {
                                id: "relatorio-conteudo",
                                value: relatorioForm.conteudo,
                                onChange: e => setRelatorioForm(prev => ({...prev, conteudo: e.target.value})),
                                placeholder: "Descreva suas atividades, observa√ß√µes, ocorr√™ncias...\n\nDica: Use **texto** para negrito e _texto_ para it√°lico",
                                rows: 10,
                                className: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent resize-none"
                            })
                        ),
                        
                        // Upload de imagem
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Imagem/Arquivo (opcional)"),
                            React.createElement("div", {className: "border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-teal-500 transition-colors"},
                                React.createElement("input", {
                                    type: "file",
                                    accept: "image/*",
                                    onChange: e => setRelatorioForm(prev => ({...prev, imagem: e.target.files?.[0] || null})),
                                    className: "hidden",
                                    id: "relatorio-imagem"
                                }),
                                React.createElement("label", {
                                    htmlFor: "relatorio-imagem",
                                    className: "cursor-pointer"
                                },
                                    relatorioForm.imagem 
                                        ? React.createElement("div", {className: "text-teal-600"},
                                            React.createElement("span", {className: "text-2xl"}, "üìé"),
                                            React.createElement("p", {className: "font-semibold"}, relatorioForm.imagem.name),
                                            React.createElement("p", {className: "text-sm text-gray-500"}, "Clique para trocar")
                                        )
                                        : React.createElement("div", {className: "text-gray-500"},
                                            React.createElement("span", {className: "text-3xl"}, "üì∑"),
                                            React.createElement("p", null, "Clique para selecionar uma imagem"),
                                            React.createElement("p", {className: "text-sm"}, "PNG, JPG at√© 5MB")
                                        )
                                )
                            )
                        )
                    ),
                    
                    // Footer do modal
                    React.createElement("div", {className: "p-4 bg-gray-50 border-t flex gap-3"},
                        React.createElement("button", {
                            type: "button",
                            onClick: (e) => { e.preventDefault(); e.stopPropagation(); setShowRelatorioModal(false); },
                            className: "flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-100"
                        }, "Cancelar"),
                        React.createElement("button", {
                            type: "button",
                            onClick: (e) => { e.preventDefault(); e.stopPropagation(); salvarRelatorio(e); return false; },
                            disabled: !relatorioForm.titulo.trim(),
                            className: "flex-1 px-6 py-3 bg-teal-600 text-white rounded-xl font-semibold hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed"
                        }, relatorioEdit ? "üíæ Salvar Altera√ß√µes" : "üìù Criar Relat√≥rio")
                    )
                )
            ),
            // ==================== CONTE√öDO SCORE PROF ====================
            p.opTab === "score-prof" && React.createElement("div", {className: "max-w-7xl mx-auto p-6"},
                React.createElement(ScoreAdmin, {
                    apiUrl: API_URL,
                    showToast: ja
                })
            ),
            // Modal de imagem ampliada
            relatorioImagemAmpliada && React.createElement("div", {
                className: "fixed inset-0 bg-black/90 flex items-center justify-center z-[60] p-4",
                onClick: () => setRelatorioImagemAmpliada(null)
            },
                React.createElement("div", {className: "relative max-w-4xl max-h-[90vh]"},
                    React.createElement("button", {
                        onClick: () => setRelatorioImagemAmpliada(null),
                        className: "absolute -top-10 right-0 text-white text-3xl hover:text-gray-300"
                    }, "‚úï"),
                    React.createElement("img", {
                        src: relatorioImagemAmpliada,
                        className: "max-w-full max-h-[85vh] rounded-lg shadow-2xl",
                        onClick: (e) => e.stopPropagation()
                    })
                )
            )
        );
        }
        // ========== M√ìDULO CONFIGURA√á√ïES ==========
        const canAccessConfig = hasModuleAccess(l, "config");
        if (canAccessConfig && "config" === Ee) {
            return React.createElement("div", {
                className: "min-h-screen bg-gray-100"
            }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null),
            // NAVBAR CONFIG
            React.createElement("nav", {
                className: "bg-gradient-to-r from-gray-700 to-gray-900 shadow-lg"
            }, 
            // Primeira linha - Logo e usu√°rio
            React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 pt-3 pb-2 flex justify-between items-center border-b border-white/10"
            }, React.createElement("div", {
                className: "flex items-center gap-3"
            }, 
            socialProfile?.profile_photo ? React.createElement("img", {
                src: socialProfile.profile_photo,
                className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
            }) : React.createElement("div", {
                className: "w-10 h-10 rounded-full bg-gray-600 flex items-center justify-center text-white font-bold border-2 border-white/50"
            }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
            React.createElement("div", null,
                React.createElement("h1", {className: "text-lg font-bold text-white"}, "üîß Config"),
                React.createElement("p", {className: "text-xs text-gray-300"}, socialProfile?.display_name || l.fullName)
            )), 
            React.createElement("div", {className: "flex items-center gap-3"},
                React.createElement("button", {onClick: ul, className: "px-3 py-1.5 bg-white/20 text-white rounded-lg hover:bg-white/30 text-sm font-semibold"}, "üîÑ"),
                React.createElement("button", {onClick: function() { o(null); }, className: "px-3 py-1.5 text-white hover:bg-white/20 rounded-lg text-sm"}, "Sair")
            )),
            // Segunda linha - Navega√ß√£o
            React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 py-2"
            }, React.createElement("div", {
                className: "flex flex-wrap gap-1"
            },
                React.createElement("button", {
                    onClick: function() { he("home"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üè† In√≠cio"),
                hasModuleAccess(l, "solicitacoes") && React.createElement("button", {
                    onClick: function() { he("solicitacoes"); x(e => ({...e, adminTab: "dashboard"})); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìã Solicita√ß√µes"),
                hasModuleAccess(l, "financeiro") && React.createElement("button", {
                    onClick: function() { he("financeiro"); x(e => ({...e, finTab: getFirstAllowedTab(l, "financeiro", "home-fin")})); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üí∞ Financeiro"),
                hasModuleAccess(l, "disponibilidade") && React.createElement("button", {
                    onClick: function() { he("solicitacoes"); x(e => ({...e, adminTab: "disponibilidade"})); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìÖ Disponibilidade"),
                hasModuleAccess(l, "bi") && React.createElement("button", {
                    onClick: function() { he("bi"); ll(); tl(); al(); pl(); carregarPrazosProf(); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìä BI"),
                hasModuleAccess(l, "todo") && React.createElement("button", {
                    onClick: function() { he("todo"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üìù TO-DO"),
                React.createElement("button", {
                    onClick: function() { he("social"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "üíú Social"),
                hasModuleAccess(l, "operacional") && React.createElement("button", {
                    onClick: function() { he("operacional"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all text-white hover:bg-white/10"
                }, "‚öôÔ∏è Operacional"),
                React.createElement("button", {
                    onClick: function() { he("config"); },
                    className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all bg-white text-gray-800"
                }, "üîß Config")
            ))),
            // TABS DO CONFIG
            React.createElement("div", {className: "bg-white border-b sticky top-0 z-10"},
                React.createElement("div", {className: "max-w-7xl mx-auto px-4 flex gap-1 overflow-x-auto"},
                    // Aba Usu√°rios - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["config_usuarios"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x({...p, configTab: "usuarios"}); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + ((!p.configTab || p.configTab === "usuarios") ? "text-gray-700 border-b-2 border-gray-600 bg-gray-50" : "text-gray-500 hover:bg-gray-100")
                    }, "üë• Gerenciar Usu√°rios"),
                    // Aba Permiss√µes - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["config_permissoes"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x({...p, configTab: "permissoes", permsLoaded: false}); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.configTab === "permissoes" ? "text-gray-700 border-b-2 border-gray-600 bg-gray-50" : "text-gray-500 hover:bg-gray-100")
                    }, "üîê Permiss√µes ADM"),
                    // Aba Auditoria - apenas admin_master
                    ("admin_master" === l.role || "admin" === l.role) && React.createElement("button", {
                        onClick: function() { x({...p, configTab: "auditoria"}); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.configTab === "auditoria" ? "text-gray-700 border-b-2 border-gray-600 bg-gray-50" : "text-gray-500 hover:bg-gray-100")
                    }, "üìã Auditoria"),
                    // Aba Sistema - verifica permiss√£o
                    (function() {
                        if ("admin_master" === l.role) return true;
                        const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                        if (Object.keys(abas).length === 0) return true;
                        return abas["config_sistema"] !== false;
                    })() && React.createElement("button", {
                        onClick: function() { x({...p, configTab: "sistema"}); },
                        className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (p.configTab === "sistema" ? "text-gray-700 border-b-2 border-gray-600 bg-gray-50" : "text-gray-500 hover:bg-gray-100")
                    }, "‚ö° Sistema")
                )
            ),
            // CONTE√öDO DO CONFIG
            React.createElement("div", {className: "max-w-7xl mx-auto p-6"},
                // TAB USU√ÅRIOS - verifica permiss√£o
                (!p.configTab || p.configTab === "usuarios") && (function() {
                    if ("admin_master" === l.role) return true;
                    const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                    if (Object.keys(abas).length === 0) return true;
                    return abas["config_usuarios"] !== false;
                })() && React.createElement("div", null,
                    // Criar usu√°rio
                    React.createElement("div", {className: "bg-white rounded-xl shadow-sm border p-6 mb-6"},
                        React.createElement("h2", {className: "text-lg font-bold mb-4 flex items-center gap-2"},
                            React.createElement("span", null, "‚ûï"),
                            "Criar Novo Usu√°rio"
                        ),
                        React.createElement("div", {className: "grid md:grid-cols-2 gap-4 mb-4"},
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold mb-1 text-gray-700"}, "Nome Completo"),
                                React.createElement("input", {
                                    type: "text",
                                    value: p.newUserName || "",
                                    onChange: function(e) { x({...p, newUserName: e.target.value}); },
                                    className: "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",
                                    placeholder: "Ex: Jo√£o Silva"
                                })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold mb-1 text-gray-700"}, "C√≥digo Profissional"),
                                React.createElement("input", {
                                    type: "text",
                                    value: p.newUserCod || "",
                                    onChange: function(e) { x({...p, newUserCod: e.target.value}); },
                                    className: "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",
                                    placeholder: "Ex: 12345"
                                })
                            )
                        ),
                        React.createElement("div", {className: "grid md:grid-cols-2 gap-4 mb-4"},
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold mb-1 text-gray-700"}, "Senha"),
                                React.createElement("input", {
                                    type: "password",
                                    value: p.newUserPass || "",
                                    onChange: function(e) { x({...p, newUserPass: e.target.value}); },
                                    className: "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",
                                    placeholder: "M√≠nimo 4 caracteres"
                                })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-semibold mb-1 text-gray-700"}, "Tipo de Usu√°rio"),
                                React.createElement("select", {
                                    value: p.newUserRole || "user",
                                    onChange: function(e) { x({...p, newUserRole: e.target.value}); },
                                    className: "w-full px-4 py-2 border rounded-lg bg-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                                },
                                    React.createElement("option", {value: "user"}, "üë§ Usu√°rio Comum (Entregador)"),
                                    React.createElement("option", {value: "admin"}, "üëë Administrador"),
                                    React.createElement("option", {value: "admin_financeiro"}, "üí∞ Admin Financeiro")
                                )
                            )
                        ),
                        React.createElement("button", {
                            onClick: async function() {
                                if (!p.newUserName || !p.newUserCod || !p.newUserPass) {
                                    ja("Preencha todos os campos", "error");
                                    return;
                                }
                                s(true);
                                try {
                                    const res = await fetch(API_URL + "/users/register", {
                                        method: "POST",
                                        headers: {"Content-Type": "application/json"},
                                        body: JSON.stringify({
                                            fullName: p.newUserName,
                                            codProfissional: p.newUserCod,
                                            password: p.newUserPass,
                                            role: p.newUserRole || "user"
                                        })
                                    });
                                    if (res.ok) {
                                        ja("‚úÖ Usu√°rio criado com sucesso!", "success");
                                        x({...p, newUserName: "", newUserCod: "", newUserPass: "", newUserRole: "user"});
                                        Ia();
                                    } else {
                                        const data = await res.json();
                                        ja("‚ùå " + (data.error || "Erro ao criar"), "error");
                                    }
                                } catch (err) {
                                    ja("‚ùå Erro ao criar usu√°rio", "error");
                                }
                                s(false);
                            },
                            className: "w-full px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors"
                        }, "‚ûï Criar Usu√°rio")
                    ),
                    
                    // ===== SE√á√ÉO DE SETORES =====
                    React.createElement("div", {className: "bg-white rounded-xl shadow-sm border p-6"},
                        React.createElement("div", {className: "flex items-center justify-between mb-4"},
                            React.createElement("h2", {className: "text-lg font-bold flex items-center gap-2"},
                                React.createElement("span", null, "üè¢"),
                                "Setores (",
                                setores.length,
                                ")"
                            ),
                            React.createElement("button", {
                                onClick: () => {
                                    setSetorEdit(null);
                                    setSetorForm({ nome: '', descricao: '', cor: '#6366f1' });
                                    setShowSetorModal(true);
                                },
                                className: "px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition-colors text-sm"
                            }, "‚ûï Novo Setor")
                        ),
                        setores.length === 0 
                            ? React.createElement("p", {className: "text-gray-500 text-center py-4"}, 
                                "Nenhum setor cadastrado. Crie setores para organizar os usu√°rios."
                            )
                            : React.createElement("div", {className: "space-y-3"},
                                setores.map(setor => {
                                    // Filtrar usu√°rios deste setor
                                    const usuariosDoSetor = A.filter(u => u.setor_id === setor.id);
                                    const isExpandido = setorExpandido === setor.id;
                                    
                                    return React.createElement("div", {
                                        key: setor.id,
                                        className: "border rounded-lg overflow-hidden transition-all " + (isExpandido ? "ring-2 ring-indigo-500" : "")
                                    },
                                        // Header do setor (clic√°vel para expandir)
                                        React.createElement("div", {
                                            className: "p-4 flex items-center justify-between hover:bg-gray-50 cursor-pointer",
                                            onClick: () => setSetorExpandido(isExpandido ? null : setor.id)
                                        },
                                            React.createElement("div", {className: "flex items-center gap-3"},
                                                React.createElement("div", {
                                                    className: "w-4 h-10 rounded",
                                                    style: { backgroundColor: setor.cor || '#6366f1' }
                                                }),
                                                React.createElement("div", null,
                                                    React.createElement("p", {className: "font-semibold flex items-center gap-2"},
                                                        setor.nome,
                                                        !setor.ativo && React.createElement("span", {className: "text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded"}, "Inativo")
                                                    ),
                                                    React.createElement("p", {className: "text-sm text-gray-500"},
                                                        usuariosDoSetor.length, " usu√°rio(s)",
                                                        setor.descricao ? " ‚Ä¢ " + setor.descricao : ""
                                                    )
                                                )
                                            ),
                                            React.createElement("div", {className: "flex items-center gap-2"},
                                                React.createElement("button", {
                                                    onClick: (e) => {
                                                        e.stopPropagation();
                                                        setSetorEdit(setor);
                                                        setSetorForm({ nome: setor.nome, descricao: setor.descricao || '', cor: setor.cor || '#6366f1' });
                                                        setShowSetorModal(true);
                                                    },
                                                    className: "px-3 py-1.5 bg-blue-100 text-blue-700 rounded font-semibold hover:bg-blue-200 text-sm"
                                                }, "‚úèÔ∏è"),
                                                React.createElement("button", {
                                                    onClick: (e) => { e.stopPropagation(); excluirSetor(setor); },
                                                    className: "px-3 py-1.5 bg-red-100 text-red-700 rounded font-semibold hover:bg-red-200 text-sm"
                                                }, "üóëÔ∏è"),
                                                React.createElement("span", {
                                                    className: "text-gray-400 text-xl ml-2 transition-transform " + (isExpandido ? "rotate-180" : "")
                                                }, "‚ñº")
                                            )
                                        ),
                                        
                                        // Lista de usu√°rios (expand√≠vel)
                                        isExpandido && React.createElement("div", {className: "border-t bg-gray-50 p-4"},
                                            React.createElement("p", {className: "text-sm font-semibold text-gray-600 mb-3"}, 
                                                "üë• Usu√°rios neste setor:"
                                            ),
                                            usuariosDoSetor.length === 0
                                                ? React.createElement("p", {className: "text-sm text-gray-400 italic"}, 
                                                    "Nenhum usu√°rio vinculado a este setor"
                                                )
                                                : React.createElement("div", {className: "space-y-2"},
                                                    usuariosDoSetor.map(user => 
                                                        React.createElement("div", {
                                                            key: user.codProfissional,
                                                            className: "flex items-center justify-between bg-white p-3 rounded-lg border"
                                                        },
                                                            React.createElement("div", {className: "flex items-center gap-3"},
                                                                React.createElement("div", {
                                                                    className: "w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm " +
                                                                        (user.role === "admin_master" ? "bg-purple-600" :
                                                                         user.role === "admin" ? "bg-blue-600" :
                                                                         user.role === "admin_financeiro" ? "bg-green-600" : "bg-gray-500")
                                                                }, user.fullName ? user.fullName.charAt(0).toUpperCase() : "?"),
                                                                React.createElement("div", null,
                                                                    React.createElement("p", {className: "font-medium text-sm"}, user.fullName),
                                                                    React.createElement("p", {className: "text-xs text-gray-500"}, 
                                                                        "COD: ", user.codProfissional
                                                                    )
                                                                )
                                                            ),
                                                            React.createElement("button", {
                                                                onClick: async () => {
                                                                    if (confirm(`Remover "${user.fullName}" do setor "${setor.nome}"?`)) {
                                                                        await atualizarSetorUsuario(user.codProfissional, null);
                                                                    }
                                                                },
                                                                className: "px-3 py-1.5 bg-red-100 text-red-600 rounded text-sm font-medium hover:bg-red-200",
                                                                title: "Remover do setor"
                                                            }, "‚úï Remover")
                                                        )
                                                    )
                                                )
                                        )
                                    );
                                })
                            )
                    ),
                    
                    // Modal de Criar/Editar Setor
                    showSetorModal && React.createElement("div", {
                        className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",
                        onClick: (e) => { if (e.target === e.currentTarget) setShowSetorModal(false); }
                    },
                        React.createElement("div", {className: "bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden"},
                            React.createElement("div", {className: "bg-indigo-600 text-white p-4"},
                                React.createElement("h3", {className: "text-lg font-bold"}, setorEdit ? "‚úèÔ∏è Editar Setor" : "üè¢ Novo Setor")
                            ),
                            React.createElement("div", {className: "p-4 space-y-4"},
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Nome *"),
                                    React.createElement("input", {
                                        type: "text",
                                        value: setorForm.nome,
                                        onChange: e => setSetorForm(prev => ({...prev, nome: e.target.value})),
                                        placeholder: "Ex: Operacional, Financeiro, Log√≠stica...",
                                        className: "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"
                                    })
                                ),
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Descri√ß√£o"),
                                    React.createElement("input", {
                                        type: "text",
                                        value: setorForm.descricao,
                                        onChange: e => setSetorForm(prev => ({...prev, descricao: e.target.value})),
                                        placeholder: "Descri√ß√£o opcional do setor",
                                        className: "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"
                                    })
                                ),
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-1"}, "Cor"),
                                    React.createElement("div", {className: "flex items-center gap-2"},
                                        React.createElement("input", {
                                            type: "color",
                                            value: setorForm.cor,
                                            onChange: e => setSetorForm(prev => ({...prev, cor: e.target.value})),
                                            className: "w-12 h-10 rounded cursor-pointer"
                                        }),
                                        React.createElement("span", {className: "text-sm text-gray-500"}, setorForm.cor)
                                    )
                                )
                            ),
                            React.createElement("div", {className: "p-4 bg-gray-50 flex gap-3"},
                                React.createElement("button", {
                                    onClick: () => setShowSetorModal(false),
                                    className: "flex-1 px-4 py-2 border rounded-lg font-semibold hover:bg-gray-100"
                                }, "Cancelar"),
                                React.createElement("button", {
                                    onClick: salvarSetor,
                                    disabled: !setorForm.nome.trim(),
                                    className: "flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 disabled:opacity-50"
                                }, setorEdit ? "üíæ Salvar" : "‚ûï Criar")
                            )
                        )
                    ),
                    
                    // Lista de usu√°rios
                    React.createElement("div", {className: "bg-white rounded-xl shadow-sm border p-6"},
                        React.createElement("h2", {className: "text-lg font-bold mb-4 flex items-center gap-2"},
                            React.createElement("span", null, "üìã"),
                            "Usu√°rios Cadastrados (",
                            A.length,
                            ")"
                        ),
                        React.createElement("div", {className: "space-y-3"},
                            A.map(function(user) {
                                return React.createElement("div", {
                                    key: user.codProfissional,
                                    className: "border rounded-lg p-4 hover:bg-gray-50 transition-colors"
                                },
                                    React.createElement("div", {className: "flex items-center justify-between"},
                                        React.createElement("div", {className: "flex items-center gap-3"},
                                            React.createElement("div", {
                                                className: "w-10 h-10 rounded-full flex items-center justify-center text-white font-bold " +
                                                    (user.role === "admin_master" ? "bg-purple-600" :
                                                     user.role === "admin" ? "bg-blue-600" :
                                                     user.role === "admin_financeiro" ? "bg-green-600" : "bg-gray-500")
                                            }, user.fullName ? user.fullName.charAt(0).toUpperCase() : "?"),
                                            React.createElement("div", null,
                                                React.createElement("p", {className: "font-semibold"}, user.fullName),
                                                React.createElement("p", {className: "text-sm text-gray-500"},
                                                    "COD: ", user.codProfissional, " ‚Ä¢ ",
                                                    user.role === "admin_master" ? "üëë Master" :
                                                    user.role === "admin" ? "üëë Admin" :
                                                    user.role === "admin_financeiro" ? "üí∞ Financeiro" : "üë§ Usu√°rio"
                                                )
                                            )
                                        ),
                                        React.createElement("div", {className: "flex gap-2"},
                                            React.createElement("button", {
                                                onClick: async function() {
                                                    const newPass = prompt("Nova senha para " + user.fullName + ":");
                                                    if (newPass && newPass.length >= 6) {
                                                        try {
                                                            await fetchAuth(API_URL + "/users/reset-password", {
                                                                method: "POST",
                                                                headers: {"Content-Type": "application/json"},
                                                                body: JSON.stringify({codProfissional: user.codProfissional, newPassword: newPass})
                                                            });
                                                            ja("‚úÖ Senha alterada!", "success");
                                                        } catch (err) {
                                                            ja("‚ùå Erro ao alterar senha", "error");
                                                        }
                                                    } else if (newPass) {
                                                        ja("Senha muito curta (m√≠n. 6)", "error");
                                                    }
                                                },
                                                className: "px-3 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors"
                                            }, "üîë Senha"),
                                            user.role !== "admin_master" && React.createElement("button", {
                                                onClick: async function() {
                                                    let userCod = user.codProfissional || user.cod_profissional;
                                                    // Remove # se existir no c√≥digo
                                                    if (userCod && typeof userCod === 'string') {
                                                        userCod = userCod.replace('#', '');
                                                    }
                                                    console.log("üóëÔ∏è Tentando deletar usu√°rio:", user.fullName || user.full_name, "C√≥digo:", userCod);
                                                    if (!userCod) {
                                                        ja("‚ùå C√≥digo do usu√°rio n√£o encontrado", "error");
                                                        return;
                                                    }
                                                    if (confirm("‚ö†Ô∏è Excluir " + (user.fullName || user.full_name) + "?\\n\\nEsta a√ß√£o n√£o pode ser desfeita!")) {
                                                        try {
                                                            const response = await fetchAuth(API_URL + "/users/" + userCod, {method: "DELETE"});
                                                            if (response.ok) {
                                                                ja("üóëÔ∏è Usu√°rio exclu√≠do!", "success");
                                                                Ia();
                                                            } else {
                                                                const errData = await response.json().catch(() => ({}));
                                                                ja("‚ùå Erro: " + (errData.error || response.statusText), "error");
                                                            }
                                                        } catch (err) {
                                                            console.error("‚ùå Erro ao excluir:", err);
                                                            ja("‚ùå Erro ao excluir", "error");
                                                        }
                                                    }
                                                },
                                                className: "px-3 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-colors"
                                            }, "üóëÔ∏è")
                                        )
                                    ),
                                    // Linha do Setor
                                    React.createElement("div", {className: "mt-3 pt-3 border-t flex items-center gap-2"},
                                        React.createElement("span", {className: "text-sm text-gray-600"}, "üè¢ Setor:"),
                                        React.createElement("select", {
                                            value: user.setor_id || '',
                                            onChange: async (e) => {
                                                const novoSetorId = e.target.value ? parseInt(e.target.value) : null;
                                                await atualizarSetorUsuario(user.codProfissional || user.cod_profissional, novoSetorId);
                                            },
                                            className: "px-3 py-1.5 border rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500"
                                        },
                                            React.createElement("option", {value: ""}, "-- Sem setor --"),
                                            setores.filter(s => s.ativo).map(setor =>
                                                React.createElement("option", {
                                                    key: setor.id,
                                                    value: setor.id
                                                }, setor.nome)
                                            )
                                        ),
                                        user.setor_nome && React.createElement("span", {
                                            className: "ml-2 px-2 py-0.5 rounded text-xs font-medium text-white",
                                            style: { backgroundColor: user.setor_cor || '#6366f1' }
                                        }, user.setor_nome)
                                    )
                                );
                            })
                        )
                    )
                ),
                // TAB PERMISS√ïES - verifica permiss√£o
                p.configTab === "permissoes" && (function() {
                    if ("admin_master" === l.role) return true;
                    const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                    if (Object.keys(abas).length === 0) return true;
                    return abas["config_permissoes"] !== false;
                })() && React.createElement("div", null,
                    // Carregar permiss√µes automaticamente ao abrir a aba
                    !p.permsLoaded && (function() {
                        (async function() {
                            try {
                                const res = await fetch(API_URL + "/admin-permissions");
                                if (res.ok) {
                                    const adminsPerms = await res.json();
                                    const permsObj = {};
                                    adminsPerms.forEach(function(adm) {
                                        const mods = Array.isArray(adm.allowed_modules) ? adm.allowed_modules : [];
                                        const tabs = adm.allowed_tabs && typeof adm.allowed_tabs === 'object' ? adm.allowed_tabs : {};
                                        // Criar objeto de m√≥dulos dinamicamente
                                        const modulosObj = {};
                                        SISTEMA_MODULOS_CONFIG.forEach(function(mod) {
                                            modulosObj[mod.id] = mods.length === 0 || mods.includes(mod.id);
                                        });
                                        permsObj[adm.cod_profissional] = {
                                            modulos: modulosObj,
                                            abas: tabs
                                        };
                                    });
                                    x(prev => ({...prev, adminPerms: permsObj, permsLoaded: true}));
                                }
                            } catch (err) {
                                console.error("Erro ao carregar permiss√µes:", err);
                                x(prev => ({...prev, permsLoaded: true}));
                            }
                        })();
                        return null;
                    })(),
                    React.createElement("div", {className: "bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4"},
                        React.createElement("div", {className: "flex items-center justify-between flex-wrap gap-3"},
                            React.createElement("div", null,
                                React.createElement("h2", {className: "text-lg font-bold text-blue-800"}, "üîê Sistema de Permiss√µes"),
                                React.createElement("p", {className: "text-blue-600 text-sm"}, "Clique em um admin para expandir e configurar")
                            ),
                            React.createElement("div", {className: "flex gap-2"},
                                React.createElement("button", {
                                    onClick: async function() {
                                        s(true);
                                        try {
                                            const res = await fetch(API_URL + "/admin-permissions");
                                            if (res.ok) {
                                                const adminsPerms = await res.json();
                                                const permsObj = {};
                                                adminsPerms.forEach(function(adm) {
                                                    const mods = Array.isArray(adm.allowed_modules) ? adm.allowed_modules : [];
                                                    const tabs = adm.allowed_tabs && typeof adm.allowed_tabs === 'object' ? adm.allowed_tabs : {};
                                                    // Criar objeto de m√≥dulos dinamicamente
                                                    const modulosObj = {};
                                                    SISTEMA_MODULOS_CONFIG.forEach(function(mod) {
                                                        modulosObj[mod.id] = mods.length === 0 || mods.includes(mod.id);
                                                    });
                                                    permsObj[adm.cod_profissional] = {
                                                        modulos: modulosObj,
                                                        abas: tabs
                                                    };
                                                });
                                                x({...p, adminPerms: permsObj, permsLoaded: true});
                                                ja("‚úÖ Atualizado!", "success");
                                            }
                                        } catch (err) {
                                            ja("‚ùå Erro", "error");
                                        }
                                        s(false);
                                    },
                                    className: "px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700"
                                }, "üîÑ"),
                                React.createElement("button", {
                                    onClick: async function() {
                                        s(true);
                                        const adminsList = A.filter(function(u) { return u.role === "admin" || u.role === "admin_financeiro"; });
                                        let savedCount = 0;
                                        
                                        for (let i = 0; i < adminsList.length; i++) {
                                            const admin = adminsList[i];
                                            const cod = admin.codProfissional;
                                            const perms = p.adminPerms && p.adminPerms[cod] ? p.adminPerms[cod] : null;
                                            
                                            if (!perms) continue;
                                            
                                            // Usar configura√ß√£o global para criar lista de m√≥dulos permitidos
                                            const allowedModules = [];
                                            const mods = perms.modulos || {};
                                            SISTEMA_MODULOS_CONFIG.forEach(function(mod) {
                                                if (mods[mod.id] !== false) allowedModules.push(mod.id);
                                            });
                                            
                                            const allowedTabs = perms.abas || {};
                                            
                                            try {
                                                const res = await fetch(API_URL + "/admin-permissions/" + encodeURIComponent(cod), {
                                                    method: "PATCH",
                                                    headers: {"Content-Type": "application/json"},
                                                    body: JSON.stringify({ allowed_modules: allowedModules, allowed_tabs: allowedTabs })
                                                });
                                                if (res.ok) savedCount++;
                                            } catch (err) {
                                                console.error("Erro:", err);
                                            }
                                        }
                                        ja(savedCount > 0 ? "‚úÖ Salvo!" : "‚ö†Ô∏è Nada para salvar", savedCount > 0 ? "success" : "warning");
                                        s(false);
                                    },
                                    className: "px-3 py-1.5 bg-purple-600 text-white rounded-lg text-sm font-semibold hover:bg-purple-700"
                                }, "üíæ Salvar")
                            )
                        )
                    ),
                    // Lista de admins colaps√°vel
                    A.filter(function(u) { return u.role === "admin" || u.role === "admin_financeiro"; }).length === 0
                        ? React.createElement("div", {className: "bg-white rounded-xl p-8 text-center text-gray-500"},
                            React.createElement("span", {className: "text-4xl block mb-2"}, "üë§"),
                            "Nenhum administrador cadastrado"
                        )
                        : React.createElement("div", {className: "space-y-2"},
                            A.filter(function(u) { return u.role === "admin" || u.role === "admin_financeiro"; }).map(function(admin) {
                                const cod = admin.codProfissional;
                                const perms = p.adminPerms && p.adminPerms[cod] ? p.adminPerms[cod] : { modulos: {}, abas: {} };
                                const mods = perms.modulos || {};
                                const abas = perms.abas || {};
                                const isExpanded = p.expandedAdmin === cod;
                                
                                // Usar configura√ß√£o global
                                const modulosConfig = SISTEMA_MODULOS_CONFIG;
                                
                                // Contar m√≥dulos ativos (din√¢mico)
                                const modulosAtivos = modulosConfig
                                    .filter(function(m) { return mods[m.id] !== false; }).length;
                                
                                // Contar abas restritas
                                const abasRestritas = Object.keys(abas).filter(function(k) { return abas[k] === false; }).length;
                                
                                return React.createElement("div", {
                                    key: cod,
                                    className: "bg-white rounded-xl shadow-sm border overflow-hidden"
                                },
                                    // Header colaps√°vel
                                    React.createElement("div", {
                                        className: "flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors",
                                        onClick: function() {
                                            x({...p, expandedAdmin: isExpanded ? null : cod});
                                        }
                                    },
                                        React.createElement("div", {className: "flex items-center gap-3"},
                                            React.createElement("div", {
                                                className: "w-10 h-10 rounded-full flex items-center justify-center text-white font-bold " +
                                                    (admin.role === "admin" ? "bg-blue-600" : "bg-green-600")
                                            }, admin.fullName ? admin.fullName.charAt(0).toUpperCase() : "?"),
                                            React.createElement("div", null,
                                                React.createElement("p", {className: "font-semibold"}, admin.fullName),
                                                React.createElement("p", {className: "text-xs text-gray-500"}, admin.role === "admin" ? "üëë Admin" : "üí∞ Admin Fin.")
                                            )
                                        ),
                                        React.createElement("div", {className: "flex items-center gap-3"},
                                            React.createElement("div", {className: "text-right"},
                                                React.createElement("p", {className: "text-sm font-medium " + (modulosAtivos === 6 ? "text-green-600" : "text-orange-600")},
                                                    modulosAtivos + "/" + SISTEMA_MODULOS_CONFIG.length + " m√≥dulos"
                                                ),
                                                abasRestritas > 0 && React.createElement("p", {className: "text-xs text-red-500"}, abasRestritas + " abas restritas")
                                            ),
                                            React.createElement("span", {className: "text-gray-400 text-xl"}, isExpanded ? "‚ñº" : "‚ñ∂")
                                        )
                                    ),
                                    // Conte√∫do expandido
                                    isExpanded && React.createElement("div", {className: "border-t p-4 bg-gray-50"},
                                        React.createElement("div", {className: "space-y-3"},
                                            modulosConfig.map(function(modConfig) {
                                                const modAtivo = mods[modConfig.id] !== false;
                                                const modKey = modConfig.id;
                                                
                                                return React.createElement("div", {
                                                    key: modKey,
                                                    className: "border rounded-lg overflow-hidden bg-white " + (modAtivo ? "border-green-200" : "border-gray-200")
                                                },
                                                    React.createElement("div", {
                                                        className: "flex items-center justify-between p-2 cursor-pointer " + (modAtivo ? "bg-green-50" : "bg-gray-100"),
                                                        onClick: function() {
                                                            const newPerms = JSON.parse(JSON.stringify(p.adminPerms || {}));
                                                            if (!newPerms[cod]) newPerms[cod] = { modulos: {}, abas: {} };
                                                            if (!newPerms[cod].modulos) newPerms[cod].modulos = {};
                                                            newPerms[cod].modulos[modKey] = !modAtivo;
                                                            x({...p, adminPerms: newPerms});
                                                        }
                                                    },
                                                        React.createElement("div", {className: "flex items-center gap-2"},
                                                            React.createElement("span", null, modConfig.icon),
                                                            React.createElement("span", {className: "font-medium text-sm"}, modConfig.label)
                                                        ),
                                                        React.createElement("span", {
                                                            className: "px-2 py-0.5 rounded text-xs font-bold " + (modAtivo ? "bg-green-200 text-green-800" : "bg-gray-200 text-gray-600")
                                                        }, modAtivo ? "‚úì" : "‚úó")
                                                    ),
                                                    modAtivo && modConfig.abas.length > 0 && React.createElement("div", {className: "p-2 flex flex-wrap gap-1 border-t"},
                                                        modConfig.abas.map(function(aba) {
                                                            const abaKey = modKey + "_" + aba.id;
                                                            const abaAtiva = abas[abaKey] !== false;
                                                            return React.createElement("button", {
                                                                key: abaKey,
                                                                onClick: function(e) {
                                                                    e.stopPropagation();
                                                                    const newPerms = JSON.parse(JSON.stringify(p.adminPerms || {}));
                                                                    if (!newPerms[cod]) newPerms[cod] = { modulos: {}, abas: {} };
                                                                    if (!newPerms[cod].abas) newPerms[cod].abas = {};
                                                                    newPerms[cod].abas[abaKey] = !abaAtiva;
                                                                    x({...p, adminPerms: newPerms});
                                                                },
                                                                className: "px-2 py-1 rounded text-xs font-medium " + (abaAtiva ? "bg-green-100 text-green-700" : "bg-gray-100 text-gray-400 line-through")
                                                            }, aba.label);
                                                        })
                                                    )
                                                );
                                            })
                                        )
                                    )
                                );
                            })
                        )
                ),
                // TAB SISTEMA - verifica permiss√£o
                p.configTab === "sistema" && (function() {
                    if ("admin_master" === l.role) return true;
                    const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                    if (Object.keys(abas).length === 0) return true;
                    return abas["config_sistema"] !== false;
                })() && React.createElement("div", null,
                    React.createElement("div", {className: "bg-white rounded-xl shadow-sm border p-6 mb-6"},
                        React.createElement("h2", {className: "text-lg font-bold mb-4"}, "‚ö° Informa√ß√µes do Sistema"),
                        React.createElement("div", {className: "grid md:grid-cols-2 gap-4"},
                            React.createElement("div", {className: "bg-gray-50 rounded-lg p-4"},
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Vers√£o"),
                                React.createElement("p", {className: "font-bold text-lg"}, "Sistema Tutts v" + APP_VERSION)
                            ),
                            React.createElement("div", {className: "bg-gray-50 rounded-lg p-4"},
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Usu√°rio Logado"),
                                React.createElement("p", {className: "font-bold text-lg"}, l.fullName)
                            ),
                            React.createElement("div", {className: "bg-gray-50 rounded-lg p-4"},
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Total de Usu√°rios"),
                                React.createElement("p", {className: "font-bold text-lg"}, A.length)
                            ),
                            React.createElement("div", {className: "bg-gray-50 rounded-lg p-4"},
                                React.createElement("p", {className: "text-sm text-gray-500"}, "API Backend"),
                                React.createElement("p", {className: "font-bold text-lg text-green-600"}, "Online ‚úì")
                            )
                        )
                    ),
                    React.createElement("div", {className: "bg-yellow-50 border border-yellow-200 rounded-xl p-6"},
                        React.createElement("h3", {className: "font-bold text-yellow-800 mb-2"}, "‚ö†Ô∏è Zona de Perigo"),
                        React.createElement("p", {className: "text-yellow-700 text-sm mb-4"}, "A√ß√µes irrevers√≠veis. Use com cuidado."),
                        React.createElement("div", {className: "flex flex-wrap gap-3"},
                            React.createElement("button", {
                                onClick: function() { if(confirm("Limpar cache local?")) { localStorage.clear(); sessionStorage.clear(); ja("Cache limpo!", "success"); } },
                                className: "px-4 py-2 bg-yellow-600 text-white rounded-lg text-sm hover:bg-yellow-700"
                            }, "üóëÔ∏è Limpar Cache"),
                            React.createElement("button", {
                                onClick: function() { 
                                    if(confirm("For√ßar atualiza√ß√£o do aplicativo? O app ser√° recarregado.")) { 
                                        // Limpar tudo
                                        localStorage.removeItem(VERSION_KEY);
                                        if ('caches' in window) {
                                            caches.keys().then(names => names.forEach(name => caches.delete(name)));
                                        }
                                        if ('serviceWorker' in navigator) {
                                            navigator.serviceWorker.getRegistrations().then(regs => regs.forEach(reg => reg.unregister()));
                                        }
                                        setTimeout(() => window.location.reload(true), 500);
                                    } 
                                },
                                className: "px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700"
                            }, "üîÑ For√ßar Atualiza√ß√£o")
                        )
                    ),
                    // Info da vers√£o
                    React.createElement("div", {className: "bg-gray-100 rounded-xl p-4 text-center text-sm text-gray-500"},
                        "Vers√£o: " + APP_VERSION + " ‚Ä¢ ",
                        React.createElement("a", {
                            href: "#",
                            onClick: function(e) {
                                e.preventDefault();
                                localStorage.removeItem(VERSION_KEY);
                                if ('caches' in window) caches.keys().then(names => names.forEach(name => caches.delete(name)));
                                window.location.reload(true);
                            },
                            className: "text-blue-600 hover:underline"
                        }, "Verificar atualiza√ß√µes")
                    )
                ),
                // TAB AUDITORIA
                p.configTab === "auditoria" && ("admin_master" === l.role || "admin" === l.role) && React.createElement(AuditLogs, { apiUrl: API_URL, showToast: ja })
            ));
        }
        // Verificar permiss√£o para BI (admin comum)
        const canAccessBI = hasModuleAccess(l, "bi");
        if (canAccessBI && "bi" === Ee) {
            return React.createElement("div", {
                className: "min-h-screen bg-gray-100"
            }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null), React.createElement("nav", {
                className: "bg-gradient-to-r from-purple-700 to-purple-900 shadow-lg"
            }, React.createElement("div", {
                className: "max-w-full mx-auto px-4 py-3 flex justify-between items-center"
            }, React.createElement("div", {
                className: "flex items-center gap-4"
            }, 
            // Foto de perfil
            socialProfile?.profile_photo ? React.createElement("img", {
                src: socialProfile.profile_photo,
                className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
            }) : React.createElement("div", {
                className: "w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold border-2 border-white/50"
            }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
            React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("span", {
                className: "text-2xl font-bold text-yellow-400"
            }, "tutts")), React.createElement("h1", {
                className: "text-xl font-bold text-white"
            }, "Acompanhamento Geral")), React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("button", {
                onClick: () => _a(!0),
                className: "px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 text-sm font-semibold"
            }, "üîç Filtros"), React.createElement("button", {
                onClick: () => he("home"),
                className: "px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 text-sm"
            }, "üìã Voltar"), React.createElement("button", {
                onClick: () => o(null),
                className: "px-4 py-2 text-white hover:bg-white/20 rounded-lg"
            }, "Sair")))), React.createElement("div", {
                className: "bg-white border-b px-4 py-2 text-xs text-gray-500"
            }, React.createElement("span", null, "√ölt. Leitura: ", (new Date).toLocaleString("pt-BR")), React.createElement("span", {
                className: "ml-4"
            }, "Dados atualizados: ", ua.data_fim ? new Date(ua.data_fim).toLocaleDateString("pt-BR") : "-")), 
            
            // Barra de abas - oculta na Home
            Et !== "home-bi" && React.createElement("div", {
                className: "bg-white border-b sticky top-0 z-10 shadow-sm"
            }, React.createElement("div", {
                className: "max-w-full mx-auto px-4 flex gap-1 overflow-x-auto"
            }, 
            // 1. Home
            React.createElement("button", {
                onClick: () => { ht("home-bi"); },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("home-bi" === Et ? "border-purple-600 text-purple-600 bg-purple-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üè† Home"), 
            // 2. Dashboard
            React.createElement("button", {
                onClick: () => { ht("dashboard"); el(); },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("dashboard" === Et ? "border-purple-600 text-purple-600 bg-purple-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üìä Dashboard"), 
            // 3. Acompanhamento
            React.createElement("button", {
                onClick: () => { ht("acompanhamento"); carregarAcompanhamento(); },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("acompanhamento" === Et ? "border-purple-600 text-purple-600 bg-purple-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üìà Acompanhamento"), 
            // 4. Por Profissional
            React.createElement("button", {
                onClick: () => { ht("profissionais"); el(); },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("profissionais" === Et ? "border-purple-600 text-purple-600 bg-purple-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üë§ Por Profissional"), 
            // 5. An√°lise por OS
            React.createElement("button", {
                onClick: () => { ht("os"); (async () => {
                        try {
                            Ra(!0);
                            const e = Xa(),
                                t = await fetch(`${API_URL}/bi/entregas-lista?${e}`),
                                data = await t.json();
                            Ut(Array.isArray(data) ? data : []);
                        } catch (e) {
                            console.error("Erro ao carregar entregas:", e)
                        }
                        Ra(!1)
                    })(); 
                },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("os" === Et ? "border-purple-600 text-purple-600 bg-purple-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üìã An√°lise por OS"), 
            // 6. Cliente 767
            React.createElement("button", {
                onClick: () => {
                    ht("cliente767"), carregarCliente767()
                },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("cliente767" === Et ? "border-orange-600 text-orange-600 bg-orange-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üè¢ Cliente 767"), 
            // 7. Garantido
            React.createElement("button", {
                onClick: () => { console.log('üîò Bot√£o Garantido clicado!'); ht("garantido"); carregarGarantido(); },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("garantido" === Et ? "border-green-600 text-green-600 bg-green-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üí∞ Garantido"), 
            // 8. Relat√≥rio IA
            React.createElement("button", {
                onClick: () => {
                    ht("relatorio-ia")
                },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all flex items-center gap-2 " + ("relatorio-ia" === Et ? "border-violet-600 text-violet-600 bg-violet-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, React.createElement("img", {src: "https://raw.githubusercontent.com/Leonardodevcloud/tutts-frontend/main/gemini-app-icon-hd.png", alt: "", className: "w-5 h-5 rounded"}), "Relat√≥rio IA"), 
            // 9. Upload
            React.createElement("button", {
                onClick: () => { ht("upload"); },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("upload" === Et ? "border-purple-600 text-purple-600 bg-purple-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "üì§ Upload"), 
            // 10. Config
            React.createElement("button", {
                onClick: () => {
                    ht("config"), tl(), al(), carregarPrazosProf()
                },
                className: "px-4 py-3 text-sm font-semibold whitespace-nowrap border-b-2 transition-all " + ("config" === Et ? "border-purple-600 text-purple-600 bg-purple-50" : "border-transparent text-gray-600 hover:text-gray-800")
            }, "‚öôÔ∏è Config"))), 
            
            // ===== BARRA DE FILTROS ATIVOS =====
            (Et === "dashboard" || Et === "acompanhamento" || Et === "profissionais" || Et === "os") && (
                (ua.cod_cliente && ua.cod_cliente.length > 0) || 
                (ua.centro_custo && ua.centro_custo.length > 0) || 
                ua.categoria || 
                ua.regiao ||
                ua.status_prazo ||
                ua.status_retorno
            ) && React.createElement("div", {
                className: "bg-gradient-to-r from-purple-50 to-violet-50 border-b border-purple-200 px-4 py-2"
            },
                React.createElement("div", {className: "max-w-full mx-auto flex items-center gap-2 flex-wrap"},
                    React.createElement("span", {className: "text-xs font-semibold text-purple-700"}, "üîç Filtros:"),
                    
                    // Per√≠odo
                    ua.data_inicio && React.createElement("span", {className: "inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs"},
                        "üìÖ " + new Date(ua.data_inicio + "T12:00:00").toLocaleDateString("pt-BR") + " a " + new Date(ua.data_fim + "T12:00:00").toLocaleDateString("pt-BR")
                    ),
                    
                    // Regi√£o
                    ua.regiao && React.createElement("span", {className: "inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs"},
                        "üó∫Ô∏è " + (aa.find(r => r.id === parseInt(ua.regiao))?.nome || "Regi√£o " + ua.regiao)
                    ),
                    
                    // Clientes - com tooltip quando h√° m√∫ltiplos
                    ua.cod_cliente && ua.cod_cliente.length > 0 && React.createElement("span", {
                        className: "inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs cursor-pointer relative group",
                        title: ua.cod_cliente.length > 1 ? ua.cod_cliente.map(c => c + " - " + (il(c) || "Cliente")).join("\n") : ""
                    },
                        "üè¢ " + (ua.cod_cliente.length === 1 
                            ? (il(ua.cod_cliente[0]) || "Cliente " + ua.cod_cliente[0])
                            : ua.cod_cliente.length + " clientes"),
                        // Tooltip customizado
                        ua.cod_cliente.length > 1 && React.createElement("div", {
                            className: "absolute left-0 top-full mt-1 bg-gray-900 text-white text-xs rounded-lg p-2 shadow-xl z-50 hidden group-hover:block whitespace-nowrap min-w-max"
                        },
                            React.createElement("div", {className: "font-semibold mb-1 text-purple-300"}, "üè¢ Clientes selecionados:"),
                            ua.cod_cliente.map((c, i) => React.createElement("div", {key: c, className: "py-0.5"},
                                c + " - " + (il(c) || "Cliente")
                            ))
                        )
                    ),
                    
                    // Centros de Custo - com tooltip quando h√° m√∫ltiplos
                    ua.centro_custo && ua.centro_custo.length > 0 && React.createElement("span", {
                        className: "inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs cursor-pointer relative group",
                        title: ua.centro_custo.length > 1 ? ua.centro_custo.join("\n") : ""
                    },
                        "üìÅ " + (ua.centro_custo.length === 1 ? ua.centro_custo[0] : ua.centro_custo.length + " centros"),
                        // Tooltip customizado
                        ua.centro_custo.length > 1 && React.createElement("div", {
                            className: "absolute left-0 top-full mt-1 bg-gray-900 text-white text-xs rounded-lg p-2 shadow-xl z-50 hidden group-hover:block whitespace-nowrap min-w-max"
                        },
                            React.createElement("div", {className: "font-semibold mb-1 text-green-300"}, "üìÅ Centros de custo:"),
                            ua.centro_custo.map((cc, i) => React.createElement("div", {key: cc, className: "py-0.5"}, cc))
                        )
                    ),
                    
                    // Categoria
                    ua.categoria && React.createElement("span", {className: "inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs"},
                        "üè∑Ô∏è " + ua.categoria
                    ),
                    
                    // Status Prazo
                    ua.status_prazo && React.createElement("span", {className: "inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs " + (ua.status_prazo === "dentro" ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700")},
                        ua.status_prazo === "dentro" ? "‚úÖ No Prazo" : "‚ùå Fora Prazo"
                    ),
                    
                    // Status Retorno
                    ua.status_retorno && React.createElement("span", {className: "inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs " + (ua.status_retorno === "sem_retorno" ? "bg-green-100 text-green-700" : "bg-orange-100 text-orange-700")},
                        ua.status_retorno === "sem_retorno" ? "‚úÖ Sem Retorno" : "üîÑ Com Retorno"
                    ),
                    
                    // Bot√£o limpar
                    React.createElement("button", {
                        onClick: () => {
                            const novoFiltro = {
                                ...ua,
                                cod_cliente: [],
                                centro_custo: [],
                                categoria: "",
                                status_prazo: "",
                                status_prazo_prof: "",
                                status_retorno: "",
                                regiao: ""
                            };
                            ga(novoFiltro);
                            rl(novoFiltro);
                        },
                        className: "ml-auto px-2 py-1 text-xs text-red-600 hover:bg-red-100 rounded-full transition-colors"
                    }, "‚úï Limpar")
                )
            ),
            
            wa && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 z-50 flex items-start justify-center pt-10 overflow-hidden"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[85vh] overflow-y-auto"
            }, React.createElement("div", {
                className: "sticky top-0 bg-purple-700 text-white px-6 py-4 flex justify-between items-center z-10"
            }, React.createElement("h2", {
                className: "text-lg font-bold"
            }, "üîç Filtros Inteligentes"), React.createElement("button", {
                onClick: () => _a(!1),
                className: "text-white hover:bg-white/20 rounded-lg px-3 py-1 text-xl"
            }, "‚úï")), React.createElement("div", {
                className: "p-6"
            }, React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"
            }, 
            // Calend√°rio Data In√≠cio
            React.createElement("div", {
                className: "border rounded-lg p-3 bg-gray-50 relative"
            }, React.createElement("h3", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "üìÖ Data In√≠cio"),
            React.createElement("div", {
                className: "relative"
            },
                React.createElement("input", {
                    type: "text",
                    readOnly: true,
                    value: ua.data_inicio ? new Date(ua.data_inicio + 'T12:00:00').toLocaleDateString('pt-BR') : '',
                    onClick: () => { setCalDataInicioAberto(!calDataInicioAberto); setCalDataFimAberto(false); setCalMesAtual(ua.data_inicio ? new Date(ua.data_inicio + 'T12:00:00') : new Date()); },
                    placeholder: "Selecione...",
                    className: "w-full px-3 py-2 border rounded text-sm cursor-pointer"
                })
            ),
            // Calend√°rio dropdown Data In√≠cio
            calDataInicioAberto && React.createElement("div", {
                className: "absolute z-50 mt-1 bg-white border rounded-lg shadow-xl p-3 left-0 right-0"
            },
                // Header do calend√°rio
                React.createElement("div", {className: "flex items-center justify-between mb-3"},
                    React.createElement("button", {
                        onClick: () => setCalMesAtual(new Date(calMesAtual.getFullYear(), calMesAtual.getMonth() - 1, 1)),
                        className: "p-1 hover:bg-gray-100 rounded"
                    }, "‚óÄ"),
                    React.createElement("span", {className: "font-semibold text-sm"},
                        calMesAtual.toLocaleDateString('pt-BR', {month: 'long', year: 'numeric'})
                    ),
                    React.createElement("button", {
                        onClick: () => setCalMesAtual(new Date(calMesAtual.getFullYear(), calMesAtual.getMonth() + 1, 1)),
                        className: "p-1 hover:bg-gray-100 rounded"
                    }, "‚ñ∂")
                ),
                // Dias da semana
                React.createElement("div", {className: "grid grid-cols-7 gap-1 mb-1"},
                    ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'].map((d, i) => 
                        React.createElement("div", {key: i, className: "text-center text-xs font-semibold text-gray-500 py-1"}, d)
                    )
                ),
                // Dias do m√™s
                React.createElement("div", {className: "grid grid-cols-7 gap-1"},
                    (() => {
                        const ano = calMesAtual.getFullYear();
                        const mes = calMesAtual.getMonth();
                        const primeiroDia = new Date(ano, mes, 1).getDay();
                        const ultimoDia = new Date(ano, mes + 1, 0).getDate();
                        const dias = [];
                        // Dias vazios antes
                        for (let i = 0; i < primeiroDia; i++) {
                            dias.push(React.createElement("div", {key: 'empty-' + i}));
                        }
                        // Dias do m√™s
                        for (let dia = 1; dia <= ultimoDia; dia++) {
                            const dataStr = `${ano}-${String(mes + 1).padStart(2, '0')}-${String(dia).padStart(2, '0')}`;
                            const temDados = biDatasComDados.has(dataStr);
                            const selecionado = ua.data_inicio === dataStr;
                            dias.push(React.createElement("button", {
                                key: dia,
                                onClick: () => { ga({...ua, data_inicio: dataStr}); setCalDataInicioAberto(false); },
                                className: "p-1.5 text-xs rounded-full transition-all " + 
                                    (selecionado ? "bg-purple-600 text-white font-bold" : 
                                    temDados ? "bg-green-100 text-green-700 hover:bg-green-200 font-semibold" : 
                                    "text-gray-400 hover:bg-gray-100")
                            }, dia));
                        }
                        return dias;
                    })()
                ),
                // Legenda
                React.createElement("div", {className: "flex items-center justify-center gap-4 mt-3 pt-2 border-t text-xs"},
                    React.createElement("span", {className: "flex items-center gap-1"},
                        React.createElement("span", {className: "w-3 h-3 rounded-full bg-green-200"}),
                        "Com dados"
                    ),
                    React.createElement("span", {className: "flex items-center gap-1"},
                        React.createElement("span", {className: "w-3 h-3 rounded-full bg-gray-200"}),
                        "Sem dados"
                    )
                ),
                // Bot√£o fechar
                React.createElement("button", {
                    onClick: () => setCalDataInicioAberto(false),
                    className: "w-full mt-2 py-1 text-xs text-gray-500 hover:text-gray-700"
                }, "Fechar")
            )),
            
            // Calend√°rio Data Fim
            React.createElement("div", {
                className: "border rounded-lg p-3 bg-gray-50 relative"
            }, React.createElement("h3", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "üìÖ Data Fim"),
            React.createElement("div", {
                className: "relative"
            },
                React.createElement("input", {
                    type: "text",
                    readOnly: true,
                    value: ua.data_fim ? new Date(ua.data_fim + 'T12:00:00').toLocaleDateString('pt-BR') : '',
                    onClick: () => { setCalDataFimAberto(!calDataFimAberto); setCalDataInicioAberto(false); setCalMesAtual(ua.data_fim ? new Date(ua.data_fim + 'T12:00:00') : new Date()); },
                    placeholder: "Selecione...",
                    className: "w-full px-3 py-2 border rounded text-sm cursor-pointer"
                })
            ),
            // Calend√°rio dropdown Data Fim
            calDataFimAberto && React.createElement("div", {
                className: "absolute z-50 mt-1 bg-white border rounded-lg shadow-xl p-3 left-0 right-0"
            },
                // Header do calend√°rio
                React.createElement("div", {className: "flex items-center justify-between mb-3"},
                    React.createElement("button", {
                        onClick: () => setCalMesAtual(new Date(calMesAtual.getFullYear(), calMesAtual.getMonth() - 1, 1)),
                        className: "p-1 hover:bg-gray-100 rounded"
                    }, "‚óÄ"),
                    React.createElement("span", {className: "font-semibold text-sm"},
                        calMesAtual.toLocaleDateString('pt-BR', {month: 'long', year: 'numeric'})
                    ),
                    React.createElement("button", {
                        onClick: () => setCalMesAtual(new Date(calMesAtual.getFullYear(), calMesAtual.getMonth() + 1, 1)),
                        className: "p-1 hover:bg-gray-100 rounded"
                    }, "‚ñ∂")
                ),
                // Dias da semana
                React.createElement("div", {className: "grid grid-cols-7 gap-1 mb-1"},
                    ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'].map((d, i) => 
                        React.createElement("div", {key: i, className: "text-center text-xs font-semibold text-gray-500 py-1"}, d)
                    )
                ),
                // Dias do m√™s
                React.createElement("div", {className: "grid grid-cols-7 gap-1"},
                    (() => {
                        const ano = calMesAtual.getFullYear();
                        const mes = calMesAtual.getMonth();
                        const primeiroDia = new Date(ano, mes, 1).getDay();
                        const ultimoDia = new Date(ano, mes + 1, 0).getDate();
                        const dias = [];
                        // Dias vazios antes
                        for (let i = 0; i < primeiroDia; i++) {
                            dias.push(React.createElement("div", {key: 'empty-' + i}));
                        }
                        // Dias do m√™s
                        for (let dia = 1; dia <= ultimoDia; dia++) {
                            const dataStr = `${ano}-${String(mes + 1).padStart(2, '0')}-${String(dia).padStart(2, '0')}`;
                            const temDados = biDatasComDados.has(dataStr);
                            const selecionado = ua.data_fim === dataStr;
                            dias.push(React.createElement("button", {
                                key: dia,
                                onClick: () => { ga({...ua, data_fim: dataStr}); setCalDataFimAberto(false); },
                                className: "p-1.5 text-xs rounded-full transition-all " + 
                                    (selecionado ? "bg-purple-600 text-white font-bold" : 
                                    temDados ? "bg-green-100 text-green-700 hover:bg-green-200 font-semibold" : 
                                    "text-gray-400 hover:bg-gray-100")
                            }, dia));
                        }
                        return dias;
                    })()
                ),
                // Legenda
                React.createElement("div", {className: "flex items-center justify-center gap-4 mt-3 pt-2 border-t text-xs"},
                    React.createElement("span", {className: "flex items-center gap-1"},
                        React.createElement("span", {className: "w-3 h-3 rounded-full bg-green-200"}),
                        "Com dados"
                    ),
                    React.createElement("span", {className: "flex items-center gap-1"},
                        React.createElement("span", {className: "w-3 h-3 rounded-full bg-gray-200"}),
                        "Sem dados"
                    )
                ),
                // Bot√£o fechar
                React.createElement("button", {
                    onClick: () => setCalDataFimAberto(false),
                    className: "w-full mt-2 py-1 text-xs text-gray-500 hover:text-gray-700"
                }, "Fechar")
            )),
            
            React.createElement("div", {
                className: "border rounded-lg p-3 bg-gray-50"
            }, React.createElement("h3", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "‚è±Ô∏è Status Prazo"), React.createElement("select", {
                value: ua.status_prazo,
                onChange: e => ga({
                    ...ua,
                    status_prazo: e.target.value
                }),
                className: "w-full px-3 py-2 border rounded text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Todos"), React.createElement("option", {
                value: "dentro"
            }, "‚úÖ Dentro do Prazo"), React.createElement("option", {
                value: "fora"
            }, "‚ùå Fora do Prazo"))), Et === "os" && React.createElement("div", {
                className: "border rounded-lg p-3 bg-blue-50"
            }, React.createElement("h3", {
                className: "font-semibold text-blue-700 mb-2 text-sm"
            }, "‚è±Ô∏è Prazo Prof"), React.createElement("select", {
                value: ua.status_prazo_prof || "",
                onChange: e => ga({
                    ...ua,
                    status_prazo_prof: e.target.value
                }),
                className: "w-full px-3 py-2 border border-blue-300 rounded text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Todos"), React.createElement("option", {
                value: "dentro"
            }, "‚úÖ Dentro do Prazo Prof"), React.createElement("option", {
                value: "fora"
            }, "‚ùå Fora do Prazo Prof"))), React.createElement("div", {
                className: "border rounded-lg p-3 bg-gray-50"
            }, React.createElement("h3", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "üîÑ Retorno"), React.createElement("select", {
                value: ua.status_retorno || "",
                onChange: e => ga({
                    ...ua,
                    status_retorno: e.target.value
                }),
                className: "w-full px-3 py-2 border rounded text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Todos"), React.createElement("option", {
                value: "com_retorno"
            }, "üîÑ Com Retorno"), React.createElement("option", {
                value: "sem_retorno"
            }, "‚úÖ Sem Retorno"))), React.createElement("div", {
                className: "border rounded-lg p-3 bg-gray-50"
            }, React.createElement("h3", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "üó∫Ô∏è Regi√£o"), React.createElement("select", {
                value: ua.regiao || "",
                onChange: e => {
                    const t = e.target.value;
                    let a;
                    if (t) {
                        const e = aa.find(e => e.id === parseInt(t)),
                            l = e?.clientes?.map(e => String(e)) || [];
                        a = {
                            ...ua,
                            regiao: t,
                            cod_cliente: l,
                            centro_custo: [],
                            categoria: ""
                        }
                    } else a = {
                        ...ua,
                        regiao: "",
                        cod_cliente: [],
                        centro_custo: [],
                        categoria: ""
                    };
                    ga(a), rl(a)
                },
                className: "w-full px-3 py-2 border rounded text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Todas as Regi√µes"), aa.map(e => React.createElement("option", {
                key: e.id,
                value: e.id
            }, e.nome, " (", e.clientes?.length || 0, " clientes)"))))), React.createElement("div", {
                className: "grid grid-cols-1 gap-4 mb-4"
            }, React.createElement("div", {
                className: "border rounded-lg p-3 bg-blue-50"
            }, React.createElement("h3", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "üè∑Ô∏è Categoria"), React.createElement("select", {
                value: ua.categoria,
                onChange: e => {
                    const t = {
                        ...ua,
                        categoria: e.target.value
                    };
                    ga(t), rl(t)
                },
                className: "w-full px-3 py-2 border rounded text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Todas as Categorias (", pa.length, " dispon√≠veis)"), pa.map(e => React.createElement("option", {
                key: e,
                value: e
            }, e))))), React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-2 gap-4"
            }, React.createElement("div", {
                className: "border rounded-lg p-4 bg-purple-50"
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-3"
            }, React.createElement("h3", {
                className: "font-bold text-purple-800"
            }, "üè¢ Cliente (Loja)"), (ua.cod_cliente || []).length > 0 ? React.createElement("button", {
                onClick: () => {
                    const e = {
                        ...ua,
                        cod_cliente: [],
                        centro_custo: [],
                        regiao: ""
                    };
                    ga(e), rl(e)
                },
                className: "text-xs bg-purple-200 text-purple-800 px-2 py-1 rounded-full font-semibold hover:bg-purple-300 cursor-pointer"
            }, (ua.cod_cliente || []).length, " selecionado(s) ‚úï") : React.createElement("span", {
                className: "text-xs text-purple-600"
            }, "Todas")), 
            // Campo de busca
            React.createElement("input", {
                type: "text",
                placeholder: "üîç Buscar por c√≥digo ou nome...",
                value: buscaClienteModal,
                onChange: e => setBuscaClienteModal(e.target.value),
                className: "w-full px-3 py-2 border-2 border-purple-200 rounded-lg text-sm mb-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200"
            }),
            React.createElement("select", {
                multiple: !0,
                size: "10",
                value: ua.cod_cliente || [],
                onChange: e => {
                    const t = Array.from(e.target.selectedOptions, e => e.value),
                        a = {
                            ...ua,
                            cod_cliente: t,
                            centro_custo: [],
                            regiao: ""
                        };
                    ga(a), rl(a)
                },
                className: "w-full px-3 py-2 border-2 border-purple-200 rounded-lg text-sm bg-white focus:border-purple-500 focus:ring-2 focus:ring-purple-200"
            }, (function() {
                // Filtrar e remover duplicatas por cod_cliente
                var clientesUnicos = [];
                var codigosVistos = {};
                ia.filter(function(e) {
                    if (!buscaClienteModal) return true;
                    var termo = buscaClienteModal.toLowerCase();
                    var codigo = String(e.cod_cliente).toLowerCase();
                    var nome = (il(e.cod_cliente) || e.nome_cliente || "").toLowerCase();
                    return codigo.includes(termo) || nome.includes(termo);
                }).forEach(function(e) {
                    if (!codigosVistos[e.cod_cliente]) {
                        codigosVistos[e.cod_cliente] = true;
                        clientesUnicos.push(e);
                    }
                });
                return clientesUnicos;
            })().map(e => React.createElement("option", {
                key: e.cod_cliente,
                value: String(e.cod_cliente),
                className: "py-1"
            }, e.cod_cliente, " - ", il(e.cod_cliente) || e.nome_cliente || "Cliente"))), React.createElement("p", {
                className: "text-xs text-purple-600 mt-2"
            }, "üí° Ctrl+Click para multi-sele√ß√£o | Sem sele√ß√£o = Todas")), React.createElement("div", {
                className: "border rounded-lg p-4 bg-green-50"
            }, React.createElement("div", {
                className: "flex justify-between items-center mb-3"
            }, React.createElement("h3", {
                className: "font-bold text-green-800"
            }, "üìÅ Centro de Custo"), (ua.centro_custo || []).length > 0 ? React.createElement("button", {
                onClick: () => {
                    const e = {
                        ...ua,
                        centro_custo: []
                    };
                    ga(e), rl(e)
                },
                className: "text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full font-semibold hover:bg-green-300 cursor-pointer"
            }, (ua.centro_custo || []).length, " selecionado(s) ‚úï") : React.createElement("span", {
                className: "text-xs text-green-600"
            }, "Todos")), React.createElement("select", {
                multiple: !0,
                size: "10",
                value: ua.centro_custo || [],
                onChange: e => {
                    const t = Array.from(e.target.selectedOptions, e => e.value),
                        a = {
                            ...ua,
                            centro_custo: t
                        };
                    ga(a), rl(a)
                },
                className: "w-full px-3 py-2 border-2 border-green-200 rounded-lg text-sm bg-white focus:border-green-500 focus:ring-2 focus:ring-green-200"
            }, (function() {
                // Remover duplicatas de centro de custo
                var centrosUnicos = [];
                var centrosVistos = {};
                kt.forEach(function(e) {
                    if (e.centro_custo && !centrosVistos[e.centro_custo]) {
                        centrosVistos[e.centro_custo] = true;
                        centrosUnicos.push(e);
                    }
                });
                return centrosUnicos;
            })().map(e => {
                const t = Object.keys(Tt).find(t => (Tt[t] || []).includes(e.centro_custo));
                return React.createElement("option", {
                    key: e.centro_custo,
                    value: e.centro_custo,
                    className: "py-1"
                }, t ? t + " - " : "", e.centro_custo)
            })), React.createElement("p", {
                className: "text-xs text-green-600 mt-2"
            }, "üí° Ctrl+Click para multi-sele√ß√£o | Sem sele√ß√£o = Todos")))), React.createElement("div", {
                className: "sticky bottom-0 bg-gray-100 px-6 py-4 flex justify-between border-t"
            }, React.createElement("button", {
                onClick: () => {
                    const e = {
                        ...ua,
                        cod_cliente: [],
                        centro_custo: [],
                        categoria: "",
                        status_prazo: "",
                        status_prazo_prof: "",
                        status_retorno: "",
                        regiao: ""
                    };
                    ga(e), da(jt), Pt(At), xa(ra)
                },
                className: "px-5 py-2.5 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition"
            }, "üóëÔ∏è Limpar Filtros"), React.createElement("button", {
                onClick: () => {
                    _a(!1), ol(ua)
                },
                className: "px-6 py-2.5 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition shadow-lg"
            }, "üîç Aplicar Filtros")))), React.createElement("div", {
                className: "max-w-full mx-auto p-4"
            }, ba ? React.createElement("div", {
                className: "flex flex-col items-center justify-center py-20"
            }, 
            // Container principal do loading
            React.createElement("div", {
                className: "w-full max-w-md"
            },
            // √çcone animado
            React.createElement("div", {
                className: "flex justify-center mb-6"
            }, React.createElement("div", {
                className: "relative"
            }, React.createElement("div", {
                className: "w-20 h-20 border-4 border-purple-200 rounded-full"
            }), React.createElement("div", {
                className: "absolute top-0 left-0 w-20 h-20 border-4 border-purple-600 rounded-full border-t-transparent animate-spin"
            }), React.createElement("div", {
                className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl"
            }, "üìä"))),
            // Barra de progresso
            React.createElement("div", {
                className: "w-full bg-purple-100 rounded-full h-3 mb-4 overflow-hidden"
            }, React.createElement("div", {
                className: "h-full bg-gradient-to-r from-purple-500 via-purple-600 to-purple-500 rounded-full transition-all duration-300 animate-pulse",
                style: { 
                    width: "100%",
                    backgroundSize: "200% 100%",
                    animation: "shimmer 1.5s infinite linear"
                }
            })),
            // Mensagem din√¢mica
            React.createElement("p", {
                className: "text-center text-purple-700 font-medium mb-2"
            }, loadingMessage),
            // Dicas/textos secund√°rios
            React.createElement("p", {
                className: "text-center text-gray-400 text-sm animate-pulse"
            }, ["Processando milhares de registros...", "Analisando m√©tricas de desempenho...", "Calculando indicadores...", "Organizando dados por regi√£o...", "Gerando visualiza√ß√µes..."][Math.floor(Date.now() / 2000) % 5])
            )) : React.createElement(React.Fragment, null, 
            
            // =============================================
            // HOME BI - P√°gina Inicial do M√≥dulo
            // =============================================
            "home-bi" === Et && React.createElement("div", {className: "min-h-screen bg-gradient-to-br from-purple-50 via-white to-violet-50"},
                // Hero Section com Logo
                React.createElement("div", {className: "flex flex-col items-center justify-center py-12"},
                    React.createElement("img", {
                        src: "https://github.com/Leonardodevcloud/tutts-frontend/blob/main/Tutts%20BI(1).png?raw=true",
                        alt: "Tutts BI",
                        className: "w-64 h-64 object-contain mb-6 drop-shadow-2xl"
                    }),
                    React.createElement("h1", {className: "text-3xl font-bold text-gray-800 mb-2"}, "Business Intelligence"),
                    React.createElement("p", {className: "text-gray-500 text-center max-w-xl"}, 
                        "An√°lise completa de dados operacionais, m√©tricas de desempenho e relat√≥rios inteligentes para tomada de decis√£o estrat√©gica."
                    )
                ),
                
                // Cards de Navega√ß√£o
                React.createElement("div", {className: "max-w-6xl mx-auto px-6 pb-12"},
                    React.createElement("div", {className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},
                        
                        // Card Dashboard
                        React.createElement("div", {
                            onClick: () => { ht("dashboard"); el(); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-purple-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-purple-500 to-violet-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üìä")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Dashboard"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Vis√£o geral com m√©tricas, gr√°ficos e indicadores de desempenho em tempo real.")
                            )
                        ),
                        
                        // Card Acompanhamento
                        React.createElement("div", {
                            onClick: () => { ht("acompanhamento"); carregarAcompanhamento(); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-blue-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-blue-500 to-cyan-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üìà")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Acompanhamento"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "An√°lise temporal com m√∫ltiplas m√©tricas e evolu√ß√£o de indicadores.")
                            )
                        ),
                        
                        // Card Por Profissional
                        React.createElement("div", {
                            onClick: () => { ht("profissionais"); el(); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-green-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-green-500 to-emerald-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üë§")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Por Profissional"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Ranking e an√°lise detalhada do desempenho individual de cada entregador.")
                            )
                        ),
                        
                        // Card An√°lise por OS
                        React.createElement("div", {
                            onClick: () => { ht("os"); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-amber-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-amber-500 to-orange-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üìã")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "An√°lise por OS"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Detalhamento completo de cada ordem de servi√ßo e seus pontos de entrega.")
                            )
                        ),
                        
                        // Card Cliente 767
                        React.createElement("div", {
                            onClick: () => { ht("cliente767"); carregarCliente767(); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-orange-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-orange-500 to-red-500"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üè¢")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Cliente 767"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Dashboard exclusivo com prazo especial de 120 minutos e meta mensal.")
                            )
                        ),
                        
                        // Card Garantido
                        React.createElement("div", {
                            onClick: () => { ht("garantido"); carregarGarantido(); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-emerald-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-emerald-500 to-green-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-emerald-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üí∞")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Garantido"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "An√°lise de m√≠nimo garantido, complementos e acompanhamento semanal.")
                            )
                        ),
                        
                        // Card Relat√≥rio IA
                        React.createElement("div", {
                            onClick: () => { ht("relatorio-ia"); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-violet-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-violet-500 to-purple-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("img", {src: "https://raw.githubusercontent.com/Leonardodevcloud/tutts-frontend/main/gemini-app-icon-hd.png", className: "w-8 h-8 rounded"})
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Relat√≥rio IA"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "An√°lises autom√°ticas com Intelig√™ncia Artificial e gera√ß√£o de documentos.")
                            )
                        ),
                        
                        // Card Upload
                        React.createElement("div", {
                            onClick: () => { ht("upload"); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-teal-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-teal-500 to-cyan-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-teal-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "üì§")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Upload"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Importa√ß√£o de planilhas e gerenciamento de dados operacionais.")
                            )
                        ),
                        
                        // Card Configura√ß√µes
                        React.createElement("div", {
                            onClick: () => { ht("config"); tl(); al(); carregarPrazosProf(); },
                            className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-gray-300"
                        },
                            React.createElement("div", {className: "h-2 bg-gradient-to-r from-gray-500 to-slate-600"}),
                            React.createElement("div", {className: "p-6"},
                                React.createElement("div", {className: "w-14 h-14 bg-gray-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                    React.createElement("span", {className: "text-3xl"}, "‚öôÔ∏è")
                                ),
                                React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Configura√ß√µes"),
                                React.createElement("p", {className: "text-sm text-gray-500"}, "Regi√µes, m√°scaras, prazos personalizados e regras de contagem.")
                            )
                        )
                    ),
                    
                    // Estat√≠sticas R√°pidas
                    ft && React.createElement("div", {className: "mt-10"},
                        React.createElement("div", {className: "flex items-center justify-between mb-4"},
                            React.createElement("h2", {className: "text-xl font-bold text-gray-800 flex items-center gap-2"},
                                React.createElement("span", null, "‚ö°"),
                                "Resumo R√°pido"
                            ),
                            React.createElement("div", {className: "bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-sm font-semibold"},
                                "üìÖ ",
                                ua.data_inicio ? new Date(ua.data_inicio + "T12:00:00").toLocaleDateString("pt-BR") : "-",
                                " a ",
                                ua.data_fim ? new Date(ua.data_fim + "T12:00:00").toLocaleDateString("pt-BR") : "-"
                            )
                        ),
                        React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center"},
                                React.createElement("p", {className: "text-2xl font-bold text-purple-600"}, ft.total_os?.toLocaleString() || 0),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Total OS")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center"},
                                React.createElement("p", {className: "text-2xl font-bold text-blue-600"}, ft.total_entregas?.toLocaleString() || 0),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Entregas")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center"},
                                React.createElement("p", {className: "text-2xl font-bold text-green-600"}, ft.taxa_prazo || 0, "%"),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "No Prazo")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center"},
                                React.createElement("p", {className: "text-2xl font-bold text-amber-600"}, ft.total_profissionais || 0),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Entregadores")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center"},
                                React.createElement("p", {className: "text-2xl font-bold text-violet-600"}, sl(ft.valor_total || 0)),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Valor Total")
                            ),
                            React.createElement("div", {className: "bg-white rounded-xl p-4 shadow text-center"},
                                React.createElement("p", {className: "text-2xl font-bold text-teal-600"}, sl(ft.faturamento_total || 0)),
                                React.createElement("p", {className: "text-xs text-gray-500"}, "Faturamento")
                            )
                        )
                    )
                )
            ),
            
            "dashboard" === Et && React.createElement(React.Fragment, null, 
            
            // === LINHA 1: FINANCEIRO (5 cards compactos) ===
            React.createElement("div", {
                className: "grid grid-cols-5 gap-2 mb-3"
            }, React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow border-l-3 border-violet-500"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "üíµ"), React.createElement("span", {
                className: "text-[10px] text-violet-600 bg-violet-50 px-1.5 py-0.5 rounded"
            }, "Cliente")), React.createElement("p", {
                className: "text-lg font-bold text-gray-800"
            }, sl(ft?.valor_total || 0)), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Valor Total")), React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow border-l-3 border-blue-500"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "üë∑"), React.createElement("span", {
                className: "text-[10px] text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded"
            }, "Entregador")), React.createElement("p", {
                className: "text-lg font-bold text-gray-800"
            }, sl(ft?.valor_prof_total || 0)), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Valor Profissional")), React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow border-l-3 border-purple-500"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "üìà"), React.createElement("span", {
                className: "text-[10px] text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded"
            }, "Lucro")), React.createElement("p", {
                className: "text-lg font-bold text-gray-800"
            }, sl(nl(ft?.valor_total) - nl(ft?.valor_prof_total))), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Faturamento")), React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow border-l-3 border-amber-500"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "üé´"), React.createElement("span", {
                className: "text-[10px] text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded"
            }, "Por OS")), React.createElement("p", {
                className: "text-lg font-bold text-gray-800"
            }, sl(ft?.ticket_medio || 0)), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Ticket M√©dio")), React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow border-l-3 border-violet-500"
            }, React.createElement("div", {
                className: "flex items-center gap-2 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "üìä"), React.createElement("span", {
                className: "text-[10px] text-violet-600 bg-violet-50 px-1.5 py-0.5 rounded"
            }, "M√©dia")), React.createElement("p", {
                className: "text-lg font-bold text-gray-800"
            }, nl(ft?.media_entregas_por_prof).toFixed(2)), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Ent/Entregador"))),
            
            // === LINHA 2: OPERACIONAL + TEMPO (7 cards compactos) ===
            React.createElement("div", {
                className: "grid grid-cols-7 gap-2 mb-3"
            }, React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow"
            }, React.createElement("span", {
                className: "text-base"
            }, "üìã"), React.createElement("p", {
                className: "text-xl font-bold text-gray-800"
            }, nl(ft?.total_os).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Qtd OS")), React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow"
            }, React.createElement("span", {
                className: "text-base"
            }, "üöö"), React.createElement("p", {
                className: "text-xl font-bold text-gray-800"
            }, nl(ft?.total_entregas).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Entregas")), React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow"
            }, React.createElement("span", {
                className: "text-base"
            }, "üîÑ"), React.createElement("p", {
                className: "text-xl font-bold text-gray-800"
            }, nl(ft?.total_retornos).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Retornos")), React.createElement("div", {
                className: "bg-white rounded-lg p-3 shadow"
            }, React.createElement("span", {
                className: "text-base"
            }, "üèçÔ∏è"), React.createElement("p", {
                className: "text-xl font-bold text-gray-800"
            }, nl(ft?.total_profissionais).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-[10px] text-gray-500"
            }, "Entregadores")), React.createElement("div", {
                className: "bg-gradient-to-br from-sky-500 to-blue-600 rounded-lg p-3 shadow"
            }, React.createElement("div", {
                className: "flex items-center gap-1 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "üöÄ"), React.createElement("span", {
                className: "text-[10px] text-sky-100 bg-white/20 px-1 py-0.5 rounded"
            }, "Entrega")), React.createElement("p", {
                className: "text-xl font-bold text-white"
            }, cl(ft?.tempo_medio)), React.createElement("p", {
                className: "text-[10px] text-sky-100"
            }, "Tempo M√©dio")), React.createElement("div", {
                className: "bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg p-3 shadow"
            }, React.createElement("div", {
                className: "flex items-center gap-1 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "üì¶"), React.createElement("span", {
                className: "text-[10px] text-amber-100 bg-white/20 px-1 py-0.5 rounded"
            }, "Coleta")), React.createElement("p", {
                className: "text-xl font-bold text-white"
            }, cl(ft?.tempo_medio_coleta || ft?.tempo_medio_alocacao)), React.createElement("p", {
                className: "text-[10px] text-amber-100"
            }, "Tempo M√©dio")), React.createElement("div", {
                className: "bg-gradient-to-br from-pink-500 to-rose-600 rounded-lg p-3 shadow"
            }, React.createElement("div", {
                className: "flex items-center gap-1 mb-1"
            }, React.createElement("span", {
                className: "text-base"
            }, "‚è≥"), React.createElement("span", {
                className: "text-[10px] text-pink-100 bg-white/20 px-1 py-0.5 rounded"
            }, "Aloca√ß√£o")), React.createElement("p", {
                className: "text-xl font-bold text-white"
            }, cl(ft?.tempo_medio_alocacao)), React.createElement("p", {
                className: "text-[10px] text-pink-100"
            }, "Tempo M√©dio"))),
            
            // === LINHA 3: STATUS DE PRAZO (2 cards compactos) ===
            React.createElement("div", {
                className: "grid grid-cols-2 gap-2 mb-4"
            }, 
            // ===== CARD PRAZO CONSOLIDADO =====
            React.createElement("div", {
                className: "bg-white rounded-lg p-4 shadow border-l-4 border-green-500"
            }, React.createElement("h4", {
                className: "text-sm font-bold text-gray-700 mb-3"
            }, "üìä Prazo de Entrega"), React.createElement("div", {
                className: "grid grid-cols-2 gap-3"
            }, React.createElement("div", {
                className: "text-center p-2 bg-green-50 rounded-lg"
            }, React.createElement("p", {
                className: "text-[10px] text-green-600 font-medium"
            }, "‚úÖ No Prazo"), React.createElement("p", {
                className: "text-xl font-bold text-green-700"
            }, nl(ft?.dentro_prazo).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-sm font-semibold text-green-600"
            }, (nl(ft?.dentro_prazo) / (nl(ft?.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("div", {
                className: "text-center p-2 bg-red-50 rounded-lg"
            }, React.createElement("p", {
                className: "text-[10px] text-red-600 font-medium"
            }, "‚ùå Fora do Prazo"), React.createElement("p", {
                className: "text-xl font-bold text-red-700"
            }, nl(ft?.fora_prazo).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-sm font-semibold text-red-600"
            }, (nl(ft?.fora_prazo) / (nl(ft?.total_entregas) || 1) * 100).toFixed(1), "%")))),
            
            // ===== CARD PRAZO PROF CONSOLIDADO =====
            React.createElement("div", {
                className: "bg-white rounded-lg p-4 shadow border-l-4 border-blue-500"
            }, React.createElement("h4", {
                className: "text-sm font-bold text-gray-700 mb-3"
            }, "üë®‚Äçüíº Prazo Profissional"), React.createElement("div", {
                className: "grid grid-cols-3 gap-2"
            }, React.createElement("div", {
                className: "text-center p-2 bg-blue-50 rounded-lg"
            }, React.createElement("p", {
                className: "text-[10px] text-blue-600 font-medium"
            }, "‚úÖ No Prazo"), React.createElement("p", {
                className: "text-xl font-bold text-blue-700"
            }, nl(ft?.dentro_prazo_prof).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-sm font-semibold text-blue-600"
            }, (nl(ft?.dentro_prazo_prof) / ((nl(ft?.dentro_prazo_prof) + nl(ft?.fora_prazo_prof)) || 1) * 100).toFixed(1), "%")), React.createElement("div", {
                className: "text-center p-2 bg-orange-50 rounded-lg"
            }, React.createElement("p", {
                className: "text-[10px] text-orange-600 font-medium"
            }, "‚ùå Fora do Prazo"), React.createElement("p", {
                className: "text-xl font-bold text-orange-700"
            }, nl(ft?.fora_prazo_prof).toLocaleString("pt-BR")), React.createElement("p", {
                className: "text-sm font-semibold text-orange-600"
            }, (nl(ft?.fora_prazo_prof) / ((nl(ft?.dentro_prazo_prof) + nl(ft?.fora_prazo_prof)) || 1) * 100).toFixed(1), "%")), React.createElement("div", {
                className: "text-center p-2 bg-indigo-50 rounded-lg"
            }, React.createElement("p", {
                className: "text-[10px] text-indigo-600 font-medium"
            }, "‚è±Ô∏è T. M√©dio"), React.createElement("p", {
                className: "text-xl font-bold text-indigo-700"
            }, cl(ft?.tempo_medio_entrega_prof)))))),
            
            React.createElement("div", {
                className: "bg-white rounded-lg shadow overflow-hidden"
            }, React.createElement("div", {
                className: "bg-purple-100 px-4 py-3"
            }, React.createElement("h3", {
                className: "font-bold text-purple-900"
            }, "Resumo Geral por Cliente"), ((ua.cod_cliente || []).length > 0 || (ua.centro_custo || []).length > 0 || ua.categoria || ua.regiao) && React.createElement("div", {
                className: "mt-2 flex flex-wrap gap-2"
            }, ua.regiao && React.createElement("span", {
                className: "text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded-full"
            }, "üó∫Ô∏è Regi√£o: ", aa.find(e => e.id === parseInt(ua.regiao))?.nome || ua.regiao), (ua.cod_cliente || []).length > 0 && !ua.regiao && React.createElement("span", {
                className: "text-xs bg-purple-200 text-purple-800 px-2 py-1 rounded-full"
            }, "üè¢ ", (ua.cod_cliente || []).length, " cliente(s)"), (ua.centro_custo || []).length > 0 && React.createElement("span", {
                className: "text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full"
            }, "üìÅ Centro(s): ", (ua.centro_custo || []).join(", ")), ua.categoria && React.createElement("span", {
                className: "text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full"
            }, "üè∑Ô∏è ", ua.categoria))), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-purple-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-2 py-2 text-left text-purple-900 w-8"
            }), React.createElement("th", {
                className: "px-2 py-2 text-left text-purple-900 max-w-[150px]"
            }, "Cliente"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "OS"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Entregas"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Retornos"), React.createElement("th", {
                className: "px-3 py-2 text-center text-green-700 bg-green-50 min-w-[100px]"
            }, "No Prazo"), React.createElement("th", {
                className: "px-3 py-2 text-center text-red-700 bg-red-50 min-w-[100px]"
            }, "Fora Prazo"), React.createElement("th", {
                className: "px-3 py-2 text-center text-blue-700 bg-blue-50 min-w-[100px]"
            }, "Prazo Prof"), React.createElement("th", {
                className: "px-3 py-2 text-center text-orange-700 bg-orange-50 min-w-[100px]"
            }, "Fora Prof"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "M√©dia"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Val. Cliente"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Val. Prof."), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Faturamento"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Tckt. M√©dio"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Entregadores"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "Ent/Entreg"), React.createElement("th", {
                className: "px-2 py-2 text-right text-purple-900"
            }, "√ölt. Entrega"))), React.createElement("tbody", null, (zt || []).filter(e => parseInt(e.total_os) > 0 || parseInt(e.total_entregas) > 0).map((e, t) => React.createElement(React.Fragment, {
                key: t
            }, React.createElement("tr", {
                className: "border-b hover:bg-purple-50 " + (t % 2 == 0 ? "bg-white" : "bg-gray-50")
            }, React.createElement("td", {
                className: "px-2 py-2"
            }, React.createElement("button", {
                onClick: () => ml(`dash-cli-${t}`),
                className: "text-purple-600 hover:text-purple-800 font-bold"
            }, Kt[`dash-cli-${t}`] ? "‚ûñ" : "‚ûï")), React.createElement("td", {
                className: "px-2 py-2 font-medium max-w-[150px] truncate",
                title: e.cod_cliente + " - " + (e.nome_display || e.nome_cliente)
            }, e.cod_cliente, " - ", e.nome_display || e.nome_cliente), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(e.total_os).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(e.total_entregas).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right text-orange-600"
            }, nl(e.total_retornos).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-3 py-2 text-center text-green-700 bg-green-50"
            }, React.createElement("div", { className: "font-bold" }, nl(e.dentro_prazo).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm font-semibold" }, (nl(e.dentro_prazo) / (nl(e.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-red-700 bg-red-50"
            }, React.createElement("div", { className: "font-bold" }, nl(e.fora_prazo).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm font-semibold" }, (nl(e.fora_prazo) / (nl(e.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-blue-700 bg-blue-50"
            }, React.createElement("div", { className: "font-bold" }, nl(e.dentro_prazo_prof || 0).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm font-semibold" }, (nl(e.dentro_prazo_prof || 0) / (nl(e.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-orange-700 bg-orange-50"
            }, React.createElement("div", { className: "font-bold" }, nl(e.fora_prazo_prof || 0).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm font-semibold" }, (nl(e.fora_prazo_prof || 0) / (nl(e.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, cl(e.tempo_medio)), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, sl(e.valor_total)), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, sl(e.valor_prof)), React.createElement("td", {
                className: "px-2 py-2 text-right font-medium"
            }, sl(nl(e.valor_total) - nl(e.valor_prof))), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, sl(e.ticket_medio)), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(e.total_profissionais).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(e.entregas_por_prof).toLocaleString("pt-BR", {
                minimumFractionDigits: 2
            })), React.createElement("td", {
                className: "px-3 py-2 text-right text-xs"
            }, e.ultima_entrega ? React.createElement("span", {
                className: new Date(e.ultima_entrega) > new Date(Date.now() - 6048e5) ? "text-green-600" : "text-orange-500"
            }, "‚óè ", new Date(e.ultima_entrega).toLocaleDateString("pt-BR")) : "-")), Kt[`dash-cli-${t}`] && (e.centros_custo || []).map((a, l) => React.createElement("tr", {
                key: `${t}-cc-${l}`,
                className: "bg-purple-50 border-l-4 border-purple-400"
            }, React.createElement("td", {
                className: "px-2 py-2 text-purple-400 text-center"
            }, "‚îî"), React.createElement("td", {
                className: "px-2 py-2 text-purple-700 pl-4 max-w-[150px] truncate text-sm"
            }, "üìÅ ", a.centro_custo), React.createElement("td", {
                className: "px-2 py-2 text-right text-purple-600"
            }, nl(a.total_os).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right text-purple-600"
            }, nl(a.total_entregas).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right text-orange-500"
            }, nl(a.total_retornos || 0).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-3 py-2 text-center text-green-600 bg-green-50"
            }, React.createElement("div", { className: "font-medium" }, nl(a.dentro_prazo).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(a.dentro_prazo) / (nl(a.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-red-600 bg-red-50"
            }, React.createElement("div", { className: "font-medium" }, nl(a.fora_prazo).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(a.fora_prazo) / (nl(a.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-blue-600 bg-blue-50"
            }, React.createElement("div", { className: "font-medium" }, nl(a.dentro_prazo_prof || 0).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(a.dentro_prazo_prof || 0) / (nl(a.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-orange-600 bg-orange-50"
            }, React.createElement("div", { className: "font-medium" }, nl(a.fora_prazo_prof || 0).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(a.fora_prazo_prof || 0) / (nl(a.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-2 py-2 text-right text-purple-600"
            }, cl(a.tempo_medio)), React.createElement("td", {
                className: "px-2 py-2 text-right text-purple-600"
            }, sl(a.valor_total)), React.createElement("td", {
                className: "px-2 py-2 text-right text-purple-600"
            }, sl(a.valor_prof)), React.createElement("td", {
                className: "px-2 py-2 text-right text-purple-600"
            }, sl(nl(a.valor_total) - nl(a.valor_prof))), React.createElement("td", {
                className: "px-2 py-2 text-right text-purple-600"
            }, a.total_entregas > 0 ? sl(nl(a.valor_total) / a.total_entregas) : "-"), React.createElement("td", {
                colSpan: "3",
                className: "px-2 py-2 text-center text-gray-400"
            }, "-")))))), React.createElement("tfoot", {
                className: "bg-purple-200 font-bold"
            }, React.createElement("tr", null, React.createElement("td", {
                className: "px-2 py-2"
            }), React.createElement("td", {
                className: "px-2 py-2"
            }, "Total"), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(ft?.total_os).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(ft?.total_entregas).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right text-orange-700"
            }, nl(ft?.total_retornos).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-3 py-2 text-center text-green-700 bg-green-100"
            }, React.createElement("div", null, nl(ft?.dentro_prazo).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(ft?.dentro_prazo) / (nl(ft?.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-red-700 bg-red-100"
            }, React.createElement("div", null, nl(ft?.fora_prazo).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(ft?.fora_prazo) / (nl(ft?.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-blue-700 bg-blue-100"
            }, React.createElement("div", null, nl(ft?.dentro_prazo_prof).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(ft?.dentro_prazo_prof) / (nl(ft?.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-3 py-2 text-center text-orange-700 bg-orange-100"
            }, React.createElement("div", null, nl(ft?.fora_prazo_prof).toLocaleString("pt-BR")), React.createElement("div", { className: "text-sm" }, (nl(ft?.fora_prazo_prof) / (nl(ft?.total_entregas) || 1) * 100).toFixed(1), "%")), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, cl(ft?.tempo_medio)), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, sl(ft?.valor_total)), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, sl(ft?.valor_prof_total)), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, sl(nl(ft?.valor_total) - nl(ft?.valor_prof_total))), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, sl(ft?.ticket_medio)), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(ft?.total_profissionais).toLocaleString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, nl(ft?.media_entregas_por_prof).toLocaleString("pt-BR", {
                minimumFractionDigits: 2
            })), React.createElement("td", {
                className: "px-2 py-2 text-right"
            }, ft?.ultima_entrega ? new Date(ft.ultima_entrega).toLocaleDateString("pt-BR") : "-")))))), React.createElement("div", {
                className: "space-y-6 mt-6"
            }, 
            // ========== GR√ÅFICO 1: DISTRIBUI√á√ÉO POR TEMPO (Design Moderno) ==========
            React.createElement("div", {
                className: "bg-white rounded-xl shadow-lg p-6 border border-gray-100"
            }, 
                React.createElement("div", {className: "flex items-center justify-between mb-6"},
                    React.createElement("h3", {className: "font-bold text-gray-800 text-lg flex items-center gap-2"}, 
                        React.createElement("span", {className: "w-8 h-8 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center text-white text-sm"}, "‚è±"),
                        "Distribuicao por Tempo de Entrega"
                    )
                ),
                React.createElement("div", {
                    className: "flex items-end gap-3 pt-4",
                    style: {height: "280px"}
                }, (() => {
                    const dados = Qt.porTempo || [];
                    const maxVal = Math.max(...dados.map(e => e.total || 0), 1);
                    const total = dados.reduce((acc, e) => acc + (e.total || 0), 0) || 1;
                    const cores = [
                        "from-emerald-400 to-emerald-600",
                        "from-blue-400 to-blue-600",
                        "from-purple-400 to-purple-600",
                        "from-amber-400 to-amber-600",
                        "from-orange-400 to-orange-600",
                        "from-red-400 to-red-600"
                    ];
                    return dados.map((item, idx) => {
                        const val = item.total || 0;
                        const pct = (val / total * 100).toFixed(1);
                        const altura = maxVal > 0 ? (val / maxVal * 200) : 0;
                        return React.createElement("div", {
                            key: idx,
                            className: "flex-1 flex flex-col items-center justify-end group cursor-pointer"
                        },
                            React.createElement("div", {
                                className: "opacity-0 group-hover:opacity-100 transition-all duration-200 bg-gray-900 text-white text-xs px-3 py-2 rounded-lg mb-2 shadow-lg whitespace-nowrap"
                            }, val.toLocaleString("pt-BR"), " entregas"),
                            React.createElement("div", {className: "text-xs font-bold text-gray-500 mb-1"}, pct + "%"),
                            React.createElement("div", {className: "text-lg font-bold text-gray-800 mb-2"}, val.toLocaleString("pt-BR")),
                            React.createElement("div", {
                                className: "w-full bg-gradient-to-t " + cores[idx % cores.length] + " rounded-t-lg transition-all duration-500 group-hover:scale-105 shadow-md",
                                style: {height: Math.max(altura, val > 0 ? 25 : 8) + "px", minWidth: "50px"}
                            }),
                            React.createElement("div", {
                                className: "mt-3 px-2 py-1 bg-gray-100 rounded-full text-xs font-semibold text-gray-700 text-center whitespace-nowrap"
                            }, item.faixa)
                        );
                    });
                })())
            ),
            
            // ========== GR√ÅFICO 2: DISTRIBUI√á√ÉO POR KM (Design Moderno) ==========
            React.createElement("div", {
                className: "bg-white rounded-xl shadow-lg p-6 border border-gray-100"
            },
                React.createElement("div", {className: "flex items-center justify-between mb-6"},
                    React.createElement("h3", {className: "font-bold text-gray-800 text-lg flex items-center gap-2"}, 
                        React.createElement("span", {className: "w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center text-white text-sm"}, "üìç"),
                        "Distribuicao por Distancia (Km)"
                    ),
                    React.createElement("div", {className: "text-sm text-gray-500"}, 
                        "Faixas visiveis: ", React.createElement("span", {className: "font-bold text-orange-600"}, 
                            ((Qt.porKm || []).filter(e => !Gt?.includes(e.faixa)).length)
                        )
                    )
                ),
                React.createElement("div", {className: "flex gap-6"},
                    React.createElement("div", {className: "flex-1"},
                        React.createElement("div", {
                            className: "flex items-end gap-1 pt-4",
                            style: {height: "280px"}
                        }, (() => {
                            const dados = (Qt.porKm || []).filter(e => !Gt?.includes(e.faixa));
                            const maxVal = Math.max(...dados.map(e => e.total || 0), 1);
                            const total = dados.reduce((acc, e) => acc + (e.total || 0), 0) || 1;
                            return dados.map((item, idx) => {
                                const val = item.total || 0;
                                const pct = (val / total * 100).toFixed(1);
                                const altura = maxVal > 0 ? (val / maxVal * 200) : 0;
                                const hue = Math.max(0, 120 - (idx * 10));
                                return React.createElement("div", {
                                    key: idx,
                                    className: "flex-1 min-w-[28px] flex flex-col items-center justify-end group cursor-pointer"
                                },
                                    React.createElement("div", {
                                        className: "opacity-0 group-hover:opacity-100 transition-all duration-200 bg-gray-900 text-white text-xs px-2 py-1.5 rounded-lg mb-1 shadow-lg whitespace-nowrap z-10"
                                    }, val.toLocaleString("pt-BR"), " (", pct, "%)"),
                                    React.createElement("div", {className: "text-[10px] font-bold text-gray-400 mb-0.5"}, pct + "%"),
                                    React.createElement("div", {className: "text-xs font-bold text-gray-700 mb-1"}, val.toLocaleString("pt-BR")),
                                    React.createElement("div", {
                                        className: "w-full rounded-t-md transition-all duration-300 group-hover:scale-110 shadow-sm",
                                        style: {
                                            height: Math.max(altura, val > 0 ? 15 : 4) + "px",
                                            background: "linear-gradient(to top, hsl(" + hue + ", 70%, 45%), hsl(" + hue + ", 70%, 60%))",
                                            maxWidth: "24px",
                                            margin: "0 auto"
                                        }
                                    }),
                                    React.createElement("div", {
                                        className: "mt-2 text-[9px] font-medium text-gray-600 text-center"
                                    }, item.faixa)
                                );
                            });
                        })())
                    ),
                    React.createElement("div", {className: "w-44 flex-shrink-0 border-l border-gray-200 pl-4"},
                        React.createElement("div", {className: "text-sm font-bold text-gray-700 mb-3 flex items-center gap-2"},
                            "Filtrar Faixas"
                        ),
                        React.createElement("div", {className: "space-y-1 max-h-56 overflow-y-auto pr-2"},
                            (Qt.porKm || []).map((item, idx) => {
                                const isVisible = !Gt?.includes(item.faixa);
                                return React.createElement("label", {
                                    key: idx,
                                    className: "flex items-center gap-2 cursor-pointer px-2 py-1.5 rounded-lg transition-all " + (isVisible ? "bg-purple-50 hover:bg-purple-100" : "bg-gray-50 hover:bg-gray-100 opacity-60")
                                },
                                    React.createElement("input", {
                                        type: "checkbox",
                                        checked: isVisible,
                                        onChange: function(e) {
                                            e.target.checked 
                                                ? Wt(function(prev) { return (prev || []).filter(function(f) { return f !== item.faixa; }); })
                                                : Wt(function(prev) { return [...(prev || []), item.faixa]; });
                                        },
                                        className: "w-4 h-4 accent-purple-600 rounded"
                                    }),
                                    React.createElement("span", {className: "text-xs font-medium " + (isVisible ? "text-gray-800" : "text-gray-500")}, 
                                        item.faixa, " km"
                                    ),
                                    item.total > 0 && React.createElement("span", {
                                        className: "ml-auto text-[10px] px-1.5 py-0.5 rounded-full " + (isVisible ? "bg-orange-100 text-orange-600" : "bg-gray-200 text-gray-500")
                                    }, item.total)
                                );
                            })
                        ),
                        React.createElement("div", {className: "mt-3 pt-3 border-t border-gray-200 flex gap-2"},
                            React.createElement("button", {
                                onClick: function() { Wt([]); },
                                className: "flex-1 text-xs px-2 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"
                            }, "Todos"),
                            React.createElement("button", {
                                onClick: function() { Wt((Qt.porKm || []).map(function(e) { return e.faixa; })); },
                                className: "flex-1 text-xs px-2 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"
                            }, "Nenhum")
                        )
                    )
                )
            ))), "dashboard" === Et && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6 mt-6 max-w-4xl mx-auto", style: {overflow: "hidden"}}, 
                React.createElement("div", {className: "flex items-center justify-between mb-4"}, 
                    React.createElement("h3", {className: "text-lg font-bold text-gray-800"}, "üó∫Ô∏è Acompanhamento Regional"),
                    React.createElement("button", {onClick: function() { setMapaCalorVisivel(!mapaCalorVisivel); if (!mapaCalorVisivel && window.destroyMapaCalor) window.destroyMapaCalor(); }, className: "px-3 py-1 text-sm rounded-lg " + (mapaCalorVisivel ? "bg-purple-600 text-white" : "bg-gray-200 text-gray-600")}, mapaCalorVisivel ? "üëÅÔ∏è Ocultar" : "üëÅÔ∏è Mostrar")
                ), 
                mapaCalorVisivel && React.createElement("div", {style: {position: "relative", minHeight: "600px", overflow: "hidden", borderRadius: "12px"}},
                    React.createElement("div", {id: "mapa-calor-leaflet", style: {height: "600px", width: "100%", borderRadius: "12px", backgroundColor: "#e5e7eb"}}),
                    mapaCalorLoading && React.createElement("div", {style: {position: "absolute", top: 0, left: 0, right: 0, bottom: 0, backgroundColor: "rgba(255,255,255,0.8)", display: "flex", alignItems: "center", justifyContent: "center", borderRadius: "12px", zIndex: 1000}}, React.createElement("div", {className: "text-center"}, React.createElement("div", {className: "animate-spin text-4xl"}, "‚è≥"), React.createElement("span", {className: "text-gray-600"}, "Carregando mapa...")))
                )
            ), "acompanhamento" === Et && React.createElement("div", {className: "space-y-6"}, React.createElement("div", {className: "bg-gradient-to-r from-purple-600 to-purple-800 rounded-xl p-6 text-white"}, React.createElement("h2", {className: "text-2xl font-bold mb-2"}, "üìà Acompanhamento Peri√≥dico"), React.createElement("p", {className: "opacity-80"}, "An√°lise temporal com m√∫ltiplas m√©tricas")), React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"}, React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "üìä Selecione as M√©tricas"), React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2"}, React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.os ? "border-blue-500 bg-blue-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.os, onChange: function() { toggleAcompFiltro("os"); }, className: "w-3 h-3"}), "OS"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.entregas ? "border-sky-500 bg-sky-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.entregas, onChange: function() { toggleAcompFiltro("entregas"); }, className: "w-3 h-3"}), "Entregas"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.noPrazo ? "border-green-500 bg-green-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.noPrazo, onChange: function() { toggleAcompFiltro("noPrazo"); }, className: "w-3 h-3"}), "No Prazo"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.foraPrazo ? "border-red-500 bg-red-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.foraPrazo, onChange: function() { toggleAcompFiltro("foraPrazo"); }, className: "w-3 h-3"}), "Fora Prazo"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.retornos ? "border-orange-500 bg-orange-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.retornos, onChange: function() { toggleAcompFiltro("retornos"); }, className: "w-3 h-3"}), "Retornos"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.valorTotal ? "border-purple-500 bg-purple-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.valorTotal, onChange: function() { toggleAcompFiltro("valorTotal"); }, className: "w-3 h-3"}), "Valor Total"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.valorProf ? "border-amber-500 bg-amber-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.valorProf, onChange: function() { toggleAcompFiltro("valorProf"); }, className: "w-3 h-3"}), "Valor Prof."), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.faturamentoTotal ? "border-violet-500 bg-violet-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.faturamentoTotal, onChange: function() { toggleAcompFiltro("faturamentoTotal"); }, className: "w-3 h-3"}), "Fat. Total"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.ticketMedio ? "border-cyan-500 bg-cyan-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.ticketMedio, onChange: function() { toggleAcompFiltro("ticketMedio"); }, className: "w-3 h-3"}), "Ticket M√©dio"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.tempoMedioEntrega ? "border-rose-500 bg-rose-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.tempoMedioEntrega, onChange: function() { toggleAcompFiltro("tempoMedioEntrega"); }, className: "w-3 h-3"}), "Temp. M√©dio Entrega"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.tempoMedioAlocacao ? "border-pink-500 bg-pink-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.tempoMedioAlocacao, onChange: function() { toggleAcompFiltro("tempoMedioAlocacao"); }, className: "w-3 h-3"}), "Temp. M√©dio Aloca√ß√£o"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.tempoMedioColeta ? "border-fuchsia-500 bg-fuchsia-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.tempoMedioColeta, onChange: function() { toggleAcompFiltro("tempoMedioColeta"); }, className: "w-3 h-3"}), "Temp. M√©dio Coleta"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.totalEntregadores ? "border-teal-500 bg-teal-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.totalEntregadores, onChange: function() { toggleAcompFiltro("totalEntregadores"); }, className: "w-3 h-3"}), "Total Entregadores"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.mediaEntProfissional ? "border-violet-500 bg-violet-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.mediaEntProfissional, onChange: function() { toggleAcompFiltro("mediaEntProfissional"); }, className: "w-3 h-3"}), "M√©dia Ent. Profissional"), React.createElement("label", {className: "flex items-center gap-2 p-2 border rounded-lg cursor-pointer text-xs " + (acompFiltros.evolucaoSemanal ? "border-violet-500 bg-violet-50" : "border-gray-200")}, React.createElement("input", {type: "checkbox", checked: acompFiltros.evolucaoSemanal, onChange: function() { toggleAcompFiltro("evolucaoSemanal"); }, className: "w-3 h-3"}), "Evolu√ß√£o Semanal"))),
            
            // TABELA DE RESUMO POR CLIENTE - DIN√ÇMICA BASEADA NOS SUBFILTROS
            !acompLoading && acompClientes && acompClientes.clientes && acompClientes.clientes.length > 0 && acompFiltrosOrdem.length > 0 && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"}, 
                React.createElement("div", {className: "flex items-center justify-between mb-4"},
                    React.createElement("h3", {className: "text-lg font-bold text-gray-800"}, "üìä Resumo Geral por Cliente"),
                    React.createElement("span", {className: "px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium"}, "üìã " + acompClientes.clientes.length + " cliente(s)")
                ),
                React.createElement("div", {className: "overflow-x-auto"},
                    React.createElement("table", {className: "text-xs"},
                        React.createElement("thead", null,
                            React.createElement("tr", {className: "bg-purple-100"},
                                React.createElement("th", {className: "px-2 py-2 text-center font-bold text-purple-800 w-8"}, ""),
                                React.createElement("th", {className: "px-3 py-2 text-left font-bold text-purple-800 whitespace-nowrap"}, "Clientes"),
                                acompFiltrosOrdem.map(function(filtro) {
                                    var labels = {os: "OS", entregas: "Entregas", noPrazo: "No Prazo", foraPrazo: "Fora Prazo", retornos: "Retornos", valorTotal: "Valor Total", valorProf: "Valor Prof.", ticketMedio: "Ticket M√©dio", tempoMedioEntrega: "T. Entrega", tempoMedioAlocacao: "T. Aloca√ß√£o", tempoMedioColeta: "T. Coleta", totalEntregadores: "Profissionais", mediaEntProfissional: "M√©d Ent/Prof", faturamentoTotal: "Fat. Total"};
                                    var align = (filtro === "valorTotal" || filtro === "valorProf" || filtro === "faturamentoTotal" || filtro === "ticketMedio") ? "text-right" : "text-center";
                                    return React.createElement("th", {key: filtro, className: "px-3 py-2 font-bold text-purple-800 whitespace-nowrap " + align}, labels[filtro] || filtro);
                                })
                            )
                        ),
                        React.createElement("tbody", null,
                            acompClientes.clientes.map(function(c, i) {
                                var temCC = c.centros_custo && c.centros_custo.length > 0;
                                var expandido = Kt["acomp-cli-" + i];
                                return React.createElement(React.Fragment, {key: i},
                                    React.createElement("tr", {className: i % 2 === 0 ? "bg-white hover:bg-gray-50" : "bg-gray-50 hover:bg-gray-100"},
                                        React.createElement("td", {className: "px-2 py-2 text-center"},
                                            temCC && React.createElement("button", {
                                                onClick: function() { ml("acomp-cli-" + i); },
                                                className: "text-purple-600 hover:text-purple-800 font-bold text-sm"
                                            }, expandido ? "‚ûñ" : "‚ûï")
                                        ),
                                        React.createElement("td", {className: "px-3 py-2 font-medium text-gray-800 whitespace-nowrap " + (i % 2 === 0 ? "bg-white" : "bg-gray-50")}, 
                                            c.cod_cliente, " - ", il(c.cod_cliente) || c.cliente
                                        ),
                                        acompFiltrosOrdem.map(function(filtro) {
                                            if (filtro === "os") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center font-bold text-blue-600 whitespace-nowrap"}, c.os);
                                            if (filtro === "entregas") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center text-sky-600 whitespace-nowrap"}, c.entregas);
                                            if (filtro === "noPrazo") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center whitespace-nowrap"}, React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (c.noPrazo >= 80 ? "bg-green-100 text-green-700" : c.noPrazo >= 60 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, c.noPrazo.toFixed(2) + "%"));
                                            if (filtro === "foraPrazo") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center whitespace-nowrap"}, React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (c.foraPrazo <= 20 ? "bg-green-100 text-green-700" : c.foraPrazo <= 40 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, c.foraPrazo.toFixed(2) + "%"));
                                            if (filtro === "retornos") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center text-orange-600 font-medium whitespace-nowrap"}, c.retornos);
                                            if (filtro === "valorTotal") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-right text-purple-600 font-medium whitespace-nowrap"}, "R$" + c.valorTotal.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                            if (filtro === "valorProf") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-right text-amber-600 font-medium whitespace-nowrap"}, "R$" + c.valorProf.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                            if (filtro === "faturamentoTotal") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-right text-violet-600 font-medium whitespace-nowrap"}, "R$" + c.faturamentoTotal.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                            if (filtro === "ticketMedio") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-right text-cyan-600 font-medium whitespace-nowrap"}, "R$" + c.ticketMedio.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                            if (filtro === "tempoMedioEntrega") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center text-rose-600 whitespace-nowrap"}, c.tempoMedioEntrega || "00:00:00");
                                            if (filtro === "tempoMedioAlocacao") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center text-pink-600 whitespace-nowrap"}, c.tempoMedioAlocacao || "00:00:00");
                                            if (filtro === "tempoMedioColeta") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center text-fuchsia-600 whitespace-nowrap"}, c.tempoMedioColeta || "00:00:00");
                                            if (filtro === "totalEntregadores") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center text-teal-600 whitespace-nowrap"}, c.totalProfissionais);
                                            if (filtro === "mediaEntProfissional") return React.createElement("td", {key: filtro, className: "px-3 py-2 text-center text-violet-600 whitespace-nowrap"}, c.mediaEntProfissional || (c.entregas / Math.max(c.totalProfissionais, 1)).toFixed(1));
                                            return null;
                                        })
                                    ),
                                    // Linhas expandidas dos centros de custo
                                    expandido && c.centros_custo && c.centros_custo.map(function(cc, j) {
                                        return React.createElement("tr", {key: i + "-cc-" + j, className: "bg-purple-50 border-l-4 border-purple-400"},
                                            React.createElement("td", {className: "px-2 py-2 text-purple-400 text-center"}, "‚îî"),
                                            React.createElement("td", {className: "px-3 py-2 text-purple-700 pl-4 whitespace-nowrap"}, "üìÅ ", c.cod_cliente, " - ", cc.centro_custo),
                                            acompFiltrosOrdem.map(function(filtro) {
                                                if (filtro === "os") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-600"}, cc.total_os);
                                                if (filtro === "entregas") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-600"}, cc.total_entregas);
                                                if (filtro === "noPrazo") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center"}, React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (cc.taxa_no_prazo >= 80 ? "bg-green-100 text-green-700" : cc.taxa_no_prazo >= 60 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, (cc.taxa_no_prazo || 0).toFixed(2) + "%"));
                                                if (filtro === "foraPrazo") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center"}, React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (cc.taxa_fora_prazo <= 20 ? "bg-green-100 text-green-700" : cc.taxa_fora_prazo <= 40 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, (cc.taxa_fora_prazo || 0).toFixed(2) + "%"));
                                                if (filtro === "retornos") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-orange-500"}, cc.retornos || 0);
                                                if (filtro === "valorTotal") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-600"}, "R$" + (cc.valor_total || 0).toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                                if (filtro === "valorProf") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-600"}, "R$" + (cc.valor_prof || 0).toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                                if (filtro === "faturamentoTotal") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-600"}, "R$" + ((cc.valor_total || 0) - (cc.valor_prof || 0)).toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                                if (filtro === "ticketMedio") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-600"}, "-");
                                                if (filtro === "tempoMedioEntrega") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-600"}, cc.tempo_medio || "00:00:00");
                                                if (filtro === "tempoMedioAlocacao") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-600"}, "-");
                                                if (filtro === "tempoMedioColeta") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-600"}, "-");
                                                if (filtro === "totalEntregadores") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-600"}, "-");
                                                if (filtro === "mediaEntProfissional") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-600"}, "-");
                                                return null;
                                            })
                                        );
                                    })
                                );
                            }),
                            acompClientes.totais && React.createElement("tr", {className: "bg-purple-200 font-bold border-t-2 border-purple-400"},
                                React.createElement("td", {className: "px-2 py-2"}),
                                React.createElement("td", {className: "px-3 py-2 text-purple-900 sticky left-0 bg-purple-200"}, "Total"),
                                acompFiltrosOrdem.map(function(filtro) {
                                    var t = acompClientes.totais;
                                    if (filtro === "os") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.os);
                                    if (filtro === "entregas") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.entregas);
                                    if (filtro === "noPrazo") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center"}, React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (t.noPrazo >= 80 ? "bg-green-200 text-green-800" : t.noPrazo >= 60 ? "bg-yellow-200 text-yellow-800" : "bg-red-200 text-red-800")}, t.noPrazo.toFixed(2) + "%"));
                                    if (filtro === "foraPrazo") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center"}, React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (t.foraPrazo <= 20 ? "bg-green-200 text-green-800" : t.foraPrazo <= 40 ? "bg-yellow-200 text-yellow-800" : "bg-red-200 text-red-800")}, t.foraPrazo.toFixed(2) + "%"));
                                    if (filtro === "retornos") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.retornos);
                                    if (filtro === "valorTotal") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-900"}, "R$" + t.valorTotal.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                    if (filtro === "valorProf") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-900"}, "R$" + t.valorProf.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                    if (filtro === "faturamentoTotal") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-900"}, "R$" + t.faturamentoTotal.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                    if (filtro === "ticketMedio") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-right text-purple-900"}, "R$" + t.ticketMedio.toLocaleString("pt-BR", {minimumFractionDigits: 2}));
                                    if (filtro === "tempoMedioEntrega") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.tempoMedioEntrega || "00:00:00");
                                    if (filtro === "tempoMedioAlocacao") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.tempoMedioAlocacao || "00:00:00");
                                    if (filtro === "tempoMedioColeta") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.tempoMedioColeta || "00:00:00");
                                    if (filtro === "totalEntregadores") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.totalProfissionais);
                                    if (filtro === "mediaEntProfissional") return React.createElement("td", {key: filtro, className: "px-2 py-2 text-center text-purple-900"}, t.mediaEntProfissional || (t.entregas / Math.max(t.totalProfissionais, 1)).toFixed(1));
                                    return null;
                                })
                            )
                        )
                    )
                )
            ),
            
            acompLoading && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-12 text-center"}, React.createElement("div", {className: "animate-spin text-5xl mb-4"}, "‚è≥"), React.createElement("p", {className: "text-gray-600"}, "Carregando...")), !acompLoading && acompDados && acompDados.porData && acompDados.porData.length > 0 && (acompFiltros.os || acompFiltros.entregas || acompFiltros.noPrazo || acompFiltros.foraPrazo || acompFiltros.retornos || acompFiltros.valorTotal || acompFiltros.valorProf || acompFiltros.ticketMedio || acompFiltros.tempoMedioEntrega || acompFiltros.tempoMedioAlocacao || acompFiltros.tempoMedioColeta || acompFiltros.totalEntregadores || acompFiltros.mediaEntProfissional || acompFiltros.evolucaoSemanal) && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"}, React.createElement("div", {className: "relative"}, React.createElement("div", {id: "acomp-tooltip", style: {display: "none", position: "absolute", background: "white", border: "1px solid #ccc", borderRadius: "8px", padding: "12px", boxShadow: "0 4px 12px rgba(0,0,0,0.15)", zIndex: 1000, minWidth: "220px", fontSize: "11px"}}), // Gr√°fico de Acompanhamento - NOVA VERS√ÉO COM ESCALAS SEPARADAS
// ViewBox: 0 0 1000 450, altura √∫til: 20-400
// Dividido em 4 faixas horizontais:
// - Faixa 1 (topo): 30-120 - Percentuais (Taxa Prazo, Evolu√ß√£o)
// - Faixa 2: 140-220 - Contadores pequenos (OS, Entregas, Fora Prazo, Retornos, Entregadores, M√©dia Ent/Prof)
// - Faixa 3: 240-320 - Valores monet√°rios (Valor Total, Valor Prof, Ticket)
// - Faixa 4 (base): 340-390 - Tempos (Entrega, Aloca√ß√£o, Coleta)

// Gr√°fico de Acompanhamento - V3 - CADA M√âTRICA COM SUA PR√ìPRIA FAIXA
// ViewBox: 0 0 1000 500 (aumentado para caber tudo)
// 14 m√©tricas = 14 faixas de ~30px cada, bem espa√ßadas
// Ordem de cima para baixo:
// 1. Taxa Prazo (30-55)
// 2. Evolu√ß√£o Semanal (60-85)
// 3. OS (95-120)
// 4. Entregas (125-150)
// 5. Fora Prazo (155-180)
// 6. Retornos (185-210)
// 7. Total Entregadores (215-240)
// 8. M√©dia Ent/Prof (245-270)
// 9. Valor Total (280-305)
// 10. Valor Prof (310-335)
// 11. Ticket M√©dio (340-365)
// 12. Tempo Entrega (375-400)
// 13. Tempo Aloca√ß√£o (405-430)
// 14. Tempo Coleta (435-460)

// Gr√°fico DIN√ÇMICO - expande conforme sele√ß√£o
// Cada m√©trica ativa = 80px de altura
(function() {
  // Calcular quais m√©tricas est√£o ativas
  var metricas = [];
  if(acompFiltros.noPrazo) metricas.push({id: "noPrazo", label: "Taxa Prazo", color: "#22c55e", bgColor: "#f0fdf4", field: "taxa_prazo", isPercent: true});
  if(acompFiltros.evolucaoSemanal) metricas.push({id: "evolucao", label: "Evolu√ß√£o Semanal", color: "#8b5cf6", bgColor: "#faf5ff", field: "evolucao_semanal", isVariation: true});
  if(acompFiltros.os) metricas.push({id: "os", label: "OS", color: "#2563eb", bgColor: "#eff6ff", field: "total_os", isInt: true});
  if(acompFiltros.entregas) metricas.push({id: "entregas", label: "Entregas", color: "#0ea5e9", bgColor: "#f0f9ff", field: "total_entregas", isInt: true});
  if(acompFiltros.foraPrazo) metricas.push({id: "foraPrazo", label: "Fora Prazo", color: "#ef4444", bgColor: "#fef2f2", field: "fora_prazo", isInt: true});
  if(acompFiltros.retornos) metricas.push({id: "retornos", label: "Retornos", color: "#f97316", bgColor: "#fff7ed", field: "retornos", isInt: true});
  if(acompFiltros.totalEntregadores) metricas.push({id: "entregadores", label: "Total Entregadores", color: "#14b8a6", bgColor: "#f0fdfa", field: "total_entregadores", isInt: true});
  if(acompFiltros.mediaEntProfissional) metricas.push({id: "mediaEnt", label: "M√©dia Ent/Prof", color: "#10b981", bgColor: "#ecfdf5", field: "media_ent_profissional", isFloat: true});
  if(acompFiltros.valorTotal) metricas.push({id: "valorTotal", label: "Valor Total", color: "#8b5cf6", bgColor: "#faf5ff", field: "valor_total", isMoney: true});
  if(acompFiltros.valorProf) metricas.push({id: "valorProf", label: "Valor Prof", color: "#f59e0b", bgColor: "#fffbeb", field: "valor_motoboy", isMoney: true});
  if(acompFiltros.ticketMedio) metricas.push({id: "ticket", label: "Ticket M√©dio", color: "#06b6d4", bgColor: "#ecfeff", field: "ticket_medio", isMoney: true, noK: true});
  if(acompFiltros.tempoMedioEntrega) metricas.push({id: "tempoEnt", label: "Tempo Entrega", color: "#e11d48", bgColor: "#fff1f2", field: "tempo_medio_entrega", isTime: true});
  if(acompFiltros.tempoMedioAlocacao) metricas.push({id: "tempoAloc", label: "Tempo Aloca√ß√£o", color: "#ec4899", bgColor: "#fdf2f8", field: "tempo_medio_alocacao", isTime: true});
  if(acompFiltros.tempoMedioColeta) metricas.push({id: "tempoCol", label: "Tempo Coleta", color: "#d946ef", bgColor: "#fdf4ff", field: "tempo_medio_coleta", isTime: true});
  
  var alturaPorMetrica = 80;
  var alturaTotal = Math.max(metricas.length * alturaPorMetrica + 50, 150);
  var dados = acompDados.porData;
  
  // Fun√ß√£o para formatar valor
  var formatVal = function(m, val) {
    if(m.isTime) { var h = Math.floor(val/60); var mn = Math.floor(val%60); return String(h).padStart(2,"0")+":"+String(mn).padStart(2,"0"); }
    if(m.isMoney) return "R$"+(m.noK ? val.toFixed(0) : (val>=1000?(val/1000).toFixed(1)+"k":val.toFixed(0)));
    if(m.isPercent) return val.toFixed(1)+"%";
    if(m.isVariation) return (val>=0?"+":"")+val+"%";
    if(m.isFloat) return val.toFixed(1);
    return val.toString();
  };
  
  // Criar elementos
  var elementos = [];
  
  // Fundo e linhas de grade
  elementos.push(React.createElement("rect", {key: "bg", x: 0, y: 0, width: 1000, height: alturaTotal, fill: "#fafafa", rx: 8}));
  
  // Colunas verticais e datas
  dados.forEach(function(d, i) {
    var x = 80 + i * 870 / Math.max(dados.length-1, 1);
    elementos.push(React.createElement("line", {key: "vline"+i, x1: x, y1: 10, x2: x, y2: alturaTotal-40, stroke: "#e5e7eb", strokeWidth: 1}));
    elementos.push(React.createElement("text", {key: "data"+i, x: x, y: alturaTotal-20, textAnchor: "middle", fontSize: "10", fill: "#666"}, d.data_formatada));
  });
  
  // Para cada m√©trica ativa, criar sua faixa
  metricas.forEach(function(m, idx) {
    var yBase = 15 + idx * alturaPorMetrica;
    var yMid = yBase + alturaPorMetrica/2;
    var yTop = yBase + 12;
    var yBot = yBase + alturaPorMetrica - 12;
    var range = yBot - yTop;
    
    // Fundo da faixa
    elementos.push(React.createElement("rect", {key: "bg"+m.id, x: 75, y: yBase, width: 880, height: alturaPorMetrica-5, fill: m.bgColor, rx: 6}));
    
    // Label da m√©trica (vertical √† esquerda)
    elementos.push(React.createElement("text", {key: "label"+m.id, x: 70, y: yMid, textAnchor: "end", fontSize: "11", fontWeight: "bold", fill: m.color, dominantBaseline: "middle"}, m.label));
    
    // Linha horizontal de refer√™ncia (meio)
    elementos.push(React.createElement("line", {key: "hline"+m.id, x1: 80, y1: yMid, x2: 950, y2: yMid, stroke: m.color, strokeWidth: 0.5, strokeDasharray: "3,3", opacity: 0.3}));
    
    // Calcular max para normaliza√ß√£o
    var maxVal = 1;
    if(m.isPercent) {
      maxVal = 100;
    } else if(m.isVariation) {
      maxVal = Math.max.apply(null, dados.map(function(d){ return Math.abs(parseFloat(d[m.field])||0); })) || 50;
    } else {
      maxVal = Math.max.apply(null, dados.map(function(d){ return parseFloat(d[m.field])||0; })) || 1;
    }
    
    // Polyline
    var points = dados.map(function(d, i) {
      var x = 80 + i * 870 / Math.max(dados.length-1, 1);
      var val = parseFloat(d[m.field]) || 0;
      var pct;
      if(m.isVariation) {
        pct = 0.5 + (val / maxVal) * 0.4; // -100% a +100% mapeado para 0.1 a 0.9
        pct = Math.max(0.1, Math.min(0.9, pct));
      } else {
        pct = val / maxVal;
      }
      var y = yBot - pct * range;
      return x + "," + y;
    }).join(" ");
    
    elementos.push(React.createElement("polyline", {key: "line"+m.id, points: points, fill: "none", stroke: m.color, strokeWidth: "3", strokeLinecap: "round", strokeLinejoin: "round"}));
    
    // √Årea preenchida (gradiente suave)
    var areaPoints = "80," + yBot + " " + points + " " + (80 + (dados.length-1) * 870 / Math.max(dados.length-1, 1)) + "," + yBot;
    elementos.push(React.createElement("polygon", {key: "area"+m.id, points: areaPoints, fill: m.color, opacity: 0.1}));
    
    // Pontos e valores
    dados.forEach(function(d, i) {
      var x = 80 + i * 870 / Math.max(dados.length-1, 1);
      var val = parseFloat(d[m.field]) || 0;
      var pct;
      if(m.isVariation) {
        if(d[m.field] === null) return;
        pct = 0.5 + (val / maxVal) * 0.4;
        pct = Math.max(0.1, Math.min(0.9, pct));
      } else {
        pct = val / maxVal;
      }
      var y = yBot - pct * range;
      
      // Cor do ponto
      var pointColor = m.color;
      if(m.isPercent) pointColor = val >= 80 ? "#22c55e" : val >= 60 ? "#eab308" : "#ef4444";
      if(m.isVariation) pointColor = val >= 0 ? "#22c55e" : "#ef4444";
      
      elementos.push(React.createElement("circle", {key: "pt"+m.id+i, cx: x, cy: y, r: 6, fill: pointColor, stroke: "white", strokeWidth: 2}));
      elementos.push(React.createElement("text", {key: "val"+m.id+i, x: x, y: y - 12, textAnchor: "middle", fontSize: "10", fontWeight: "bold", fill: pointColor}, formatVal(m, val)));
    });
  });
  
  // Tooltip overlay (√°reas clic√°veis)
  dados.forEach(function(d, i) {
    var x = 80 + i * 870 / Math.max(dados.length-1, 1);
    elementos.push(React.createElement("rect", {
      key: "hover"+i, 
      x: x-30, 
      y: 10, 
      width: 60, 
      height: alturaTotal-50, 
      fill: "transparent", 
      style: {cursor: "pointer"},
      onMouseEnter: function(e) {
        var tooltip = document.getElementById("acomp-tooltip");
        if(tooltip) {
          var content = "<div style='font-weight:bold;margin-bottom:8px;border-bottom:1px solid #eee;padding-bottom:6px;font-size:13px'>"+d.data_formatada+"</div>";
          metricas.forEach(function(m) {
            var val = parseFloat(d[m.field]) || 0;
            if(m.isVariation && d[m.field] === null) return;
            var displayVal = formatVal(m, val);
            var valColor = m.color;
            if(m.isPercent) valColor = val >= 80 ? "#22c55e" : val >= 60 ? "#eab308" : "#ef4444";
            if(m.isVariation) valColor = val >= 0 ? "#22c55e" : "#ef4444";
            content += "<div style='display:flex;justify-content:space-between;margin:3px 0'><span style='color:"+m.color+"'>‚óè "+m.label+"</span><span style='font-weight:600;color:"+valColor+"'>"+displayVal+"</span></div>";
          });
          tooltip.innerHTML = content;
          tooltip.style.display = "block";
          tooltip.style.left = Math.min(x-110, 780)+"px";
          tooltip.style.top = "30px";
        }
      },
      onMouseLeave: function() {
        var tooltip = document.getElementById("acomp-tooltip");
        if(tooltip) tooltip.style.display = "none";
      }
    }));
  });
  
  return React.createElement("svg", {viewBox: "0 0 1000 " + alturaTotal, className: "w-full", style: {height: alturaTotal + "px", minHeight: "150px"}}, elementos);
})())), !acompLoading && acompDados && acompDados.porData && acompDados.porData.length > 0 && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"}, React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "üìã Dados Detalhados"), React.createElement("div", {className: "overflow-x-auto"}, React.createElement("table", {className: "w-full text-xs"}, React.createElement("thead", null, React.createElement("tr", {className: "bg-purple-50"}, React.createElement("th", {className: "px-2 py-2 text-left"}, "Data"), React.createElement("th", {className: "px-2 py-2 text-center"}, "OS"), React.createElement("th", {className: "px-2 py-2 text-center"}, "Entregas"), React.createElement("th", {className: "px-2 py-2 text-center"}, "No Prazo"), React.createElement("th", {className: "px-2 py-2 text-center"}, "Fora"), React.createElement("th", {className: "px-2 py-2 text-center"}, "Retornos"), React.createElement("th", {className: "px-2 py-2 text-center"}, "Taxa"), React.createElement("th", {className: "px-2 py-2 text-right"}, "Valor Total"), React.createElement("th", {className: "px-2 py-2 text-right"}, "Valor Prof."), React.createElement("th", {className: "px-2 py-2 text-center"}, "Ticket"), React.createElement("th", {className: "px-2 py-2 text-center"}, "T.Entrega"), React.createElement("th", {className: "px-2 py-2 text-center"}, "Entreg."))), React.createElement("tbody", null, acompDados.porData.map(function(d,i){ var mins = parseFloat(d.tempo_medio_entrega)||0; var h = Math.floor(mins/60); var m = Math.floor(mins%60); return React.createElement("tr", {key: i, className: i%2===0?"bg-white":"bg-gray-50"}, React.createElement("td", {className: "px-2 py-1 font-medium"}, d.data_formatada), React.createElement("td", {className: "px-2 py-1 text-center font-bold text-blue-600"}, d.total_os), React.createElement("td", {className: "px-2 py-1 text-center text-sky-600"}, d.total_entregas), React.createElement("td", {className: "px-2 py-1 text-center text-green-600"}, d.dentro_prazo), React.createElement("td", {className: "px-2 py-1 text-center text-red-600"}, d.fora_prazo), React.createElement("td", {className: "px-2 py-1 text-center text-orange-600"}, d.retornos||0), React.createElement("td", {className: "px-2 py-1 text-center"}, React.createElement("span", {className: "px-1 py-0 rounded text-xs font-bold "+(parseFloat(d.taxa_prazo)>=80?"bg-green-100 text-green-700":parseFloat(d.taxa_prazo)>=60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700")}, d.taxa_prazo+"%")), React.createElement("td", {className: "px-2 py-1 text-right text-purple-600"}, "R$", parseFloat(d.valor_total||0).toLocaleString("pt-BR",{minimumFractionDigits:0})), React.createElement("td", {className: "px-2 py-1 text-right text-amber-600"}, "R$", parseFloat(d.valor_motoboy||0).toLocaleString("pt-BR",{minimumFractionDigits:0})), React.createElement("td", {className: "px-2 py-1 text-center text-cyan-600"}, "R$", d.ticket_medio), React.createElement("td", {className: "px-2 py-1 text-center text-rose-600"}, String(h).padStart(2,"0")+":"+String(m).padStart(2,"0")), React.createElement("td", {className: "px-2 py-1 text-center text-teal-600"}, d.total_entregadores)); })))))), !acompLoading && comparativoSemanal && comparativoSemanal.semanas && comparativoSemanal.semanas.length > 0 && (function() {
  var semanas = comparativoSemanal.semanas;
  if (!semanas || semanas.length === 0) return null;
  
  // Fun√ß√£o para formatar tempo
  var fmtTempo = function(mins) {
    var m = parseFloat(mins) || 0;
    var h = Math.floor(m / 60);
    var mn = Math.floor(m % 60);
    return String(h).padStart(2, "0") + ":" + String(mn).padStart(2, "0");
  };
  
  // Definir colunas baseadas nos subfiltros - usando os campos corretos do backend
  var colunas = [];
  colunas.push({id: "periodo", label: "Semana", align: "left"});
  
  if (acompFiltros.os) colunas.push({id: "os", label: "OS", field: "total_os", color: "blue", align: "center"});
  if (acompFiltros.entregas) colunas.push({id: "entregas", label: "Entregas", field: "total_entregas", color: "sky", align: "center", showVar: true});
  if (acompFiltros.noPrazo) colunas.push({id: "prazo", label: "Taxa Prazo", field: "taxa_prazo", color: "green", align: "center", isPercent: true, showVar: true});
  if (acompFiltros.foraPrazo) colunas.push({id: "fora", label: "Fora Prazo", field: "fora_prazo", color: "red", align: "center", showVar: true, invertVar: true});
  if (acompFiltros.retornos) colunas.push({id: "retornos", label: "Retornos", field: "retornos", color: "orange", align: "center", showVar: true, invertVar: true});
  if (acompFiltros.valorTotal) colunas.push({id: "valorTotal", label: "Valor Total", field: "valor_total", color: "purple", align: "right", isMoney: true, showVar: true});
  if (acompFiltros.valorProf) colunas.push({id: "valorProf", label: "Valor Prof", field: "valor_prof", color: "amber", align: "right", isMoney: true, showVar: true});
  if (acompFiltros.ticketMedio) colunas.push({id: "ticket", label: "Ticket", field: "ticket_medio", color: "cyan", align: "center", isMoney: true, showVar: true});
  if (acompFiltros.tempoMedioEntrega) colunas.push({id: "tEntrega", label: "T.Entrega", field: "tempo_medio_entrega", color: "rose", align: "center", isTime: true, showVar: true, invertVar: true});
  if (acompFiltros.tempoMedioAlocacao) colunas.push({id: "tAlocacao", label: "T.Aloca√ß√£o", field: "tempo_medio_alocacao", color: "pink", align: "center", isTime: true, showVar: true, invertVar: true});
  if (acompFiltros.tempoMedioColeta) colunas.push({id: "tColeta", label: "T.Coleta", field: "tempo_medio_coleta", color: "fuchsia", align: "center", isTime: true, showVar: true, invertVar: true});
  if (acompFiltros.totalEntregadores) colunas.push({id: "entregadores", label: "Entregadores", field: "total_entregadores", color: "teal", align: "center", showVar: true});
  if (acompFiltros.mediaEntProfissional) colunas.push({id: "mediaEnt", label: "M√©dia/Prof", field: "media_ent_profissional", color: "emerald", align: "center", isFloat: true, showVar: true});
  
  // Se nenhum filtro selecionado, mostrar colunas padr√£o
  if (colunas.length === 1) {
    colunas.push({id: "entregas", label: "Entregas", field: "total_entregas", color: "sky", align: "center", showVar: true});
    colunas.push({id: "prazo", label: "Taxa Prazo", field: "taxa_prazo", color: "green", align: "center", isPercent: true, showVar: true});
    colunas.push({id: "valorTotal", label: "Valor", field: "valor_total", color: "purple", align: "right", isMoney: true, showVar: true});
  }
  
  // Fun√ß√£o para renderizar valor
  var renderVal = function(col, val) {
    if (col.isTime) return fmtTempo(val);
    if (col.isMoney) return "R$ " + parseFloat(val || 0).toLocaleString("pt-BR", {minimumFractionDigits: 0});
    if (col.isPercent) return (val || 0) + "%";
    if (col.isFloat) return parseFloat(val || 0).toFixed(1);
    return val || 0;
  };
  
  // Fun√ß√£o para renderizar varia√ß√£o
  var renderVar = function(col, semanaAtual, semanaAnterior, idx) {
    if (!col.showVar || idx === semanas.length - 1 || !semanaAnterior) return null;
    
    var valAtual = parseFloat(semanaAtual[col.field]) || 0;
    var valAnterior = parseFloat(semanaAnterior[col.field]) || 0;
    
    if (valAnterior === 0) return null;
    
    var varPct = ((valAtual - valAnterior) / valAnterior * 100).toFixed(1);
    var isPositive = parseFloat(varPct) >= 0;
    var isGood = col.invertVar ? !isPositive : isPositive;
    
    return React.createElement("div", {className: "text-xs font-bold " + (isGood ? "text-green-600" : "text-red-600")},
      (isPositive ? "‚Üë" : "‚Üì") + " " + Math.abs(parseFloat(varPct)) + "%"
    );
  };
  
  // Cores por tipo
  var getColorClass = function(color, type) {
    var colors = {
      blue: {bg: "bg-blue-100", text: "text-blue-700", border: "border-blue-200"},
      sky: {bg: "bg-sky-100", text: "text-sky-700", border: "border-sky-200"},
      green: {bg: "bg-green-100", text: "text-green-700", border: "border-green-200"},
      red: {bg: "bg-red-100", text: "text-red-700", border: "border-red-200"},
      orange: {bg: "bg-orange-100", text: "text-orange-700", border: "border-orange-200"},
      purple: {bg: "bg-purple-100", text: "text-purple-700", border: "border-purple-200"},
      amber: {bg: "bg-amber-100", text: "text-amber-700", border: "border-amber-200"},
      cyan: {bg: "bg-cyan-100", text: "text-cyan-700", border: "border-cyan-200"},
      rose: {bg: "bg-rose-100", text: "text-rose-700", border: "border-rose-200"},
      pink: {bg: "bg-pink-100", text: "text-pink-700", border: "border-pink-200"},
      fuchsia: {bg: "bg-fuchsia-100", text: "text-fuchsia-700", border: "border-fuchsia-200"},
      teal: {bg: "bg-teal-100", text: "text-teal-700", border: "border-teal-200"},
      emerald: {bg: "bg-emerald-100", text: "text-emerald-700", border: "border-violet-200"}
    };
    return colors[color] ? colors[color][type] : "";
  };
  
  return React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6 mt-4"},
    React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "üìÖ Comparativo Semanal (", semanas.length, " semanas)"),
    
    // Cards de resumo da semana atual vs anterior
    semanas.length >= 2 && React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 mb-6"},
      colunas.filter(function(c) { return c.showVar; }).slice(0, 6).map(function(col) {
        var valAtual = parseFloat(semanas[0][col.field]) || 0;
        var valAnterior = parseFloat(semanas[1][col.field]) || 0;
        var varPct = valAnterior ? ((valAtual - valAnterior) / valAnterior * 100).toFixed(1) : null;
        var isPositive = varPct && parseFloat(varPct) >= 0;
        var isGood = col.invertVar ? !isPositive : isPositive;
        
        return React.createElement("div", {key: col.id, className: "rounded-xl p-3 border " + getColorClass(col.color, "bg") + " " + getColorClass(col.color, "border")},
          React.createElement("div", {className: "text-xs font-medium mb-1 " + getColorClass(col.color, "text")}, col.label),
          React.createElement("div", {className: "text-xl font-bold " + getColorClass(col.color, "text")}, renderVal(col, valAtual)),
          varPct && React.createElement("div", {className: "text-sm font-bold " + (isGood ? "text-green-600" : "text-red-600")},
            (isPositive ? "‚Üë " : "‚Üì ") + Math.abs(parseFloat(varPct)) + "%"
          )
        );
      })
    ),
    
    // Tabela
    React.createElement("div", {className: "overflow-x-auto"},
      React.createElement("table", {className: "w-full text-xs"},
        React.createElement("thead", null,
          React.createElement("tr", {className: "bg-indigo-100"},
            colunas.map(function(col) {
              return React.createElement("th", {key: col.id, className: "px-3 py-2 text-" + col.align + " font-bold"}, col.label);
            })
          )
        ),
        React.createElement("tbody", null,
          semanas.map(function(s, i) {
            var semanaAnterior = semanas[i + 1];
            return React.createElement("tr", {key: i, className: i === 0 ? "bg-blue-50 border-l-4 border-blue-500" : (i % 2 === 0 ? "bg-white" : "bg-gray-50")},
              colunas.map(function(col) {
                if (col.id === "periodo") {
                  return React.createElement("td", {key: col.id, className: "px-3 py-2 font-medium"}, i === 0 ? "üìç " + s.periodo : s.periodo);
                }
                
                var val = s[col.field];
                var varEl = renderVar(col, s, semanaAnterior, i);
                
                return React.createElement("td", {key: col.id, className: "px-3 py-2 text-" + col.align},
                  React.createElement("div", {className: "flex flex-col items-" + (col.align === "right" ? "end" : col.align === "center" ? "center" : "start")},
                    React.createElement("span", {className: "font-bold " + getColorClass(col.color, "text")}, renderVal(col, val)),
                    varEl
                  )
                );
              })
            );
          })
        )
      )
    )
  );
})(), !acompLoading && comparativoSemanalClientes && comparativoSemanalClientes.clientes && comparativoSemanalClientes.clientes.length > 0 && // Comparativo Semanal por Cliente - Ordem din√¢mica de colunas
(function() {
  var clientes = comparativoSemanalClientes.clientes;
  if (!clientes || clientes.length === 0) return null;
  
  var fmtTempo = function(mins) {
    var m = parseFloat(mins) || 0;
    var h = Math.floor(m / 60);
    var mn = Math.floor(m % 60);
    return String(h).padStart(2, "0") + ":" + String(mn).padStart(2, "0");
  };
  
  // Mapa de configura√ß√£o das colunas
  var colunasConfig = {
    os: {id: "os", label: "OS", field: "total_os", color: "#2563eb"},
    entregas: {id: "entregas", label: "Entregas", field: "total_entregas", color: "#0ea5e9", showVar: true},
    noPrazo: {id: "prazo", label: "Taxa Prazo", field: "taxa_prazo", color: "#16a34a", isPercent: true, showVar: true},
    foraPrazo: {id: "fora", label: "Fora Prazo", field: "fora_prazo", color: "#dc2626", showVar: true, invertVar: true},
    retornos: {id: "retornos", label: "Retornos", field: "retornos", color: "#ea580c", showVar: true, invertVar: true},
    valorTotal: {id: "valorTotal", label: "Valor Total", field: "valor_total", color: "#7c3aed", isMoney: true, showVar: true},
    valorProf: {id: "valorProf", label: "Valor Prof", field: "valor_prof", color: "#d97706", isMoney: true, showVar: true},
    ticketMedio: {id: "ticket", label: "Ticket M√©dio", field: "ticket_medio", color: "#0891b2", isMoney: true},
    tempoMedioEntrega: {id: "tEntrega", label: "T. Entrega", field: "tempo_medio_entrega", color: "#e11d48", isTime: true, showVar: true, invertVar: true},
    tempoMedioAlocacao: {id: "tAlocacao", label: "T. Aloca√ß√£o", field: "tempo_medio_alocacao", color: "#db2777", isTime: true, showVar: true, invertVar: true},
    tempoMedioColeta: {id: "tColeta", label: "T. Coleta", field: "tempo_medio_coleta", color: "#c026d3", isTime: true, showVar: true, invertVar: true},
    totalEntregadores: {id: "entregadores", label: "Entregadores", field: "total_entregadores", color: "#0d9488"},
    mediaEntProfissional: {id: "mediaEnt", label: "M√©d/Prof", field: "media_ent_profissional", color: "#059669", isFloat: true}
  };
  
  // Montar colunas na ordem de sele√ß√£o
  var colunas = [];
  colunas.push({id: "periodo", label: "Semana"});
  
  // Usar acompFiltrosOrdem para manter a ordem de sele√ß√£o
  acompFiltrosOrdem.forEach(function(filtro) {
    if (acompFiltros[filtro] && colunasConfig[filtro]) {
      colunas.push(colunasConfig[filtro]);
    }
  });
  
  var temFiltros = colunas.length > 1;
  
  var renderVal = function(col, val) {
    if (col.isTime) return fmtTempo(val);
    if (col.isMoney) return "R$ " + parseFloat(val || 0).toLocaleString("pt-BR", {minimumFractionDigits: 0});
    if (col.isPercent) return (parseFloat(val) || 0).toFixed(1) + "%";
    if (col.isFloat) return parseFloat(val || 0).toFixed(1);
    return val || 0;
  };
  
  var getVar = function(col, atual, anterior) {
    if (!col.showVar || !anterior) return null;
    var valAtual = parseFloat(atual[col.field]) || 0;
    var valAnterior = parseFloat(anterior[col.field]) || 0;
    if (valAnterior === 0) return null;
    var pct = ((valAtual - valAnterior) / valAnterior * 100).toFixed(1);
    var isPositive = parseFloat(pct) >= 0;
    var isGood = col.invertVar ? !isPositive : isPositive;
    return {pct: Math.abs(parseFloat(pct)), isPositive: isPositive, isGood: isGood};
  };
  
  return React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6 mt-4"},
    React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "üè¢ Comparativo por Cliente"),
    
    !temFiltros && React.createElement("div", {className: "text-center text-gray-400 py-8"}, "Selecione m√©tricas acima para ver os dados"),
    
    temFiltros && React.createElement("div", {className: "space-y-4"},
      clientes.map(function(cli, cliIdx) {
        return React.createElement("div", {key: cliIdx, className: "border border-gray-200 rounded-lg overflow-hidden"},
          React.createElement("div", {className: "bg-slate-700 px-4 py-2 flex justify-between items-center"},
            React.createElement("span", {className: "font-bold text-white"}, cli.nome_fantasia),
            React.createElement("div", {className: "flex gap-4 text-sm text-white/80"},
              React.createElement("span", null, cli.semanas.length, " sem"),
              React.createElement("span", null, "üì¶ ", cli.resumo.total_entregas),
              React.createElement("span", {className: cli.resumo.media_taxa_prazo >= 80 ? "text-green-300" : cli.resumo.media_taxa_prazo >= 60 ? "text-yellow-300" : "text-red-300"}, "‚úì ", cli.resumo.media_taxa_prazo, "%")
            )
          ),
          React.createElement("div", {className: "overflow-x-auto"},
            React.createElement("table", {className: "text-sm"},
              React.createElement("thead", null,
                React.createElement("tr", {className: "bg-gray-50"},
                  colunas.map(function(col, colIdx) {
                    return React.createElement("th", {
                      key: col.id, 
                      className: "px-4 py-2 text-left font-semibold text-gray-600 border-b border-gray-200 whitespace-nowrap"
                    }, col.label);
                  })
                )
              ),
              React.createElement("tbody", null,
                cli.semanas.map(function(sem, semIdx) {
                  var semAnterior = cli.semanas[semIdx + 1];
                  var isFirst = semIdx === 0;
                  
                  return React.createElement("tr", {key: semIdx, className: isFirst ? "bg-blue-50" : (semIdx % 2 === 0 ? "bg-white" : "bg-gray-50/50")},
                    colunas.map(function(col) {
                      if (col.id === "periodo") {
                        return React.createElement("td", {key: col.id, className: "px-4 py-2 font-semibold text-gray-700 whitespace-nowrap"},
                          isFirst && React.createElement("span", {className: "inline-block w-2 h-2 rounded-full bg-blue-500 mr-2"}),
                          sem.periodo
                        );
                      }
                      
                      var val = sem[col.field];
                      var varInfo = getVar(col, sem, semAnterior);
                      
                      return React.createElement("td", {key: col.id, className: "px-4 py-2 whitespace-nowrap"},
                        React.createElement("span", {className: "font-bold", style: {color: col.color}}, renderVal(col, val)),
                        varInfo && React.createElement("span", {className: "ml-2 text-xs font-semibold " + (varInfo.isGood ? "text-green-600" : "text-red-600")}, varInfo.isPositive ? "‚Üë" : "‚Üì", varInfo.pct.toFixed(1), "%")
                      );
                    })
                  );
                })
              )
            )
          )
        );
      })
    )
  );
})(), 
            
            // === SE√á√ÉO CLIENTE 767 ===
            "cliente767" === Et && React.createElement("div", {className: "space-y-4"}, 
                React.createElement("div", {className: "bg-gradient-to-r from-orange-500 to-amber-600 rounded-xl p-6 text-white"}, 
                    React.createElement("h2", {className: "text-2xl font-bold mb-2"}, "üè¢ Cliente 767 - Prazo Especial"),
                    React.createElement("p", {className: "opacity-90"}, "Prazo de entrega: 120 minutos (2 horas)"),
                    React.createElement("div", {className: "mt-3 flex flex-wrap gap-2 items-center"}, 
                        cliente767Filtros.data_inicio && React.createElement("span", {className: "px-3 py-1 bg-white/20 rounded-lg text-sm"}, "üìÖ De: ", cliente767Filtros.data_inicio),
                        cliente767Filtros.data_fim && React.createElement("span", {className: "px-3 py-1 bg-white/20 rounded-lg text-sm"}, "üìÖ At√©: ", cliente767Filtros.data_fim),
                        cliente767Filtros.centros_custo && cliente767Filtros.centros_custo.length > 0 && React.createElement("span", {className: "px-3 py-1 bg-white/20 rounded-lg text-sm"}, "üè™ ", cliente767Filtros.centros_custo.length, " CC"),
                        React.createElement("button", {onClick: function(){ setCliente767ModalFiltro(true); }, className: "px-4 py-2 bg-white/20 rounded-lg text-sm font-semibold hover:bg-white/30"}, "üîç Filtros"),
                        React.createElement("button", {onClick: carregarCliente767, className: "px-4 py-2 bg-white/20 rounded-lg text-sm font-semibold hover:bg-white/30"}, "üîÑ Recarregar")
                    )
                ),
                
                // Modal de Filtro espec√≠fico do Cliente 767
                cliente767ModalFiltro && React.createElement("div", {className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"},
                    React.createElement("div", {className: "bg-white rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto"},
                        React.createElement("div", {className: "sticky top-0 bg-orange-600 text-white px-6 py-4 rounded-t-xl flex justify-between items-center"},
                            React.createElement("h3", {className: "text-lg font-bold"}, "üîç Filtrar - Cliente 767"),
                            React.createElement("button", {onClick: function(){ setCliente767ModalFiltro(false); }, className: "text-white hover:bg-white/20 rounded-lg px-3 py-1 text-xl"}, "‚úï")
                        ),
                        React.createElement("div", {className: "p-6 space-y-4"},
                            // Filtros de Data
                            React.createElement("div", {className: "grid grid-cols-2 gap-4"},
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "Data In√≠cio"),
                                    React.createElement("input", {
                                        type: "date",
                                        value: cliente767Filtros.data_inicio,
                                        onChange: function(e) { setCliente767Filtros(function(f) { return {...f, data_inicio: e.target.value}; }); },
                                        className: "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                                    })
                                ),
                                React.createElement("div", null,
                                    React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "Data Fim"),
                                    React.createElement("input", {
                                        type: "date",
                                        value: cliente767Filtros.data_fim,
                                        onChange: function(e) { setCliente767Filtros(function(f) { return {...f, data_fim: e.target.value}; }); },
                                        className: "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                                    })
                                )
                            ),
                            React.createElement("div", {className: "flex gap-2"},
                                React.createElement("button", {
                                    onClick: function() {
                                        var hoje = new Date();
                                        var primeiroDia = new Date(hoje.getFullYear(), hoje.getMonth(), 1).toISOString().split('T')[0];
                                        var ultimoDia = new Date(hoje.getFullYear(), hoje.getMonth() + 1, 0).toISOString().split('T')[0];
                                        setCliente767Filtros(function(f) { return {...f, data_inicio: primeiroDia, data_fim: ultimoDia}; });
                                    },
                                    className: "flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200"
                                }, "M√™s Atual"),
                                React.createElement("button", {
                                    onClick: function() {
                                        var hoje = new Date();
                                        var primeiroDia = new Date(hoje.getFullYear(), hoje.getMonth() - 1, 1).toISOString().split('T')[0];
                                        var ultimoDia = new Date(hoje.getFullYear(), hoje.getMonth(), 0).toISOString().split('T')[0];
                                        setCliente767Filtros(function(f) { return {...f, data_inicio: primeiroDia, data_fim: ultimoDia}; });
                                    },
                                    className: "flex-1 px-3 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-200"
                                }, "M√™s Anterior")
                            ),
                            
                            // Filtro de Centro de Custo
                            React.createElement("div", null,
                                React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-2"}, "üè™ Centro de Custo"),
                                React.createElement("div", {className: "border rounded-lg p-3 max-h-48 overflow-y-auto bg-gray-50"},
                                    cliente767Dados && cliente767Dados.centrosCustoDisponiveis && cliente767Dados.centrosCustoDisponiveis.length > 0 ? 
                                        React.createElement(React.Fragment, null,
                                            React.createElement("div", {className: "flex gap-2 mb-2 pb-2 border-b"},
                                                React.createElement("button", {
                                                    onClick: function() { 
                                                        setCliente767Filtros(function(f) { 
                                                            return {...f, centros_custo: cliente767Dados.centrosCustoDisponiveis.slice()}; 
                                                        }); 
                                                    },
                                                    className: "px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium hover:bg-green-200"
                                                }, "Selecionar Todos"),
                                                React.createElement("button", {
                                                    onClick: function() { 
                                                        setCliente767Filtros(function(f) { return {...f, centros_custo: []}; }); 
                                                    },
                                                    className: "px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium hover:bg-red-200"
                                                }, "Limpar Sele√ß√£o")
                                            ),
                                            cliente767Dados.centrosCustoDisponiveis.map(function(cc) {
                                                var selecionado = cliente767Filtros.centros_custo.includes(cc);
                                                return React.createElement("label", {
                                                    key: cc,
                                                    className: "flex items-center gap-2 p-2 rounded cursor-pointer hover:bg-white " + (selecionado ? "bg-orange-100" : "")
                                                },
                                                    React.createElement("input", {
                                                        type: "checkbox",
                                                        checked: selecionado,
                                                        onChange: function() {
                                                            setCliente767Filtros(function(f) {
                                                                var novosCentros = selecionado 
                                                                    ? f.centros_custo.filter(function(c) { return c !== cc; })
                                                                    : f.centros_custo.concat([cc]);
                                                                return {...f, centros_custo: novosCentros};
                                                            });
                                                        },
                                                        className: "w-4 h-4 text-orange-600 rounded focus:ring-orange-500"
                                                    }),
                                                    React.createElement("span", {className: "text-sm " + (selecionado ? "font-medium text-orange-700" : "text-gray-700")}, cc)
                                                );
                                            })
                                        )
                                    : React.createElement("p", {className: "text-gray-500 text-sm text-center py-4"}, "Carregue os dados primeiro para ver os centros de custo dispon√≠veis")
                                ),
                                cliente767Filtros.centros_custo.length > 0 && React.createElement("p", {className: "text-xs text-orange-600 mt-1"}, cliente767Filtros.centros_custo.length, " centro(s) selecionado(s)")
                            ),
                            
                            // Bot√£o Limpar Tudo
                            React.createElement("button", {
                                onClick: function() { setCliente767Filtros({ data_inicio: '', data_fim: '', centros_custo: [] }); },
                                className: "w-full px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200"
                            }, "üóëÔ∏è Limpar Todos os Filtros")
                        ),
                        React.createElement("div", {className: "sticky bottom-0 bg-white px-6 py-4 border-t flex gap-3"},
                            React.createElement("button", {
                                onClick: function() { setCliente767ModalFiltro(false); },
                                className: "flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50"
                            }, "Cancelar"),
                            React.createElement("button", {
                                onClick: function() { setCliente767ModalFiltro(false); carregarCliente767(); },
                                className: "flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700"
                            }, "Aplicar Filtros")
                        )
                    )
                ),
                
                cliente767Loading && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-12 text-center"}, 
                    React.createElement("div", {className: "animate-spin text-5xl mb-4"}, "‚è≥"), 
                    React.createElement("p", {className: "text-gray-600"}, "Carregando dados...")
                ),
                
                !cliente767Loading && cliente767Dados && cliente767Dados.metricas && React.createElement(React.Fragment, null,
                    // Cards de m√©tricas
                    React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-3"},
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-blue-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "Total OS"),
                            React.createElement("p", {className: "text-2xl font-bold text-gray-800"}, cliente767Dados.metricas.total_os)
                        ),
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-cyan-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "Total Entregas"),
                            React.createElement("p", {className: "text-2xl font-bold text-gray-800"}, cliente767Dados.metricas.total_entregas)
                        ),
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-green-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "No Prazo (‚â§120min)"),
                            React.createElement("p", {className: "text-2xl font-bold text-green-600"}, cliente767Dados.metricas.dentro_prazo)
                        ),
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-red-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "Fora Prazo (>120min)"),
                            React.createElement("p", {className: "text-2xl font-bold text-red-600"}, cliente767Dados.metricas.fora_prazo)
                        )
                    ),
                    
                    // Cards de taxa e tempo
                    React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-3"},
                        React.createElement("div", {className: "bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg p-4 shadow text-white"},
                            React.createElement("p", {className: "text-xs opacity-80"}, "Taxa No Prazo"),
                            React.createElement("p", {className: "text-3xl font-bold"}, cliente767Dados.metricas.taxa_prazo, "%")
                        ),
                        React.createElement("div", {className: "bg-gradient-to-br from-sky-500 to-blue-600 rounded-lg p-4 shadow text-white"},
                            React.createElement("p", {className: "text-xs opacity-80"}, "Tempo M√©dio Entrega"),
                            React.createElement("p", {className: "text-2xl font-bold"}, cliente767Dados.metricas.tempo_medio || "00:00")
                        ),
                        React.createElement("div", {className: "bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg p-4 shadow text-white"},
                            React.createElement("p", {className: "text-xs opacity-80"}, "Tempo M√©dio Coleta"),
                            React.createElement("p", {className: "text-2xl font-bold"}, cliente767Dados.metricas.tempo_medio_coleta || "00:00")
                        ),
                        React.createElement("div", {className: "bg-gradient-to-br from-pink-500 to-rose-600 rounded-lg p-4 shadow text-white"},
                            React.createElement("p", {className: "text-xs opacity-80"}, "Tempo M√©dio Aloca√ß√£o"),
                            React.createElement("p", {className: "text-2xl font-bold"}, cliente767Dados.metricas.tempo_medio_alocacao || "00:00")
                        )
                    ),
                    
                    // Cards financeiros
                    React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-3"},
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-purple-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "Valor Total"),
                            React.createElement("p", {className: "text-xl font-bold text-purple-600"}, "R$ ", parseFloat(cliente767Dados.metricas.valor_total||0).toLocaleString("pt-BR", {minimumFractionDigits: 2}))
                        ),
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-amber-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "Valor Profissional"),
                            React.createElement("p", {className: "text-xl font-bold text-amber-600"}, "R$ ", parseFloat(cliente767Dados.metricas.valor_prof_total||0).toLocaleString("pt-BR", {minimumFractionDigits: 2}))
                        ),
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-violet-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "Faturamento"),
                            React.createElement("p", {className: "text-xl font-bold text-violet-600"}, "R$ ", (parseFloat(cliente767Dados.metricas.valor_total||0) - parseFloat(cliente767Dados.metricas.valor_prof_total||0)).toLocaleString("pt-BR", {minimumFractionDigits: 2}))
                        ),
                        React.createElement("div", {className: "bg-white rounded-lg p-4 shadow border-l-4 border-teal-500"},
                            React.createElement("p", {className: "text-xs text-gray-500"}, "Entregadores"),
                            React.createElement("p", {className: "text-xl font-bold text-teal-600"}, cliente767Dados.metricas.total_profissionais)
                        )
                    ),
                    
                    // =============================================
                    // INDICADOR DE META MENSAL
                    // =============================================
                    cliente767Dados.indicadorMeta && React.createElement("div", {className: "bg-gradient-to-r " + (cliente767Dados.indicadorMeta.meta_atingivel ? (cliente767Dados.indicadorMeta.taxa_minima_restante <= 0 ? "from-green-500 to-emerald-600" : "from-blue-500 to-indigo-600") : "from-red-500 to-rose-600") + " rounded-xl p-5 text-white shadow-lg"},
                        React.createElement("div", {className: "flex items-center justify-between mb-4"},
                            React.createElement("h3", {className: "text-lg font-bold flex items-center gap-2"}, "üéØ Meta Mensal de 95%"),
                            React.createElement("span", {className: "text-sm opacity-80"}, cliente767Dados.indicadorMeta.mes_referencia)
                        ),
                        React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},
                            React.createElement("div", {className: "bg-white/20 rounded-lg p-3"},
                                React.createElement("p", {className: "text-xs opacity-80"}, "Taxa Atual"),
                                React.createElement("p", {className: "text-2xl font-bold"}, cliente767Dados.indicadorMeta.taxa_atual, "%")
                            ),
                            React.createElement("div", {className: "bg-white/20 rounded-lg p-3"},
                                React.createElement("p", {className: "text-xs opacity-80"}, "Dias Restantes"),
                                React.createElement("p", {className: "text-2xl font-bold"}, cliente767Dados.indicadorMeta.dias_restantes)
                            ),
                            React.createElement("div", {className: "bg-white/20 rounded-lg p-3"},
                                React.createElement("p", {className: "text-xs opacity-80"}, "No Prazo / Total"),
                                React.createElement("p", {className: "text-xl font-bold"}, cliente767Dados.indicadorMeta.dentro_prazo_ate_agora, " / ", cliente767Dados.indicadorMeta.total_entregas_ate_agora)
                            ),
                            React.createElement("div", {className: "bg-white/20 rounded-lg p-3"},
                                React.createElement("p", {className: "text-xs opacity-80"}, "Taxa M√≠nima Necess√°ria"),
                                React.createElement("p", {className: "text-2xl font-bold"}, cliente767Dados.indicadorMeta.taxa_minima_restante > 100 ? ">100" : cliente767Dados.indicadorMeta.taxa_minima_restante, "%")
                            )
                        ),
                        React.createElement("div", {className: "bg-white/10 rounded-lg p-3"},
                            React.createElement("div", {className: "flex items-center gap-2"},
                                React.createElement("span", {className: "text-2xl"}, cliente767Dados.indicadorMeta.meta_atingivel ? (cliente767Dados.indicadorMeta.taxa_minima_restante <= 0 ? "‚úÖ" : "üìä") : "‚ö†Ô∏è"),
                                React.createElement("div", null,
                                    React.createElement("p", {className: "font-bold"}, cliente767Dados.indicadorMeta.mensagem),
                                    cliente767Dados.indicadorMeta.dias_restantes > 0 && cliente767Dados.indicadorMeta.taxa_minima_restante > 0 && cliente767Dados.indicadorMeta.taxa_minima_restante <= 100 && React.createElement("p", {className: "text-sm opacity-80"}, "Faltam ", cliente767Dados.indicadorMeta.entregas_no_prazo_faltam, " entregas no prazo de ~", cliente767Dados.indicadorMeta.entregas_estimadas_restantes, " estimadas")
                                )
                            )
                        )
                    ),
                    
                    // =============================================
                    // TABELA POR CENTRO DE CUSTO
                    // =============================================
                    cliente767Dados.porCentroCusto && cliente767Dados.porCentroCusto.length > 0 && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-4"},
                        React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "üè™ Desempenho por Centro de Custo"),
                        React.createElement("div", {className: "overflow-x-auto"},
                            React.createElement("table", {className: "w-full text-sm"},
                                React.createElement("thead", null,
                                    React.createElement("tr", {className: "bg-purple-50"},
                                        React.createElement("th", {className: "px-3 py-2 text-left font-bold"}, "Centro de Custo"),
                                        React.createElement("th", {className: "px-3 py-2 text-center font-bold"}, "OS"),
                                        React.createElement("th", {className: "px-3 py-2 text-center font-bold"}, "Entregas"),
                                        React.createElement("th", {className: "px-3 py-2 text-center font-bold text-green-700"}, "No Prazo"),
                                        React.createElement("th", {className: "px-3 py-2 text-center font-bold text-red-700"}, "Fora Prazo"),
                                        React.createElement("th", {className: "px-3 py-2 text-center font-bold"}, "Taxa")
                                    )
                                ),
                                React.createElement("tbody", null,
                                    cliente767Dados.porCentroCusto.map(function(cc, i) {
                                        var taxa = parseFloat(cc.taxa_prazo) || 0;
                                        return React.createElement("tr", {key: i, className: i%2===0?"bg-white":"bg-gray-50"},
                                            React.createElement("td", {className: "px-3 py-2 font-medium"}, cc.centro_custo),
                                            React.createElement("td", {className: "px-3 py-2 text-center text-blue-600 font-bold"}, cc.total_os),
                                            React.createElement("td", {className: "px-3 py-2 text-center text-sky-600"}, cc.total_entregas),
                                            React.createElement("td", {className: "px-3 py-2 text-center text-green-600 font-medium"}, cc.dentro_prazo),
                                            React.createElement("td", {className: "px-3 py-2 text-center text-red-600 font-medium"}, cc.fora_prazo),
                                            React.createElement("td", {className: "px-3 py-2 text-center"},
                                                React.createElement("span", {className: "px-2 py-1 rounded text-xs font-bold " + (taxa >= 95 ? "bg-green-100 text-green-700" : taxa >= 80 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, cc.taxa_prazo + "%")
                                            )
                                        );
                                    })
                                )
                            )
                        )
                    ),
                    
                    // Tabela por data
                    cliente767Dados.porData && cliente767Dados.porData.length > 0 && React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-4"},
                        React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "üìÖ Evolu√ß√£o Di√°ria"),
                        React.createElement("div", {className: "overflow-x-auto"},
                            React.createElement("table", {className: "w-full text-xs"},
                                React.createElement("thead", null,
                                    React.createElement("tr", {className: "bg-orange-50"},
                                        React.createElement("th", {className: "px-2 py-2 text-left"}, "Data"),
                                        React.createElement("th", {className: "px-2 py-2 text-center"}, "OS"),
                                        React.createElement("th", {className: "px-2 py-2 text-center"}, "Entregas"),
                                        React.createElement("th", {className: "px-2 py-2 text-center"}, "No Prazo"),
                                        React.createElement("th", {className: "px-2 py-2 text-center"}, "Fora"),
                                        React.createElement("th", {className: "px-2 py-2 text-center"}, "Taxa"),
                                        React.createElement("th", {className: "px-2 py-2 text-center"}, "T.Entrega"),
                                        React.createElement("th", {className: "px-2 py-2 text-right"}, "Valor")
                                    )
                                ),
                                React.createElement("tbody", null,
                                    cliente767Dados.porData.map(function(d, i) {
                                        var mins = parseFloat(d.tempo_medio_entrega)||0;
                                        var h = Math.floor(mins/60);
                                        var m = Math.floor(mins%60);
                                        return React.createElement("tr", {key: i, className: i%2===0?"bg-white":"bg-gray-50"},
                                            React.createElement("td", {className: "px-2 py-1 font-medium"}, d.data_formatada),
                                            React.createElement("td", {className: "px-2 py-1 text-center font-bold text-blue-600"}, d.total_os),
                                            React.createElement("td", {className: "px-2 py-1 text-center text-sky-600"}, d.total_entregas),
                                            React.createElement("td", {className: "px-2 py-1 text-center text-green-600"}, d.dentro_prazo),
                                            React.createElement("td", {className: "px-2 py-1 text-center text-red-600"}, d.fora_prazo),
                                            React.createElement("td", {className: "px-2 py-1 text-center"},
                                                React.createElement("span", {className: "px-1 py-0 rounded text-xs font-bold " + (parseFloat(d.taxa_prazo)>=80?"bg-green-100 text-green-700":parseFloat(d.taxa_prazo)>=60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700")}, d.taxa_prazo + "%")
                                            ),
                                            React.createElement("td", {className: "px-2 py-1 text-center text-rose-600"}, String(h).padStart(2,"0")+":"+String(m).padStart(2,"0")),
                                            React.createElement("td", {className: "px-2 py-1 text-right text-purple-600"}, "R$", parseFloat(d.valor_total||0).toLocaleString("pt-BR", {minimumFractionDigits: 0}))
                                        );
                                    })
                                )
                            )
                        )
                    )
                ),
                
                !cliente767Loading && !cliente767Dados && React.createElement("div", {className: "bg-orange-50 border-2 border-orange-200 rounded-xl p-8 text-center"},
                    React.createElement("div", {className: "text-5xl mb-4"}, "üè¢"),
                    React.createElement("p", {className: "text-orange-800 font-semibold mb-4"}, "Clique para carregar dados do Cliente 767"),
                    React.createElement("button", {onClick: carregarCliente767, className: "px-6 py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700"}, "üîÑ Carregar Dados")
                )
            ),
            
            "profissionais" === Et && React.createElement("div", {
                className: "bg-white rounded-lg shadow overflow-hidden"
            }, React.createElement("div", {
                className: "bg-purple-100 px-4 py-3 flex justify-between items-center"
            }, React.createElement("h3", {
                className: "font-bold text-purple-900"
            }, "An√°lise por Profissional"), React.createElement("span", {
                className: "text-sm text-purple-700"
            }, Vt.filter(e => parseInt(e.total_entregas) > 0).length, " profissional(is)")), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-purple-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-3 py-2 text-left text-purple-900 w-10"
            }), React.createElement("th", {
                className: "px-3 py-2 text-left text-purple-900"
            }, "Profissional"), React.createElement("th", {
                className: "px-3 py-2 text-right text-purple-900"
            }, "Entregas"), React.createElement("th", {
                className: "px-3 py-2 text-right text-purple-900"
            }, "T.Aloca√ß√£o"), React.createElement("th", {
                className: "px-3 py-2 text-right text-purple-900"
            }, "T.Coleta"), React.createElement("th", {
                className: "px-3 py-2 text-right text-purple-900"
            }, "T.Entrega"), React.createElement("th", {
                className: "px-3 py-2 text-center text-purple-900 bg-green-50"
            }, "‚úÖ No Prazo"), React.createElement("th", {
                className: "px-3 py-2 text-center text-purple-900 bg-red-50"
            }, "‚ùå Fora Prazo"), React.createElement("th", {
                className: "px-3 py-2 text-center text-purple-900 bg-violet-50"
            }, "‚úÖ No Prazo Prof"), React.createElement("th", {
                className: "px-3 py-2 text-center text-purple-900 bg-orange-50"
            }, "‚ùå Fora Prazo Prof"), React.createElement("th", {
                className: "px-3 py-2 text-right text-purple-900"
            }, "Dist√¢ncia"), React.createElement("th", {
                className: "px-3 py-2 text-right text-purple-900"
            }, "Retorno"), React.createElement("th", {
                className: "px-3 py-2 text-right text-purple-900"
            }, "Valor"))), React.createElement("tbody", null, 
                // Pagina√ß√£o: 20 por p√°gina - filtrar apenas profissionais com dados
                Vt.filter(e => parseInt(e.total_entregas) > 0).slice((profPaginaAtual - 1) * 20, profPaginaAtual * 20).map((e, t) => {
                    var indexReal = (profPaginaAtual - 1) * 20 + t;
                    var expandido = Kt["prof-" + indexReal];
                    var osDoProf = profOsExpandido[e.cod_prof] || [];
                    var carregandoOS = profOsLoading === e.cod_prof;
                    var pctDentro = (nl(e.dentro_prazo) / (nl(e.total_entregas) || 1) * 100);
                    var pctFora = (nl(e.fora_prazo) / (nl(e.total_entregas) || 1) * 100);
                    var pctDentroProf = (nl(e.dentro_prazo_prof) / (nl(e.total_entregas) || 1) * 100);
                    var pctForaProf = (nl(e.fora_prazo_prof) / (nl(e.total_entregas) || 1) * 100);
                    return React.createElement(React.Fragment, {key: indexReal},
                        React.createElement("tr", {
                            className: "border-b hover:bg-purple-50 " + (t % 2 == 0 ? "bg-white" : "bg-gray-50")
                        }, 
                            React.createElement("td", {className: "px-3 py-2"}, 
                                React.createElement("button", {
                                    onClick: function() { toggleProfissionalExpand(e.cod_prof, indexReal); },
                                    className: "text-purple-600 hover:text-purple-800 font-bold"
                                }, expandido ? "‚ûñ" : "‚ûï")
                            ), 
                            React.createElement("td", {className: "px-3 py-2 font-medium"}, e.cod_prof, " - ", e.nome_prof), 
                            React.createElement("td", {className: "px-3 py-2 text-right font-bold text-blue-600"}, nl(e.total_entregas).toLocaleString("pt-BR")), 
                            React.createElement("td", {className: "px-3 py-2 text-right text-pink-600"}, cl(e.tempo_alocado)), 
                            React.createElement("td", {className: "px-3 py-2 text-right text-fuchsia-600"}, cl(e.tempo_coleta)), 
                            React.createElement("td", {className: "px-3 py-2 text-right text-rose-600"}, cl(e.tempo_medio)), 
                            React.createElement("td", {className: "px-3 py-2 text-center bg-green-50"}, 
                                React.createElement("div", {className: "text-green-700 font-bold"}, nl(e.dentro_prazo).toLocaleString("pt-BR")),
                                React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (pctDentro >= 80 ? "bg-green-100 text-green-700" : pctDentro >= 60 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, pctDentro.toFixed(1), "%")
                            ), 
                            React.createElement("td", {className: "px-3 py-2 text-center bg-red-50"}, 
                                React.createElement("div", {className: "text-red-700 font-bold"}, nl(e.fora_prazo).toLocaleString("pt-BR")),
                                React.createElement("span", {className: "text-xs text-red-500"}, pctFora.toFixed(1), "%")
                            ), 
                            React.createElement("td", {className: "px-3 py-2 text-center bg-violet-50"}, 
                                React.createElement("div", {className: "text-emerald-700 font-bold"}, nl(e.dentro_prazo_prof || 0).toLocaleString("pt-BR")),
                                React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (pctDentroProf >= 80 ? "bg-violet-100 text-violet-700" : pctDentroProf >= 60 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, pctDentroProf.toFixed(1), "%")
                            ), 
                            React.createElement("td", {className: "px-3 py-2 text-center bg-orange-50"}, 
                                React.createElement("div", {className: "text-orange-700 font-bold"}, nl(e.fora_prazo_prof || 0).toLocaleString("pt-BR")),
                                React.createElement("span", {className: "text-xs text-orange-500"}, pctForaProf.toFixed(1), "%")
                            ), 
                            React.createElement("td", {className: "px-3 py-2 text-right text-gray-600"}, parseFloat(e.distancia_total || 0).toLocaleString("pt-BR", {maximumFractionDigits: 1}), " km"), 
                            React.createElement("td", {className: "px-3 py-2 text-right text-orange-600"}, e.retornos || 0), 
                            React.createElement("td", {className: "px-3 py-2 text-right text-purple-600 font-medium"}, sl(e.valor_prof))
                        ),
                        // Linha expandida com tabela de OS
                        expandido && React.createElement("tr", {className: "bg-blue-50"},
                            React.createElement("td", {colSpan: "13", className: "px-4 py-3"},
                                carregandoOS ? 
                                    React.createElement("div", {className: "text-center py-4"},
                                        React.createElement("span", {className: "animate-spin inline-block mr-2"}, "‚è≥"),
                                        "Carregando OS..."
                                    ) :
                                osDoProf.length > 0 ?
                                    React.createElement("div", null,
                                        React.createElement("h4", {className: "font-bold text-blue-800 mb-2"}, "üìã OS Realizadas (", osDoProf.length, ")"),
                                        React.createElement("div", {className: "overflow-x-auto max-h-64 overflow-y-auto"},
                                            React.createElement("table", {className: "w-full text-xs"},
                                                React.createElement("thead", {className: "bg-blue-100 sticky top-0"},
                                                    React.createElement("tr", null,
                                                        React.createElement("th", {className: "px-2 py-1 text-left"}, "OS"),
                                                        React.createElement("th", {className: "px-2 py-1 text-left"}, "Cliente"),
                                                        React.createElement("th", {className: "px-2 py-1 text-left"}, "Centro Custo"),
                                                        React.createElement("th", {className: "px-2 py-1 text-center"}, "Data"),
                                                        React.createElement("th", {className: "px-2 py-1 text-center"}, "T.Aloca√ß√£o"),
                                                        React.createElement("th", {className: "px-2 py-1 text-center"}, "T.Coleta"),
                                                        React.createElement("th", {className: "px-2 py-1 text-center"}, "T.Entrega"),
                                                        React.createElement("th", {className: "px-2 py-1 text-center"}, "Dist."),
                                                        React.createElement("th", {className: "px-2 py-1 text-center"}, "Status"),
                                                        React.createElement("th", {className: "px-2 py-1 text-right"}, "Valor")
                                                    )
                                                ),
                                                React.createElement("tbody", null,
                                                    osDoProf.map(function(os, idx) {
                                                        return React.createElement("tr", {key: os.os + "-" + idx, className: idx % 2 === 0 ? "bg-white" : "bg-blue-50/50"},
                                                            React.createElement("td", {className: "px-2 py-1 font-mono font-bold text-blue-700"}, os.os),
                                                            React.createElement("td", {className: "px-2 py-1"}, os.cod_cliente, " - ", (os.cliente || "").substring(0, 20)),
                                                            React.createElement("td", {className: "px-2 py-1 text-gray-600"}, (os.centro_custo || "-").substring(0, 15)),
                                                            React.createElement("td", {className: "px-2 py-1 text-center"}, os.data_solicitado ? new Date(os.data_solicitado).toLocaleDateString("pt-BR") : "-"),
                                                            React.createElement("td", {className: "px-2 py-1 text-center text-pink-600"}, os.tempo_alocacao ? (Math.floor(os.tempo_alocacao / 60) + ":" + String(Math.round(os.tempo_alocacao) % 60).padStart(2, "0")) : "-"),
                                                            React.createElement("td", {className: "px-2 py-1 text-center text-fuchsia-600"}, os.tempo_coleta ? (Math.floor(os.tempo_coleta / 60) + ":" + String(Math.round(os.tempo_coleta) % 60).padStart(2, "0")) : "-"),
                                                            React.createElement("td", {className: "px-2 py-1 text-center text-rose-600"}, os.tempo_entrega ? (Math.floor(os.tempo_entrega / 60) + ":" + String(Math.round(os.tempo_entrega) % 60).padStart(2, "0")) : "-"),
                                                            React.createElement("td", {className: "px-2 py-1 text-center"}, (os.distancia || 0).toFixed(1), "km"),
                                                            React.createElement("td", {className: "px-2 py-1 text-center"},
                                                                React.createElement("span", {className: "px-1 py-0.5 rounded text-xs font-bold " + (os.dentro_prazo === true ? "bg-green-100 text-green-700" : os.dentro_prazo === false ? "bg-red-100 text-red-700" : "bg-gray-100 text-gray-600")}, os.dentro_prazo === true ? "‚úì" : os.dentro_prazo === false ? "‚úó" : "?")
                                                            ),
                                                            React.createElement("td", {className: "px-2 py-1 text-right text-purple-600"}, "R$", (os.valor_prof || 0).toFixed(2))
                                                        );
                                                    })
                                                )
                                            )
                                        )
                                    ) :
                                    React.createElement("div", {className: "text-center py-4 text-gray-500"}, "Nenhuma OS encontrada para este per√≠odo")
                            )
                        )
                    );
                })
            ), React.createElement("tfoot", {
                className: "bg-purple-200 font-bold"
            }, React.createElement("tr", null, 
                React.createElement("td", {className: "px-3 py-2"}), 
                React.createElement("td", {className: "px-3 py-2"}, "Total (", Vt.filter(e => parseInt(e.total_entregas) > 0).length, " prof.)"), 
                React.createElement("td", {className: "px-3 py-2 text-right"}, Vt.reduce((e, t) => e + nl(t.total_entregas), 0).toLocaleString("pt-BR")), 
                // M√©dia T.Aloca√ß√£o - usar m√©tricas globais (ft) que s√£o calculadas corretamente pelo SQL
                React.createElement("td", {className: "px-3 py-2 text-right text-pink-700"}, cl(ft?.tempo_medio_alocacao)), 
                // M√©dia T.Coleta - usar m√©tricas globais (ft)
                React.createElement("td", {className: "px-3 py-2 text-right text-fuchsia-700"}, cl(ft?.tempo_medio_coleta)), 
                // M√©dia T.Entrega - usar m√©tricas globais (ft)
                React.createElement("td", {className: "px-3 py-2 text-right text-rose-700"}, cl(ft?.tempo_medio)), 
                // No Prazo - qtd + %
                React.createElement("td", {className: "px-3 py-2 text-center bg-green-100"}, (function() {
                    var totalDentro = Vt.reduce((e, t) => e + nl(t.dentro_prazo), 0);
                    var totalFora = Vt.reduce((e, t) => e + nl(t.fora_prazo), 0);
                    var total = totalDentro + totalFora;
                    var pct = total > 0 ? (totalDentro / total * 100).toFixed(1) : "0.0";
                    return React.createElement("div", null,
                        React.createElement("div", {className: "text-green-800"}, totalDentro.toLocaleString("pt-BR")),
                        React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (pct >= 80 ? "bg-green-200 text-green-800" : pct >= 60 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, pct + "%")
                    );
                })()), 
                // Fora Prazo - qtd + %
                React.createElement("td", {className: "px-3 py-2 text-center bg-red-100"}, (function() {
                    var totalDentro = Vt.reduce((e, t) => e + nl(t.dentro_prazo), 0);
                    var totalFora = Vt.reduce((e, t) => e + nl(t.fora_prazo), 0);
                    var total = totalDentro + totalFora;
                    var pct = total > 0 ? (totalFora / total * 100).toFixed(1) : "0.0";
                    return React.createElement("div", null,
                        React.createElement("div", {className: "text-red-800"}, totalFora.toLocaleString("pt-BR")),
                        React.createElement("span", {className: "text-xs text-red-600"}, pct + "%")
                    );
                })()), 
                // No Prazo Prof - qtd + %
                React.createElement("td", {className: "px-3 py-2 text-center bg-emerald-100"}, (function() {
                    var totalDentroProf = Vt.reduce((e, t) => e + nl(t.dentro_prazo_prof || 0), 0);
                    var totalForaProf = Vt.reduce((e, t) => e + nl(t.fora_prazo_prof || 0), 0);
                    var total = totalDentroProf + totalForaProf;
                    var pct = total > 0 ? (totalDentroProf / total * 100).toFixed(1) : "0.0";
                    return React.createElement("div", null,
                        React.createElement("div", {className: "text-violet-800"}, totalDentroProf.toLocaleString("pt-BR")),
                        React.createElement("span", {className: "px-2 py-0.5 rounded text-xs font-bold " + (pct >= 80 ? "bg-violet-200 text-violet-800" : pct >= 60 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")}, pct + "%")
                    );
                })()), 
                // Fora Prazo Prof - qtd + %
                React.createElement("td", {className: "px-3 py-2 text-center bg-orange-100"}, (function() {
                    var totalDentroProf = Vt.reduce((e, t) => e + nl(t.dentro_prazo_prof || 0), 0);
                    var totalForaProf = Vt.reduce((e, t) => e + nl(t.fora_prazo_prof || 0), 0);
                    var total = totalDentroProf + totalForaProf;
                    var pct = total > 0 ? (totalForaProf / total * 100).toFixed(1) : "0.0";
                    return React.createElement("div", null,
                        React.createElement("div", {className: "text-orange-800"}, totalForaProf.toLocaleString("pt-BR")),
                        React.createElement("span", {className: "text-xs text-orange-600"}, pct + "%")
                    );
                })()), 
                React.createElement("td", {className: "px-3 py-2 text-right"}, Vt.reduce((e, t) => e + parseFloat(t.distancia_total || 0), 0).toLocaleString("pt-BR", {maximumFractionDigits: 1}), " km"), 
                React.createElement("td", {className: "px-3 py-2 text-right"}, Vt.reduce((e, t) => e + nl(t.retornos || 0), 0)), 
                React.createElement("td", {className: "px-3 py-2 text-right"}, sl(Vt.reduce((e, t) => e + nl(t.valor_prof), 0)))
            )))),
            // Pagina√ß√£o
            Vt.length > 20 && React.createElement("div", {className: "bg-purple-50 px-4 py-3 flex justify-center items-center gap-2"},
                React.createElement("button", {
                    onClick: function() { setProfPaginaAtual(1); },
                    disabled: profPaginaAtual === 1,
                    className: "px-3 py-1 rounded " + (profPaginaAtual === 1 ? "bg-gray-200 text-gray-400" : "bg-purple-600 text-white hover:bg-purple-700")
                }, "¬´"),
                React.createElement("button", {
                    onClick: function() { setProfPaginaAtual(Math.max(1, profPaginaAtual - 1)); },
                    disabled: profPaginaAtual === 1,
                    className: "px-3 py-1 rounded " + (profPaginaAtual === 1 ? "bg-gray-200 text-gray-400" : "bg-purple-600 text-white hover:bg-purple-700")
                }, "‚Äπ"),
                Array.from({length: Math.ceil(Vt.length / 20)}, function(_, i) { return i + 1; })
                    .filter(function(p) { return p === 1 || p === Math.ceil(Vt.length / 20) || Math.abs(p - profPaginaAtual) <= 2; })
                    .map(function(p, idx, arr) {
                        var showEllipsis = idx > 0 && p - arr[idx - 1] > 1;
                        return React.createElement(React.Fragment, {key: p},
                            showEllipsis && React.createElement("span", {className: "px-2 text-gray-500"}, "..."),
                            React.createElement("button", {
                                onClick: function() { setProfPaginaAtual(p); },
                                className: "px-3 py-1 rounded " + (profPaginaAtual === p ? "bg-purple-800 text-white font-bold" : "bg-purple-100 text-purple-700 hover:bg-purple-200")
                            }, p)
                        );
                    }),
                React.createElement("button", {
                    onClick: function() { setProfPaginaAtual(Math.min(Math.ceil(Vt.length / 20), profPaginaAtual + 1)); },
                    disabled: profPaginaAtual === Math.ceil(Vt.length / 20),
                    className: "px-3 py-1 rounded " + (profPaginaAtual === Math.ceil(Vt.length / 20) ? "bg-gray-200 text-gray-400" : "bg-purple-600 text-white hover:bg-purple-700")
                }, "‚Ä∫"),
                React.createElement("button", {
                    onClick: function() { setProfPaginaAtual(Math.ceil(Vt.length / 20)); },
                    disabled: profPaginaAtual === Math.ceil(Vt.length / 20),
                    className: "px-3 py-1 rounded " + (profPaginaAtual === Math.ceil(Vt.length / 20) ? "bg-gray-200 text-gray-400" : "bg-purple-600 text-white hover:bg-purple-700")
                }, "¬ª"),
                React.createElement("span", {className: "ml-4 text-sm text-purple-700"}, "P√°gina ", profPaginaAtual, " de ", Math.ceil(Vt.length / 20))
            )), 
            
            // ==================== ABA GARANTIDO ====================
            "garantido" === Et && React.createElement("div", {className: "space-y-4"},
                // Header
                React.createElement("div", {className: "bg-gradient-to-r from-green-600 to-emerald-800 rounded-xl p-6 text-white"},
                    React.createElement("div", {className: "flex justify-between items-center"},
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-2xl font-bold mb-2"}, "üí∞ An√°lise M√≠nimo Garantido"),
                            React.createElement("p", {className: "opacity-80"}, "Comparativo entre valor negociado e produ√ß√£o real dos profissionais")
                        ),
                        React.createElement("button", {
                            onClick: carregarGarantido,
                            disabled: garantidoLoading,
                            className: "px-4 py-2 bg-white/20 rounded-lg hover:bg-white/30 disabled:opacity-50"
                        }, garantidoLoading ? "üîÑ Carregando..." : "üîÑ Atualizar")
                    )
                ),
                
                // Filtros
                React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-4"},
                    React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-5 gap-4"},
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-xs font-semibold text-gray-600 mb-1"}, "Data In√≠cio"),
                            React.createElement("input", {
                                type: "date",
                                value: garantidoFiltros.data_inicio,
                                onChange: (e) => setGarantidoFiltros(f => ({...f, data_inicio: e.target.value})),
                                className: "w-full px-3 py-2 border rounded-lg text-sm"
                            })
                        ),
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-xs font-semibold text-gray-600 mb-1"}, "Data Fim"),
                            React.createElement("input", {
                                type: "date",
                                value: garantidoFiltros.data_fim,
                                onChange: (e) => setGarantidoFiltros(f => ({...f, data_fim: e.target.value})),
                                className: "w-full px-3 py-2 border rounded-lg text-sm"
                            })
                        ),
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-xs font-semibold text-gray-600 mb-1"}, "C√≥d. Cliente"),
                            React.createElement("input", {
                                type: "text",
                                placeholder: "Ex: 767",
                                value: garantidoFiltros.cod_cliente,
                                onChange: (e) => setGarantidoFiltros(f => ({...f, cod_cliente: e.target.value})),
                                className: "w-full px-3 py-2 border rounded-lg text-sm"
                            })
                        ),
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-xs font-semibold text-gray-600 mb-1"}, "C√≥d. Profissional"),
                            React.createElement("input", {
                                type: "text",
                                placeholder: "Ex: 12345",
                                value: garantidoFiltros.cod_prof,
                                onChange: (e) => setGarantidoFiltros(f => ({...f, cod_prof: e.target.value})),
                                className: "w-full px-3 py-2 border rounded-lg text-sm"
                            })
                        ),
                        React.createElement("div", {className: "flex items-end"},
                            React.createElement("button", {
                                onClick: carregarGarantido,
                                className: "w-full px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700"
                            }, "üîç Filtrar")
                        )
                    ),
                    // Filtros de status
                    React.createElement("div", {className: "flex flex-wrap gap-2 mt-4"},
                        React.createElement("button", {
                            onClick: () => { setGarantidoFiltros(f => ({...f, filtro_status: 'todos'})); setTimeout(carregarGarantido, 100); },
                            className: "px-4 py-2 rounded-lg text-sm font-semibold " + 
                                (garantidoFiltros.filtro_status === 'todos' ? 'bg-gray-800 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200')
                        }, "üìã Todos"),
                        React.createElement("button", {
                            onClick: () => { setGarantidoFiltros(f => ({...f, filtro_status: 'abaixo'})); setTimeout(carregarGarantido, 100); },
                            className: "px-4 py-2 rounded-lg text-sm font-semibold " + 
                                (garantidoFiltros.filtro_status === 'abaixo' ? 'bg-red-600 text-white' : 'bg-red-100 text-red-600 hover:bg-red-200')
                        }, "üî¥ Abaixo Garantido"),
                        React.createElement("button", {
                            onClick: () => { setGarantidoFiltros(f => ({...f, filtro_status: 'acima'})); setTimeout(carregarGarantido, 100); },
                            className: "px-4 py-2 rounded-lg text-sm font-semibold " + 
                                (garantidoFiltros.filtro_status === 'acima' ? 'bg-green-600 text-white' : 'bg-green-100 text-green-600 hover:bg-green-200')
                        }, "üü¢ Acima Garantido"),
                        React.createElement("button", {
                            onClick: () => { setGarantidoFiltros(f => ({...f, filtro_status: 'nao_rodou'})); setTimeout(carregarGarantido, 100); },
                            className: "px-4 py-2 rounded-lg text-sm font-semibold " + 
                                (garantidoFiltros.filtro_status === 'nao_rodou' ? 'bg-gray-600 text-white' : 'bg-gray-200 text-gray-600 hover:bg-gray-300')
                        }, "‚ö´ N√£o Rodou"),
                        React.createElement("button", {
                            onClick: () => { setGarantidoFiltros(f => ({...f, filtro_status: 'rodou'})); setTimeout(carregarGarantido, 100); },
                            className: "px-4 py-2 rounded-lg text-sm font-semibold " + 
                                (garantidoFiltros.filtro_status === 'rodou' ? 'bg-blue-600 text-white' : 'bg-blue-100 text-blue-600 hover:bg-blue-200')
                        }, "üîµ Rodou")
                    )
                ),
                
                // Cards de totais
                garantidoStats && React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-4"},
                    React.createElement("div", {className: "bg-white rounded-xl shadow p-4 text-center"},
                        React.createElement("p", {className: "text-2xl font-bold text-blue-600"}, "R$", (garantidoStats.total_negociado || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})),
                        React.createElement("p", {className: "text-xs text-gray-500"}, "Valor Total Negociado")
                    ),
                    React.createElement("div", {className: "bg-white rounded-xl shadow p-4 text-center"},
                        React.createElement("p", {className: "text-2xl font-bold text-purple-600"}, "R$", (garantidoStats.total_produzido || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})),
                        React.createElement("p", {className: "text-xs text-gray-500"}, "Valor Total Produ√ß√£o")
                    ),
                    React.createElement("div", {className: "bg-white rounded-xl shadow p-4 text-center"},
                        React.createElement("p", {className: "text-2xl font-bold text-red-600"}, "R$", (garantidoStats.total_complemento || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})),
                        React.createElement("p", {className: "text-xs text-gray-500"}, "Valor Total Complemento")
                    ),
                    React.createElement("div", {className: "bg-white rounded-xl shadow p-4 text-center"},
                        React.createElement("p", {className: "text-2xl font-bold text-gray-600"}, "R$", (garantidoStats.valor_nao_rodou || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})),
                        React.createElement("p", {className: "text-xs text-gray-500"}, "Valor Prof. N√£o Rodou")
                    )
                ),
                
                // Sub-abas
                React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                    React.createElement("div", {className: "flex border-b"},
                        React.createElement("button", {
                            onClick: () => setGarantidoSubTab('analise'),
                            className: "flex-1 px-4 py-3 text-sm font-semibold " + 
                                (garantidoSubTab === 'analise' ? 'bg-green-50 text-green-700 border-b-2 border-green-600' : 'text-gray-600 hover:bg-gray-50')
                        }, "üìã An√°lise M√≠nimo Garantido"),
                        React.createElement("button", {
                            onClick: () => setGarantidoSubTab('semanal'),
                            className: "flex-1 px-4 py-3 text-sm font-semibold " + 
                                (garantidoSubTab === 'semanal' ? 'bg-green-50 text-green-700 border-b-2 border-green-600' : 'text-gray-600 hover:bg-gray-50')
                        }, "üìÖ An√°lise Semanal"),
                        React.createElement("button", {
                            onClick: () => setGarantidoSubTab('cliente'),
                            className: "flex-1 px-4 py-3 text-sm font-semibold " + 
                                (garantidoSubTab === 'cliente' ? 'bg-green-50 text-green-700 border-b-2 border-green-600' : 'text-gray-600 hover:bg-gray-50')
                        }, "üè¢ Por Cliente")
                    )
                ),
                
                // Loading
                garantidoLoading && React.createElement("div", {className: "bg-white rounded-xl shadow p-12 text-center"},
                    React.createElement("div", {className: "inline-block w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mb-4"}),
                    React.createElement("p", {className: "text-gray-500"}, "Carregando dados do garantido...")
                ),
                
                // Conte√∫do Sub-aba: An√°lise Principal
                !garantidoLoading && garantidoSubTab === 'analise' && React.createElement("div", {className: "bg-white rounded-xl shadow-lg overflow-hidden"},
                    React.createElement("div", {className: "overflow-x-auto"},
                        React.createElement("table", {className: "w-full"},
                            React.createElement("thead", {className: "bg-gradient-to-r from-purple-100 to-purple-200"},
                                React.createElement("tr", null,
                                    React.createElement("th", {className: "px-3 py-3 text-left text-xs font-bold text-purple-800"}, "Data"),
                                    React.createElement("th", {className: "px-3 py-3 text-left text-xs font-bold text-purple-800"}, "C√≥d. Prof."),
                                    React.createElement("th", {className: "px-3 py-3 text-left text-xs font-bold text-purple-800"}, "Profissional"),
                                    React.createElement("th", {className: "px-3 py-3 text-left text-xs font-bold text-purple-800"}, "Onde Rodou?"),
                                    React.createElement("th", {className: "px-3 py-3 text-center text-xs font-bold text-purple-800"}, "Entregas"),
                                    React.createElement("th", {className: "px-3 py-3 text-center text-xs font-bold text-purple-800"}, "Dist√¢ncia"),
                                    React.createElement("th", {className: "px-3 py-3 text-right text-xs font-bold text-purple-800"}, "Negociado"),
                                    React.createElement("th", {className: "px-3 py-3 text-right text-xs font-bold text-purple-800"}, "Produ√ß√£o"),
                                    React.createElement("th", {className: "px-3 py-3 text-right text-xs font-bold text-purple-800"}, "Complemento"),
                                    React.createElement("th", {className: "px-3 py-3 text-center text-xs font-bold text-purple-800"}, "Status Pagamento")
                                )
                            ),
                            React.createElement("tbody", null,
                                garantidoData.length === 0 && React.createElement("tr", null,
                                    React.createElement("td", {colSpan: 10, className: "px-4 py-12 text-center text-gray-500"},
                                        "Nenhum dado encontrado. Ajuste os filtros ou verifique a planilha de garantido."
                                    )
                                ),
                                garantidoData.map((row, idx) => {
                                    const statusKey = `${row.cod_prof}_${row.data}_${row.cod_cliente_garantido}`;
                                    const statusInfo = garantidoStatusMap[statusKey];
                                    const statusAtual = statusInfo?.status || 'analise';
                                    
                                    return React.createElement("tr", {
                                        key: idx,
                                        className: (row.status === 'nao_rodou' ? 'bg-gray-100' : 
                                                   row.status === 'abaixo' ? 'bg-red-50' : 'bg-green-50') + 
                                                  " border-b hover:bg-opacity-80"
                                    },
                                        React.createElement("td", {className: "px-3 py-2 text-sm"}, 
                                            new Date(row.data + 'T12:00:00').toLocaleDateString('pt-BR')
                                        ),
                                        React.createElement("td", {className: "px-3 py-2 text-sm font-mono"}, row.cod_prof),
                                        React.createElement("td", {className: "px-3 py-2 text-sm font-semibold"}, row.profissional),
                                        React.createElement("td", {className: "px-3 py-2 text-sm"}, row.onde_rodou),
                                        React.createElement("td", {className: "px-3 py-2 text-sm text-center"}, row.entregas),
                                        React.createElement("td", {className: "px-3 py-2 text-sm text-center"}, 
                                            row.distancia ? row.distancia.toFixed(2) + ' KM' : '-'
                                        ),
                                        React.createElement("td", {className: "px-3 py-2 text-sm text-right font-semibold"}, 
                                            "R$", row.valor_negociado?.toFixed(2)
                                        ),
                                        React.createElement("td", {className: "px-3 py-2 text-sm text-right font-semibold"}, 
                                            "R$", row.valor_produzido?.toFixed(2)
                                        ),
                                        React.createElement("td", {className: "px-3 py-2 text-right"},
                                            React.createElement("span", {
                                                className: "inline-flex items-center gap-1 px-2 py-1 rounded text-sm font-bold " +
                                                    (row.complemento > 0 ? 'bg-red-200 text-red-800' : 'bg-green-200 text-green-800')
                                            },
                                                row.complemento > 0 ? 'üî¥' : 'üü¢',
                                                " R$", row.complemento?.toFixed(2)
                                            )
                                        ),
                                        // Coluna de Status com dropdown
                                        React.createElement("td", {className: "px-3 py-2 text-center"},
                                            React.createElement("div", {className: "flex flex-col items-center gap-1"},
                                                React.createElement("select", {
                                                    value: statusAtual,
                                                    onChange: (e) => {
                                                        const novoStatus = e.target.value;
                                                        if (novoStatus === 'reprovado') {
                                                            setGarantidoModalStatus(row);
                                                            setGarantidoMotivoReprovado('');
                                                        } else {
                                                            salvarStatusGarantido(row, novoStatus);
                                                        }
                                                    },
                                                    className: "px-2 py-1 text-xs font-semibold rounded border " +
                                                        (statusAtual === 'lancado' ? 'bg-green-100 text-green-800 border-green-300' :
                                                         statusAtual === 'reprovado' ? 'bg-red-100 text-red-800 border-red-300' :
                                                         'bg-yellow-100 text-yellow-800 border-yellow-300')
                                                },
                                                    React.createElement("option", {value: "analise"}, "üîç An√°lise"),
                                                    React.createElement("option", {value: "lancado"}, "‚úÖ Lan√ßado"),
                                                    React.createElement("option", {value: "reprovado"}, "‚ùå Reprovado")
                                                ),
                                                // Mostrar info de quem alterou
                                                statusInfo?.alterado_por && React.createElement("div", {className: "text-xs text-gray-500"},
                                                    statusInfo.alterado_por
                                                ),
                                                statusInfo?.alterado_em && React.createElement("div", {className: "text-xs text-gray-400"},
                                                    new Date(statusInfo.alterado_em).toLocaleString('pt-BR', {
                                                        day: '2-digit', month: '2-digit', year: '2-digit',
                                                        hour: '2-digit', minute: '2-digit'
                                                    })
                                                ),
                                                // Mostrar motivo se reprovado
                                                statusAtual === 'reprovado' && statusInfo?.motivo_reprovado && 
                                                    React.createElement("div", {
                                                        className: "text-xs text-red-600 italic max-w-32 truncate",
                                                        title: statusInfo.motivo_reprovado
                                                    }, "üìù ", statusInfo.motivo_reprovado)
                                            )
                                        )
                                    );
                                }),
                                // Linha de totais
                                garantidoData.length > 0 && React.createElement("tr", {className: "bg-purple-200 font-bold"},
                                    React.createElement("td", {colSpan: 4, className: "px-3 py-3 text-right text-purple-800"}, "Total"),
                                    React.createElement("td", {className: "px-3 py-3 text-center text-purple-800"}, 
                                        garantidoStats?.total_entregas || garantidoData.reduce((s, r) => s + r.entregas, 0)
                                    ),
                                    React.createElement("td", {className: "px-3 py-3 text-center text-purple-800"}, 
                                        (garantidoStats?.total_distancia || garantidoData.reduce((s, r) => s + (r.distancia || 0), 0)).toFixed(2), " KM"
                                    ),
                                    React.createElement("td", {className: "px-3 py-3 text-right text-purple-800"}, 
                                        "R$", (garantidoStats?.total_negociado || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                    ),
                                    React.createElement("td", {className: "px-3 py-3 text-right text-purple-800"}, 
                                        "R$", (garantidoStats?.total_produzido || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                    ),
                                    React.createElement("td", {className: "px-3 py-3 text-right text-red-800"}, 
                                        "R$", (garantidoStats?.total_complemento || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                    ),
                                    React.createElement("td", {className: "px-3 py-3"})
                                )
                            )
                        )
                    ),
                    // Modal para informar motivo de reprova√ß√£o
                    garantidoModalStatus && React.createElement("div", {
                        className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50"
                    },
                        React.createElement("div", {className: "bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4"},
                            React.createElement("h3", {className: "text-lg font-bold text-red-700 mb-4"}, 
                                "‚ùå Reprovar Complemento"
                            ),
                            React.createElement("p", {className: "text-sm text-gray-600 mb-2"},
                                "Profissional: ", React.createElement("strong", null, garantidoModalStatus.profissional)
                            ),
                            React.createElement("p", {className: "text-sm text-gray-600 mb-4"},
                                "Data: ", React.createElement("strong", null, new Date(garantidoModalStatus.data + 'T12:00:00').toLocaleDateString('pt-BR'))
                            ),
                            React.createElement("label", {className: "block text-sm font-semibold text-gray-700 mb-2"}, 
                                "Motivo da Reprova√ß√£o *"
                            ),
                            React.createElement("textarea", {
                                value: garantidoMotivoReprovado,
                                onChange: (e) => setGarantidoMotivoReprovado(e.target.value),
                                placeholder: "Informe o motivo da reprova√ß√£o...",
                                className: "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",
                                rows: 3
                            }),
                            React.createElement("div", {className: "flex gap-3 mt-4"},
                                React.createElement("button", {
                                    onClick: () => {
                                        setGarantidoModalStatus(null);
                                        setGarantidoMotivoReprovado('');
                                    },
                                    className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                                }, "Cancelar"),
                                React.createElement("button", {
                                    onClick: () => salvarStatusGarantido(garantidoModalStatus, 'reprovado', garantidoMotivoReprovado),
                                    disabled: !garantidoMotivoReprovado.trim(),
                                    className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"
                                }, "Confirmar Reprova√ß√£o")
                            )
                        )
                    )
                ),
                
                // Conte√∫do Sub-aba: An√°lise Semanal
                !garantidoLoading && garantidoSubTab === 'semanal' && React.createElement("div", {className: "bg-white rounded-xl shadow-lg overflow-hidden"},
                    React.createElement("div", {className: "overflow-x-auto"},
                        React.createElement("table", {className: "w-full"},
                            React.createElement("thead", {className: "bg-gradient-to-r from-blue-100 to-blue-200"},
                                React.createElement("tr", null,
                                    React.createElement("th", {rowSpan: 2, className: "px-4 py-3 text-left text-xs font-bold text-blue-800 border-r"}, "Onde Rodou?"),
                                    // Colunas din√¢micas por semana
                                    garantidoSemanal.length > 0 && garantidoSemanal[0]?.semanas?.map((sem, i) => 
                                        React.createElement("th", {key: i, colSpan: 3, className: "px-2 py-2 text-center text-xs font-bold text-blue-800 border-l bg-blue-200"},
                                            sem.semana
                                        )
                                    )
                                ),
                                React.createElement("tr", {className: "bg-blue-50"},
                                    // Sub-headers para cada semana
                                    garantidoSemanal.length > 0 && garantidoSemanal[0]?.semanas?.map((_, i) =>
                                        React.createElement(React.Fragment, {key: i},
                                            React.createElement("th", {className: "px-2 py-2 text-xs text-blue-600 border-l text-right"}, "Negociado"),
                                            React.createElement("th", {className: "px-2 py-2 text-xs text-blue-600 text-right"}, "Produzido"),
                                            React.createElement("th", {className: "px-2 py-2 text-xs text-blue-600 text-right"}, "Compl.")
                                        )
                                    )
                                )
                            ),
                            React.createElement("tbody", null,
                                garantidoSemanal.length === 0 && React.createElement("tr", null,
                                    React.createElement("td", {colSpan: 20, className: "px-4 py-12 text-center text-gray-500"},
                                        "Nenhum dado semanal encontrado. Selecione um per√≠odo de datas."
                                    )
                                ),
                                garantidoSemanal.map((local, idx) =>
                                    React.createElement("tr", {key: idx, className: "border-b hover:bg-gray-50"},
                                        React.createElement("td", {className: "px-4 py-2 text-sm font-semibold border-r whitespace-nowrap"}, local.onde_rodou),
                                        local.semanas?.map((sem, i) => {
                                            // Calcular varia√ß√£o em rela√ß√£o √† semana anterior
                                            const semanaAnterior = i > 0 ? local.semanas[i-1] : null;
                                            const complementoAnterior = semanaAnterior?.complemento || 0;
                                            const complementoAtual = sem.complemento || 0;
                                            
                                            // S√≥ mostra seta se houver negociado nas duas semanas
                                            let seta = '';
                                            let setaClass = '';
                                            if (i > 0 && semanaAnterior?.negociado > 0 && sem.negociado > 0) {
                                                if (complementoAtual > complementoAnterior) {
                                                    seta = '‚ñ≤'; // Subiu = ruim = vermelho
                                                    setaClass = 'text-red-500 text-lg animate-pulse';
                                                } else if (complementoAtual < complementoAnterior) {
                                                    seta = '‚ñº'; // Diminuiu = bom = verde
                                                    setaClass = 'text-green-500 text-lg';
                                                }
                                            }
                                            
                                            return React.createElement(React.Fragment, {key: i},
                                                React.createElement("td", {className: "px-2 py-2 text-sm text-right border-l"}, 
                                                    sem.negociado > 0 ? `R$${sem.negociado.toLocaleString('pt-BR', {minimumFractionDigits: 2})}` : ''
                                                ),
                                                React.createElement("td", {className: "px-2 py-2 text-sm text-right"}, 
                                                    sem.produzido > 0 ? `R$${sem.produzido.toLocaleString('pt-BR', {minimumFractionDigits: 2})}` : ''
                                                ),
                                                React.createElement("td", {className: "px-2 py-2 text-sm text-right font-semibold " + 
                                                    (sem.complemento > 0 ? 'text-red-600' : sem.negociado > 0 ? 'text-green-600' : '')
                                                }, 
                                                    sem.negociado > 0 ? React.createElement("div", {className: "flex items-center justify-end gap-1"},
                                                        React.createElement("span", null, `R$${sem.complemento.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`),
                                                        seta && React.createElement("span", {className: setaClass + " font-bold", title: seta === '‚ñ≤' ? 'Aumentou em rela√ß√£o √† semana anterior' : 'Diminuiu em rela√ß√£o √† semana anterior'}, seta)
                                                    ) : ''
                                                )
                                            );
                                        })
                                    )
                                ),
                                // Rodap√© com totais
                                garantidoSemanal.length > 0 && React.createElement("tr", {className: "bg-gradient-to-r from-blue-100 to-blue-200 font-bold border-t-2 border-blue-400"},
                                    React.createElement("td", {className: "px-4 py-3 text-sm font-bold border-r text-blue-800"}, "TOTAL"),
                                    garantidoSemanal[0]?.semanas?.map((_, semIdx) => {
                                        // Calcular totais da coluna
                                        const totalNegociado = garantidoSemanal.reduce((sum, local) => sum + (local.semanas[semIdx]?.negociado || 0), 0);
                                        const totalProduzido = garantidoSemanal.reduce((sum, local) => sum + (local.semanas[semIdx]?.produzido || 0), 0);
                                        const totalComplemento = garantidoSemanal.reduce((sum, local) => sum + (local.semanas[semIdx]?.complemento || 0), 0);
                                        
                                        // Calcular varia√ß√£o do total em rela√ß√£o √† semana anterior
                                        let setaTotal = '';
                                        let setaTotalClass = '';
                                        if (semIdx > 0) {
                                            const totalCompAnterior = garantidoSemanal.reduce((sum, local) => sum + (local.semanas[semIdx-1]?.complemento || 0), 0);
                                            if (totalComplemento > totalCompAnterior) {
                                                setaTotal = '‚ñ≤';
                                                setaTotalClass = 'text-red-600 text-xl animate-pulse';
                                            } else if (totalComplemento < totalCompAnterior) {
                                                setaTotal = '‚ñº';
                                                setaTotalClass = 'text-green-600 text-xl';
                                            }
                                        }
                                        
                                        return React.createElement(React.Fragment, {key: semIdx},
                                            React.createElement("td", {className: "px-2 py-3 text-sm text-right border-l text-blue-800"}, 
                                                `R$${totalNegociado.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`
                                            ),
                                            React.createElement("td", {className: "px-2 py-3 text-sm text-right text-purple-700"}, 
                                                `R$${totalProduzido.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`
                                            ),
                                            React.createElement("td", {className: "px-2 py-3 text-sm text-right text-red-700"}, 
                                                React.createElement("div", {className: "flex items-center justify-end gap-1"},
                                                    React.createElement("span", null, `R$${totalComplemento.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`),
                                                    setaTotal && React.createElement("span", {className: setaTotalClass + " font-bold"}, setaTotal)
                                                )
                                            )
                                        );
                                    })
                                )
                            )
                        )
                    )
                ),
                
                // Conte√∫do Sub-aba: Por Cliente
                !garantidoLoading && garantidoSubTab === 'cliente' && React.createElement("div", {className: "grid md:grid-cols-2 gap-6"},
                    // Tabela por cliente
                    React.createElement("div", {className: "bg-white rounded-xl shadow-lg overflow-hidden"},
                        React.createElement("div", {className: "overflow-x-auto"},
                            React.createElement("table", {className: "w-full"},
                                React.createElement("thead", {className: "bg-gradient-to-r from-emerald-100 to-emerald-200"},
                                    React.createElement("tr", null,
                                        React.createElement("th", {className: "px-4 py-3 text-left text-xs font-bold text-emerald-800"}, "Onde Rodou?"),
                                        React.createElement("th", {className: "px-4 py-3 text-right text-xs font-bold text-emerald-800"}, "Negociado"),
                                        React.createElement("th", {className: "px-4 py-3 text-right text-xs font-bold text-emerald-800"}, "Produzido"),
                                        React.createElement("th", {className: "px-4 py-3 text-right text-xs font-bold text-emerald-800"}, "Complemento")
                                    )
                                ),
                                React.createElement("tbody", null,
                                    garantidoPorCliente.length === 0 && React.createElement("tr", null,
                                        React.createElement("td", {colSpan: 4, className: "px-4 py-12 text-center text-gray-500"},
                                            "Nenhum dado por cliente encontrado."
                                        )
                                    ),
                                    garantidoPorCliente.map((cli, idx) =>
                                        React.createElement("tr", {key: idx, className: "border-b hover:bg-gray-50"},
                                            React.createElement("td", {className: "px-4 py-3 text-sm font-semibold"}, cli.onde_rodou),
                                            React.createElement("td", {className: "px-4 py-3 text-sm text-right"}, 
                                                "R$", (cli.negociado || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                            ),
                                            React.createElement("td", {className: "px-4 py-3 text-sm text-right"}, 
                                                "R$", (cli.produzido || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                            ),
                                            React.createElement("td", {className: "px-4 py-3 text-sm text-right font-bold " + 
                                                (cli.complemento > 0 ? 'text-red-600' : 'text-green-600')
                                            }, 
                                                "R$", (cli.complemento || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                            )
                                        )
                                    ),
                                    // Linha de total
                                    garantidoPorCliente.length > 0 && React.createElement("tr", {className: "bg-emerald-200 font-bold"},
                                        React.createElement("td", {className: "px-4 py-3 text-emerald-800"}, "Total"),
                                        React.createElement("td", {className: "px-4 py-3 text-right text-emerald-800"}, 
                                            "R$", garantidoPorCliente.reduce((s, c) => s + (c.negociado || 0), 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                        ),
                                        React.createElement("td", {className: "px-4 py-3 text-right text-emerald-800"}, 
                                            "R$", garantidoPorCliente.reduce((s, c) => s + (c.produzido || 0), 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                        ),
                                        React.createElement("td", {className: "px-4 py-3 text-right text-red-700"}, 
                                            "R$", garantidoPorCliente.reduce((s, c) => s + (c.complemento || 0), 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})
                                        )
                                    )
                                )
                            )
                        )
                    ),
                    
                    // Gr√°fico de pizza
                    React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"},
                        React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4"}, "Complemento por Cliente"),
                        garantidoPorCliente.length > 0 ? React.createElement("div", {className: "relative max-h-[500px] overflow-y-auto"},
                            // Gr√°fico com barras horizontais - todos os clientes
                            React.createElement("div", {className: "space-y-3"},
                                garantidoPorCliente.map((cli, idx) => {
                                    const total = garantidoPorCliente.reduce((s, c) => s + (c.complemento || 0), 0);
                                    const percent = total > 0 ? ((cli.complemento || 0) / total * 100) : 0;
                                    const colors = ['bg-purple-500', 'bg-blue-500', 'bg-green-500', 'bg-yellow-500', 'bg-red-500', 'bg-pink-500', 'bg-indigo-500', 'bg-teal-500', 'bg-orange-500', 'bg-cyan-500'];
                                    return React.createElement("div", {key: idx},
                                        React.createElement("div", {className: "flex justify-between text-sm mb-1 gap-2"},
                                            React.createElement("span", {className: "text-xs font-medium text-gray-700", title: cli.onde_rodou}, cli.onde_rodou),
                                            React.createElement("span", {className: "font-semibold whitespace-nowrap"}, 
                                                "R$", (cli.complemento || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2}),
                                                " (", percent.toFixed(1), "%)"
                                            )
                                        ),
                                        React.createElement("div", {className: "w-full h-4 bg-gray-200 rounded-full overflow-hidden"},
                                            React.createElement("div", {
                                                className: `h-full ${colors[idx % colors.length]} rounded-full transition-all`,
                                                style: {width: `${percent}%`}
                                            })
                                        )
                                    );
                                })
                            )
                        ) : React.createElement("p", {className: "text-gray-500 text-center py-8"}, "Sem dados para exibir")
                    )
                )
            ),
            
            "os" === Et && React.createElement("div", {
                className: "space-y-4"
            }, 
            // Header
            React.createElement("div", {
                className: "bg-gradient-to-r from-purple-600 to-purple-800 rounded-xl p-6 text-white"
            }, React.createElement("h2", {
                className: "text-2xl font-bold mb-2"
            }, "üìã An√°lise por OS"), React.createElement("p", {
                className: "opacity-80"
            }, "Detalhamento de todas as ordens de servi√ßo com pontos expand√≠veis")),
            // Tabela principal
            React.createElement("div", {
                className: "bg-white rounded-xl shadow-lg overflow-hidden"
            }, React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-xs"
            }, React.createElement("thead", {
                className: "bg-purple-100"
            }, React.createElement("tr", null, 
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900 w-8"}, ""),
                React.createElement("th", {className: "px-2 py-2 text-left text-purple-900"}, "OS"),
                React.createElement("th", {className: "px-2 py-2 text-left text-purple-900"}, "Profissional"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "Tipo"),
                React.createElement("th", {className: "px-2 py-2 text-left text-purple-900 max-w-xs"}, "Endere√ßo"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "Data Solic."),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "H. Solicita√ß√£o"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "H. Aloca√ß√£o"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "H. Chegada"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "H. Entregue"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900 bg-green-200"}, "T. Entrega"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900 bg-orange-200"}, "T. Entrega Prof"),
                React.createElement("th", {className: "px-2 py-2 text-right text-purple-900"}, "KM"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "Prazo"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900 bg-orange-200"}, "Prazo Prof"),
                React.createElement("th", {className: "px-2 py-2 text-center text-purple-900"}, "Finalizado")
            )), React.createElement("tbody", null, (function() {
                // Agrupar dados por OS
                var osAgrupadas = {};
                var dados = Array.isArray(qt) ? qt : [];
                dados.forEach(function(row) {
                    var osNum = row.os;
                    if (!osAgrupadas[osNum]) {
                        osAgrupadas[osNum] = [];
                    }
                    osAgrupadas[osNum].push(row);
                });
                
                // Ordenar cada grupo por ponto
                Object.keys(osAgrupadas).forEach(function(os) {
                    osAgrupadas[os].sort(function(a, b) {
                        var pontoA = parseInt(a.ponto) || 1;
                        var pontoB = parseInt(b.ponto) || 1;
                        return pontoA - pontoB;
                    });
                });
                
                // Converter para array e ordenar por OS desc
                var osArray = Object.keys(osAgrupadas).sort(function(a, b) {
                    return parseInt(b) - parseInt(a);
                });
                
                // Fun√ß√£o para extrair data e hora (para filtro)
                var parseDateTime = function(str) {
                    if (!str) return null;
                    var s = String(str);
                    var match = s.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);
                    if (!match) return null;
                    return {
                        ano: parseInt(match[1]),
                        mes: parseInt(match[2]),
                        dia: parseInt(match[3]),
                        hora: parseInt(match[4]),
                        min: parseInt(match[5]),
                        seg: parseInt(match[6]),
                        dataStr: match[1] + '-' + match[2] + '-' + match[3]
                    };
                };
                
                // Fun√ß√£o para calcular tempo com regras (para filtro)
                var calcTempoFiltro = function(dataHoraInicio, dataHoraFim) {
                    var inicio = parseDateTime(dataHoraInicio);
                    var fim = parseDateTime(dataHoraFim);
                    
                    if (!inicio || !fim) return null;
                    
                    var mesmaData = inicio.dataStr === fim.dataStr;
                    var inicioMinutos, fimMinutos;
                    
                    fimMinutos = fim.hora * 60 + fim.min + fim.seg / 60;
                    
                    if (!mesmaData) {
                        inicioMinutos = 8 * 60;
                    } else {
                        inicioMinutos = inicio.hora * 60 + inicio.min + inicio.seg / 60;
                    }
                    
                    var difMinutos = fimMinutos - inicioMinutos;
                    if (difMinutos < 0) return null;
                    return difMinutos;
                };
                
                // Filtrar pelo status_prazo_prof se estiver selecionado
                // Agora usa o campo dentro_prazo_prof calculado pelo backend
                if (ua.status_prazo_prof) {
                    osArray = osArray.filter(function(osNum) {
                        var pontos = osAgrupadas[osNum];
                        var primeiroReg = pontos[0];
                        
                        // Usar campo calculado pelo backend
                        var dentroPrazoProf = primeiroReg.dentro_prazo_prof;
                        
                        if (dentroPrazoProf === null || dentroPrazoProf === undefined) return true;
                        
                        if (ua.status_prazo_prof === "dentro") {
                            return dentroPrazoProf === true;
                        } else if (ua.status_prazo_prof === "fora") {
                            return dentroPrazoProf === false;
                        }
                        return true;
                    });
                }
                
                // Limitar a 200 resultados ap√≥s filtro
                osArray = osArray.slice(0, 200);
                
                // Estado para controlar expans√£o (usando window para persistir)
                if (!window.osExpandidas) window.osExpandidas = {};
                
                return osArray.map(function(osNum, idx) {
                    var pontos = osAgrupadas[osNum];
                    var primeiroReg = pontos[0];
                    var ultimoReg = pontos[pontos.length - 1]; // √öltimo ponto da OS (onde tem o finalizado real)
                    var isExpanded = window.osExpandidas[osNum] || false;
                    var temMaisPontos = pontos.length > 1;
                    
                    // Pegar o finalizado da OS (do √∫ltimo ponto, que √© quando realmente terminou)
                    var finalizadoOS = ultimoReg.finalizado || primeiroReg.finalizado;
                    
                    // Fun√ß√£o para extrair data e hora de uma string datetime
                    // Os dados v√™m como "2025-12-01T18:12:19.000Z" mas s√£o hor√°rios de Bras√≠lia
                    var parseDateTime = function(str) {
                        if (!str) return null;
                        var s = String(str);
                        // Extrair partes: YYYY-MM-DD e HH:MM:SS
                        var match = s.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);
                        if (!match) return null;
                        return {
                            ano: parseInt(match[1]),
                            mes: parseInt(match[2]),
                            dia: parseInt(match[3]),
                            hora: parseInt(match[4]),
                            min: parseInt(match[5]),
                            seg: parseInt(match[6]),
                            dataStr: match[1] + '-' + match[2] + '-' + match[3]
                        };
                    };
                    
                    // Fun√ß√£o para calcular tempo com regras de hor√°rio comercial
                    // Regra: se dias diferentes, come√ßa √†s 8h do dia do fim
                    var calcularTempoComRegras = function(dataHoraInicio, dataHoraFim) {
                        var inicio = parseDateTime(dataHoraInicio);
                        var fim = parseDateTime(dataHoraFim);
                        
                        if (!inicio || !fim) return null;
                        
                        var mesmaData = inicio.dataStr === fim.dataStr;
                        
                        var inicioMinutos, fimMinutos;
                        
                        // Fim sempre √© a hora real do fim
                        fimMinutos = fim.hora * 60 + fim.min + fim.seg / 60;
                        
                        if (!mesmaData) {
                            // Dias diferentes - come√ßa √†s 8h do dia do fim
                            inicioMinutos = 8 * 60; // 8:00 = 480 minutos
                        } else {
                            inicioMinutos = inicio.hora * 60 + inicio.min + inicio.seg / 60;
                        }
                        
                        var difMinutos = fimMinutos - inicioMinutos;
                        
                        // Se negativo (fim antes das 8h), algo est√° errado - retorna null
                        if (difMinutos < 0) return null;
                        
                        return difMinutos;
                    };
                    
                    // T. Entrega: Solicitado (data_hora) ‚Üí Finalizado
                    var tempoEntregaOS = calcularTempoComRegras(primeiroReg.data_hora, finalizadoOS);
                    
                    // T. Entrega Prof: usar campo do banco (calculado durante upload/rec√°lculo)
                    var tempoEntregaProfOS = primeiroReg.tempo_entrega_prof_minutos;
                    
                    // Prazo em minutos (vem do banco) - para prazo normal
                    var prazoMinutos = primeiroReg.prazo_minutos || 60;
                    
                    // Prazo Prof em minutos - vem do banco
                    var prazoProfMinutos = primeiroReg.prazo_prof_minutos || 60;
                    
                    // Prazo Prof: usar campo do banco
                    var dentroPrazoProf = primeiroReg.dentro_prazo_prof;
                    
                    var formatTempo = function(mins) {
                        if (mins === null || mins === undefined || isNaN(mins) || mins < 0) return "-";
                        var h = Math.floor(mins / 60);
                        var m = Math.floor(mins % 60);
                        var s = Math.floor((mins % 1) * 60);
                        return String(h).padStart(2, "0") + ":" + String(m).padStart(2, "0") + ":" + String(s).padStart(2, "0");
                    };
                    
                    // Hora que a OS foi finalizada
                    var extrairHoraOS = function(dataHoraStr) {
                        if (!dataHoraStr) return "-";
                        var str = String(dataHoraStr);
                        var match = str.match(/(\d{2}):(\d{2}):(\d{2})/);
                        if (match) {
                            return match[1] + ":" + match[2] + ":" + match[3];
                        }
                        return "-";
                    };
                    var horaEntregueOS = extrairHoraOS(finalizadoOS);
                    
                    // Fun√ß√£o para formatar data corretamente
                    var formatData = function(dataStr) {
                        if (!dataStr) return "-";
                        // Se j√° √© uma data ISO ou string de data
                        var d = new Date(dataStr);
                        if (isNaN(d.getTime())) return "-";
                        // Ajustar para evitar problema de timezone
                        var dia = String(d.getDate()).padStart(2, "0");
                        var mes = String(d.getMonth() + 1).padStart(2, "0");
                        var ano = d.getFullYear();
                        return dia + "/" + mes + "/" + ano;
                    };
                    
                    var renderRow = function(row, isFirst, rowIdx) {
                        // Debug: ver dados da linha (remover depois)
                        if (rowIdx === 0 && isFirst) {
                            console.log("üìã Debug OS row:", JSON.stringify(row, null, 2));
                        }
                        
                        // Ponto vem como n√∫mero do backend
                        var pontoNum = parseInt(row.ponto) || 1;
                        
                        // Verificar se √© retorno (mesma l√≥gica do backend - isRetorno)
                        var isRetorno = false;
                        if (row.ocorrencia) {
                            var oc = row.ocorrencia.toLowerCase();
                            isRetorno = oc.indexOf("cliente fechado") !== -1 ||
                                       oc.indexOf("clienteaus") !== -1 ||
                                       oc.indexOf("cliente ausente") !== -1 ||
                                       oc.indexOf("loja fechada") !== -1 ||
                                       oc.indexOf("produto incorreto") !== -1 ||
                                       oc.indexOf("retorno") !== -1;
                        }
                        
                        // Determinar tipo: Coleta (ponto 1), Entrega (ponto >= 2), ou Retorno
                        var tipo = isRetorno ? "Retorno" : (pontoNum === 1 ? "Coleta" : "Entrega");
                        var tipoClass = isRetorno ? "bg-orange-100 text-orange-700" : 
                                        (pontoNum === 1 ? "bg-blue-100 text-blue-700" : "bg-green-100 text-green-700");
                        
                        // Fun√ß√£o para extrair hora de uma string datetime sem convers√£o de timezone
                        var extrairHora = function(dataHoraStr) {
                            if (!dataHoraStr) return "-";
                            // Se vier como "2025-12-01T16:39:31" ou "2025-12-01 16:39:31"
                            var str = String(dataHoraStr);
                            var match = str.match(/(\d{2}):(\d{2}):(\d{2})/);
                            if (match) {
                                return match[1] + ":" + match[2] + ":" + match[3];
                            }
                            // Fallback: tentar extrair do objeto Date mas sem convers√£o
                            return "-";
                        };
                        
                        var horaAlocado = extrairHora(row.data_hora_alocado);
                        var horaSolicitado = row.hora_solicitado || extrairHora(row.data_hora);
                        
                        // Formatar data solicitado corretamente
                        var dataSolic = "-";
                        if (row.data_solicitado) {
                            // data_solicitado pode vir como "2024-12-01" ou "2024-12-01T00:00:00"
                            var partes = row.data_solicitado.split("T")[0].split("-");
                            if (partes.length === 3) {
                                dataSolic = partes[2] + "/" + partes[1] + "/" + partes[0];
                            }
                        }
                        
                        return React.createElement("tr", {
                            key: osNum + "-" + rowIdx,
                            className: "border-b hover:bg-purple-50 " + (isFirst ? (idx % 2 === 0 ? "bg-white" : "bg-gray-50") : "bg-blue-50")
                        },
                            // Bot√£o expandir (s√≥ na primeira linha)
                            React.createElement("td", {className: "px-2 py-1 text-center"}, 
                                isFirst && temMaisPontos ? React.createElement("button", {
                                    onClick: function() {
                                        window.osExpandidas[osNum] = !window.osExpandidas[osNum];
                                        // For√ßar re-render
                                        Ut([...qt]);
                                    },
                                    className: "w-5 h-5 rounded bg-purple-600 text-white text-xs font-bold hover:bg-purple-700"
                                }, isExpanded ? "‚àí" : "+") : ""
                            ),
                            // OS
                            React.createElement("td", {className: "px-2 py-1 font-medium text-purple-700"}, row.os),
                            // Profissional
                            React.createElement("td", {className: "px-2 py-1 truncate max-w-[120px]", title: row.nome_prof}, row.nome_prof || "-"),
                            // Tipo (Coleta/Entrega/Retorno)
                            React.createElement("td", {className: "px-2 py-1 text-center"}, 
                                React.createElement("span", {
                                    className: "px-2 py-0.5 rounded text-xs font-medium " + tipoClass
                                }, tipo)
                            ),
                            // Endere√ßo
                            React.createElement("td", {className: "px-2 py-1 truncate max-w-[200px]", title: row.endereco}, row.endereco || "-"),
                            // Data Solicitado
                            React.createElement("td", {className: "px-2 py-1 text-center"}, dataSolic),
                            // Hora Solicita√ß√£o
                            React.createElement("td", {className: "px-2 py-1 text-center"}, horaSolicitado),
                            // Hora Aloca√ß√£o
                            React.createElement("td", {className: "px-2 py-1 text-center"}, horaAlocado),
                            // Hora Chegada
                            React.createElement("td", {className: "px-2 py-1 text-center"}, row.hora_chegada || "-"),
                            // Hora Entregue (finalizado da OS)
                            React.createElement("td", {className: "px-2 py-1 text-center"}, horaEntregueOS),
                            // T. Entrega (Solicitado ‚Üí Finalizado da OS)
                            React.createElement("td", {className: "px-2 py-1 text-center font-medium bg-green-50 text-green-700"}, formatTempo(tempoEntregaOS)),
                            // T. Entrega Prof (Alocado ‚Üí Finalizado da OS)
                            React.createElement("td", {className: "px-2 py-1 text-center font-medium bg-orange-50 " + (tempoEntregaProfOS !== null && tempoEntregaProfOS <= prazoProfMinutos ? "text-green-700" : "text-red-600")}, formatTempo(tempoEntregaProfOS)),
                            // KM
                            React.createElement("td", {className: "px-2 py-1 text-right"}, parseFloat(row.distancia || 0).toFixed(2) + " km"),
                            // Prazo
                            React.createElement("td", {className: "px-2 py-1 text-center"}, 
                                row.dentro_prazo === true ? React.createElement("span", {className: "text-green-600 font-bold"}, "‚úÖ") :
                                row.dentro_prazo === false ? React.createElement("span", {className: "text-red-600 font-bold"}, "‚ùå") :
                                React.createElement("span", {className: "text-gray-400"}, "-")
                            ),
                            // Prazo Prof (baseado no T. Entrega Prof vs prazo por km)
                            React.createElement("td", {className: "px-2 py-1 text-center bg-orange-50"}, 
                                dentroPrazoProf === true ? React.createElement("span", {className: "text-green-600 font-bold"}, "‚úÖ") :
                                dentroPrazoProf === false ? React.createElement("span", {className: "text-red-600 font-bold"}, "‚ùå") :
                                React.createElement("span", {className: "text-gray-400"}, "-")
                            ),
                            // Finalizado
                            React.createElement("td", {className: "px-2 py-1 text-center text-xs"}, row.finalizado ? formatData(row.finalizado) : "-")
                        );
                    };
                    
                    // Renderizar linhas
                    var rows = [];
                    rows.push(renderRow(primeiroReg, true, 0));
                    
                    if (isExpanded && temMaisPontos) {
                        for (var i = 1; i < pontos.length; i++) {
                            rows.push(renderRow(pontos[i], false, i));
                        }
                    }
                    
                    return rows;
                }).flat();
            })())))),
            // Contador
            qt.length > 200 && React.createElement("div", {
                className: "bg-yellow-50 border border-yellow-200 rounded-lg px-4 py-3 text-center text-sm text-yellow-700"
            }, "‚ö†Ô∏è Mostrando 200 de ", (function() {
                var osUnicas = {};
                qt.forEach(function(r) { osUnicas[r.os] = true; });
                return Object.keys(osUnicas).length;
            })(), " OS √∫nicas. Use os filtros para refinar a busca.")
            ), "upload" === Et && React.createElement("div", {
                className: "space-y-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h2", {
                className: "text-xl font-bold text-purple-900 mb-6"
            }, "üì§ Upload de Planilha"), 
            // Upload Manual
            React.createElement("div", {
                className: "border-2 border-dashed border-purple-300 rounded-xl p-10 text-center bg-purple-50"
            }, React.createElement("p", {
                className: "text-5xl mb-4"
            }, "üìÑ"), React.createElement("p", {
                className: "text-purple-700 font-semibold mb-2"
            }, "Arraste ou selecione planilhas Excel"), React.createElement("p", {
                className: "text-purple-600 text-sm mb-4"
            }, "Voc√™ pode selecionar m√∫ltiplos arquivos ‚Ä¢ Apenas OS novas ser√£o inseridas"), Ea ? React.createElement("div", null, React.createElement("div", {
                className: "animate-spin text-4xl mb-2"
            }, "‚è≥"), React.createElement("p", {
                className: "text-purple-600 text-sm"
            }, Ea)) : React.createElement(React.Fragment, null, React.createElement("input", {
                type: "file",
                accept: ".xlsx,.xls",
                multiple: true,
                onChange: async (e) => {
                    const arquivos = Array.from(e.target.files);
                    if (arquivos.length === 0) return;
                    
                    // Pegar usu√°rio logado
                    const usuarioLogado = l;
                    console.log("üë§ Usu√°rio logado:", usuarioLogado);
                    
                    let totalInseridos = 0;
                    let totalIgnorados = 0;
                    let arquivosProcessados = 0;
                    
                    for (const arquivo of arquivos) {
                        try {
                            ha(`Processando ${arquivo.name} (${arquivosProcessados + 1}/${arquivos.length})...`);
                            
                            const t = await arquivo.arrayBuffer();
                            const a = XLSX.read(t, { type: "array" });
                            const sheet = a.Sheets[a.SheetNames[0]];
                            const r = XLSX.utils.sheet_to_json(sheet);
                            
                            const o = r.map(e => ({
                                os: e.OS,
                                num_pedido: e["N¬∫ Pedido"],
                                cod_cliente: e["C√≥d. cliente"],
                                nome_cliente: e["Nome cliente"],
                                empresa: e.Empresa,
                                nome_fantasia: e["Nome fantasia"],
                                centro_custo: e["Centro custo"],
                                cidade_p1: e["Cidade P1"],
                                endereco: e["Endere√ßo"],
                                bairro: e.Bairro,
                                cidade: e.Cidade,
                                estado: e.Estado,
                                cod_prof: e["C√≥d. prof."],
                                nome_prof: e["Nome prof."],
                                data_hora: e["Data/Hora"],
                                data_hora_alocado: e["Data/Hora Alocado"],
                                data_solicitado: e["Data solicitado"],
                                hora_solicitado: e["Hora solicitado"],
                                data_chegada: e["Data Chegada"],
                                hora_chegada: e["Hora Chegada"],
                                data_saida: e["Data Saida"],
                                hora_saida: e["Hora Saida"],
                                latitude: e.Latitude || e.latitude || e.Lat || e.lat,
                                longitude: e.Longitude || e.longitude || e.Long || e.lng,
                                categoria: e.Categoria,
                                valor: e.Valor,
                                distancia: e["Dist√¢ncia"],
                                valor_prof: e["Valor prof."],
                                finalizado: e.Finalizado,
                                execucao_comp: e["Execu√ß√£o Comp."],
                                execucao_espera: e["Execu√ß√£o - Espera"],
                                status: e.Status,
                                motivo: e.Motivo,
                                ocorrencia: e["Ocorr√™ncia"],
                                velocidade_media: e["Velocidade M√©dia"]
                            })).filter(e => e.os);
                            
                            ha(`Enviando ${o.length} entregas de ${arquivo.name}...`);
                            
                            // Extrair nome do usu√°rio de forma robusta
                            const nomeUsuario = usuarioLogado?.fullName || usuarioLogado?.full_name || usuarioLogado?.username || usuarioLogado?.name || "Admin";
                            const idUsuario = usuarioLogado?.codProfissional || usuarioLogado?.cod_profissional || usuarioLogado?.cod || usuarioLogado?.id || "";
                            
                            console.log("üì§ Enviando upload com usuario:", nomeUsuario, "id:", idUsuario);
                            
                            const response = await fetch(`${API_URL}/bi/entregas/upload`, {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify({
                                    entregas: o,
                                    usuario_id: idUsuario,
                                    usuario_nome: nomeUsuario,
                                    nome_arquivo: arquivo.name
                                })
                            });
                            
                            const result = await response.json();
                            if (result.success) {
                                totalInseridos += result.inseridos || 0;
                                totalIgnorados += result.ignorados || 0;
                                arquivosProcessados++;
                            }
                        } catch (err) {
                            console.error(`Erro em ${arquivo.name}:`, err);
                        }
                    }
                    
                    ha(null);
                    e.target.value = "";
                    
                    if (arquivosProcessados > 0) {
                        ja(`‚úÖ ${arquivosProcessados} arquivo(s) processado(s)! ${totalInseridos} inseridos, ${totalIgnorados} ignorados`, "success");
                        el();
                        ll();
                    } else {
                        ja("‚ùå Nenhum arquivo foi processado", "error");
                    }
                },
                className: "hidden",
                id: "bi-upload-file"
            }), React.createElement("label", {
                htmlFor: "bi-upload-file",
                className: "px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold cursor-pointer hover:bg-purple-700 inline-block"
            }, "üì§ Selecionar Arquivo(s)")),
            // Bot√£o para atualizar aloca√ß√£o em registros existentes
            React.createElement("div", {
                className: "mt-4 pt-4 border-t border-purple-200"
            }, React.createElement("p", {
                className: "text-purple-600 text-sm mb-2"
            }, "üîÑ Atualizar apenas Data/Hora Alocado (para registros existentes):"), React.createElement("input", {
                type: "file",
                accept: ".xlsx,.xls",
                multiple: true,
                onChange: async (e) => {
                    const arquivos = Array.from(e.target.files);
                    if (arquivos.length === 0) return;
                    
                    let totalAtualizados = 0;
                    let totalErros = 0;
                    
                    for (const arquivo of arquivos) {
                        try {
                            ha(`Atualizando aloca√ß√£o de ${arquivo.name}...`);
                            
                            const t = await arquivo.arrayBuffer();
                            const a = XLSX.read(t, { type: "array" });
                            const sheet = a.Sheets[a.SheetNames[0]];
                            const r = XLSX.utils.sheet_to_json(sheet);
                            
                            const entregas = r.map(row => ({
                                os: row.OS,
                                ponto: row.Ponto || row['Ponto_Entrega'] || 1,
                                data_hora_alocado: row["Data/Hora Alocado"]
                            })).filter(e => e.os && e.data_hora_alocado);
                            
                            if (entregas.length === 0) {
                                console.log("Nenhum registro com Data/Hora Alocado encontrado");
                                continue;
                            }
                            
                            ha(`Enviando ${entregas.length} registros para atualiza√ß√£o...`);
                            
                            const response = await fetch(`${API_URL}/bi/entregas/atualizar-alocado`, {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify({ entregas })
                            });
                            
                            const result = await response.json();
                            if (result.success) {
                                totalAtualizados += result.atualizados || 0;
                                totalErros += result.erros || 0;
                            }
                        } catch (err) {
                            console.error(`Erro em ${arquivo.name}:`, err);
                            totalErros++;
                        }
                    }
                    
                    ha(null);
                    if (totalAtualizados > 0) {
                        ja(`‚úÖ ${totalAtualizados} registros atualizados com Data/Hora Alocado!`, "success");
                        el(); // Recarregar dashboard
                    } else {
                        ja(`‚ö†Ô∏è Nenhum registro atualizado. Verifique se a planilha tem a coluna "Data/Hora Alocado"`, "warning");
                    }
                    e.target.value = "";
                },
                className: "hidden",
                id: "bi-update-alocado-file"
            }), React.createElement("label", {
                htmlFor: "bi-update-alocado-file",
                className: "px-4 py-2 bg-pink-500 text-white rounded-lg font-semibold cursor-pointer hover:bg-pink-600 inline-block text-sm"
            }, "üïê Atualizar Aloca√ß√£o")), 
            // Bot√£o para inicializar prazos DAX
            React.createElement("div", {
                className: "mt-4 pt-4 border-t border-green-200"
            }, React.createElement("p", {
                className: "text-green-600 text-sm mb-2"
            }, "üìä Inicializar prazos com regras do DAX (cliente 767 = 2h fixo, outros = faixas por km):"), React.createElement("button", {
                onClick: async () => {
                    if (!confirm("Isso vai atualizar todos os prazos com as regras do DAX. Continuar?")) return;
                    ha("Inicializando prazos DAX...");
                    try {
                        const r = await fetch(`${API_URL}/bi/inicializar-prazos-dax`, { method: "POST" });
                        const j = await r.json();
                        if (j.success) {
                            ja(`‚úÖ Prazos inicializados! ${j.registrosAtualizados} registros atualizados`, "success");
                            el();
                        } else {
                            ja(`‚ùå Erro: ${j.error}`, "error");
                        }
                    } catch (err) {
                        ja(`‚ùå Erro: ${err.message}`, "error");
                    }
                    ha(null);
                },
                className: "px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 text-sm"
            }, "üìä Inicializar Prazos DAX")))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h2", {
                className: "text-xl font-bold text-purple-900 mb-4"
            }, "üìã Hist√≥rico de Uploads"), 0 === Mt.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Nenhum upload realizado ainda") : React.createElement("div", {
                className: "space-y-3"
            }, Mt.map((e, t) => React.createElement("div", {
                key: e.id || t,
                className: "flex items-center justify-between p-4 bg-purple-50 rounded-lg border border-purple-200"
            }, React.createElement("div", {className: "flex-1"}, 
                React.createElement("div", {className: "flex items-center gap-3 mb-1"},
                    React.createElement("p", {className: "font-semibold text-purple-900"}, 
                        "üìÑ ", e.nome_arquivo || "Arquivo Excel"
                    ),
                    e.usuario_nome && React.createElement("span", {
                        className: "text-xs bg-purple-200 text-purple-700 px-2 py-0.5 rounded-full"
                    }, "üë§ ", e.usuario_nome)
                ),
                React.createElement("div", {className: "flex items-center gap-4 text-sm text-purple-600"},
                    React.createElement("span", null, "üìÖ ", e.data_upload ? new Date(e.data_upload).toLocaleDateString("pt-BR") + " √†s " + new Date(e.data_upload).toLocaleTimeString("pt-BR", {hour: "2-digit", minute: "2-digit"}) : "-"),
                    e.linhas_inseridas !== undefined ? React.createElement("span", null, "‚úÖ ", e.linhas_inseridas, " inseridas") : React.createElement("span", null, e.total_registros, " registros"),
                    e.linhas_ignoradas > 0 && React.createElement("span", {className: "text-orange-600"}, "‚è≠Ô∏è ", e.linhas_ignoradas, " ignoradas")
                )
            ), React.createElement("button", {
                onClick: () => (async (uploadData) => {
                    const dataStr = uploadData.data_upload ? new Date(uploadData.data_upload).toLocaleDateString("pt-BR") : "este upload";
                    if (confirm(`Excluir upload de ${dataStr}?`)) try {
                        // Se tem ID, usa o novo endpoint
                        const endpoint = uploadData.id 
                            ? `${API_URL}/bi/uploads/historico/${uploadData.id}`
                            : `${API_URL}/bi/uploads/${uploadData.data_upload}`;
                        const t = await fetch(endpoint, { method: "DELETE" }),
                            a = await t.json();
                        ja(`‚úÖ Upload exclu√≠do!`, "success"), ll(), el()
                    } catch (err) {
                        ja("Erro ao excluir", "error")
                    }
                })(e),
                className: "px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-sm"
            }, "üóëÔ∏è Excluir"))))), React.createElement("div", {
                className: "bg-blue-50 border border-blue-200 rounded-xl p-4"
            }, React.createElement("div", {
                className: "flex items-center justify-between"
            }, React.createElement("div", null, React.createElement("h4", {
                className: "font-semibold text-blue-800"
            }, "üîÑ Recalcular Prazos"), React.createElement("p", {
                className: "text-sm text-blue-600"
            }, "Ap√≥s alterar configura√ß√µes de prazo, recalcule para atualizar os dados")), React.createElement("button", {
                onClick: xl,
                disabled: ba,
                className: "px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50"
            }, ba ? "‚è≥ Recalculando..." : "üîÑ Recalcular")))), 
            
            // ========== ABA RELAT√ìRIO IA ==========
            "relatorio-ia" === Et && React.createElement("div", {className: "space-y-6"},
                // Header
                React.createElement("div", {className: "bg-gradient-to-r from-violet-600 to-purple-600 rounded-xl p-6 text-white"},
                    React.createElement("div", {className: "flex items-center gap-4"},
                        React.createElement("img", {
                            src: "https://raw.githubusercontent.com/Leonardodevcloud/tutts-frontend/main/gemini-app-icon-hd.png",
                            alt: "IA",
                            className: "w-16 h-16 rounded-xl shadow-lg"
                        }),
                        React.createElement("div", null,
                            React.createElement("h2", {className: "text-2xl font-bold"}, "Relat√≥rio Inteligente com IA"),
                            React.createElement("p", {className: "text-violet-100 mt-1"}, "An√°lises autom√°ticas dos seus dados usando Intelig√™ncia Artificial")
                        )
                    )
                ),
                
                // Filtros edit√°veis
                React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"},
                    React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"},
                        React.createElement("span", null, "üîç"),
                        "Filtros da An√°lise"
                    ),
                    React.createElement("div", {className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},
                        // Data In√≠cio
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "üìÖ Data In√≠cio"),
                            React.createElement("input", {
                                type: "date",
                                value: relatorioIAFiltros.data_inicio,
                                onChange: (e) => setRelatorioIAFiltros(prev => ({...prev, data_inicio: e.target.value})),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500"
                            })
                        ),
                        // Data Fim
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "üìÖ Data Fim"),
                            React.createElement("input", {
                                type: "date",
                                value: relatorioIAFiltros.data_fim,
                                onChange: (e) => setRelatorioIAFiltros(prev => ({...prev, data_fim: e.target.value})),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500"
                            })
                        ),
                        // Cliente com busca
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "üè¢ Cliente"),
                            React.createElement("input", {
                                type: "text",
                                placeholder: "üîç Buscar cliente...",
                                value: buscaClienteRelatorioIA,
                                onChange: (e) => setBuscaClienteRelatorioIA(e.target.value),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 mb-1 text-sm"
                            }),
                            React.createElement("select", {
                                value: relatorioIAFiltros.cod_cliente,
                                onChange: (e) => {
                                    const codCliente = e.target.value;
                                    setRelatorioIAFiltros(prev => ({...prev, cod_cliente: codCliente, centro_custo: ''}));
                                    setBuscaClienteRelatorioIA('');
                                    // Carregar centros de custo do cliente
                                    if (codCliente && Tt[codCliente]) {
                                        setRelatorioIACentrosCusto(Tt[codCliente] || []);
                                    } else {
                                        setRelatorioIACentrosCusto([]);
                                    }
                                },
                                className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500"
                            },
                                React.createElement("option", {value: ""}, "Todos os clientes"),
                                jt && jt.filter(function(c) {
                                    if (!buscaClienteRelatorioIA) return true;
                                    var termo = buscaClienteRelatorioIA.toLowerCase();
                                    var codigo = String(c.cod_cliente).toLowerCase();
                                    var mascara = il(c.cod_cliente);
                                    var nome = (mascara || c.nome_cliente || "").toLowerCase();
                                    return codigo.includes(termo) || nome.includes(termo);
                                }).map(function(c) {
                                    // Prioridade: 1) M√°scara configurada, 2) nome_cliente do banco, 3) fallback
                                    var mascara = il(c.cod_cliente);
                                    var nomeExibir = mascara || (c.nome_cliente && c.nome_cliente.trim()) || "Cliente " + c.cod_cliente;
                                    return React.createElement("option", {key: c.cod_cliente, value: c.cod_cliente}, 
                                        c.cod_cliente + " - " + nomeExibir
                                    );
                                })
                            )
                        ),
                        // Centro de Custo
                        React.createElement("div", null,
                            React.createElement("label", {className: "block text-sm font-medium text-gray-700 mb-1"}, "üìÅ Centro de Custo"),
                            React.createElement("select", {
                                value: relatorioIAFiltros.centro_custo,
                                onChange: (e) => setRelatorioIAFiltros(prev => ({...prev, centro_custo: e.target.value})),
                                disabled: !relatorioIAFiltros.cod_cliente,
                                className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 disabled:bg-gray-100 disabled:cursor-not-allowed"
                            },
                                React.createElement("option", {value: ""}, relatorioIAFiltros.cod_cliente ? "Todos os centros" : "Selecione um cliente primeiro"),
                                relatorioIACentrosCusto && relatorioIACentrosCusto.map(function(cc) {
                                    return React.createElement("option", {key: cc, value: cc}, cc);
                                })
                            )
                        )
                    ),
                    // Resumo dos filtros aplicados
                    React.createElement("div", {className: "mt-4 flex flex-wrap items-center gap-2 text-sm"},
                        React.createElement("span", {className: "text-gray-500"}, "An√°lise:"),
                        relatorioIAFiltros.data_inicio && React.createElement("span", {className: "bg-violet-100 text-violet-800 px-2 py-1 rounded"},
                            "De " + new Date(relatorioIAFiltros.data_inicio + "T12:00:00").toLocaleDateString("pt-BR")
                        ),
                        relatorioIAFiltros.data_fim && React.createElement("span", {className: "bg-violet-100 text-violet-800 px-2 py-1 rounded"},
                            "At√© " + new Date(relatorioIAFiltros.data_fim + "T12:00:00").toLocaleDateString("pt-BR")
                        ),
                        relatorioIAFiltros.cod_cliente && React.createElement("span", {className: "bg-purple-100 text-purple-800 px-2 py-1 rounded"},
                            "üè¢ " + (function() {
                                var mascara = il(relatorioIAFiltros.cod_cliente);
                                if (mascara) return mascara;
                                var cliente = jt.find(c => String(c.cod_cliente) === String(relatorioIAFiltros.cod_cliente));
                                return (cliente?.nome_cliente && cliente.nome_cliente.trim()) || "Cliente " + relatorioIAFiltros.cod_cliente;
                            })()
                        ),
                        relatorioIAFiltros.centro_custo && React.createElement("span", {className: "bg-blue-100 text-blue-800 px-2 py-1 rounded"},
                            "üìÅ " + relatorioIAFiltros.centro_custo
                        ),
                        !relatorioIAFiltros.data_inicio && !relatorioIAFiltros.data_fim && !relatorioIAFiltros.cod_cliente && React.createElement("span", {className: "text-gray-400 italic"},
                            "Nenhum filtro aplicado - analisar√° todos os dados"
                        ),
                        // Bot√£o limpar filtros
                        (relatorioIAFiltros.data_inicio || relatorioIAFiltros.data_fim || relatorioIAFiltros.cod_cliente) && React.createElement("button", {
                            onClick: () => {
                                setRelatorioIAFiltros({ data_inicio: '', data_fim: '', cod_cliente: '', centro_custo: '' });
                                setRelatorioIACentrosCusto([]);
                            },
                            className: "ml-2 text-red-500 hover:text-red-700 text-xs underline"
                        }, "Limpar filtros")
                    )
                ),
                
                // Tipos de relat√≥rio
                React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"},
                    React.createElement("div", {className: "flex items-center justify-between mb-4"},
                        React.createElement("h3", {className: "text-lg font-bold text-gray-800"}, "üìä Escolha os Tipos de An√°lise"),
                        React.createElement("span", {className: "text-sm text-gray-500"}, 
                            relatorioIATipos.length > 0 ? relatorioIATipos.length + " selecionado(s)" : "Selecione um ou mais"
                        )
                    ),
                    React.createElement("p", {className: "text-sm text-gray-500 mb-4"}, "Clique nos cards para selecionar m√∫ltiplas an√°lises. A IA gerar√° um relat√≥rio completo combinando todas."),
                    React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-3 gap-4"},
                        // Performance
                        React.createElement("button", {
                            onClick: () => toggleRelatorioIATipo("performance"),
                            className: "p-4 rounded-xl border-2 text-left transition-all relative " + (relatorioIATipos.includes("performance") ? "border-violet-500 bg-violet-50 ring-2 ring-violet-200" : "border-gray-200 hover:border-violet-300")
                        },
                            relatorioIATipos.includes("performance") && React.createElement("div", {className: "absolute top-2 right-2 w-6 h-6 bg-violet-500 rounded-full flex items-center justify-center text-white text-sm"}, "‚úì"),
                            React.createElement("div", {className: "text-3xl mb-2"}, "üìà"),
                            React.createElement("div", {className: "font-semibold text-gray-800"}, "Performance"),
                            React.createElement("div", {className: "text-xs text-gray-500"}, "An√°lise geral de desempenho")
                        ),
                        // Tend√™ncias
                        React.createElement("button", {
                            onClick: () => toggleRelatorioIATipo("tendencias"),
                            className: "p-4 rounded-xl border-2 text-left transition-all relative " + (relatorioIATipos.includes("tendencias") ? "border-violet-500 bg-violet-50 ring-2 ring-violet-200" : "border-gray-200 hover:border-violet-300")
                        },
                            relatorioIATipos.includes("tendencias") && React.createElement("div", {className: "absolute top-2 right-2 w-6 h-6 bg-violet-500 rounded-full flex items-center justify-center text-white text-sm"}, "‚úì"),
                            React.createElement("div", {className: "text-3xl mb-2"}, "üìâ"),
                            React.createElement("div", {className: "font-semibold text-gray-800"}, "Tend√™ncias"),
                            React.createElement("div", {className: "text-xs text-gray-500"}, "Padr√µes e comportamentos")
                        ),
                        // Alertas
                        React.createElement("button", {
                            onClick: () => toggleRelatorioIATipo("alertas"),
                            className: "p-4 rounded-xl border-2 text-left transition-all relative " + (relatorioIATipos.includes("alertas") ? "border-violet-500 bg-violet-50 ring-2 ring-violet-200" : "border-gray-200 hover:border-violet-300")
                        },
                            relatorioIATipos.includes("alertas") && React.createElement("div", {className: "absolute top-2 right-2 w-6 h-6 bg-violet-500 rounded-full flex items-center justify-center text-white text-sm"}, "‚úì"),
                            React.createElement("div", {className: "text-3xl mb-2"}, "‚ö†Ô∏è"),
                            React.createElement("div", {className: "font-semibold text-gray-800"}, "Alertas"),
                            React.createElement("div", {className: "text-xs text-gray-500"}, "Anomalias e problemas")
                        ),
                        // Gest√£o de Profissionais
                        React.createElement("button", {
                            onClick: () => toggleRelatorioIATipo("gestao_profissionais"),
                            className: "p-4 rounded-xl border-2 text-left transition-all relative " + (relatorioIATipos.includes("gestao_profissionais") ? "border-violet-500 bg-violet-50 ring-2 ring-violet-200" : "border-gray-200 hover:border-violet-300")
                        },
                            relatorioIATipos.includes("gestao_profissionais") && React.createElement("div", {className: "absolute top-2 right-2 w-6 h-6 bg-violet-500 rounded-full flex items-center justify-center text-white text-sm"}, "‚úì"),
                            React.createElement("div", {className: "text-3xl mb-2"}, "üë•"),
                            React.createElement("div", {className: "font-semibold text-gray-800"}, "Gest√£o de Profissionais"),
                            React.createElement("div", {className: "text-xs text-gray-500"}, "Produtividade e rotatividade")
                        ),
                        // Personalizado
                        React.createElement("button", {
                            onClick: () => toggleRelatorioIATipo("personalizado"),
                            className: "p-4 rounded-xl border-2 text-left transition-all relative " + (relatorioIATipos.includes("personalizado") ? "border-violet-500 bg-violet-50 ring-2 ring-violet-200" : "border-gray-200 hover:border-violet-300")
                        },
                            relatorioIATipos.includes("personalizado") && React.createElement("div", {className: "absolute top-2 right-2 w-6 h-6 bg-violet-500 rounded-full flex items-center justify-center text-white text-sm"}, "‚úì"),
                            React.createElement("div", {className: "text-3xl mb-2"}, "‚ú®"),
                            React.createElement("div", {className: "font-semibold text-gray-800"}, "Personalizado"),
                            React.createElement("div", {className: "text-xs text-gray-500"}, "Sua pr√≥pria pergunta")
                        )
                    ),
                    
                    // Sele√ß√£o r√°pida
                    React.createElement("div", {className: "mt-4 flex gap-2"},
                        React.createElement("button", {
                            onClick: () => setRelatorioIATipos(["performance", "tendencias", "alertas", "gestao_profissionais"]),
                            className: "px-3 py-1 text-xs bg-violet-100 text-violet-700 rounded-full hover:bg-violet-200"
                        }, "Selecionar todos"),
                        React.createElement("button", {
                            onClick: () => setRelatorioIATipos([]),
                            className: "px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded-full hover:bg-gray-200"
                        }, "Limpar sele√ß√£o")
                    ),
                    
                    // Campo de prompt personalizado
                    relatorioIATipos.includes("personalizado") && React.createElement("div", {className: "mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200"},
                        React.createElement("label", {className: "block text-sm font-medium text-purple-800 mb-2"}, "‚ú® Sua pergunta personalizada:"),
                        React.createElement("textarea", {
                            value: relatorioIAPromptCustom,
                            onChange: (e) => setRelatorioIAPromptCustom(e.target.value),
                            placeholder: "Ex: Quais profissionais est√£o com desempenho abaixo da m√©dia? Existe algum padr√£o nos atrasos de segunda-feira? Compare o desempenho entre os turnos da manh√£ e tarde.",
                            className: "w-full px-4 py-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",
                            rows: 3
                        })
                    ),
                    
                    // Resumo da sele√ß√£o
                    relatorioIATipos.length > 0 && React.createElement("div", {className: "mt-4 p-3 bg-violet-50 rounded-lg border border-violet-200"},
                        React.createElement("div", {className: "flex items-center gap-2 text-sm text-violet-800"},
                            React.createElement("span", {className: "font-semibold"}, "An√°lises selecionadas:"),
                            relatorioIATipos.map(function(t) {
                                var labels = {performance: "üìà Performance", tendencias: "üìâ Tend√™ncias", alertas: "‚ö†Ô∏è Alertas", gestao_profissionais: "üë• Gest√£o de Profissionais", personalizado: "‚ú® Personalizado"};
                                return React.createElement("span", {key: t, className: "px-2 py-0.5 bg-violet-200 rounded text-xs"}, labels[t] || t);
                            })
                        )
                    ),
                    
                    // Bot√£o gerar
                    React.createElement("button", {
                        onClick: () => gerarRelatorioIA(),
                        disabled: relatorioIALoading || relatorioIATipos.length === 0 || (relatorioIATipos.includes("personalizado") && relatorioIATipos.length === 1 && !relatorioIAPromptCustom.trim()),
                        className: "mt-6 w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold text-lg hover:from-violet-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 transition-all"
                    },
                        relatorioIALoading ? React.createElement("span", {className: "flex items-center gap-2"},
                            React.createElement("span", {className: "animate-spin"}, "‚è≥"),
                            "Analisando dados..."
                        ) : React.createElement("span", {className: "flex items-center gap-2"},
                            React.createElement("span", null, "üöÄ"),
                            "Gerar Relat√≥rio com IA",
                            relatorioIATipos.length > 0 && React.createElement("span", {className: "bg-white/20 px-2 py-0.5 rounded text-sm"}, relatorioIATipos.length + " an√°lise(s)")
                        )
                    )
                ),
                
                // Erro
                relatorioIAErro && React.createElement("div", {className: "bg-red-50 border border-red-200 rounded-xl p-4 text-red-800"},
                    React.createElement("div", {className: "flex items-center gap-2"},
                        React.createElement("span", {className: "text-xl"}, "‚ùå"),
                        React.createElement("span", {className: "font-semibold"}, "Erro ao gerar relat√≥rio"),
                    ),
                    React.createElement("p", {className: "mt-2 text-sm"}, relatorioIAErro)
                ),
                
                // Resultado
                relatorioIAResultado && React.createElement("div", {className: "bg-white rounded-xl shadow-lg overflow-hidden"},
                    React.createElement("div", {className: "bg-gradient-to-r from-violet-600 to-purple-600 px-6 py-4 text-white"},
                        React.createElement("div", {className: "flex items-center justify-between"},
                            React.createElement("div", {className: "flex items-center gap-3"},
                                React.createElement("span", {className: "text-2xl"}, "üìã"),
                                React.createElement("div", null,
                                    React.createElement("h3", {className: "font-bold"}, "Relat√≥rio Gerado"),
                                    React.createElement("p", {className: "text-sm text-violet-100"}, 
                                        relatorioIAResultado.tipo_analise + " ‚Ä¢ " + new Date().toLocaleString("pt-BR")
                                    )
                                )
                            ),
                            React.createElement("div", {className: "flex gap-2"},
                                React.createElement("button", {
                                    onClick: () => {
                                        navigator.clipboard.writeText(relatorioIAResultado.relatorio);
                                        alert("Relat√≥rio copiado!");
                                    },
                                    className: "px-3 py-1 bg-white/20 rounded-lg text-sm hover:bg-white/30"
                                }, "üìã Copiar"),
                                React.createElement("button", {
                                    onClick: () => gerarPDFRelatorioIA(),
                                    className: "px-3 py-1 bg-white/20 rounded-lg text-sm hover:bg-white/30"
                                }, "üìÑ Word")
                            )
                        )
                    ),
                    React.createElement("div", {className: "p-6"},
                        // M√©tricas resumidas
                        relatorioIAResultado.metricas && React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},
                            React.createElement("div", {className: "bg-blue-50 rounded-lg p-3 text-center"},
                                React.createElement("div", {className: "text-2xl font-bold text-blue-600"}, relatorioIAResultado.metricas.total_entregas?.toLocaleString() || "0"),
                                React.createElement("div", {className: "text-xs text-blue-800"}, "Entregas")
                            ),
                            React.createElement("div", {className: "bg-green-50 rounded-lg p-3 text-center"},
                                React.createElement("div", {className: "text-2xl font-bold text-green-600"}, (relatorioIAResultado.metricas.taxa_prazo || 0).toFixed(1) + "%"),
                                React.createElement("div", {className: "text-xs text-green-800"}, "No Prazo")
                            ),
                            React.createElement("div", {className: "bg-purple-50 rounded-lg p-3 text-center"},
                                React.createElement("div", {className: "text-2xl font-bold text-purple-600"}, (relatorioIAResultado.metricas.tempo_medio_entrega || 0).toFixed(0) + " min"),
                                React.createElement("div", {className: "text-xs text-purple-800"}, "Tempo M√©dio")
                            ),
                            React.createElement("div", {className: "bg-orange-50 rounded-lg p-3 text-center"},
                                React.createElement("div", {className: "text-2xl font-bold text-orange-600"}, relatorioIAResultado.metricas.media_profissionais_por_dia || "0"),
                                React.createElement("div", {className: "text-xs text-orange-800"}, "Motos/Dia")
                            )
                        ),
                        
                        // Relat√≥rio em texto
                        React.createElement("div", {id: "relatorio-ia-content", className: "prose prose-sm max-w-none"},
                            React.createElement("div", {
                                className: "whitespace-pre-wrap text-gray-700 leading-relaxed",
                                dangerouslySetInnerHTML: { __html: (relatorioIAResultado.relatorio || "").replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br/>') }
                            })
                        )
                    )
                ),
                
                // Hist√≥rico de Relat√≥rios do Banco de Dados
                React.createElement("div", {className: "bg-white rounded-xl shadow-lg p-6"},
                    React.createElement("div", {className: "flex items-center justify-between mb-4"},
                        React.createElement("h3", {className: "text-lg font-bold text-gray-800 flex items-center gap-2"},
                            React.createElement("span", null, "üìú"),
                            "Hist√≥rico de Relat√≥rios"
                        ),
                        React.createElement("span", {className: "text-sm text-gray-500"}, 
                            relatorioIAHistoricoDB.length + " relat√≥rio(s)"
                        )
                    ),
                    relatorioIAHistoricoDB.length === 0 
                        ? React.createElement("div", {className: "text-center py-8 text-gray-400"},
                            React.createElement("div", {className: "text-4xl mb-2"}, "üìã"),
                            "Nenhum relat√≥rio gerado ainda"
                        )
                        : React.createElement("div", {className: "space-y-3 max-h-96 overflow-y-auto"},
                            relatorioIAHistoricoDB.map(function(item) {
                                return React.createElement("div", {
                                    key: item.id, 
                                    className: "p-4 bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl border border-violet-100"
                                },
                                    React.createElement("div", {className: "flex items-start justify-between gap-4"},
                                        React.createElement("div", {className: "flex-1 min-w-0"},
                                            // T√≠tulo com cliente
                                            React.createElement("div", {className: "flex items-center gap-2 flex-wrap"},
                                                React.createElement("span", {className: "font-bold text-violet-800"}, 
                                                    item.cod_cliente ? item.cod_cliente + " - " + (item.nome_cliente || "Cliente") : "Todos os Clientes"
                                                ),
                                                item.centro_custo && React.createElement("span", {className: "text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full"},
                                                    "üìÅ " + item.centro_custo
                                                )
                                            ),
                                            // Tipo de an√°lise
                                            React.createElement("div", {className: "text-sm text-gray-600 mt-1"},
                                                "üìä " + (item.tipo_analise || "An√°lise Geral")
                                            ),
                                            // Per√≠odo
                                            React.createElement("div", {className: "text-xs text-gray-500 mt-1"},
                                                "üìÖ Per√≠odo: " + (item.data_inicio ? new Date(item.data_inicio).toLocaleDateString("pt-BR") : "-") + 
                                                " a " + (item.data_fim ? new Date(item.data_fim).toLocaleDateString("pt-BR") : "-")
                                            ),
                                            // Usu√°rio e data de cria√ß√£o
                                            React.createElement("div", {className: "flex items-center gap-3 mt-2 text-xs text-gray-400"},
                                                React.createElement("span", null, "üë§ " + (item.usuario_nome || "Usu√°rio")),
                                                React.createElement("span", null, "üïê " + new Date(item.created_at).toLocaleString("pt-BR"))
                                            )
                                        ),
                                        // Bot√µes de a√ß√£o
                                        React.createElement("div", {className: "flex flex-col gap-2"},
                                            React.createElement("button", {
                                                onClick: () => gerarWordHistorico(item),
                                                className: "px-3 py-1.5 bg-violet-600 text-white text-xs rounded-lg hover:bg-violet-700 flex items-center gap-1 whitespace-nowrap"
                                            }, "üìÑ Word"),
                                            React.createElement("button", {
                                                onClick: () => deletarRelatorioHistorico(item.id),
                                                className: "px-3 py-1.5 bg-red-100 text-red-600 text-xs rounded-lg hover:bg-red-200 flex items-center gap-1"
                                            }, "üóëÔ∏è")
                                        )
                                    )
                                );
                            })
                        )
                )
            ),
            
            "config" === Et && React.createElement("div", {
                className: "space-y-4"
            }, 
            // ========== SE√á√ÉO 1: REGI√ïES (Dropdown) ==========
            React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                // Header clic√°vel do dropdown
                React.createElement("button", {
                    onClick: function() { setConfigSecaoAberta(configSecaoAberta === "regioes" ? "" : "regioes"); },
                    className: "w-full px-6 py-4 flex items-center justify-between bg-gradient-to-r from-purple-50 to-white hover:from-purple-100 transition-all"
                },
                    React.createElement("div", {className: "flex items-center gap-3"},
                        React.createElement("span", {className: "text-2xl"}, "üó∫Ô∏è"),
                        React.createElement("div", {className: "text-left"},
                            React.createElement("h2", {className: "text-lg font-bold text-purple-900"}, "Configura√ß√£o de Regi√µes"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, aa.length + " regi√£o(√µes) configurada(s)")
                        )
                    ),
                    React.createElement("span", {className: "text-2xl text-purple-600 transition-transform " + (configSecaoAberta === "regioes" ? "rotate-180" : "")}, "‚ñº")
                ),
                // Conte√∫do expans√≠vel da se√ß√£o Regi√µes
                configSecaoAberta === "regioes" && React.createElement("div", {className: "p-6 border-t"},
            React.createElement("p", {
                className: "text-sm text-gray-500 mb-4"
            }, "Agrupe clientes e centros de custo em regi√µes para facilitar a filtragem no dashboard."), React.createElement("div", {
                className: "border rounded-lg p-4 mb-4 bg-gray-50"
            },
            // T√≠tulo do formul√°rio com modo edi√ß√£o
            React.createElement("div", {className: "flex items-center justify-between mb-4"},
                React.createElement("h3", {className: "font-semibold text-purple-800"}, 
                    regiaoEditando ? "‚úèÔ∏è Editando Regi√£o" : "‚ûï Nova Regi√£o"
                ),
                regiaoEditando && React.createElement("button", {
                    onClick: function() {
                        setRegiaoEditando(null);
                        setRegiaoNome("");
                        setRegiaoClienteSelecionado([]);
                        setRegiaoCentrosCusto({});
                        setRegiaoItensAdicionados([]);
                    },
                    className: "text-sm text-gray-500 hover:text-red-600"
                }, "‚úï Cancelar edi√ß√£o")
            ), 
            // Nome da regi√£o
            React.createElement("div", {className: "mb-4"}, 
                React.createElement("label", {className: "text-sm font-semibold text-gray-700"}, "Nome da Regi√£o"),
                React.createElement("input", {
                    type: "text",
                    value: regiaoNome,
                    onChange: function(e) { setRegiaoNome(e.target.value); },
                    placeholder: "Ex: Grande Recife, Interior, Zona Sul...",
                    className: "w-full px-3 py-2 border rounded-lg mt-1"
                })
            ),
            // Sele√ß√£o de Clientes (m√∫ltiplos) + Centros de Custo
            React.createElement("div", {className: "grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},
                // Coluna 1: Lista de Clientes com checkboxes
                React.createElement("div", null,
                    React.createElement("label", {className: "text-sm font-semibold text-gray-700"}, "üè¢ Clientes"),
                    React.createElement("div", {className: "border rounded-lg mt-1 bg-white max-h-64 overflow-y-auto"},
                        // Campo de busca
                        React.createElement("div", {className: "sticky top-0 bg-white p-2 border-b"},
                            React.createElement("input", {
                                type: "text",
                                id: "regiao-busca-cliente",
                                placeholder: "üîç Buscar cliente...",
                                className: "w-full px-2 py-1 text-sm border rounded",
                                onChange: function(e) {
                                    var termo = e.target.value.toLowerCase();
                                    var items = document.querySelectorAll('.regiao-cliente-item');
                                    items.forEach(function(item) {
                                        var texto = item.textContent.toLowerCase();
                                        item.style.display = texto.includes(termo) ? 'flex' : 'none';
                                    });
                                }
                            })
                        ),
                        // Lista de clientes
                        React.createElement("div", {className: "p-1"},
                            jt.map(function(c) {
                                var isSelected = regiaoClienteSelecionado && regiaoClienteSelecionado.includes(String(c.cod_cliente));
                                return React.createElement("label", {
                                    key: c.cod_cliente,
                                    className: "regiao-cliente-item flex items-center gap-2 p-2 hover:bg-purple-50 rounded cursor-pointer " + (isSelected ? "bg-purple-100" : "")
                                },
                                    React.createElement("input", {
                                        type: "checkbox",
                                        checked: isSelected,
                                        onChange: async function(e) {
                                            var codStr = String(c.cod_cliente);
                                            if (e.target.checked) {
                                                // Adicionar cliente √† sele√ß√£o
                                                setRegiaoClienteSelecionado(function(prev) {
                                                    return prev ? [...prev, codStr] : [codStr];
                                                });
                                                // Buscar centros de custo
                                                try {
                                                    var resp = await fetch(API_URL + "/bi/centros-custo/" + c.cod_cliente);
                                                    var data = await resp.json();
                                                    setRegiaoCentrosCusto(function(prev) {
                                                        var novo = {...prev};
                                                        novo[codStr] = data || [];
                                                        return novo;
                                                    });
                                                } catch(err) {
                                                    console.error("Erro ao buscar centros:", err);
                                                }
                                            } else {
                                                // Remover cliente da sele√ß√£o
                                                setRegiaoClienteSelecionado(function(prev) {
                                                    return prev ? prev.filter(function(x) { return x !== codStr; }) : [];
                                                });
                                                // Remover centros de custo
                                                setRegiaoCentrosCusto(function(prev) {
                                                    var novo = {...prev};
                                                    delete novo[codStr];
                                                    return novo;
                                                });
                                                // Remover itens adicionados desse cliente
                                                setRegiaoItensAdicionados(function(prev) {
                                                    return prev.filter(function(i) { return String(i.cod_cliente) !== codStr; });
                                                });
                                            }
                                        },
                                        className: "w-4 h-4 accent-purple-600"
                                    }),
                                    React.createElement("span", {className: "text-sm flex-1"}, 
                                        c.cod_cliente + " - " + (il(c.cod_cliente) || c.nome_cliente)
                                    )
                                );
                            })
                        )
                    ),
                    React.createElement("p", {className: "text-xs text-gray-400 mt-1"}, 
                        (regiaoClienteSelecionado?.length || 0) + " cliente(s) selecionado(s)"
                    )
                ),
                // Coluna 2: Centros de Custo dos Clientes Selecionados
                React.createElement("div", null,
                    React.createElement("label", {className: "text-sm font-semibold text-gray-700"}, "üìÅ Centros de Custo"),
                    (regiaoClienteSelecionado && regiaoClienteSelecionado.length > 0) ? 
                    React.createElement("div", {className: "border rounded-lg mt-1 bg-white max-h-64 overflow-y-auto p-2"},
                        regiaoClienteSelecionado.map(function(codCliente) {
                            var cliente = jt.find(function(c) { return String(c.cod_cliente) === codCliente; });
                            var nomeCliente = il(codCliente) || cliente?.nome_cliente || "Cliente " + codCliente;
                            var centros = regiaoCentrosCusto[codCliente] || [];
                            
                            return React.createElement("div", {key: codCliente, className: "mb-3 pb-3 border-b last:border-b-0"},
                                React.createElement("div", {className: "font-medium text-purple-700 text-sm mb-2"}, 
                                    "üè¢ " + codCliente + " - " + nomeCliente
                                ),
                                // Op√ß√£o "Todos os centros"
                                React.createElement("label", {className: "flex items-center gap-2 p-1 hover:bg-gray-50 rounded cursor-pointer ml-2"},
                                    React.createElement("input", {
                                        type: "checkbox",
                                        onChange: function() {
                                            var novoItem = {
                                                cod_cliente: parseInt(codCliente),
                                                nome_cliente: nomeCliente,
                                                centro_custo: null
                                            };
                                            var existe = regiaoItensAdicionados.some(function(i) { 
                                                return i.cod_cliente === novoItem.cod_cliente && i.centro_custo === null; 
                                            });
                                            if (!existe) {
                                                setRegiaoItensAdicionados(function(prev) { return [...prev, novoItem]; });
                                                ja("‚úÖ " + codCliente + " - Todos CC adicionado", "success");
                                            }
                                        },
                                        className: "w-3 h-3"
                                    }),
                                    React.createElement("span", {className: "text-xs font-medium text-green-700"}, "üìå TODOS os centros")
                                ),
                                // Lista de centros
                                centros.length > 0 ? centros.map(function(cc) {
                                    return React.createElement("label", {
                                        key: cc.centro_custo,
                                        className: "flex items-center gap-2 p-1 hover:bg-gray-50 rounded cursor-pointer ml-2"
                                    },
                                        React.createElement("input", {
                                            type: "checkbox",
                                            onChange: function() {
                                                var novoItem = {
                                                    cod_cliente: parseInt(codCliente),
                                                    nome_cliente: nomeCliente,
                                                    centro_custo: cc.centro_custo
                                                };
                                                var existe = regiaoItensAdicionados.some(function(i) { 
                                                    return i.cod_cliente === novoItem.cod_cliente && i.centro_custo === novoItem.centro_custo; 
                                                });
                                                if (!existe) {
                                                    setRegiaoItensAdicionados(function(prev) { return [...prev, novoItem]; });
                                                    ja("‚úÖ " + cc.centro_custo + " adicionado", "success");
                                                }
                                            },
                                            className: "w-3 h-3"
                                        }),
                                        React.createElement("span", {className: "text-xs"}, cc.centro_custo),
                                        React.createElement("span", {className: "text-xs text-gray-400 ml-auto"}, cc.total_entregas)
                                    );
                                }) : React.createElement("p", {className: "text-xs text-gray-400 ml-4"}, "Sem centros de custo")
                            );
                        })
                    ) :
                    React.createElement("div", {className: "border rounded-lg mt-1 p-4 bg-white text-center text-gray-400 text-sm"},
                        "Selecione clientes √† esquerda para ver os centros de custo"
                    )
                )
            ),
            // Lista de itens adicionados
            regiaoItensAdicionados.length > 0 && React.createElement("div", {className: "mb-4"},
                React.createElement("label", {className: "text-sm font-semibold text-gray-700 mb-2 block"}, 
                    "‚úÖ Itens na Regi√£o (" + regiaoItensAdicionados.length + ")"
                ),
                React.createElement("div", {className: "flex flex-wrap gap-2"},
                    regiaoItensAdicionados.map(function(item, idx) {
                        return React.createElement("span", {
                            key: idx,
                            className: "inline-flex items-center gap-1 px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm"
                        },
                            React.createElement("span", null, 
                                item.cod_cliente + " - " + (item.centro_custo || "Todos CC")
                            ),
                            React.createElement("button", {
                                onClick: function() {
                                    setRegiaoItensAdicionados(function(prev) {
                                        return prev.filter(function(_, i) { return i !== idx; });
                                    });
                                },
                                className: "ml-1 text-purple-600 hover:text-red-600 font-bold"
                            }, "√ó")
                        );
                    })
                )
            ),
            // Bot√£o criar regi√£o
            React.createElement("button", {
                onClick: async function() {
                    if (!regiaoNome.trim()) {
                        return ja("Digite o nome da regi√£o", "error");
                    }
                    if (regiaoItensAdicionados.length === 0) {
                        return ja("Adicione pelo menos um cliente/centro de custo", "error");
                    }
                    try {
                        var url = regiaoEditando 
                            ? API_URL + "/bi/regioes/" + regiaoEditando 
                            : API_URL + "/bi/regioes";
                        var method = regiaoEditando ? "PUT" : "POST";
                        var resp = await fetch(url, {
                            method: method,
                            headers: {"Content-Type": "application/json"},
                            body: JSON.stringify({
                                nome: regiaoNome.trim(),
                                itens: regiaoItensAdicionados.map(function(i) {
                                    return { cod_cliente: i.cod_cliente, centro_custo: i.centro_custo };
                                })
                            })
                        });
                        var data = await resp.json();
                        if (data.success) {
                            ja(regiaoEditando ? "‚úÖ Regi√£o atualizada!" : "‚úÖ Regi√£o criada!", "success");
                            setRegiaoNome("");
                            setRegiaoClienteSelecionado([]);
                            setRegiaoCentrosCusto({});
                            setRegiaoItensAdicionados([]);
                            setRegiaoEditando(null);
                            pl(); // Recarregar regi√µes
                        } else {
                            ja("‚ùå Erro: " + data.error, "error");
                        }
                    } catch(err) {
                        ja("Erro ao salvar regi√£o", "error");
                    }
                },
                className: "px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700"
            }, regiaoEditando ? "üíæ Atualizar Regi√£o" : "‚ûï Criar Regi√£o")), 0 === aa.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-4 bg-gray-50 rounded-lg"
            }, "Nenhuma regi√£o configurada") : React.createElement("div", {
                className: "space-y-3"
            }, aa.map(e => {
                // Suporta formato antigo (array de n√∫meros) e novo (array de objetos)
                var itens = (e.clientes || []).map(function(item) {
                    if (typeof item === 'number') {
                        // Formato antigo
                        return { cod_cliente: item, centro_custo: null };
                    }
                    return item;
                });
                var totalItens = itens.length;
                var clientesUnicos = [...new Set(itens.map(function(i) { return i.cod_cliente; }))];
                
                return React.createElement("div", {
                    key: e.id,
                    className: "border border-blue-200 rounded-lg p-4 bg-blue-50"
                }, React.createElement("div", {
                    className: "flex justify-between items-start mb-2"
                }, React.createElement("div", null, React.createElement("h3", {
                    className: "font-bold text-blue-900"
                }, e.nome), React.createElement("p", {
                    className: "text-sm text-blue-600"
                }, clientesUnicos.length, " cliente(s), ", totalItens, " item(ns)")), 
                // Bot√µes editar e excluir
                React.createElement("div", {className: "flex gap-2"},
                    // Bot√£o editar
                    React.createElement("button", {
                        onClick: async function() {
                            setRegiaoEditando(e.id);
                            setRegiaoNome(e.nome);
                            var itensParaEditar = itens.map(function(i) {
                                var cliente = jt.find(function(c) { return c.cod_cliente === i.cod_cliente; });
                                return {
                                    cod_cliente: i.cod_cliente,
                                    nome_cliente: il(i.cod_cliente) || cliente?.nome_cliente || "Cliente " + i.cod_cliente,
                                    centro_custo: i.centro_custo
                                };
                            });
                            setRegiaoItensAdicionados(itensParaEditar);
                            var clientesCods = [...new Set(itens.map(function(i) { return String(i.cod_cliente); }))];
                            setRegiaoClienteSelecionado(clientesCods);
                            var novosCC = {};
                            for (var cod of clientesCods) {
                                try {
                                    var resp = await fetch(API_URL + "/bi/centros-custo/" + cod);
                                    var data = await resp.json();
                                    novosCC[cod] = data || [];
                                } catch(err) {
                                    novosCC[cod] = [];
                                }
                            }
                            setRegiaoCentrosCusto(novosCC);
                            ja("üìù Editando regi√£o: " + e.nome, "success");
                        },
                        className: "text-blue-500 hover:text-blue-700 p-1",
                        title: "Editar regi√£o"
                    }, "‚úèÔ∏è"),
                    // Bot√£o excluir
                    React.createElement("button", {
                        onClick: async function() {
                            if (confirm("Excluir a regi√£o '" + e.nome + "'?")) {
                                try {
                                    var resp = await fetch(API_URL + "/bi/regioes/" + e.id, {method: "DELETE"});
                                    if (resp.ok) {
                                        ja("‚úÖ Regi√£o exclu√≠da!", "success");
                                        pl();
                                    }
                                } catch (err) {
                                    ja("Erro ao excluir", "error");
                                }
                            }
                        },
                        className: "text-red-500 hover:text-red-700 p-1",
                        title: "Excluir regi√£o"
                    }, "üóëÔ∏è")
                )), React.createElement("div", {
                    className: "flex flex-wrap gap-1"
                }, itens.map(function(item, idx) {
                    var cliente = jt.find(function(c) { return c.cod_cliente === item.cod_cliente; });
                    var nomeCliente = il(item.cod_cliente) || cliente?.nome_cliente || "";
                    return React.createElement("span", {
                        key: idx,
                        className: "text-xs bg-white border border-blue-300 px-2 py-0.5 rounded"
                    }, item.cod_cliente, " - ", item.centro_custo || nomeCliente || "Todos CC");
                })));
            })))),
            
            // ========== SE√á√ÉO 2: M√ÅSCARAS (Dropdown) ==========
            React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                React.createElement("button", {
                    onClick: function() { setConfigSecaoAberta(configSecaoAberta === "mascaras" ? "" : "mascaras"); },
                    className: "w-full px-6 py-4 flex items-center justify-between bg-gradient-to-r from-purple-50 to-white hover:from-purple-100 transition-all"
                },
                    React.createElement("div", {className: "flex items-center gap-3"},
                        React.createElement("span", {className: "text-2xl"}, "üè∑Ô∏è"),
                        React.createElement("div", {className: "text-left"},
                            React.createElement("h2", {className: "text-lg font-bold text-purple-900"}, "M√°scaras de Clientes"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, ea.length + " m√°scara(s) configurada(s)")
                        )
                    ),
                    React.createElement("span", {className: "text-2xl text-purple-600 transition-transform " + (configSecaoAberta === "mascaras" ? "rotate-180" : "")}, "‚ñº")
                ),
                configSecaoAberta === "mascaras" && React.createElement("div", {className: "p-6 border-t"},
            React.createElement("p", {
                className: "text-sm text-gray-500 mb-4"
            }, "Defina apelidos para os c√≥digos de clientes. Esses apelidos aparecer√£o nos filtros e visualiza√ß√µes."), React.createElement("div", {
                className: "flex gap-3 mb-4 flex-wrap"
            }, React.createElement("select", {
                id: "bi-mascara-cliente",
                className: "flex-1 min-w-48 px-3 py-2 border rounded-lg"
            }, React.createElement("option", {
                value: ""
            }, "-- Selecione um Cliente --"), jt.map(e => React.createElement("option", {
                key: e.cod_cliente,
                value: `${e.cod_cliente}:${e.nome_cliente}`
            }, e.cod_cliente, " - ", e.nome_cliente))), React.createElement("input", {
                type: "text",
                id: "bi-mascara-nome",
                placeholder: "Digite a m√°scara (apelido)",
                className: "flex-1 min-w-48 px-3 py-2 border rounded-lg"
            }), React.createElement("button", {
                onClick: () => {
                    const e = document.getElementById("bi-mascara-cliente").value,
                        t = document.getElementById("bi-mascara-nome").value.trim();
                    if (!e || !t) return ja("Selecione um cliente e digite a m√°scara", "error");
                    const [a] = e.split(":");
                    (async (e, t) => {
                        try {
                            const a = await fetch(`${API_URL}/bi/mascaras`, {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        cod_cliente: e,
                                        mascara: t
                                    })
                                }),
                                l = await a.json();
                            l.success ? (ja("‚úÖ M√°scara salva!", "success"), dl()) : ja("‚ùå Erro: " + l.error, "error")
                        } catch (e) {
                            ja("Erro ao salvar m√°scara", "error")
                        }
                    })(a, t), document.getElementById("bi-mascara-cliente").value = "", document.getElementById("bi-mascara-nome").value = ""
                },
                className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 whitespace-nowrap"
            }, "üíæ Salvar M√°scara")), 0 === ea.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-4 bg-gray-50 rounded-lg"
            }, "Nenhuma m√°scara configurada") : React.createElement("div", {
                className: "space-y-2"
            }, ea.map(e => React.createElement("div", {
                key: e.id,
                className: "flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200"
            }, React.createElement("div", null, React.createElement("span", {
                className: "font-mono bg-purple-200 px-2 py-0.5 rounded text-purple-900"
            }, e.cod_cliente), React.createElement("span", {
                className: "mx-2"
            }, "‚Üí"), React.createElement("span", {
                className: "font-semibold text-purple-900"
            }, e.mascara)), React.createElement("button", {
                onClick: () => (async e => {
                    if (confirm("Excluir esta m√°scara?")) try {
                        (await fetch(`${API_URL}/bi/mascaras/${e}`, {
                            method: "DELETE"
                        })).ok && (ja("‚úÖ M√°scara exclu√≠da!", "success"), dl())
                    } catch (e) {
                        ja("Erro ao excluir", "error")
                    }
                })(e.id),
                className: "text-red-500 hover:text-red-700 p-1"
            }, "üóëÔ∏è")))))),
            
            // ========== SE√á√ÉO 3: PRAZOS (Dropdown) ==========
            React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                React.createElement("button", {
                    onClick: function() { setConfigSecaoAberta(configSecaoAberta === "prazos" ? "" : "prazos"); },
                    className: "w-full px-6 py-4 flex items-center justify-between bg-gradient-to-r from-purple-50 to-white hover:from-purple-100 transition-all"
                },
                    React.createElement("div", {className: "flex items-center gap-3"},
                        React.createElement("span", {className: "text-2xl"}, "‚è±Ô∏è"),
                        React.createElement("div", {className: "text-left"},
                            React.createElement("h2", {className: "text-lg font-bold text-purple-900"}, "Configura√ß√£o de Prazos"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, yt.length + " prazo(s) espec√≠fico(s)")
                        )
                    ),
                    React.createElement("span", {className: "text-2xl text-purple-600 transition-transform " + (configSecaoAberta === "prazos" ? "rotate-180" : "")}, "‚ñº")
                ),
                configSecaoAberta === "prazos" && React.createElement("div", {className: "p-6 border-t"},
            React.createElement("h3", {
                className: "font-bold text-purple-800 mb-2"
            }, "‚öôÔ∏è Prazo Padr√£o"), React.createElement("p", {
                className: "text-sm text-gray-500 mb-4"
            }, "Usado para clientes/centros sem configura√ß√£o espec√≠fica"), React.createElement("div", {
                className: "space-y-3 mb-4"
            }, fa.map((e, t) => React.createElement("div", {
                key: t,
                className: "flex items-center gap-2 p-3 bg-purple-50 rounded-lg flex-wrap"
            }, React.createElement("span", {
                className: "text-sm font-medium"
            }, "De"), React.createElement("input", {
                type: "number",
                value: e.km_min,
                onChange: e => {
                    const a = [...fa];
                    a[t].km_min = Number(e.target.value), Na(a)
                },
                className: "w-20 px-2 py-1 border rounded text-center",
                min: "0"
            }), React.createElement("span", {
                className: "text-sm font-medium"
            }, "at√©"), React.createElement("input", {
                type: "number",
                value: e.km_max || "",
                onChange: e => {
                    const a = [...fa];
                    a[t].km_max = e.target.value ? Number(e.target.value) : null, Na(a)
                },
                placeholder: "‚àû",
                className: "w-20 px-2 py-1 border rounded text-center",
                min: "0"
            }), React.createElement("span", {
                className: "text-sm font-medium"
            }, "km ‚Üí"), React.createElement("input", {
                type: "number",
                value: e.prazo_minutos,
                onChange: e => {
                    const a = [...fa];
                    a[t].prazo_minutos = Number(e.target.value), Na(a)
                },
                className: "w-20 px-2 py-1 border rounded text-center",
                min: "1"
            }), React.createElement("span", {
                className: "text-sm font-medium"
            }, "minutos"), fa.length > 1 && React.createElement("button", {
                onClick: () => Na(fa.filter((e, a) => a !== t)),
                className: "text-red-500 hover:text-red-700 ml-2"
            }, "üóëÔ∏è")))), React.createElement("div", {
                className: "flex gap-3"
            }, React.createElement("button", {
                onClick: () => {
                    const e = fa[fa.length - 1];
                    Na([...fa, {
                        km_min: e.km_max || 0,
                        km_max: null,
                        prazo_minutos: 60
                    }])
                },
                className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "‚ûï Adicionar Faixa"), React.createElement("button", {
                onClick: () => (async e => {
                    try {
                        const t = await fetch(`${API_URL}/bi/prazo-padrao`, {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    faixas: e
                                })
                            }),
                            a = await t.json();
                        a.success ? (ja("‚úÖ Prazo padr√£o salvo!", "success"), al(), xl()) : ja("‚ùå Erro: " + a.error, "error")
                    } catch (e) {
                        ja("Erro ao salvar", "error")
                    }
                })(fa),
                className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "üíæ Salvar Prazo Padr√£o"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h2", {
                className: "text-xl font-bold text-purple-900 mb-2"
            }, "‚ûï Prazo por Cliente ou Centro de Custo"), React.createElement("p", {
                className: "text-sm text-gray-500 mb-4"
            }, "Configure prazos espec√≠ficos que sobrescrevem o padr√£o"), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("label", {
                className: "text-sm text-gray-600 font-medium"
            }, "Selecionar Cliente ou Centro de Custo"), React.createElement("select", {
                id: "bi-novo-codigo",
                className: "w-full px-3 py-2 border rounded-lg mt-1"
            }, React.createElement("option", {
                value: ""
            }, "-- Selecione --"), React.createElement("optgroup", {
                label: "üë§ Clientes"
            }, jt.map(e => React.createElement("option", {
                key: `cli-${e.cod_cliente}`,
                value: `cliente:${e.cod_cliente}:${il(e.cod_cliente)||e.nome_cliente}`
            }, il(e.cod_cliente) || e.nome_cliente, " (C√≥d: ", e.cod_cliente, ")"))), React.createElement("optgroup", {
                label: "üè¢ Centros de Custo"
            }, At.map(e => React.createElement("option", {
                key: `cc-${e.centro_custo}`,
                value: `centro_custo:${e.centro_custo}:${e.centro_custo}`
            }, e.centro_custo))))), React.createElement("div", {
                className: "space-y-3 mb-4"
            }, ya.map((e, t) => React.createElement("div", {
                key: t,
                className: "flex items-center gap-2 p-3 bg-gray-50 rounded-lg flex-wrap"
            }, React.createElement("span", {
                className: "text-sm font-medium"
            }, "De"), React.createElement("input", {
                type: "number",
                value: e.km_min,
                onChange: e => {
                    const a = [...ya];
                    a[t].km_min = Number(e.target.value), va(a)
                },
                className: "w-20 px-2 py-1 border rounded text-center",
                min: "0"
            }), React.createElement("span", {
                className: "text-sm font-medium"
            }, "at√©"), React.createElement("input", {
                type: "number",
                value: e.km_max || "",
                onChange: e => {
                    const a = [...ya];
                    a[t].km_max = e.target.value ? Number(e.target.value) : null, va(a)
                },
                placeholder: "‚àû",
                className: "w-20 px-2 py-1 border rounded text-center",
                min: "0"
            }), React.createElement("span", {
                className: "text-sm font-medium"
            }, "km ‚Üí"), React.createElement("input", {
                type: "number",
                value: e.prazo_minutos,
                onChange: e => {
                    const a = [...ya];
                    a[t].prazo_minutos = Number(e.target.value), va(a)
                },
                className: "w-20 px-2 py-1 border rounded text-center",
                min: "1"
            }), React.createElement("span", {
                className: "text-sm font-medium"
            }, "minutos"), ya.length > 1 && React.createElement("button", {
                onClick: () => va(ya.filter((e, a) => a !== t)),
                className: "text-red-500 hover:text-red-700 ml-2"
            }, "üóëÔ∏è")))), React.createElement("div", {
                className: "flex gap-3"
            }, React.createElement("button", {
                onClick: () => {
                    const e = ya[ya.length - 1];
                    va([...ya, {
                        km_min: e.km_max || 0,
                        km_max: null,
                        prazo_minutos: 60
                    }])
                },
                className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "‚ûï Adicionar Faixa"), React.createElement("button", {
                onClick: () => {
                    const e = document.getElementById("bi-novo-codigo").value;
                    if (!e) return ja("Selecione um cliente ou centro", "error");
                    const [t, a, l] = e.split(":");
                    (async (e, t, a, l) => {
                        try {
                            const r = await fetch(`${API_URL}/bi/prazos`, {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        tipo: e,
                                        codigo: t,
                                        nome: a,
                                        faixas: l
                                    })
                                }),
                                o = await r.json();
                            o.success ? (ja("‚úÖ Prazo salvo!", "success"), tl(), xl()) : ja("‚ùå Erro: " + o.error, "error")
                        } catch (e) {
                            ja("Erro ao salvar", "error")
                        }
                    })(t, a, l, ya), va([{
                        km_min: 0,
                        km_max: 15,
                        prazo_minutos: 45
                    }]), document.getElementById("bi-novo-codigo").value = ""
                },
                className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "üíæ Salvar Configura√ß√£o"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h2", {
                className: "text-xl font-bold text-purple-900 mb-4"
            }, "üìã Prazos Configurados (", yt.length, ")"), 0 === yt.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Nenhum prazo espec√≠fico configurado") : React.createElement("div", {
                className: "space-y-3"
            }, yt.map(e => React.createElement("div", {
                key: e.id,
                className: "border border-purple-200 rounded-lg p-4 bg-purple-50"
            }, React.createElement("div", {
                className: "flex justify-between items-start mb-3"
            }, React.createElement("div", null, React.createElement("span", {
                className: "text-xs px-2 py-0.5 rounded " + ("cliente" === e.tipo ? "bg-blue-100 text-blue-700" : "bg-green-100 text-green-700")
            }, "cliente" === e.tipo ? "üë§ Cliente" : "üè¢ Centro de Custo"), React.createElement("p", {
                className: "font-semibold mt-1 text-purple-900"
            }, e.nome || e.codigo)), React.createElement("button", {
                onClick: () => (async e => {
                    if (confirm("Remover esta configura√ß√£o de prazo?")) try {
                        await fetch(`${API_URL}/bi/prazos/${e}`, {
                            method: "DELETE"
                        }), ja("‚úÖ Removido!", "success"), tl()
                    } catch (e) {
                        ja("Erro ao remover", "error")
                    }
                })(e.id),
                className: "text-red-500 hover:text-red-700 p-1"
            }, "üóëÔ∏è")), React.createElement("div", {
                className: "flex flex-wrap gap-2"
            }, e.faixas && e.faixas.map((e, t) => React.createElement("span", {
                key: t,
                className: "bg-white border border-purple-300 px-3 py-1 rounded text-sm"
            }, e.km_min, " - ", e.km_max || "‚àû", " km ‚Üí ", React.createElement("strong", null, e.prazo_minutos, " min")))))))))),
            
            // ========== SE√á√ÉO 4: PRAZOS PROFISSIONAIS (Dropdown) - APENAS NA ABA CONFIG ==========
            "config" === Et && React.createElement("div", {className: "bg-white rounded-xl shadow overflow-hidden"},
                React.createElement("button", {
                    onClick: function() { setConfigSecaoAberta(configSecaoAberta === "prazos_prof" ? "" : "prazos_prof"); },
                    className: "w-full px-6 py-4 flex items-center justify-between bg-gradient-to-r from-orange-50 to-white hover:from-orange-100 transition-all"
                },
                    React.createElement("div", {className: "flex items-center gap-3"},
                        React.createElement("span", {className: "text-2xl"}, "üë®‚Äçüîß"),
                        React.createElement("div", {className: "text-left"},
                            React.createElement("h2", {className: "text-lg font-bold text-orange-900"}, "Prazo Profissional"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, prazosProfissionais.length + " prazo(s) espec√≠fico(s)")
                        )
                    ),
                    React.createElement("span", {className: "text-2xl text-orange-600 transition-transform " + (configSecaoAberta === "prazos_prof" ? "rotate-180" : "")}, "‚ñº")
                ),
                configSecaoAberta === "prazos_prof" && React.createElement("div", {className: "p-6 border-t"},
                    // Prazo Padr√£o Profissional
                    React.createElement("h3", {
                        className: "font-bold text-orange-800 mb-2"
                    }, "‚öôÔ∏è Prazo Padr√£o Profissional"),
                    React.createElement("p", {
                        className: "text-sm text-gray-500 mb-4"
                    }, "Prazo que o profissional tem para concluir a entrega ap√≥s coletar"),
                    React.createElement("div", {
                        className: "space-y-3 mb-4"
                    }, prazoProfPadrao.map((e, t) => React.createElement("div", {
                        key: t,
                        className: "flex items-center gap-2 p-3 bg-orange-50 rounded-lg flex-wrap"
                    },
                        React.createElement("span", {className: "text-sm font-medium"}, "De"),
                        React.createElement("input", {
                            type: "number",
                            value: e.km_min,
                            onChange: e => {
                                const a = [...prazoProfPadrao];
                                a[t].km_min = Number(e.target.value);
                                setPrazoProfPadrao(a);
                            },
                            className: "w-20 px-2 py-1 border rounded text-center",
                            min: "0"
                        }),
                        React.createElement("span", {className: "text-sm font-medium"}, "at√©"),
                        React.createElement("input", {
                            type: "number",
                            value: e.km_max || "",
                            onChange: e => {
                                const a = [...prazoProfPadrao];
                                a[t].km_max = e.target.value ? Number(e.target.value) : null;
                                setPrazoProfPadrao(a);
                            },
                            placeholder: "‚àû",
                            className: "w-20 px-2 py-1 border rounded text-center",
                            min: "0"
                        }),
                        React.createElement("span", {className: "text-sm font-medium"}, "km ‚Üí"),
                        React.createElement("input", {
                            type: "number",
                            value: e.prazo_minutos,
                            onChange: e => {
                                const a = [...prazoProfPadrao];
                                a[t].prazo_minutos = Number(e.target.value);
                                setPrazoProfPadrao(a);
                            },
                            className: "w-20 px-2 py-1 border rounded text-center",
                            min: "1"
                        }),
                        React.createElement("span", {className: "text-sm font-medium"}, "minutos"),
                        prazoProfPadrao.length > 1 && React.createElement("button", {
                            onClick: () => setPrazoProfPadrao(prazoProfPadrao.filter((e, a) => a !== t)),
                            className: "text-red-500 hover:text-red-700 ml-2"
                        }, "üóëÔ∏è")
                    ))),
                    React.createElement("div", {className: "flex gap-3 mb-6"},
                        React.createElement("button", {
                            onClick: () => {
                                const e = prazoProfPadrao[prazoProfPadrao.length - 1];
                                setPrazoProfPadrao([...prazoProfPadrao, {
                                    km_min: e.km_max || 0,
                                    km_max: null,
                                    prazo_minutos: 60
                                }]);
                            },
                            className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
                        }, "‚ûï Adicionar Faixa"),
                        React.createElement("button", {
                            onClick: async () => {
                                try {
                                    const resp = await fetch(`${API_URL}/bi/prazo-prof-padrao`, {
                                        method: "POST",
                                        headers: {"Content-Type": "application/json"},
                                        body: JSON.stringify({faixas: prazoProfPadrao})
                                    });
                                    const data = await resp.json();
                                    if (data.success) {
                                        ja("‚úÖ Prazo profissional padr√£o salvo!", "success");
                                    } else {
                                        ja("‚ùå Erro: " + data.error, "error");
                                    }
                                } catch (err) {
                                    ja("Erro ao salvar", "error");
                                }
                            },
                            className: "px-4 py-2 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700"
                        }, "üíæ Salvar Prazo Padr√£o")
                    ),
                    
                    // Prazo por Cliente/Centro
                    React.createElement("div", {className: "bg-white rounded-xl shadow p-6 border border-orange-200"},
                        React.createElement("h2", {className: "text-xl font-bold text-orange-900 mb-2"}, "‚ûï Prazo Prof. por Cliente ou Centro de Custo"),
                        React.createElement("p", {className: "text-sm text-gray-500 mb-4"}, "Configure prazos profissionais espec√≠ficos que sobrescrevem o padr√£o"),
                        React.createElement("div", {className: "mb-4"},
                            React.createElement("label", {className: "text-sm text-gray-600 font-medium"}, "Selecionar Cliente ou Centro de Custo"),
                            React.createElement("select", {
                                id: "bi-prazo-prof-codigo",
                                className: "w-full px-3 py-2 border rounded-lg mt-1"
                            },
                                React.createElement("option", {value: ""}, "-- Selecione --"),
                                React.createElement("optgroup", {label: "üë§ Clientes"},
                                    jt.map(e => React.createElement("option", {
                                        key: `cli-prof-${e.cod_cliente}`,
                                        value: `cliente:${e.cod_cliente}:${il(e.cod_cliente)||e.nome_cliente}`
                                    }, il(e.cod_cliente) || e.nome_cliente, " (C√≥d: ", e.cod_cliente, ")"))
                                ),
                                React.createElement("optgroup", {label: "üè¢ Centros de Custo"},
                                    At.map(e => React.createElement("option", {
                                        key: `cc-prof-${e.centro_custo}`,
                                        value: `centro_custo:${e.centro_custo}:${e.centro_custo}`
                                    }, e.centro_custo))
                                )
                            )
                        ),
                        React.createElement("div", {className: "space-y-3 mb-4"},
                            prazoProfNovo.map((e, t) => React.createElement("div", {
                                key: t,
                                className: "flex items-center gap-2 p-3 bg-gray-50 rounded-lg flex-wrap"
                            },
                                React.createElement("span", {className: "text-sm font-medium"}, "De"),
                                React.createElement("input", {
                                    type: "number",
                                    value: e.km_min,
                                    onChange: e => {
                                        const a = [...prazoProfNovo];
                                        a[t].km_min = Number(e.target.value);
                                        setPrazoProfNovo(a);
                                    },
                                    className: "w-20 px-2 py-1 border rounded text-center",
                                    min: "0"
                                }),
                                React.createElement("span", {className: "text-sm font-medium"}, "at√©"),
                                React.createElement("input", {
                                    type: "number",
                                    value: e.km_max || "",
                                    onChange: e => {
                                        const a = [...prazoProfNovo];
                                        a[t].km_max = e.target.value ? Number(e.target.value) : null;
                                        setPrazoProfNovo(a);
                                    },
                                    placeholder: "‚àû",
                                    className: "w-20 px-2 py-1 border rounded text-center",
                                    min: "0"
                                }),
                                React.createElement("span", {className: "text-sm font-medium"}, "km ‚Üí"),
                                React.createElement("input", {
                                    type: "number",
                                    value: e.prazo_minutos,
                                    onChange: e => {
                                        const a = [...prazoProfNovo];
                                        a[t].prazo_minutos = Number(e.target.value);
                                        setPrazoProfNovo(a);
                                    },
                                    className: "w-20 px-2 py-1 border rounded text-center",
                                    min: "1"
                                }),
                                React.createElement("span", {className: "text-sm font-medium"}, "minutos"),
                                prazoProfNovo.length > 1 && React.createElement("button", {
                                    onClick: () => setPrazoProfNovo(prazoProfNovo.filter((e, a) => a !== t)),
                                    className: "text-red-500 hover:text-red-700 ml-2"
                                }, "üóëÔ∏è")
                            ))
                        ),
                        React.createElement("div", {className: "flex gap-3"},
                            React.createElement("button", {
                                onClick: () => {
                                    const e = prazoProfNovo[prazoProfNovo.length - 1];
                                    setPrazoProfNovo([...prazoProfNovo, {
                                        km_min: e.km_max || 0,
                                        km_max: null,
                                        prazo_minutos: 60
                                    }]);
                                },
                                className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
                            }, "‚ûï Adicionar Faixa"),
                            React.createElement("button", {
                                onClick: async () => {
                                    const sel = document.getElementById("bi-prazo-prof-codigo").value;
                                    if (!sel) return ja("Selecione um cliente ou centro", "error");
                                    const [tipo, codigo, nome] = sel.split(":");
                                    try {
                                        const resp = await fetch(`${API_URL}/bi/prazos-prof`, {
                                            method: "POST",
                                            headers: {"Content-Type": "application/json"},
                                            body: JSON.stringify({
                                                tipo: tipo,
                                                codigo: codigo,
                                                nome: nome,
                                                faixas: prazoProfNovo
                                            })
                                        });
                                        const data = await resp.json();
                                        if (data.success) {
                                            ja("‚úÖ Prazo profissional salvo!", "success");
                                            // Recarregar lista de prazos profissionais
                                            const reloadResp = await fetch(`${API_URL}/bi/prazos-prof`);
                                            const reloadData = await reloadResp.json();
                                            if (reloadData.success) setPrazosProfissionais(reloadData.prazos || []);
                                        } else {
                                            ja("‚ùå Erro: " + data.error, "error");
                                        }
                                    } catch (err) {
                                        ja("Erro ao salvar", "error");
                                    }
                                    setPrazoProfNovo([{km_min: 0, km_max: 15, prazo_minutos: 60}]);
                                    document.getElementById("bi-prazo-prof-codigo").value = "";
                                },
                                className: "px-4 py-2 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700"
                            }, "üíæ Salvar Configura√ß√£o")
                        )
                    ),
                    
                    // Lista de Prazos Profissionais Configurados
                    React.createElement("div", {className: "bg-white rounded-xl shadow p-6 mt-4 border border-orange-200"},
                        React.createElement("h2", {className: "text-xl font-bold text-orange-900 mb-4"}, "üìã Prazos Prof. Configurados (", prazosProfissionais.length, ")"),
                        prazosProfissionais.length === 0 
                            ? React.createElement("p", {className: "text-gray-500 text-center py-8"}, "Nenhum prazo profissional espec√≠fico configurado")
                            : React.createElement("div", {className: "space-y-3"},
                                prazosProfissionais.map(e => React.createElement("div", {
                                    key: e.id,
                                    className: "border border-orange-200 rounded-lg p-4 bg-orange-50"
                                },
                                    React.createElement("div", {className: "flex justify-between items-start mb-3"},
                                        React.createElement("div", null,
                                            React.createElement("span", {
                                                className: "text-xs px-2 py-0.5 rounded " + (e.tipo === "cliente" ? "bg-blue-100 text-blue-700" : "bg-green-100 text-green-700")
                                            }, e.tipo === "cliente" ? "üë§ Cliente" : "üè¢ Centro de Custo"),
                                            React.createElement("p", {className: "font-semibold mt-1 text-orange-900"}, e.nome || e.codigo)
                                        ),
                                        React.createElement("button", {
                                            onClick: async () => {
                                                if (confirm("Remover esta configura√ß√£o de prazo profissional?")) {
                                                    try {
                                                        await fetch(`${API_URL}/bi/prazos-prof/${e.id}`, {method: "DELETE"});
                                                        ja("‚úÖ Removido!", "success");
                                                        // Recarregar lista
                                                        const resp = await fetch(`${API_URL}/bi/prazos-prof`);
                                                        const data = await resp.json();
                                                        if (data.success) setPrazosProfissionais(data.prazos || []);
                                                    } catch (err) {
                                                        ja("Erro ao remover", "error");
                                                    }
                                                }
                                            },
                                            className: "text-red-500 hover:text-red-700 p-1"
                                        }, "üóëÔ∏è")
                                    ),
                                    React.createElement("div", {className: "flex flex-wrap gap-2"},
                                        e.faixas && e.faixas.map((f, idx) => React.createElement("span", {
                                            key: idx,
                                            className: "bg-white border border-orange-300 px-3 py-1 rounded text-sm"
                                        }, f.km_min, " - ", f.km_max || "‚àû", " km ‚Üí ", React.createElement("strong", null, f.prazo_minutos, " min")))
                                    )
                                ))
                            )
                    ),
                    
                    // Bot√£o para recalcular prazos profissionais
                    React.createElement("div", {className: "bg-gradient-to-r from-orange-100 to-yellow-100 rounded-xl p-6 mt-4 border-2 border-orange-300"},
                        React.createElement("h3", {className: "font-bold text-orange-800 mb-2 flex items-center gap-2"}, "üîÑ Recalcular Prazos Profissionais"),
                        React.createElement("p", {className: "text-sm text-gray-600 mb-4"}, "Atualiza o status de prazo profissional para todas as entregas existentes com base nas configura√ß√µes atuais."),
                        React.createElement("button", {
                            onClick: async () => {
                                if (!confirm("Isso ir√° recalcular o prazo profissional de TODAS as entregas.\n\nDeseja continuar?")) return;
                                s(true);
                                setLoadingMessage("Recalculando prazos profissionais...");
                                try {
                                    const resp = await fetch(`${API_URL}/bi/entregas/recalcular-prazo-prof`, {
                                        method: "POST",
                                        headers: {"Content-Type": "application/json"}
                                    });
                                    const data = await resp.json();
                                    if (data.success) {
                                        ja(`‚úÖ Recalculado! ${data.atualizados} entregas (‚úÖ ${data.dentroPrazo} no prazo | ‚ùå ${data.foraPrazo} fora | ‚ö†Ô∏è ${data.semDados} sem dados)`, "success");
                                        // Recarregar dados do dashboard
                                        xl();
                                    } else {
                                        ja("‚ùå Erro: " + data.error, "error");
                                    }
                                } catch (err) {
                                    ja("‚ùå Erro ao recalcular: " + err.message, "error");
                                }
                                s(false);
                            },
                            className: "px-6 py-3 bg-orange-600 text-white rounded-lg font-bold hover:bg-orange-700 shadow-lg hover:shadow-xl transition-all flex items-center gap-2"
                        }, "üîÑ Recalcular Agora")
                    )
                )
            ),
            
            !ft && "dashboard" === Et && React.createElement("div", {
                className: "bg-white rounded-xl shadow p-10 text-center"
            }, React.createElement("p", {
                className: "text-5xl mb-4"
            }, "üìä"), React.createElement("p", {
                className: "text-gray-500"
            }, "Nenhum dado encontrado"), React.createElement("p", {
                className: "text-sm text-gray-400 mt-2"
            }, 'Fa√ßa upload de uma planilha na aba "Upload"')))))
        }
        
        // ========== P√ÅGINA HOME - BEM-VINDO ==========
        if ("home" === Ee && ("admin" === l.role || "admin_master" === l.role || "admin_financeiro" === l.role)) {
            const primeiroNome = (socialProfile?.display_name || l.fullName || "").split(" ")[0];
            
            return React.createElement("div", {
                className: "min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50"
            }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null),
            
            // Modal de notifica√ß√£o de tarefas pendentes
            todoNotifModal && todoPendentesNotif.length > 0 && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
            }, React.createElement("div", {
                className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"
            }, React.createElement("div", {
                className: "bg-gradient-to-r from-orange-500 to-red-500 p-4 text-white"
            }, React.createElement("h2", {className: "text-xl font-bold flex items-center gap-2"}, "‚ö†Ô∏è Aten√ß√£o!"),
                React.createElement("p", {className: "text-orange-100 text-sm"}, "Voc√™ possui tarefas pendentes")
            ), React.createElement("div", {className: "p-4 max-h-60 overflow-y-auto"},
                React.createElement("p", {className: "text-gray-600 mb-3"}, "üìã ", todoPendentesNotif.length, " tarefa(s) precisam da sua aten√ß√£o:"),
                React.createElement("div", {className: "space-y-2"},
                    todoPendentesNotif.slice(0, 5).map(t => React.createElement("div", {
                        key: t.id,
                        className: "bg-orange-50 border-l-4 border-orange-500 p-3 rounded"
                    }, React.createElement("p", {className: "font-semibold text-gray-800"}, t.titulo),
                        t.data_prazo && React.createElement("p", {className: "text-xs text-orange-600"}, "üìÖ Vence: ", new Date(t.data_prazo).toLocaleDateString("pt-BR"))
                    ))
                ),
                todoPendentesNotif.length > 5 && React.createElement("p", {className: "text-sm text-gray-500 mt-2"}, "... e mais ", todoPendentesNotif.length - 5, " tarefa(s)")
            ), React.createElement("div", {className: "flex gap-3 p-4 border-t"},
                React.createElement("button", {
                    onClick: () => setTodoNotifModal(false),
                    className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
                }, "Fechar"),
                React.createElement("button", {
                    onClick: () => { setTodoNotifModal(false); he("todo"); },
                    className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                }, "üìã Ir para Tarefas")
            ))),
            
            // Header
            React.createElement("nav", {
                className: "bg-gradient-to-r from-purple-700 to-indigo-700 shadow-lg"
            }, React.createElement("div", {
                className: "max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"
            }, React.createElement("div", {className: "flex items-center gap-3"},
                socialProfile?.profile_photo ? React.createElement("img", {
                    src: socialProfile.profile_photo,
                    className: "w-12 h-12 rounded-full object-cover border-2 border-white/50"
                }) : React.createElement("div", {
                    className: "w-12 h-12 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold text-xl border-2 border-white/50"
                }, primeiroNome?.charAt(0)?.toUpperCase() || "?"),
                React.createElement("div", null,
                    React.createElement("h1", {className: "text-xl font-bold text-white"}, "Central Tutts"),
                    React.createElement("p", {className: "text-purple-200 text-sm"}, socialProfile?.display_name || l.fullName)
                )
            ), React.createElement("div", {className: "flex items-center gap-2"},
                React.createElement("button", {
                    onClick: () => o(null),
                    className: "px-4 py-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-all"
                }, "Sair")
            ))),
            
            // Conte√∫do Principal
            React.createElement("div", {className: "max-w-4xl mx-auto px-4 py-12"},
                // Sauda√ß√£o
                React.createElement("div", {className: "text-center mb-12"},
                    React.createElement("h1", {
                        className: "text-4xl md:text-5xl font-bold text-gray-800 mb-4"
                    }, getSaudacao(), ", ", React.createElement("span", {className: "text-purple-600"}, primeiroNome), "!"),
                    React.createElement("p", {className: "text-xl text-gray-600 mb-2"}, "Seja bem-vindo(a) √† Central Tutts"),
                    React.createElement("div", {className: "mt-8 p-6 bg-white rounded-2xl shadow-lg border-l-4 border-purple-500"},
                        React.createElement("p", {className: "text-lg text-gray-700 italic"}, "\"", mensagemGentileza, "\""),
                        React.createElement("p", {className: "text-purple-500 mt-2"}, "üíú")
                    )
                ),
                
                // Bot√µes de Acesso R√°pido
                React.createElement("div", {className: "grid grid-cols-2 md:grid-cols-3 gap-6"},
                    // Solicita√ß√µes
                    hasModuleAccess(l, "solicitacoes") &&
                    React.createElement("div", {
                        onClick: () => { he("solicitacoes"); x(e => ({...e, adminTab: "dashboard"})); },
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-purple-300"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-purple-500 to-violet-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                React.createElement("span", {className: "text-3xl"}, "üìã")
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Solicita√ß√µes"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "Gerencie pedidos e ajustes")
                        )
                    ),
                    
                    // Financeiro
                    hasModuleAccess(l, "financeiro") &&
                    React.createElement("div", {
                        onClick: () => { he("financeiro"); x(e => ({...e, finTab: getFirstAllowedTab(l, "financeiro", "home-fin")})); },
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-green-300"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-green-500 to-emerald-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                React.createElement("span", {className: "text-3xl"}, "üí∞")
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Financeiro"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "Saques e valores")
                        )
                    ),
                    
                    // Disponibilidade
                    hasModuleAccess(l, "disponibilidade") && 
                    React.createElement("div", {
                        onClick: () => { he("solicitacoes"); x(e => ({...e, adminTab: "disponibilidade"})); },
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-blue-300"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-blue-500 to-cyan-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                React.createElement("span", {className: "text-3xl"}, "üìÖ")
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Disponibilidade"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "Escalas e hor√°rios")
                        )
                    ),
                    
                    // TO-DO
                    hasModuleAccess(l, "todo") &&
                    React.createElement("div", {
                        onClick: () => he("todo"),
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-indigo-300"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-indigo-500 to-purple-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform relative"},
                                React.createElement("span", {className: "text-3xl"}, "üìù"),
                                todoMeuDia.length > 0 && React.createElement("span", {className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"}, todoMeuDia.length > 9 ? "9+" : todoMeuDia.length)
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "TO-DO"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "Suas tarefas")
                        )
                    ),
                    
                    // BI
                    hasModuleAccess(l, "bi") && 
                    React.createElement("div", {
                        onClick: () => he("bi"),
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-orange-300"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-orange-500 to-amber-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                React.createElement("span", {className: "text-3xl"}, "üìä")
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "BI"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "An√°lises e dados")
                        )
                    ),
                    
                    // Social
                    React.createElement("div", {
                        onClick: () => he("social"),
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-pink-300"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-pink-500 to-rose-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-pink-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform relative"},
                                React.createElement("span", {className: "text-3xl"}, "üíú"),
                                socialUnread > 0 && React.createElement("span", {className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"}, socialUnread > 9 ? "9+" : socialUnread)
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Social"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "Comunidade")
                        )
                    ),
                    
                    // Operacional
                    hasModuleAccess(l, "operacional") &&
                    React.createElement("div", {
                        onClick: () => he("operacional"),
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-teal-300"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-teal-500 to-cyan-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-teal-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                React.createElement("span", {className: "text-3xl"}, "üîß")
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Operacional"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "Gest√£o operacional")
                        )
                    ),
                    
                    // Config (admins com permiss√£o)
                    hasModuleAccess(l, "config") && 
                    React.createElement("div", {
                        onClick: () => { he("config"); x(e => ({...e, configTab: getFirstAllowedTab(l, "config", "usuarios")})); },
                        className: "bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group overflow-hidden border border-gray-100 hover:border-gray-400"
                    },
                        React.createElement("div", {className: "h-2 bg-gradient-to-r from-gray-500 to-slate-600"}),
                        React.createElement("div", {className: "p-6"},
                            React.createElement("div", {className: "w-14 h-14 bg-gray-100 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},
                                React.createElement("span", {className: "text-3xl"}, "‚öôÔ∏è")
                            ),
                            React.createElement("h3", {className: "text-lg font-bold text-gray-800 mb-2"}, "Config"),
                            React.createElement("p", {className: "text-sm text-gray-500"}, "Configura√ß√µes")
                        )
                    )
                )
            ),
            
            // Footer
            React.createElement("div", {className: "text-center py-8 text-gray-400 text-sm"},
                "Central Tutts ¬© ", new Date().getFullYear()
            )
            )
        }
        
        const rr = "admin_master" === l.role && ("solicitacoes" === Ee || "disponibilidade" === Ee),
            or = "admin" === l.role;
        return React.createElement("div", {
            className: "min-h-screen bg-gray-50"
        }, i && React.createElement(Toast, i), n && React.createElement(LoadingOverlay, null), u && React.createElement(ImageModal, {
            imageUrl: u,
            onClose: () => g(null)
        }), 
        // Modal de notifica√ß√£o de tarefas pendentes
        todoNotifModal && todoPendentesNotif.length > 0 && React.createElement("div", {
            className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
        }, React.createElement("div", {
            className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden"
        }, React.createElement("div", {
            className: "bg-gradient-to-r from-orange-500 to-red-500 p-4 text-white"
        }, React.createElement("h2", {className: "text-xl font-bold flex items-center gap-2"}, "‚ö†Ô∏è Aten√ß√£o!"),
            React.createElement("p", {className: "text-orange-100 text-sm"}, "Voc√™ possui tarefas pendentes")
        ), React.createElement("div", {className: "p-4 max-h-60 overflow-y-auto"},
            React.createElement("p", {className: "text-gray-600 mb-3"}, "üìã ", todoPendentesNotif.length, " tarefa(s) precisam da sua aten√ß√£o:"),
            React.createElement("div", {className: "space-y-2"},
                todoPendentesNotif.slice(0, 5).map(t => React.createElement("div", {
                    key: t.id,
                    className: "bg-orange-50 border-l-4 border-orange-500 p-3 rounded"
                }, React.createElement("p", {className: "font-semibold text-gray-800"}, t.titulo),
                    t.data_prazo && React.createElement("p", {className: "text-xs text-orange-600"}, "üìÖ Vence: ", new Date(t.data_prazo).toLocaleDateString("pt-BR"))
                ))
            ),
            todoPendentesNotif.length > 5 && React.createElement("p", {className: "text-sm text-gray-500 mt-2"}, "... e mais ", todoPendentesNotif.length - 5, " tarefa(s)")
        ), React.createElement("div", {className: "flex gap-3 p-4 border-t"},
            React.createElement("button", {
                onClick: () => setTodoNotifModal(false),
                className: "flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "Fechar"),
            React.createElement("button", {
                onClick: () => { setTodoNotifModal(false); he("todo"); },
                className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "üìã Ir para Tarefas")
        ))),
        rr ? React.createElement("nav", {
            className: "bg-gradient-to-r from-indigo-900 to-purple-900 shadow-lg"
        }, 
        // Primeira linha - Logo e usu√°rio
        React.createElement("div", {
            className: "max-w-7xl mx-auto px-4 pt-3 pb-2 flex justify-between items-center border-b border-white/10"
        }, React.createElement("div", {
            className: "flex items-center gap-3"
        }, 
        socialProfile?.profile_photo ? React.createElement("img", {
            src: socialProfile.profile_photo,
            className: "w-10 h-10 rounded-full object-cover border-2 border-white/50"
        }) : React.createElement("div", {
            className: "w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold border-2 border-white/50"
        }, l.fullName?.charAt(0)?.toUpperCase() || "?"),
        React.createElement("div", null, React.createElement("h1", {
            className: "text-lg font-bold text-white"
        }, "üëë Admin Master"), React.createElement("p", {
            className: "text-xs text-indigo-200"
        }, socialProfile?.display_name || l.fullName))), 
        React.createElement("div", {
            className: "flex items-center gap-3"
        }, React.createElement("div", {
            className: "flex items-center gap-2 bg-white/10 px-3 py-1 rounded-full"
        }, React.createElement("span", {
            className: "w-2 h-2 rounded-full " + (f ? "bg-yellow-400 animate-pulse" : "bg-green-400")
        }), React.createElement("span", {
            className: "text-xs text-indigo-200"
        }, f ? "Atualizando..." : E ? `${E.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}` : "‚ö° 10s")), React.createElement("button", {
            onClick: ul,
            className: "px-3 py-1.5 bg-white/20 text-white rounded-lg hover:bg-white/30 text-sm font-semibold"
        }, "üîÑ"), React.createElement("button", {
            onClick: () => o(null),
            className: "px-3 py-1.5 text-white hover:bg-white/20 rounded-lg text-sm"
        }, "Sair"))),
        // Segunda linha - Navega√ß√£o
        React.createElement("div", {
            className: "max-w-7xl mx-auto px-4 py-2"
        }, React.createElement("div", {
            className: "flex flex-wrap gap-1"
        }, React.createElement("button", {
            onClick: () => he("home"),
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("home" === Ee ? "bg-white text-purple-900" : "text-white hover:bg-white/10")
        }, "üè† In√≠cio"), 
        hasModuleAccess(l, "solicitacoes") && React.createElement("button", {
            onClick: () => {
                he("solicitacoes"), x(e => ({
                    ...e,
                    adminTab: "dashboard"
                }))
            },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("solicitacoes" === Ee && "disponibilidade" !== p.adminTab ? "bg-white text-purple-900" : "text-white hover:bg-white/10")
        }, "üìã Solicita√ß√µes"), 
        hasModuleAccess(l, "financeiro") && React.createElement("button", {
            onClick: () => { he("financeiro"); x(e => ({...e, finTab: getFirstAllowedTab(l, "financeiro", "home-fin")})); },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("financeiro" === Ee ? "bg-white text-green-800" : "text-white hover:bg-white/10")
        }, "üí∞ Financeiro"), 
        hasModuleAccess(l, "disponibilidade") && React.createElement("button", {
            onClick: () => { he("solicitacoes"); x(e => ({...e, adminTab: "disponibilidade"})); },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("solicitacoes" === Ee && "disponibilidade" === p.adminTab ? "bg-white text-blue-800" : "text-white hover:bg-white/10")
        }, "üìÖ Disponibilidade"), 
        hasModuleAccess(l, "bi") && React.createElement("button", {
            onClick: () => {
                he("bi"), ll(), tl(), al(), pl(), carregarPrazosProf()
            },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("bi" === Ee ? "bg-white text-orange-800" : "text-white hover:bg-white/10")
        }, "üìä BI"), 
        hasModuleAccess(l, "todo") && React.createElement("button", {
            onClick: () => he("todo"),
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("todo" === Ee ? "bg-white text-indigo-800" : "text-white hover:bg-white/10")
        }, "üìù TO-DO"), 
        React.createElement("button", {
            onClick: () => he("social"),
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("social" === Ee ? "bg-white text-pink-800" : "text-white hover:bg-white/10")
        }, "üíú Social"), 
        hasModuleAccess(l, "operacional") && React.createElement("button", {
            onClick: () => he("operacional"),
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("operacional" === Ee ? "bg-white text-teal-800" : "text-white hover:bg-white/10")
        }, "‚öôÔ∏è Operacional"), 
        hasModuleAccess(l, "config") && React.createElement("button", {
            onClick: () => { he("config"); x(e => ({...e, configTab: getFirstAllowedTab(l, "config", "usuarios")})); },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("config" === Ee ? "bg-white text-gray-800" : "text-white hover:bg-white/10")
        }, "üîß Config")))) : or ? React.createElement("nav", {
            className: "bg-purple-900 shadow-lg"
        }, React.createElement("div", {
            className: "max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"
        }, React.createElement("div", {
            className: "flex items-center gap-3"
        }, React.createElement("h1", {
            className: "text-xl font-bold text-white"
        }, "Painel Admin"), React.createElement("div", {
            className: "flex bg-purple-800/50 rounded-lg p-1"
        }, 
        // Solicita√ß√µes - verificar permiss√£o
        hasModuleAccess(l, "solicitacoes") && React.createElement("button", {
            onClick: () => {
                // Determinar primeira aba permitida
                const todasAbas = ["dashboard", "search", "ranking", "relatorios"];
                const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                let primeiraAba = "dashboard";
                for (let i = 0; i < todasAbas.length; i++) {
                    const abaKey = "solicitacoes_" + todasAbas[i];
                    if (abas[abaKey] !== false) {
                        primeiraAba = todasAbas[i];
                        break;
                    }
                }
                he("home");
                x(e => ({...e, adminTab: primeiraAba}));
            },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("solicitacoes" === Ee && "disponibilidade" !== p.adminTab ? "bg-white text-purple-900" : "text-white hover:bg-white/10")
        }, "üìã Solicita√ß√µes"),
        // Financeiro - verificar permiss√£o
        hasModuleAccess(l, "financeiro") && React.createElement("button", {
            onClick: () => {
                // Determinar primeira aba permitida
                const todasAbas = ["solicitacoes", "validacao", "conciliacao", "saldo-plific", "resumo", "gratuidades", "restritos", "indicacoes", "promo-novatos", "loja", "relatorios", "horarios", "avisos", "backup"];
                const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
                let primeiraAba = "solicitacoes";
                for (let i = 0; i < todasAbas.length; i++) {
                    const abaKey = "financeiro_" + todasAbas[i].replace("-", "");
                    if (abas[abaKey] !== false) {
                        primeiraAba = todasAbas[i];
                        break;
                    }
                }
                he("financeiro");
                x(e => ({...e, finTab: primeiraAba}));
            },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("financeiro" === Ee ? "bg-white text-green-800" : "text-white hover:bg-white/10")
        }, "üí∞ Financeiro"),
        // Operacional - verificar permiss√£o
        hasModuleAccess(l, "operacional") && React.createElement("button", {
            onClick: () => he("operacional"),
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("operacional" === Ee ? "bg-white text-teal-800" : "text-white hover:bg-white/10")
        }, "‚öôÔ∏è Operacional"),
        // Disponibilidade - verificar permiss√£o
        hasModuleAccess(l, "disponibilidade") && React.createElement("button", {
            onClick: () => {
                he("home"), x(e => ({
                    ...e,
                    adminTab: "disponibilidade"
                }))
            },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("solicitacoes" === Ee && "disponibilidade" === p.adminTab ? "bg-white text-blue-800" : "text-white hover:bg-white/10")
        }, "üìÖ Disponibilidade"),
        // BI - verificar permiss√£o
        hasModuleAccess(l, "bi") && React.createElement("button", {
            onClick: () => { he("bi"); ll(); tl(); al(); pl(); carregarPrazosProf(); },
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("bi" === Ee ? "bg-white text-orange-800" : "text-white hover:bg-white/10")
        }, "üìä BI"),
        // TO-DO - verificar permiss√£o
        hasModuleAccess(l, "todo") && React.createElement("button", {
            onClick: () => he("todo"),
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("todo" === Ee ? "bg-white text-indigo-800" : "text-white hover:bg-white/10")
        }, "üìã TO-DO"),
        // Social
        React.createElement("button", {
            onClick: () => he("social"),
            className: "px-3 py-1.5 rounded-lg text-sm font-semibold transition-all " + ("social" === Ee ? "bg-white text-purple-800" : "text-white hover:bg-white/10")
        }, "üíú Social")
        ), React.createElement("div", {
            className: "flex items-center gap-2 bg-purple-800/50 px-3 py-1 rounded-full"
        }, React.createElement("span", {
            className: "w-2 h-2 rounded-full " + (f ? "bg-yellow-400 animate-pulse" : "bg-green-400")
        }), React.createElement("span", {
            className: "text-xs text-purple-200"
        }, f ? "Atualizando..." : E ? `${E.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}` : "‚ö° 10s"))), React.createElement("div", {
            className: "flex gap-2"
        }, React.createElement("button", {
            onClick: ul,
            className: "px-4 py-2 bg-purple-700 text-white rounded-lg hover:bg-purple-600 text-sm font-semibold"
        }, "üîÑ Atualizar"), React.createElement("button", {
            onClick: () => o(null),
            className: "px-4 py-2 text-white hover:bg-purple-800 rounded-lg"
        }, "Sair")))) : null, "disponibilidade" !== p.adminTab && React.createElement("div", {
            className: "bg-white border-b sticky top-0 z-10"
        }, React.createElement("div", {
            className: "max-w-7xl mx-auto px-4 flex gap-1 overflow-x-auto"
        }, ["dashboard", "search", "ranking", "relatorios"].filter(function(tabId) {
            // Admin master tem acesso a tudo
            if ("admin_master" === l.role) return true;
            // Verificar permiss√£o da aba
            const abaKey = "solicitacoes_" + tabId;
            const abas = l.permissions && l.permissions.abas ? l.permissions.abas : {};
            // Se n√£o h√° permiss√µes de abas definidas, mostrar todas
            if (Object.keys(abas).length === 0) return true;
            return abas[abaKey] !== false;
        }).map(e => React.createElement("button", {
            key: e,
            onClick: () => x({
                ...p,
                adminTab: e
            }),
            className: "px-4 py-2.5 text-sm font-semibold whitespace-nowrap " + (!p.adminTab && "dashboard" === e || p.adminTab === e ? "text-purple-900 border-b-2 border-purple-900" : "text-gray-600")
        }, "dashboard" === e && "üìä Dashboard", "search" === e && "üîç Busca Detalhada", "ranking" === e && "üèÜ Ranking", "relatorios" === e && "üìà Relat√≥rios", "users" === e && "üë• Usu√°rios")))), React.createElement("div", {
            className: "max-w-7xl mx-auto p-6"
        }, (!p.adminTab || "dashboard" === p.adminTab) && React.createElement(React.Fragment, null, (() => {
            const e = e => {
                    const t = new Date(e),
                        a = t.getDay(),
                        l = t.getHours() + t.getMinutes() / 60;
                    return 0 !== a && (6 === a ? l >= 8 && l < 12 : l >= 9 && l < 18)
                },
                t = new Date;
            t.setHours(0, 0, 0, 0);
            const a = j.filter(e => new Date(e.created_at) >= t),
                l = a.filter(e => "pendente" !== e.status),
                r = j.filter(t => "pendente" !== t.status && t.updated_at && t.created_at && e(t.created_at)).map(e => (new Date(e.updated_at) - new Date(e.created_at)) / 36e5),
                o = r.length > 0 ? r.reduce((e, t) => e + t, 0) / r.length : 0,
                c = j.filter(t => "pendente" === t.status && e(t.created_at) && Date.now() - new Date(t.created_at).getTime() >= 864e5),
                s = 0 === c.length ? 100 : Math.max(0, 100 - 15 * c.length),
                n = o <= 6 ? 100 : o <= 12 ? 80 : o <= 24 ? 60 : 40,
                m = Math.round((s + n) / 2);
            return React.createElement(React.Fragment, null, React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"
            }, React.createElement("div", {
                className: "bg-white p-4 rounded-xl shadow"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Total"), React.createElement("p", {
                className: "text-2xl font-bold text-purple-900"
            }, j.length)), React.createElement("div", {
                className: "bg-white p-4 rounded-xl shadow"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Pendentes"), React.createElement("p", {
                className: "text-2xl font-bold text-yellow-600"
            }, j.filter(e => "pendente" === e.status).length)), React.createElement("div", {
                className: "bg-white p-4 rounded-xl shadow"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Aprovadas"), React.createElement("p", {
                className: "text-2xl font-bold text-green-600"
            }, j.filter(e => "aprovada" === e.status).length)), React.createElement("div", {
                className: "bg-white p-4 rounded-xl shadow"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "Rejeitadas"), React.createElement("p", {
                className: "text-2xl font-bold text-red-600"
            }, j.filter(e => "rejeitada" === e.status).length)), React.createElement("div", {
                className: "bg-white p-4 rounded-xl shadow"
            }, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "üö® Atrasadas (+24h)"), React.createElement("p", {
                className: "text-2xl font-bold " + (c.length > 0 ? "text-red-600 animate-pulse" : "text-gray-400")
            }, c.length))), c.length > 0 && React.createElement("div", {
                className: "bg-red-50 border-2 border-red-400 rounded-xl p-4 mb-6 animate-pulse"
            }, React.createElement("div", {
                className: "flex items-center gap-3"
            }, React.createElement("span", {
                className: "text-3xl"
            }, "üö®"), React.createElement("div", {
                className: "flex-1"
            }, React.createElement("p", {
                className: "text-red-800 font-bold text-lg"
            }, "ATEN√á√ÉO: ", c.length, " solicita√ß√£o(√µes) aguardando h√° mais de 24 horas!"), React.createElement("p", {
                className: "text-red-600 text-sm mt-1"
            }, "OS: ", c.slice(0, 5).map(e => e.ordemServico).join(", "), c.length > 5 ? "..." : "")))), React.createElement("div", {
                className: "bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl shadow-lg p-6 mb-6 text-white"
            }, React.createElement("div", {
                className: "flex flex-col md:flex-row items-center gap-6"
            }, React.createElement("div", {
                className: "relative w-28 h-28"
            }, React.createElement("svg", {
                className: "w-28 h-28 transform -rotate-90"
            }, React.createElement("circle", {
                cx: "56",
                cy: "56",
                r: "48",
                stroke: "rgba(255,255,255,0.2)",
                strokeWidth: "10",
                fill: "none"
            }), React.createElement("circle", {
                cx: "56",
                cy: "56",
                r: "48",
                stroke: m >= 80 ? "#10b981" : m >= 50 ? "#f59e0b" : "#ef4444",
                strokeWidth: "10",
                fill: "none",
                strokeDasharray: 3.02 * m + " 302",
                strokeLinecap: "round"
            })), React.createElement("div", {
                className: "absolute inset-0 flex flex-col items-center justify-center"
            }, React.createElement("span", {
                className: "text-2xl font-bold"
            }, m), React.createElement("span", {
                className: "text-xs opacity-70"
            }, "SCORE"))), React.createElement("div", {
                className: "flex-1 grid grid-cols-2 md:grid-cols-4 gap-4"
            }, React.createElement("div", {
                className: "bg-white/10 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-white/70 text-xs"
            }, "Hoje"), React.createElement("p", {
                className: "text-xl font-bold"
            }, a.length), React.createElement("p", {
                className: "text-xs text-white/60"
            }, l.length, " processadas")), React.createElement("div", {
                className: "bg-white/10 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-white/70 text-xs"
            }, "Tempo M√©dio"), React.createElement("p", {
                className: "text-xl font-bold"
            }, o < 1 ? `${Math.round(60*o)}min` : `${o.toFixed(1)}h`), React.createElement("p", {
                className: "text-xs " + (o <= 12 ? "text-green-300" : o <= 24 ? "text-yellow-300" : "text-red-300")
            }, o <= 6 ? "‚úÖ Excelente" : o <= 12 ? "‚úÖ Bom" : o <= 24 ? "‚ö†Ô∏è Regular" : "üö® Lento")), React.createElement("div", {
                className: "bg-white/10 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-white/70 text-xs"
            }, "Pendentes"), React.createElement("p", {
                className: "text-xl font-bold"
            }, j.filter(e => "pendente" === e.status).length), React.createElement("p", {
                className: "text-xs text-white/60"
            }, "aguardando")), React.createElement("div", {
                className: "bg-white/10 rounded-lg p-3 text-center"
            }, React.createElement("p", {
                className: "text-white/70 text-xs"
            }, "Prazo (24h)"), React.createElement("p", {
                className: "text-xl font-bold " + (0 === c.length ? "text-green-300" : "text-red-300")
            }, 0 === c.length ? "‚úÖ" : `${c.length} üö®`), React.createElement("p", {
                className: "text-xs text-white/60"
            }, 0 === c.length ? "Nenhum atraso" : "A√ß√£o necess√°ria!"))))))
        })(), React.createElement("div", {
            className: "grid md:grid-cols-2 gap-6 mb-6"
        }, React.createElement(MotivosPieChart, {
            submissions: j
        }), React.createElement(PieChart, {
            data: [{
                label: "‚úì Aprovadas",
                value: j.filter(e => "aprovada" === e.status).length,
                color: "#22c55e"
            }, {
                label: "‚úó Rejeitadas",
                value: j.filter(e => "rejeitada" === e.status).length,
                color: "#ef4444"
            }, {
                label: "‚è≥ Pendentes",
                value: j.filter(e => "pendente" === e.status).length,
                color: "#fbbf24"
            }],
            title: "üìà Status das Solicita√ß√µes"
        })), React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-semibold mb-4"
        }, "Aguardando Valida√ß√£o"), React.createElement("div", {
            className: "mb-4 flex flex-wrap gap-2"
        }, ["all", "atrasados", "retorno", "ponto1", "pedagio"].map(e => React.createElement("button", {
            key: e,
            onClick: () => x({
                ...p,
                pendingFilter: e
            }),
            className: "px-4 py-2 rounded-lg font-semibold " + ((p.pendingFilter || "all") === e ? "atrasados" === e ? "bg-red-600 text-white" : "bg-purple-600 text-white" : "bg-gray-100")
        }, "all" === e && `üìã Todos (${j.filter(e=>"pendente"===e.status).length})`, "atrasados" === e && `üö® Atrasados (${j.filter(e=>"pendente"===e.status&&Date.now()-new Date(e.created_at).getTime()>=864e5).length})`, "retorno" === e && `üîÑ Retorno (${j.filter(e=>"pendente"===e.status&&"Ajuste de Retorno"===e.motivo).length})`, "ponto1" === e && `üìç Ponto 1 (${j.filter(e=>"pendente"===e.status&&e.motivo?.includes("Ponto 1")).length})`, "pedagio" === e && `üõ£Ô∏è Ped√°gio (${j.filter(e=>"pendente"===e.status&&e.motivo?.includes("Ped√°gio")).length})`))), React.createElement("div", {
            className: "grid md:grid-cols-2 lg:grid-cols-3 gap-3"
        }, j.filter(e => "pendente" === e.status && (!p.pendingFilter || "all" === p.pendingFilter || ("atrasados" === p.pendingFilter ? Date.now() - new Date(e.created_at).getTime() >= 864e5 : "retorno" === p.pendingFilter ? "Ajuste de Retorno" === e.motivo : "ponto1" === p.pendingFilter ? e.motivo?.includes("Ponto 1") : "pedagio" !== p.pendingFilter || e.motivo?.includes("Ped√°gio")))).map(e => {
            const t = Date.now() - new Date(e.created_at).getTime(),
                a = Math.floor(t / 36e5),
                l = Math.floor(t % 36e5 / 6e4),
                r = t >= 864e5,
                o = t >= 36e6 && !r,
                rtnW = (() => {
                    if ("Ajuste de Retorno" !== e.motivo) return 0;
                    const t = new Date,
                        a = t.getDay(),
                        l = new Date(t);
                    l.setDate(t.getDate() - a), l.setHours(0, 0, 0, 0);
                    return j.filter(t => "Ajuste de Retorno" === t.motivo && t.codProfissional === e.codProfissional && new Date(t.created_at) >= l).length
                })(),
                rtnM = (() => {
                    if ("Ajuste de Retorno" !== e.motivo) return 0;
                    const t = new Date,
                        a = new Date(t.getFullYear(), t.getMonth(), 1);
                    return j.filter(t => "Ajuste de Retorno" === t.motivo && t.codProfissional === e.codProfissional && new Date(t.created_at) >= a).length
                })(),
                hasAlert = rtnW > 3 || rtnM > 5;
            return React.createElement("div", {
                key: e.id,
                className: "border-2 rounded-lg p-3 text-sm " + (hasAlert ? "border-yellow-500 bg-yellow-50 ring-2 ring-yellow-400" : r ? "border-red-400 bg-red-50" : o ? "border-orange-300 bg-orange-50" : "border-gray-200")
            }, hasAlert && React.createElement("div", {
                className: "mb-2 p-2 bg-yellow-200 rounded-lg text-xs font-bold text-yellow-900 flex items-center gap-2"
            }, React.createElement("span", {
                className: "text-lg"
            }, "‚ö†Ô∏è"), React.createElement("span", null, "ATEN√á√ÉO: ", rtnW > 3 ? `${rtnW} retornos na semana (m√°x 3)` : "", " ", rtnM > 5 ? `| ${rtnM} retornos no m√™s (m√°x 5)` : "")), React.createElement("div", {
                className: "flex justify-between items-start mb-2"
            }, React.createElement("p", {
                className: "font-mono text-lg font-bold"
            }, "OS: ", e.ordemServico), React.createElement("span", {
                className: "px-2 py-0.5 rounded text-xs font-bold " + (r ? "bg-red-500 text-white animate-pulse" : o ? "bg-orange-400 text-white" : "bg-gray-100 text-gray-600")
            }, r ? "üö®" : o ? "‚ö†Ô∏è" : "‚è±Ô∏è", a > 0 ? `${a}h ${l}m` : `${l}min`)), React.createElement("p", {
                className: "text-xs text-gray-700"
            }, e.fullName), React.createElement("p", {
                className: "text-xs text-gray-500 font-mono"
            }, "COD: ", e.codProfissional), React.createElement("p", {
                className: "text-xs text-purple-900 font-semibold"
            }, e.motivo), React.createElement("p", {
                className: "text-[10px] text-gray-500 mt-1"
            }, "üìÖ ", new Date(e.created_at).toLocaleDateString("pt-BR"), " √†s ", new Date(e.created_at).toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            })), e.coordenadas && React.createElement("div", {
                className: "mt-2 bg-green-50 border border-green-200 rounded p-2"
            }, React.createElement("p", {
                className: "text-xs font-mono text-green-900"
            }, e.coordenadas), React.createElement("div", {
                className: "flex gap-2 mt-1"
            }, React.createElement("button", {
                onClick: () => {
                    navigator.clipboard.writeText(e.coordenadas), ja("Copiado!", "success")
                },
                className: "text-xs text-green-600"
            }, "üìã Copiar"), React.createElement("a", {
                href: `https://www.google.com/maps?q=${e.coordenadas}`,
                target: "_blank",
                className: "text-xs text-green-600"
            }, "üó∫Ô∏è Maps"))), e.temImagem && React.createElement("div", {
                className: "mt-2"
            }, e.imagemComprovante ? React.createElement(React.Fragment, null, React.createElement("div", {
                className: "flex gap-2 flex-wrap"
            }, e.imagemComprovante.split("|||").map((e, t) => React.createElement("img", {
                key: t,
                src: e,
                className: "h-20 rounded cursor-pointer",
                onClick: () => g(e)
            }))), React.createElement("button", {
                onClick: () => C(t => t.map(t => t.id === e.id ? {
                    ...t,
                    imagemComprovante: null
                } : t)),
                className: "text-xs text-gray-500"
            }, "‚ñ≤ Ocultar")) : React.createElement("button", {
                onClick: () => {
                    ja("üîÑ Carregando...", "success"), Fa(e.id)
                },
                className: "px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold"
            }, "üì∑ Ver foto(s)")), React.createElement("textarea", {
                placeholder: "Obs (opcional)",
                value: p[`obs_${e.id}`] || "",
                onChange: t => x({
                    ...p,
                    [`obs_${e.id}`]: t.target.value
                }),
                className: "w-full px-2 py-1 border rounded mt-2 text-xs",
                rows: "1"
            }), React.createElement("div", {
                className: "flex gap-2 mt-2"
            }, React.createElement("button", {
                onClick: () => Kl(e.id, !0),
                className: "flex-1 bg-green-600 text-white py-1 rounded text-xs font-semibold"
            }, "‚úì Aprovar"), React.createElement("button", {
                onClick: () => Kl(e.id, !1),
                className: "flex-1 bg-red-600 text-white py-1 rounded text-xs font-semibold"
            }, "‚úó Rejeitar")))
        })))), "search" === p.adminTab && React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("div", {
            className: "flex flex-wrap gap-4 mb-6"
        }, React.createElement("input", {
            type: "text",
            placeholder: "üîç Buscar por OS ou c√≥digo...",
            value: p.searchOS || "",
            onChange: e => x({
                ...p,
                searchOS: e.target.value
            }),
            className: "flex-1 px-4 py-2 border rounded-lg"
        }), React.createElement("select", {
            value: p.statusFilter || "",
            onChange: e => x({
                ...p,
                statusFilter: e.target.value
            }),
            className: "px-4 py-2 border rounded-lg"
        }, React.createElement("option", {
            value: ""
        }, "Todos status"), React.createElement("option", {
            value: "pendente"
        }, "Pendente"), React.createElement("option", {
            value: "aprovada"
        }, "Aprovada"), React.createElement("option", {
            value: "rejeitada"
        }, "Rejeitada")), React.createElement("select", {
            value: p.dateFilter || "",
            onChange: e => x({
                ...p,
                dateFilter: e.target.value
            }),
            className: "px-4 py-2 border rounded-lg"
        }, React.createElement("option", {
            value: ""
        }, "Todo per√≠odo"), React.createElement("option", {
            value: "today"
        }, "Hoje"), React.createElement("option", {
            value: "week"
        }, "Esta semana"), React.createElement("option", {
            value: "month"
        }, "Este m√™s"))), React.createElement("div", {
            className: "grid md:grid-cols-2 lg:grid-cols-3 gap-3"
        }, j.filter(e => {
            if (p.searchOS && !e.ordemServico?.toLowerCase().includes(p.searchOS.toLowerCase()) && !e.codProfissional?.toLowerCase().includes(p.searchOS.toLowerCase())) return !1;
            if (p.statusFilter && e.status !== p.statusFilter) return !1;
            if (p.dateFilter) {
                const t = new Date;
                t.setHours(0, 0, 0, 0);
                const a = new Date(e.created_at);
                if ("today" === p.dateFilter) {
                    const e = new Date(t);
                    if (e.setDate(e.getDate() + 1), a < t || a >= e) return !1
                } else if ("week" === p.dateFilter) {
                    const e = new Date(t);
                    if (e.setDate(e.getDate() - 7), a < e) return !1
                } else if ("month" === p.dateFilter) {
                    const e = new Date(t);
                    if (e.setMonth(e.getMonth() - 1), a < e) return !1
                }
            }
            return !0
        }).map(e => React.createElement("div", {
            key: e.id,
            className: "border rounded-lg p-3 text-sm " + ("aprovada" === e.status ? "bg-green-50" : "rejeitada" === e.status ? "bg-red-50" : "bg-yellow-50")
        }, React.createElement("div", {
            className: "flex justify-between items-start mb-1"
        }, React.createElement("div", null, React.createElement("p", {
            className: "font-mono font-bold"
        }, "OS: ", e.ordemServico), React.createElement("p", {
            className: "text-xs text-gray-700"
        }, e.fullName)), React.createElement("div", {
            className: "flex items-center gap-1"
        }, React.createElement("span", {
            className: "px-2 py-0.5 rounded-full text-xs font-bold " + ("aprovada" === e.status ? "bg-green-600 text-white" : "rejeitada" === e.status ? "bg-red-600 text-white" : "bg-yellow-600 text-white")
        }, e.status?.toUpperCase()), React.createElement("button", {
            onClick: async () => {
                confirm(`Excluir OS ${e.ordemServico}?`) && (await fetch(`${API_URL}/submissions/${e.id}`, {
                    method: "DELETE"
                }), ja("üóëÔ∏è Exclu√≠da!", "success"), La())
            },
            className: "px-1.5 py-0.5 bg-red-600 text-white rounded text-xs"
        }, "üóëÔ∏è"))), React.createElement("p", {
            className: "text-xs text-gray-600"
        }, e.motivo), e.coordenadas && React.createElement("div", {
            className: "mt-1 bg-green-50 border border-green-200 rounded p-1.5 flex items-center justify-between"
        }, React.createElement("p", {
            className: "text-xs font-mono text-green-900"
        }, e.coordenadas), React.createElement("button", {
            onClick: () => {
                navigator.clipboard.writeText(e.coordenadas), ja("üìã Copiado!", "success")
            },
            className: "px-1.5 py-0.5 bg-green-600 text-white text-xs rounded"
        }, "üìã")), e.temImagem && React.createElement("div", {
            className: "mt-1"
        }, e.imagemComprovante ? React.createElement(React.Fragment, null, React.createElement("div", {
            className: "flex gap-1 flex-wrap"
        }, e.imagemComprovante.split("|||").map((e, t) => React.createElement("img", {
            key: t,
            src: e,
            className: "h-20 rounded cursor-pointer",
            onClick: () => g(e)
        }))), React.createElement("button", {
            onClick: () => C(t => t.map(t => t.id === e.id ? {
                ...t,
                imagemComprovante: null
            } : t)),
            className: "text-xs text-gray-500"
        }, "‚ñ≤ Ocultar")) : React.createElement("button", {
            onClick: () => {
                ja("üîÑ Carregando...", "success"), Fa(e.id)
            },
            className: "px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs font-semibold"
        }, "üì∑ Ver foto(s)")), e.observacao && React.createElement("div", {
            className: "mt-1 bg-white p-1 rounded border"
        }, React.createElement("p", {
            className: "text-xs text-gray-600"
        }, "Obs: ", e.observacao)), React.createElement("div", {
            className: "flex justify-between items-center mt-1"
        }, React.createElement("p", {
            className: "text-xs text-gray-400"
        }, e.timestamp), e.validated_by_name && "pendente" !== e.status && React.createElement("p", {
            className: "text-xs text-purple-600 font-semibold"
        }, "üë§ ", e.validated_by_name)))))), "ranking" === p.adminTab && React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-semibold mb-4"
        }, "üèÜ Ranking de Retorno - Aprova√ß√µes"), React.createElement("div", {
            className: "mb-6"
        }, React.createElement("select", {
            value: p.rankingPeriod || "all",
            onChange: e => x({
                ...p,
                rankingPeriod: e.target.value
            }),
            className: "px-4 py-2 border rounded-lg"
        }, React.createElement("option", {
            value: "all"
        }, "üìÖ Todos os Tempos"), React.createElement("option", {
            value: "today"
        }, "üìÖ Hoje"), React.createElement("option", {
            value: "week"
        }, "üìÖ Esta Semana"), React.createElement("option", {
            value: "month"
        }, "üìÖ Este M√™s"))), React.createElement("div", {
            className: "space-y-3"
        }, (() => {
            const e = new Date;
            e.setHours(0, 0, 0, 0);
            const t = j.filter(t => {
                    if ("aprovada" !== t.status || "Ajuste de Retorno" !== t.motivo) return !1;
                    if (!p.rankingPeriod || "all" === p.rankingPeriod) return !0;
                    const a = new Date(t.created_at);
                    if ("today" === p.rankingPeriod) {
                        const t = new Date(e);
                        return t.setDate(t.getDate() + 1), a >= e && a < t
                    }
                    if ("week" === p.rankingPeriod) {
                        const t = new Date(e);
                        return t.setDate(t.getDate() - 7), a >= t
                    }
                    if ("month" === p.rankingPeriod) {
                        const t = new Date(e);
                        return t.setMonth(t.getMonth() - 1), a >= t
                    }
                    return !0
                }),
                a = {};
            t.forEach(e => {
                const t = e.codProfissional || "SEM_COD";
                a[t] || (a[t] = {
                    nome: e.fullName || "Desconhecido",
                    cod: e.codProfissional || "-",
                    total: 0,
                    solicitacoes: []
                });
                a[t].total += 1;
                a[t].solicitacoes.push(e)
            });
            const l = Object.entries(a).sort((e, t) => t[1].total - e[1].total);
            return 0 === l.length ? React.createElement("p", {
                className: "text-gray-500 text-center py-8"
            }, "Sem dados no per√≠odo") : l.map(([k, v], i) => React.createElement("div", {
                key: i,
                className: "bg-gray-50 rounded-lg hover:bg-gray-100"
            }, React.createElement("div", {
                className: "flex items-center gap-4 p-4 cursor-pointer",
                onClick: () => x({
                    ...p,
                    [`rankingExp_${k}`]: !p[`rankingExp_${k}`]
                })
            }, React.createElement("div", {
                className: "text-3xl font-bold w-12 " + (0 === i ? "text-yellow-500" : 1 === i ? "text-gray-400" : 2 === i ? "text-orange-600" : "text-gray-400")
            }, 0 === i ? "ü•á" : 1 === i ? "ü•à" : 2 === i ? "ü•â" : `${i+1}¬∫`), React.createElement("div", {
                className: "flex-1"
            }, React.createElement("p", {
                className: "font-semibold text-lg text-gray-800"
            }, v.nome), React.createElement("p", {
                className: "text-sm text-gray-500 font-mono"
            }, "COD: ", v.cod)), React.createElement("div", {
                className: "text-right flex items-center gap-3"
            }, React.createElement("div", null, React.createElement("p", {
                className: "text-3xl font-bold text-purple-600"
            }, v.total), React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "aprova√ß√µes")), React.createElement("button", {
                className: "w-8 h-8 rounded-full bg-purple-600 text-white font-bold text-lg flex items-center justify-center hover:bg-purple-700 transition-all " + (p[`rankingExp_${k}`] ? "rotate-45" : "")
            }, "+"))), p[`rankingExp_${k}`] && React.createElement("div", {
                className: "px-4 pb-4"
            }, React.createElement("div", {
                className: "bg-white rounded-lg border border-gray-200 divide-y divide-gray-100 max-h-64 overflow-y-auto"
            }, v.solicitacoes.map((s, idx) => React.createElement("div", {
                key: idx,
                className: "p-3 hover:bg-gray-50"
            }, React.createElement("div", {
                className: "flex justify-between items-center"
            }, React.createElement("div", null, React.createElement("p", {
                className: "font-mono font-semibold text-sm"
            }, "OS: ", s.ordemServico), React.createElement("p", {
                className: "text-xs text-gray-500"
            }, new Date(s.created_at).toLocaleDateString("pt-BR"), " √†s ", new Date(s.created_at).toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            }))), React.createElement("div", {
                className: "flex items-center gap-2"
            }, s.temImagem && React.createElement("button", {
                onClick: e => {
                    e.stopPropagation();
                    if (s.imagemComprovante) {
                        g(s.imagemComprovante.split("|||")[0])
                    } else {
                        ja("üîÑ Carregando...", "success");
                        Fa(s.id)
                    }
                },
                className: "px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded hover:bg-blue-200 flex items-center gap-1"
            }, "üì∑ Ver Foto"), React.createElement("span", {
                className: "px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded"
            }, "‚úì Aprovada"))), s.imagemComprovante && React.createElement("div", {
                className: "mt-2 flex gap-2 flex-wrap"
            }, s.imagemComprovante.split("|||").map((img, imgIdx) => React.createElement("img", {
                key: imgIdx,
                src: img,
                className: "h-16 rounded cursor-pointer border border-gray-200 hover:border-purple-400",
                onClick: e => {
                    e.stopPropagation();
                    g(img)
                }
            })))))))))
        })())), "disponibilidade" === p.adminTab && React.createElement(React.Fragment, null, (() => {
            const e = p.dispData || {
                    regioes: [],
                    lojas: [],
                    linhas: []
                },
                t = p.dispSubTab || "panorama",
                a = p.dispLoading,
                r = async () => {
                    try {
                        x(e => ({
                            ...e,
                            dispLoading: !0
                        }));
                        const e = await fetch(`${API_URL}/disponibilidade`);
                        if (!e.ok) throw new Error("Erro ao carregar");
                        const t = await e.json();
                        x(e => ({
                            ...e,
                            dispData: t,
                            dispLoading: !1,
                            dispLoaded: !0
                        }))
                    } catch (e) {
                        console.error("Erro ao carregar disponibilidade:", e), ja("Erro ao carregar dados", "error"), x(e => ({
                            ...e,
                            dispLoading: !1,
                            dispLoaded: !0
                        }))
                    }
                };
            p.dispLoaded || a || (r(), 0 === pe.length && Ta());
            const o = async () => {
                const e = p.novaRegiao?.trim();
                if (e) try {
                    const t = await fetch(`${API_URL}/disponibilidade/regioes`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            nome: e
                        })
                    });
                    if (!t.ok) {
                        const e = await t.json();
                        throw new Error(e.error || "Erro ao criar")
                    }
                    x(e => ({
                        ...e,
                        novaRegiao: ""
                    })), ja(`‚úÖ Regi√£o "${e}" adicionada!`, "success"), r()
                } catch (e) {
                    ja(e.message, "error")
                } else ja("Digite o nome da regi√£o", "error")
            }, c = async (t, a, l) => {
                const r = [...e.linhas || []],
                    o = r.findIndex(e => e.id === t);
                if (-1 === o) return;
                const c = r[o];
                if ("cod_profissional" === a && l && "" !== l.trim()) try {
                    const e = await fetch(`${API_URL}/disponibilidade/restricoes/verificar?cod_profissional=${l}&loja_id=${c.loja_id}`),
                        t = await e.json();
                    if (t.restrito) {
                        const e = t.todas_lojas ? "TODAS AS LOJAS" : `loja ${t.loja_codigo} - ${t.loja_nome}`;
                        return void alert(`üö´ MOTOBOY RESTRITO!\n\nC√≥digo: ${l}\nRestrito em: ${e}\n\nMotivo: ${t.motivo}\n\nEste motoboy n√£o pode ser inserido nesta loja.`)
                    }
                } catch (e) {
                    console.error("Erro ao verificar restri√ß√£o:", e)
                }
                r[o] = {
                    ...r[o],
                    [a]: l
                };
                let s = r[o].nome_profissional;
                if ("cod_profissional" === a)
                    if (l && "" !== l.trim()) {
                        if (l.length >= 1) {
                            const e = pe.find(e => e.codigo === l.toString());
                            if (e) s = e.nome, r[o].nome_profissional = e.nome;
                            else {
                                const e = A.find(e => e.codProfissional?.toLowerCase() === l.toLowerCase());
                                e ? (s = e.fullName, r[o].nome_profissional = e.fullName) : (s = "", r[o].nome_profissional = "")
                            }
                        }
                    } else s = "", r[o].nome_profissional = "";
                x(t => ({
                    ...t,
                    dispData: {
                        ...e,
                        linhas: r
                    }
                })), clearTimeout(window.dispDebounce), window.dispDebounce = setTimeout(async () => {
                    try {
                        const usuarioLogado = JSON.parse(sessionStorage.getItem("tutts_user") || "{}");
                        await fetch(`${API_URL}/disponibilidade/linhas/${t}`, {
                            method: "PUT",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                cod_profissional: r[o].cod_profissional || null,
                                nome_profissional: "cod_profissional" === a ? s || null : r[o].nome_profissional || null,
                                status: r[o].status,
                                observacao: r[o].observacao,
                                observacao_usuario: usuarioLogado?.fullName || "Sistema"
                            })
                        })
                    } catch (e) {
                        console.error("Erro ao salvar linha:", e)
                    }
                }, 500)
            }, s = async (e, t, a = !1) => {
                try {
                    await fetch(`${API_URL}/disponibilidade/linhas`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            loja_id: e,
                            quantidade: t,
                            is_excedente: a
                        })
                    }), ja(`‚úÖ ${t} ${a?"excedente(s)":"titular(es)"} adicionado(s)!`, "success"), r()
                } catch (e) {
                    ja("Erro ao adicionar linhas", "error")
                }
            }, n = {
                "A CONFIRMAR": "bg-yellow-100 text-yellow-800 border-yellow-300",
                CONFIRMADO: "bg-green-100 text-green-800 border-green-300",
                "A CAMINHO": "bg-orange-100 text-orange-800 border-orange-300",
                "EM LOJA": "bg-blue-100 text-blue-800 border-blue-300",
                FALTANDO: "bg-red-100 text-red-800 border-red-300",
                "SEM CONTATO": "bg-gray-100 text-gray-800 border-gray-300"
            }, m = {
                "A CONFIRMAR": "bg-yellow-50",
                CONFIRMADO: "bg-green-50",
                "A CAMINHO": "bg-orange-50",
                "EM LOJA": "bg-blue-50",
                FALTANDO: "bg-red-50",
                "SEM CONTATO": "bg-gray-50"
            };
            return a ? React.createElement("div", {
                className: "flex items-center justify-center py-12"
            }, React.createElement("div", {
                className: "text-center"
            }, React.createElement("div", {
                className: "animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"
            }), React.createElement("p", {
                className: "mt-4 text-gray-600"
            }, "Carregando..."))) : React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", {
                className: "flex items-center justify-end gap-2 text-xs text-gray-500"
            }, React.createElement("span", {
                className: "flex items-center gap-1"
            }, React.createElement("span", {
                className: "w-2 h-2 bg-green-500 rounded-full animate-pulse"
            }), "Sincroniza√ß√£o autom√°tica ativa (10s)")), React.createElement("div", {
                className: "bg-white rounded-xl shadow"
            }, React.createElement("div", {
                className: "flex border-b overflow-x-auto"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    dispSubTab: "panorama"
                }),
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("panorama" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "üìä Panorama"), React.createElement("button", {
                onClick: () => x({
                    ...p,
                    dispSubTab: "principal"
                }),
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("principal" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "üìã Painel"), React.createElement("button", {
                onClick: async () => {
                    x(e => ({
                        ...e,
                        dispSubTab: "faltosos"
                    }));
                    try {
                        const e = await fetch(`${API_URL}/disponibilidade/faltosos`),
                            t = await e.json();
                        x(e => ({
                            ...e,
                            faltososLista: t
                        }))
                    } catch (e) {
                        console.error("Erro ao carregar faltosos:", e)
                    }
                },
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("faltosos" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "‚ö†Ô∏è Faltosos"), React.createElement("button", {
                onClick: async () => {
                    x(e => ({
                        ...e,
                        dispSubTab: "espelho"
                    }));
                    try {
                        const e = await fetch(`${API_URL}/disponibilidade/espelho`),
                            t = await e.json();
                        x(e => ({
                            ...e,
                            espelhoDatas: t
                        }))
                    } catch (e) {
                        console.error("Erro ao carregar datas espelho:", e)
                    }
                },
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("espelho" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "ü™û Espelho"), React.createElement("button", {
                onClick: async () => {
                    x(e => ({
                        ...e,
                        dispSubTab: "relatorios",
                        relatoriosLoading: !0
                    }));
                    try {
                        const [e, t, a, l, r] = await Promise.all([fetch(`${API_URL}/disponibilidade/relatorios/metricas`).then(e => e.json()).catch(() => []), fetch(`${API_URL}/disponibilidade/relatorios/ranking-lojas`).then(e => e.json()).catch(() => []), fetch(`${API_URL}/disponibilidade/relatorios/ranking-faltosos`).then(e => e.json()).catch(() => []), fetch(`${API_URL}/disponibilidade/relatorios/comparativo`).then(e => e.json()).catch(() => ({})), fetch(`${API_URL}/disponibilidade/relatorios/heatmap`).then(e => e.json()).catch(() => ({
                            diasSemana: [],
                            lojas: []
                        }))]);
                        x(o => ({
                            ...o,
                            relatoriosData: {
                                metricas: Array.isArray(e) ? e : [],
                                rankingLojas: Array.isArray(t) ? t : [],
                                rankingFaltosos: Array.isArray(a) ? a : [],
                                comparativo: l || {},
                                heatmap: r || {
                                    diasSemana: [],
                                    lojas: []
                                }
                            },
                            relatoriosLoading: !1
                        }))
                    } catch (e) {
                        console.error("Erro ao carregar relat√≥rios:", e), x(e => ({
                            ...e,
                            relatoriosLoading: !1,
                            relatoriosData: {
                                metricas: [],
                                rankingLojas: [],
                                rankingFaltosos: [],
                                comparativo: {},
                                heatmap: {
                                    diasSemana: [],
                                    lojas: []
                                }
                            }
                        }))
                    }
                },
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("relatorios" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "üìà Relat√≥rios"), React.createElement("button", {
                onClick: async () => {
                    x(e => ({
                        ...e,
                        dispSubTab: "motoboys",
                        motoboysBusca: "",
                        motoboysLojaFiltro: "",
                        motoboysDias: 30,
                        motoboysList: null,
                        motoboysLoading: !0
                    }));
                    try {
                        const e = await fetch(`${API_URL}/disponibilidade/motoboys?dias=30`),
                            t = await e.json();
                        x(e => ({
                            ...e,
                            motoboysList: t,
                            motoboysLoading: !1
                        }))
                    } catch (e) {
                        console.error("Erro ao carregar motoboys:", e), x(e => ({
                            ...e,
                            motoboysLoading: !1
                        }))
                    }
                },
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("motoboys" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "üèçÔ∏è Motoboys"), React.createElement("button", {
                onClick: async () => {
                    x(e => ({
                        ...e,
                        dispSubTab: "restricoes",
                        restricoesLoading: !0
                    }));
                    try {
                        const e = await fetch(`${API_URL}/disponibilidade/restricoes`),
                            t = await e.json();
                        x(e => ({
                            ...e,
                            restricoesList: t,
                            restricoesLoading: !1
                        }))
                    } catch (e) {
                        console.error("Erro ao carregar restri√ß√µes:", e), x(e => ({
                            ...e,
                            restricoesLoading: !1
                        }))
                    }
                },
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("restricoes" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "üö´ Restri√ß√µes"), React.createElement("button", {
                onClick: () => x({
                    ...p,
                    dispSubTab: "config"
                }),
                className: "px-3 py-2 font-semibold text-sm whitespace-nowrap " + ("config" === t ? "text-purple-700 border-b-2 border-purple-600 bg-purple-50" : "text-gray-600")
            }, "‚öôÔ∏è Config"))), "panorama" === t && React.createElement("div", null, React.createElement("div", {
                className: "bg-gray-800 text-white px-2 py-1.5 flex justify-between items-center text-[10px] flex-wrap gap-1"
            }, React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("span", {
                className: "font-bold"
            }, "PANORAMA DI√ÅRIO"), (() => {
                const t = e.linhas || [],
                    a = t.filter(e => !e.is_excedente && !e.is_reposicao).length,
                    l = t.filter(e => "EM LOJA" === e.status).length,
                    r = (t.filter(e => ["A CAMINHO", "CONFIRMADO", "EM LOJA"].includes(e.status)).length, Math.max(0, a - l)),
                    o = a > 0 ? Math.min(l / a * 100, 100).toFixed(0) : 0;
                return React.createElement("div", {
                    className: "flex items-center gap-2"
                }, React.createElement("span", {
                    className: "px-2 py-0.5 rounded text-xs font-bold " + (o >= 80 ? "bg-green-500" : o >= 50 ? "bg-yellow-500 text-black" : "bg-red-500")
                }, o, "% GERAL"), r > 0 && React.createElement("span", {
                    className: "px-2 py-0.5 rounded text-xs font-bold bg-red-600 animate-pulse"
                }, "‚ö†Ô∏è FALTAM ", r, " P/ 100%"))
            })()), React.createElement("div", {
                className: "flex items-center gap-1 flex-wrap"
            }, React.createElement("span", {
                className: "text-gray-400 text-[9px]"
            }, "Atualizado: ", (new Date).toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            })), React.createElement("select", {
                value: p.panoramaOrdem || "regiao",
                onChange: e => x({
                    ...p,
                    panoramaOrdem: e.target.value
                }),
                className: "px-1 py-0 bg-gray-700 border border-gray-600 rounded text-[9px]"
            }, React.createElement("option", {
                value: "regiao"
            }, "Por Regi√£o"), React.createElement("option", {
                value: "pior"
            }, "Pior ‚Üí Melhor"), React.createElement("option", {
                value: "melhor"
            }, "Melhor ‚Üí Pior"), React.createElement("option", {
                value: "alfa"
            }, "A ‚Üí Z")), React.createElement("input", {
                type: "date",
                value: p.dispDataPlanilha || (new Date).toISOString().split("T")[0],
                onChange: e => x({
                    ...p,
                    dispDataPlanilha: e.target.value
                }),
                className: "px-1 py-0 border border-gray-600 rounded text-[10px] text-white bg-gray-700"
            }), React.createElement("button", {
                onClick: r,
                className: "px-1.5 py-0.5 bg-gray-700 text-white rounded hover:bg-gray-600 text-[10px]"
            }, "üîÑ"), React.createElement("button", {
                onClick: () => {
                    navigator.clipboard.writeText(`${API_URL}/disponibilidade/publico`), ja("‚úÖ Link copiado!", "success")
                },
                className: "px-1.5 py-0.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-[10px]",
                title: "Copiar link p√∫blico (somente leitura)"
            }, "üîó Link P√∫blico"))), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                id: "panorama-table",
                style: {
                    fontSize: "9px",
                    borderCollapse: "collapse",
                    width: "100%"
                }
            }, React.createElement("thead", null, React.createElement("tr", {
                style: {
                    backgroundColor: "#f8fafc",
                    borderBottom: "2px solid #e2e8f0"
                }
            }, React.createElement("th", {
                style: {
                    padding: "4px 6px",
                    border: "1px solid #e2e8f0",
                    textAlign: "left",
                    fontWeight: "600",
                    color: "#475569"
                }
            }, "LOJAS"), React.createElement("th", {
                style: {
                    padding: "4px 4px",
                    border: "1px solid #e2e8f0",
                    fontWeight: "600",
                    color: "#475569",
                    whiteSpace: "nowrap"
                }
            }, "A CAMINHO"), React.createElement("th", {
                style: {
                    padding: "4px 4px",
                    border: "1px solid #e2e8f0",
                    fontWeight: "600",
                    color: "#475569"
                }
            }, "CONFIR."), React.createElement("th", {
                style: {
                    padding: "4px 4px",
                    border: "1px solid #e2e8f0",
                    fontWeight: "600",
                    color: "#475569",
                    whiteSpace: "nowrap"
                }
            }, "EM LOJA"), React.createElement("th", {
                style: {
                    padding: "4px 4px",
                    border: "1px solid #e2e8f0",
                    fontWeight: "600",
                    color: "#475569"
                }
            }, "IDEAL"), React.createElement("th", {
                style: {
                    padding: "4px 4px",
                    border: "1px solid #e2e8f0",
                    fontWeight: "600",
                    color: "#475569"
                }
            }, "FALTA"), React.createElement("th", {
                style: {
                    padding: "4px 4px",
                    border: "1px solid #e2e8f0",
                    fontWeight: "600",
                    color: "#475569",
                    whiteSpace: "nowrap"
                }
            }, "S/ CONTATO"), React.createElement("th", {
                style: {
                    padding: "4px 4px",
                    border: "1px solid #e2e8f0",
                    fontWeight: "600",
                    color: "#475569"
                }
            }, "%"))), React.createElement("tbody", null, (() => {
                const t = p.panoramaOrdem || "regiao",
                    a = e.regioes || [],
                    l = e.lojas || [],
                    r = e.linhas || [],
                    o = l.map(e => {
                        const t = r.filter(t => t.loja_id === e.id),
                            l = t.filter(e => !e.is_excedente && !e.is_reposicao).length,
                            o = t.filter(e => "A CAMINHO" === e.status).length,
                            c = t.filter(e => "CONFIRMADO" === e.status).length,
                            s = t.filter(e => "EM LOJA" === e.status).length,
                            n = t.filter(e => "SEM CONTATO" === e.status).length,
                            m = o + c + s,
                            i = Math.max(0, l - m),
                            d = l > 0 ? Math.min(s / l * 100, 100) : 0,
                            p = a.find(t => t.id === e.regiao_id);
                        return {
                            ...e,
                            titulares: l,
                            aCaminho: o,
                            confirmado: c,
                            emLoja: s,
                            semContato: n,
                            emOperacao: m,
                            falta: i,
                            perc: d,
                            regiao: p
                        }
                    });
                let c = {
                    aCaminho: 0,
                    confirmado: 0,
                    emLoja: 0,
                    titulares: 0,
                    falta: 0,
                    semContato: 0,
                    emOperacao: 0
                };
                o.forEach(e => {
                    c.aCaminho += e.aCaminho, c.confirmado += e.confirmado, c.emLoja += e.emLoja, c.titulares += e.titulares, c.falta += e.falta, c.semContato += e.semContato, c.emOperacao += e.emOperacao
                });
                const s = c.titulares > 0 ? Math.min(c.emLoja / c.titulares * 100, 100) : 0;
                return "pior" === t ? o.sort((e, t) => e.perc - t.perc) : "melhor" === t ? o.sort((e, t) => t.perc - e.perc) : "alfa" === t && o.sort((e, t) => e.nome.localeCompare(t.nome)), "regiao" === t ? React.createElement(React.Fragment, null, a.map(e => {
                    const t = o.filter(t => t.regiao_id === e.id);
                    return 0 === t.length ? null : React.createElement(React.Fragment, {
                        key: e.id
                    }, React.createElement("tr", null, React.createElement("td", {
                        colSpan: "8",
                        style: {
                            padding: "4px 6px",
                            border: "1px solid #cbd5e1",
                            backgroundColor: "#e2e8f0",
                            fontWeight: "700",
                            color: "#1e293b",
                            fontSize: "9px",
                            textAlign: "center"
                        }
                    }, e.nome, e.gestores ? ` (${e.gestores})` : "")), t.map(e => React.createElement("tr", {
                        key: e.id,
                        style: {
                            backgroundColor: e.perc < 50 ? "#fef2f2" : "white"
                        }
                    }, React.createElement("td", {
                        style: {
                            padding: "2px 6px",
                            border: "1px solid #e2e8f0",
                            backgroundColor: e.perc < 50 ? "#fef2f2" : "#fafafa",
                            fontWeight: "500",
                            whiteSpace: "nowrap"
                        }
                    }, e.perc < 50 && React.createElement("span", {
                        style: {
                            color: "#ef4444",
                            marginRight: "2px"
                        }
                    }, "üî¥"), e.nome), React.createElement("td", {
                        style: {
                            padding: "2px 4px",
                            border: "1px solid #e2e8f0",
                            textAlign: "center",
                            fontWeight: "500",
                            color: e.aCaminho > 0 ? "#ea580c" : "#cbd5e1"
                        }
                    }, e.aCaminho), React.createElement("td", {
                        style: {
                            padding: "2px 4px",
                            border: "1px solid #e2e8f0",
                            textAlign: "center",
                            fontWeight: "500",
                            color: e.confirmado > 0 ? "#16a34a" : "#cbd5e1"
                        }
                    }, e.confirmado), React.createElement("td", {
                        style: {
                            padding: "2px 4px",
                            border: "1px solid #e2e8f0",
                            textAlign: "center",
                            fontWeight: "700",
                            color: e.emLoja > 0 ? "#2563eb" : "#cbd5e1"
                        }
                    }, e.emLoja), React.createElement("td", {
                        style: {
                            padding: "2px 4px",
                            border: "1px solid #e2e8f0",
                            textAlign: "center",
                            fontWeight: "500",
                            color: "#64748b"
                        }
                    }, e.titulares), React.createElement("td", {
                        style: {
                            padding: "2px 4px",
                            border: "1px solid #e2e8f0",
                            textAlign: "center",
                            fontWeight: "600",
                            color: e.falta > 0 ? "#dc2626" : "#cbd5e1"
                        }
                    }, e.falta > 0 ? -e.falta : 0), React.createElement("td", {
                        style: {
                            padding: "2px 4px",
                            border: "1px solid #e2e8f0",
                            textAlign: "center",
                            fontWeight: "500",
                            color: e.semContato > 0 ? "#d97706" : "#cbd5e1"
                        }
                    }, e.semContato), React.createElement("td", {
                        style: {
                            padding: "2px 4px",
                            border: "1px solid #e2e8f0",
                            textAlign: "center",
                            fontWeight: "700",
                            backgroundColor: e.perc < 50 ? "#fecaca" : e.perc < 80 ? "#fde68a" : e.perc >= 100 ? "#bbf7d0" : "#f1f5f9",
                            color: e.perc < 50 ? "#b91c1c" : e.perc < 80 ? "#a16207" : e.perc >= 100 ? "#15803d" : "#475569"
                        }
                    }, e.perc.toFixed(0), "%"))))
                }), React.createElement("tr", {
                    style: {
                        backgroundColor: "#f8fafc",
                        borderTop: "2px solid #cbd5e1"
                    }
                }, React.createElement("td", {
                    style: {
                        padding: "4px 6px",
                        border: "1px solid #e2e8f0",
                        fontWeight: "700",
                        fontSize: "9px",
                        color: "#1e293b"
                    }
                }, "TOTAL GERAL"), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#ea580c"
                    }
                }, c.aCaminho), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#16a34a"
                    }
                }, c.confirmado), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#2563eb"
                    }
                }, c.emLoja), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#64748b"
                    }
                }, c.titulares), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "700",
                        color: c.falta > 0 ? "#dc2626" : "#cbd5e1"
                    }
                }, c.falta > 0 ? -c.falta : 0), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: c.semContato > 0 ? "#d97706" : "#cbd5e1"
                    }
                }, c.semContato), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "800",
                        backgroundColor: s < 50 ? "#fecaca" : s < 80 ? "#fde68a" : s >= 100 ? "#bbf7d0" : "#f1f5f9",
                        color: s < 50 ? "#b91c1c" : s < 80 ? "#a16207" : s >= 100 ? "#15803d" : "#475569"
                    }
                }, s.toFixed(0), "%"))) : React.createElement(React.Fragment, null, o.map((e, t) => React.createElement("tr", {
                    key: e.id,
                    style: {
                        backgroundColor: e.perc < 50 ? "#fef2f2" : "white"
                    }
                }, React.createElement("td", {
                    style: {
                        padding: "2px 6px",
                        border: "1px solid #e2e8f0",
                        backgroundColor: e.perc < 50 ? "#fef2f2" : "#fafafa",
                        fontWeight: "500",
                        whiteSpace: "nowrap"
                    }
                }, React.createElement("span", {
                    style: {
                        color: "#94a3b8",
                        fontSize: "8px",
                        marginRight: "3px"
                    }
                }, t + 1, "."), e.perc < 50 && React.createElement("span", {
                    style: {
                        color: "#ef4444",
                        marginRight: "2px"
                    }
                }, "üî¥"), e.nome, React.createElement("span", {
                    style: {
                        color: "#94a3b8",
                        fontSize: "7px",
                        marginLeft: "3px"
                    }
                }, "(", e.regiao?.nome || "", ")")), React.createElement("td", {
                    style: {
                        padding: "2px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "500",
                        color: e.aCaminho > 0 ? "#ea580c" : "#cbd5e1"
                    }
                }, e.aCaminho), React.createElement("td", {
                    style: {
                        padding: "2px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "500",
                        color: e.confirmado > 0 ? "#16a34a" : "#cbd5e1"
                    }
                }, e.confirmado), React.createElement("td", {
                    style: {
                        padding: "2px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "700",
                        color: e.emLoja > 0 ? "#2563eb" : "#cbd5e1"
                    }
                }, e.emLoja), React.createElement("td", {
                    style: {
                        padding: "2px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "500",
                        color: "#64748b"
                    }
                }, e.titulares), React.createElement("td", {
                    style: {
                        padding: "2px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: e.falta > 0 ? "#dc2626" : "#cbd5e1"
                    }
                }, e.falta > 0 ? -e.falta : 0), React.createElement("td", {
                    style: {
                        padding: "2px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "500",
                        color: e.semContato > 0 ? "#d97706" : "#cbd5e1"
                    }
                }, e.semContato), React.createElement("td", {
                    style: {
                        padding: "2px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "700",
                        backgroundColor: e.perc < 50 ? "#fecaca" : e.perc < 80 ? "#fde68a" : e.perc >= 100 ? "#bbf7d0" : "#f1f5f9",
                        color: e.perc < 50 ? "#b91c1c" : e.perc < 80 ? "#a16207" : e.perc >= 100 ? "#15803d" : "#475569"
                    }
                }, e.perc.toFixed(0), "%"))), React.createElement("tr", {
                    style: {
                        backgroundColor: "#f8fafc",
                        borderTop: "2px solid #cbd5e1"
                    }
                }, React.createElement("td", {
                    style: {
                        padding: "4px 6px",
                        border: "1px solid #e2e8f0",
                        fontWeight: "700",
                        fontSize: "9px",
                        color: "#1e293b"
                    }
                }, "TOTAL GERAL"), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#ea580c"
                    }
                }, c.aCaminho), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#16a34a"
                    }
                }, c.confirmado), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#2563eb"
                    }
                }, c.emLoja), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: "#64748b"
                    }
                }, c.titulares), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "700",
                        color: c.falta > 0 ? "#dc2626" : "#cbd5e1"
                    }
                }, c.falta > 0 ? -c.falta : 0), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "600",
                        color: c.semContato > 0 ? "#d97706" : "#cbd5e1"
                    }
                }, c.semContato), React.createElement("td", {
                    style: {
                        padding: "3px 4px",
                        border: "1px solid #e2e8f0",
                        textAlign: "center",
                        fontWeight: "800",
                        backgroundColor: s < 50 ? "#fecaca" : s < 80 ? "#fde68a" : s >= 100 ? "#bbf7d0" : "#f1f5f9",
                        color: s < 50 ? "#b91c1c" : s < 80 ? "#a16207" : s >= 100 ? "#15803d" : "#475569"
                    }
                }, s.toFixed(0), "%")))
            })())))), "relatorios" === t && React.createElement("div", {
                className: "space-y-4"
            }, p.relatoriosLoading ? React.createElement("div", {
                className: "flex items-center justify-center py-12"
            }, React.createElement("div", {
                className: "text-center"
            }, React.createElement("div", {
                className: "animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"
            }), React.createElement("p", {
                className: "mt-4 text-gray-600"
            }, "Carregando relat√≥rios..."))) : React.createElement(React.Fragment, null, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üìä Comparativo"), React.createElement("div", {
                className: "grid grid-cols-3 gap-4"
            }, [{
                key: "hoje",
                data: p.relatoriosData?.comparativo?.hoje,
                color: "blue"
            }, {
                key: "ontem",
                data: p.relatoriosData?.comparativo?.ontem,
                color: "gray"
            }, {
                key: "semanaPassada",
                data: p.relatoriosData?.comparativo?.semanaPassada,
                color: "purple"
            }].map(e => {
                const t = (p.relatoriosData?.comparativo?.labels || {})[e.key] || ("hoje" === e.key ? "MAIS RECENTE" : "ontem" === e.key ? "ANTERIOR" : "3¬∫ ANTERIOR");
                return React.createElement("div", {
                    key: e.key,
                    className: `p-4 rounded-lg bg-${e.color}-50 border border-${e.color}-200`
                }, React.createElement("h4", {
                    className: `font-bold text-${e.color}-800 text-center mb-2`
                }, t), e.data ? React.createElement("div", {
                    className: "space-y-1 text-sm"
                }, React.createElement("div", {
                    className: "flex justify-between"
                }, React.createElement("span", null, "% EM LOJA:"), React.createElement("span", {
                    className: "font-bold " + (e.data.perc >= 80 ? "text-green-600" : e.data.perc >= 50 ? "text-yellow-600" : "text-red-600")
                }, e.data.perc, "%")), React.createElement("div", {
                    className: "flex justify-between"
                }, React.createElement("span", null, "Em Loja:"), React.createElement("span", {
                    className: "font-bold text-blue-600"
                }, e.data.emLoja || 0)), React.createElement("div", {
                    className: "flex justify-between"
                }, React.createElement("span", null, "Titulares:"), React.createElement("span", {
                    className: "font-bold"
                }, e.data.titulares || 0)), React.createElement("div", {
                    className: "flex justify-between"
                }, React.createElement("span", null, "Faltando:"), React.createElement("span", {
                    className: "font-bold text-red-600"
                }, e.data.faltando || 0)), React.createElement("div", {
                    className: "flex justify-between"
                }, React.createElement("span", null, "Sem Contato:"), React.createElement("span", {
                    className: "font-bold text-orange-600"
                }, e.data.semContato || 0))) : React.createElement("p", {
                    className: "text-gray-400 text-center text-sm"
                }, "Sem dados"))
            })), p.relatoriosData?.comparativo?.hoje && p.relatoriosData?.comparativo?.ontem && React.createElement("div", {
                className: "mt-3 flex justify-center gap-4 text-sm"
            }, React.createElement("span", {
                className: "px-3 py-1 rounded-full bg-gray-100"
            }, "vs Ontem:", React.createElement("span", {
                className: "ml-1 font-bold " + (p.relatoriosData.comparativo.hoje.perc - p.relatoriosData.comparativo.ontem.perc >= 0 ? "text-green-600" : "text-red-600")
            }, p.relatoriosData.comparativo.hoje.perc - p.relatoriosData.comparativo.ontem.perc >= 0 ? "+" : "", (p.relatoriosData.comparativo.hoje.perc - p.relatoriosData.comparativo.ontem.perc).toFixed(1), "%")), p.relatoriosData?.comparativo?.semanaPassada && React.createElement("span", {
                className: "px-3 py-1 rounded-full bg-gray-100"
            }, "vs Semana:", React.createElement("span", {
                className: "ml-1 font-bold " + (p.relatoriosData.comparativo.hoje.perc - p.relatoriosData.comparativo.semanaPassada.perc >= 0 ? "text-green-600" : "text-red-600")
            }, p.relatoriosData.comparativo.hoje.perc - p.relatoriosData.comparativo.semanaPassada.perc >= 0 ? "+" : "", (p.relatoriosData.comparativo.hoje.perc - p.relatoriosData.comparativo.semanaPassada.perc).toFixed(1), "%")))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üìà Evolu√ß√£o % EM LOJA (7 dias)"), (() => {
                const e = Array.isArray(p.relatoriosData?.metricas) ? p.relatoriosData.metricas : [];
                return 0 === e.length ? React.createElement("p", {
                    className: "text-gray-400 text-center py-8"
                }, "Sem dados hist√≥ricos. Salve espelhos di√°rios para ver o gr√°fico.") : React.createElement("div", {
                    className: "h-48 flex items-end gap-2 justify-around bg-gray-50 rounded-lg p-4"
                }, e.slice(0, 7).reverse().map((e, t) => {
                    let a = "-";
                    if (e.data) {
                        const t = e.data.split("T")[0],
                            [l, r, o] = t.split("-");
                        a = `${o}/${r}`
                    }
                    const l = e.percOperacao || 0,
                        r = Math.max(10, l);
                    return React.createElement("div", {
                        key: t,
                        className: "flex flex-col items-center flex-1"
                    }, React.createElement("span", {
                        className: "text-xs font-bold mb-1"
                    }, l, "%"), React.createElement("div", {
                        className: "w-full rounded-t-lg transition-all " + (l >= 80 ? "bg-green-500" : l >= 50 ? "bg-yellow-500" : "bg-red-500"),
                        style: {
                            height: 1.5 * r + "px",
                            maxHeight: "140px"
                        }
                    }), React.createElement("span", {
                        className: "text-[10px] text-gray-500 mt-1"
                    }, a), React.createElement("span", {
                        className: "text-[9px] text-blue-600"
                    }, e.emLoja || 0, " em loja"))
                }))
            })()), React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-2 gap-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üèÜ Ranking de Lojas (7 dias)"), React.createElement("div", {
                className: "space-y-1 max-h-64 overflow-y-auto"
            }, (() => {
                const e = Array.isArray(p.relatoriosData?.rankingLojas) ? p.relatoriosData.rankingLojas : [];
                return 0 === e.length ? React.createElement("p", {
                    className: "text-gray-400 text-center py-4"
                }, "Sem dados de lojas") : React.createElement(React.Fragment, null, React.createElement("p", {
                    className: "text-xs font-semibold text-green-700 mb-1"
                }, "‚úÖ TOP 5 MELHORES"), e.slice(0, 5).map((e, t) => React.createElement("div", {
                    key: e.loja_id || t,
                    className: "flex items-center gap-2 p-1.5 bg-green-50 rounded text-xs"
                }, React.createElement("span", {
                    className: "font-bold text-green-700 w-5"
                }, t + 1, "¬∫"), React.createElement("span", {
                    className: "flex-1 truncate"
                }, e.loja_nome || "-"), React.createElement("span", {
                    className: "text-gray-500 text-[10px]"
                }, e.regiao_nome || ""), React.createElement("span", {
                    className: "font-bold text-green-700"
                }, e.mediaPerc || 0, "%"))), e.length > 5 && React.createElement(React.Fragment, null, React.createElement("p", {
                    className: "text-xs font-semibold text-red-700 mt-3 mb-1"
                }, "‚ö†Ô∏è TOP 5 PIORES"), e.slice(-5).reverse().map((t, a) => React.createElement("div", {
                    key: `worst-${t.loja_id||a}`,
                    className: "flex items-center gap-2 p-1.5 bg-red-50 rounded text-xs"
                }, React.createElement("span", {
                    className: "font-bold text-red-700 w-5"
                }, e.length - 4 + a, "¬∫"), React.createElement("span", {
                    className: "flex-1 truncate"
                }, t.loja_nome || "-"), React.createElement("span", {
                    className: "text-gray-500 text-[10px]"
                }, t.regiao_nome || ""), React.createElement("span", {
                    className: "font-bold text-red-700"
                }, t.mediaPerc || 0, "%")))))
            })())), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üö´ Ranking de Faltosos (30 dias)"), React.createElement("div", {
                className: "space-y-1 max-h-64 overflow-y-auto"
            }, (() => {
                const e = Array.isArray(p.relatoriosData?.rankingFaltosos) ? p.relatoriosData.rankingFaltosos : [];
                return 0 === e.length ? React.createElement("p", {
                    className: "text-gray-400 text-center py-4"
                }, "Nenhuma falta registrada") : e.slice(0, 10).map((e, t) => React.createElement("div", {
                    key: e.cod || e.nome || t,
                    className: "flex items-center gap-2 p-1.5 bg-red-50 rounded text-xs"
                }, React.createElement("span", {
                    className: "font-bold text-red-700 w-5"
                }, t + 1, "¬∫"), React.createElement("span", {
                    className: "font-mono text-gray-600 w-12"
                }, e.cod || "-"), React.createElement("span", {
                    className: "flex-1 truncate"
                }, e.nome || "Sem nome"), React.createElement("span", {
                    className: "text-gray-500 text-[10px] truncate max-w-20"
                }, e.loja_nome || ""), React.createElement("span", {
                    className: "font-bold text-red-700 bg-red-200 px-1.5 rounded"
                }, e.totalFaltas || 0, "x")))
            })()))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üî• Heatmap de Faltas por Dia da Semana (30 dias)"), (() => {
                const e = p.relatoriosData?.heatmap || {},
                    t = Array.isArray(e.lojas) ? e.lojas : [],
                    a = Array.isArray(e.diasSemana) ? e.diasSemana : ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "S√°b"];
                return 0 === t.length ? React.createElement("p", {
                    className: "text-gray-400 text-center py-4"
                }, "Sem dados de faltas para gerar heatmap") : React.createElement("div", {
                    className: "overflow-x-auto"
                }, React.createElement("table", {
                    className: "w-full text-xs"
                }, React.createElement("thead", null, React.createElement("tr", {
                    className: "bg-gray-100"
                }, React.createElement("th", {
                    className: "px-2 py-1 text-left"
                }, "Loja"), a.map((e, t) => React.createElement("th", {
                    key: t,
                    className: "px-2 py-1 text-center w-12"
                }, e)), React.createElement("th", {
                    className: "px-2 py-1 text-center"
                }, "Total"))), React.createElement("tbody", null, t.slice(0, 15).map((e, t) => {
                    const a = Array.isArray(e.dias) ? e.dias : [0, 0, 0, 0, 0, 0, 0],
                        l = a.reduce((e, t) => e + t, 0),
                        r = Math.max(...a, 1);
                    return React.createElement("tr", {
                        key: e.loja_nome || t,
                        className: "border-t"
                    }, React.createElement("td", {
                        className: "px-2 py-1 font-medium truncate max-w-32"
                    }, e.loja_nome || "-"), a.map((e, t) => {
                        const a = e / r,
                            l = 0 === e ? "bg-gray-50" : a >= .8 ? "bg-red-500 text-white" : a >= .5 ? "bg-orange-400 text-white" : a >= .3 ? "bg-yellow-300" : "bg-yellow-100";
                        return React.createElement("td", {
                            key: t,
                            className: `px-2 py-1 text-center font-bold ${l}`
                        }, e || "-")
                    }), React.createElement("td", {
                        className: "px-2 py-1 text-center font-bold bg-gray-200"
                    }, l))
                }))))
            })(), React.createElement("div", {
                className: "flex justify-center gap-2 mt-3 text-[10px]"
            }, React.createElement("span", {
                className: "px-2 py-0.5 bg-gray-50 rounded"
            }, "0"), React.createElement("span", {
                className: "px-2 py-0.5 bg-yellow-100 rounded"
            }, "Baixo"), React.createElement("span", {
                className: "px-2 py-0.5 bg-yellow-300 rounded"
            }, "M√©dio"), React.createElement("span", {
                className: "px-2 py-0.5 bg-orange-400 text-white rounded"
            }, "Alto"), React.createElement("span", {
                className: "px-2 py-0.5 bg-red-500 text-white rounded"
            }, "Cr√≠tico"))))), "motoboys" === t && React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "üèçÔ∏è Hist√≥rico de Motoboys"), React.createElement("div", {
                className: "flex flex-wrap gap-3 mb-4"
            }, React.createElement("div", {
                className: "flex-1 min-w-[200px]"
            }, React.createElement("input", {
                type: "text",
                placeholder: "üîç Buscar por c√≥digo ou nome...",
                value: p.motoboysBusca || "",
                onChange: e => x(t => ({
                    ...t,
                    motoboysBusca: e.target.value
                })),
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            })), React.createElement("select", {
                value: p.motoboysLojaFiltro || "",
                onChange: e => x(t => ({
                    ...t,
                    motoboysLojaFiltro: e.target.value
                })),
                className: "px-3 py-2 border rounded-lg text-sm"
            }, React.createElement("option", {
                value: ""
            }, "üìç Todas as Lojas"), (e.lojas || []).map(e => React.createElement("option", {
                key: e.id,
                value: e.id
            }, e.codigo, " - ", e.nome))), React.createElement("select", {
                value: p.motoboysDias || 30,
                onChange: e => x(t => ({
                    ...t,
                    motoboysDias: parseInt(e.target.value)
                })),
                className: "px-3 py-2 border rounded-lg text-sm"
            }, React.createElement("option", {
                value: 7
            }, "√öltimos 7 dias"), React.createElement("option", {
                value: 15
            }, "√öltimos 15 dias"), React.createElement("option", {
                value: 30
            }, "√öltimos 30 dias"), React.createElement("option", {
                value: 60
            }, "√öltimos 60 dias"), React.createElement("option", {
                value: 90
            }, "√öltimos 90 dias")), React.createElement("button", {
                onClick: async () => {
                    x(e => ({
                        ...e,
                        motoboysLoading: !0
                    }));
                    try {
                        const e = new URLSearchParams;
                        e.append("dias", p.motoboysDias || 30), p.motoboysLojaFiltro && e.append("loja_id", p.motoboysLojaFiltro), p.motoboysBusca && e.append("busca", p.motoboysBusca);
                        const t = await fetch(`${API_URL}/disponibilidade/motoboys?${e}`),
                            a = await t.json();
                        x(e => ({
                            ...e,
                            motoboysList: a,
                            motoboysLoading: !1
                        }))
                    } catch (e) {
                        console.error("Erro ao buscar motoboys:", e), ja("Erro ao buscar motoboys", "error"), x(e => ({
                            ...e,
                            motoboysLoading: !1
                        }))
                    }
                },
                className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "üîç Buscar")), p.motoboysLoading && React.createElement("div", {
                className: "flex items-center justify-center py-8"
            }, React.createElement("div", {
                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"
            }), React.createElement("span", {
                className: "ml-3 text-gray-600"
            }, "Carregando...")), !p.motoboysLoading && p.motoboysList && React.createElement("div", null, React.createElement("div", {
                className: "mb-4 p-3 bg-gray-100 rounded-lg flex items-center justify-between"
            }, React.createElement("span", {
                className: "text-sm text-gray-700"
            }, React.createElement("strong", null, p.motoboysList.total || 0), " motoboys encontrados (√∫ltimos ", React.createElement("strong", null, p.motoboysList.periodo_dias), " dias)")), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-xs border-collapse"
            }, React.createElement("thead", null, React.createElement("tr", {
                className: "bg-gray-800 text-white"
            }, React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "COD"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "NOME"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "LOJA ATUAL"), React.createElement("th", {
                className: "px-2 py-2 text-center bg-green-700"
            }, "üè™ EM LOJA"), React.createElement("th", {
                className: "px-2 py-2 text-center bg-red-700"
            }, "‚ùå FALTAS"), React.createElement("th", {
                className: "px-2 py-2 text-center bg-orange-600"
            }, "üìµ S/ CONTATO"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "LOJAS ONDE RODOU"))), React.createElement("tbody", null, (p.motoboysList.motoboys || []).map((e, t) => React.createElement("tr", {
                key: e.cod,
                className: `border-b ${t%2==0?"bg-white":"bg-gray-50"} hover:bg-blue-50`
            }, React.createElement("td", {
                className: "px-2 py-2 font-mono font-bold text-purple-700"
            }, e.cod), React.createElement("td", {
                className: "px-2 py-2 font-semibold"
            }, e.nome || "-"), React.createElement("td", {
                className: "px-2 py-2"
            }, e.loja_atual ? React.createElement("span", {
                className: "text-gray-700"
            }, React.createElement("span", {
                className: "font-semibold"
            }, e.loja_atual.codigo), " - ", e.loja_atual.nome, e.loja_atual.regiao_nome && React.createElement("span", {
                className: "text-gray-400 text-[10px] ml-1"
            }, "(", e.loja_atual.regiao_nome, ")")) : "-"), React.createElement("td", {
                className: "px-2 py-2 text-center"
            }, React.createElement("span", {
                className: "font-bold " + (e.estatisticas.em_loja.total > 0 ? "text-green-600" : "text-gray-400")
            }, e.estatisticas.em_loja.total, "x"), e.estatisticas.em_loja.ultima_vez && React.createElement("span", {
                className: "text-[9px] text-gray-400 block"
            }, "√∫lt: ", new Date(e.estatisticas.em_loja.ultima_vez).toLocaleDateString("pt-BR", {
                day: "2-digit",
                month: "2-digit"
            }))), React.createElement("td", {
                className: "px-2 py-2 text-center"
            }, React.createElement("span", {
                className: "font-bold " + (e.estatisticas.faltas.total > 0 ? "text-red-600" : "text-gray-400")
            }, e.estatisticas.faltas.total, "x"), e.estatisticas.faltas.ultima_falta && React.createElement("span", {
                className: "text-[9px] text-gray-400 block"
            }, "√∫lt: ", new Date(e.estatisticas.faltas.ultima_falta).toLocaleDateString("pt-BR", {
                day: "2-digit",
                month: "2-digit"
            }))), React.createElement("td", {
                className: "px-2 py-2 text-center"
            }, React.createElement("span", {
                className: "font-bold " + (e.estatisticas.sem_contato.total > 0 ? "text-orange-600" : "text-gray-400")
            }, e.estatisticas.sem_contato.total, "x"), e.estatisticas.sem_contato.max_dias_consecutivos > 0 && React.createElement("span", {
                className: "text-[9px] text-orange-500 block"
            }, "m√°x: ", e.estatisticas.sem_contato.max_dias_consecutivos, " dias seg.")), React.createElement("td", {
                className: "px-2 py-2"
            }, e.lojas_rodou && e.lojas_rodou.length > 0 ? React.createElement("div", {
                className: "flex flex-wrap gap-1"
            }, e.lojas_rodou.slice(0, 3).map(e => React.createElement("span", {
                key: e.id,
                className: "px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded text-[10px]"
            }, e.codigo)), e.lojas_rodou.length > 3 && React.createElement("span", {
                className: "px-1.5 py-0.5 bg-gray-200 text-gray-600 rounded text-[10px]"
            }, "+", e.lojas_rodou.length - 3)) : React.createElement("span", {
                className: "text-gray-400"
            }, "-"))))))), (!p.motoboysList.motoboys || 0 === p.motoboysList.motoboys.length) && React.createElement("div", {
                className: "text-center py-8 text-gray-500"
            }, React.createElement("p", {
                className: "text-4xl mb-2"
            }, "üèçÔ∏è"), React.createElement("p", null, "Nenhum motoboy encontrado com os filtros selecionados."))), !p.motoboysLoading && !p.motoboysList && React.createElement("div", {
                className: "text-center py-8 text-gray-500"
            }, React.createElement("p", {
                className: "text-4xl mb-2"
            }, "üîç"), React.createElement("p", null, 'Use os filtros acima e clique em "Buscar" para ver o hist√≥rico dos motoboys.'))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h4", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "üìä Legenda das Estat√≠sticas"), React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-3 gap-3 text-xs"
            }, React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("span", {
                className: "w-3 h-3 bg-green-500 rounded"
            }), React.createElement("span", null, React.createElement("strong", null, "EM LOJA:"), ' Quantas vezes recebeu status "EM LOJA" (trabalhou)')), React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("span", {
                className: "w-3 h-3 bg-red-500 rounded"
            }), React.createElement("span", null, React.createElement("strong", null, "FALTAS:"), ' Quantas vezes foi marcado como "FALTANDO"')), React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("span", {
                className: "w-3 h-3 bg-orange-500 rounded"
            }), React.createElement("span", null, React.createElement("strong", null, "S/ CONTATO:"), ' Quantas vezes ficou "SEM CONTATO"'))))), "restricoes" === t && React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "üö´ Cadastrar Nova Restri√ß√£o"), React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4"
            }, React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold text-gray-700 mb-1"
            }, "C√≥digo *"), React.createElement("input", {
                type: "text",
                placeholder: "Ex: 12345",
                value: p.restricaoCod || "",
                onChange: e => {
                    const t = e.target.value;
                    x(e => ({
                        ...e,
                        restricaoCod: t
                    }));
                    const a = pe.find(e => e.codigo === t);
                    a && x(e => ({
                        ...e,
                        restricaoNome: a.nome
                    }))
                },
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold text-gray-700 mb-1"
            }, "Nome"), React.createElement("input", {
                type: "text",
                placeholder: "Auto-preenchido",
                value: p.restricaoNome || "",
                onChange: e => x(t => ({
                    ...t,
                    restricaoNome: e.target.value
                })),
                className: "w-full px-3 py-2 border rounded-lg text-sm bg-gray-50"
            })), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold text-gray-700 mb-1"
            }, "Loja"), React.createElement("select", {
                value: p.restricaoTodasLojas ? "TODAS" : p.restricaoLojaId || "",
                onChange: e => {
                    "TODAS" === e.target.value ? x(e => ({
                        ...e,
                        restricaoTodasLojas: !0,
                        restricaoLojaId: ""
                    })) : x(t => ({
                        ...t,
                        restricaoTodasLojas: !1,
                        restricaoLojaId: e.target.value
                    }))
                },
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Selecione uma loja..."), React.createElement("option", {
                value: "TODAS",
                className: "font-bold text-red-600"
            }, "üö´ TODAS AS LOJAS"), (e.lojas || []).map(e => React.createElement("option", {
                key: e.id,
                value: e.id
            }, e.codigo, " - ", e.nome)))), React.createElement("div", null, React.createElement("label", {
                className: "block text-sm font-semibold text-gray-700 mb-1"
            }, "Motivo *"), React.createElement("input", {
                type: "text",
                placeholder: "Ex: Comportamento inadequado",
                value: p.restricaoMotivo || "",
                onChange: e => x(t => ({
                    ...t,
                    restricaoMotivo: e.target.value
                })),
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            }))), React.createElement("button", {
                onClick: async () => {
                    if (p.restricaoCod && p.restricaoMotivo)
                        if (p.restricaoTodasLojas || p.restricaoLojaId) try {
                            const e = await fetch(`${API_URL}/disponibilidade/restricoes`, {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    cod_profissional: p.restricaoCod,
                                    nome_profissional: p.restricaoNome,
                                    loja_id: p.restricaoLojaId || null,
                                    todas_lojas: p.restricaoTodasLojas || !1,
                                    motivo: p.restricaoMotivo,
                                    criado_por: l?.fullName || l?.username
                                })
                            });
                            if (!e.ok) {
                                const t = await e.json();
                                throw new Error(t.error || "Erro ao cadastrar")
                            }
                            ja("‚úÖ Restri√ß√£o cadastrada com sucesso!", "success"), x(e => ({
                                ...e,
                                restricaoCod: "",
                                restricaoNome: "",
                                restricaoLojaId: "",
                                restricaoTodasLojas: !1,
                                restricaoMotivo: ""
                            }));
                            const t = await fetch(`${API_URL}/disponibilidade/restricoes`),
                                a = await t.json();
                            x(e => ({
                                ...e,
                                restricoesList: a
                            }))
                        } catch (e) {
                            ja(e.message, "error")
                        } else ja('Selecione uma loja ou "Todas as Lojas"', "error");
                        else ja("Preencha o c√≥digo e o motivo", "error")
                },
                className: "px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700"
            }, "üö´ Cadastrar Restri√ß√£o")), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-4"
            }, "üìã Restri√ß√µes Ativas (", (p.restricoesList || []).length, ")"), p.restricoesLoading ? React.createElement("div", {
                className: "flex items-center justify-center py-8"
            }, React.createElement("div", {
                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"
            }), React.createElement("span", {
                className: "ml-3 text-gray-600"
            }, "Carregando...")) : 0 === (p.restricoesList || []).length ? React.createElement("div", {
                className: "text-center py-8 text-gray-500"
            }, React.createElement("p", {
                className: "text-4xl mb-2"
            }, "‚úÖ"), React.createElement("p", null, "Nenhuma restri√ß√£o ativa no momento.")) : React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-xs border-collapse"
            }, React.createElement("thead", null, React.createElement("tr", {
                className: "bg-red-700 text-white"
            }, React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "COD"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "NOME"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "LOJA"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "MOTIVO"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "CRIADO POR"), React.createElement("th", {
                className: "px-2 py-2 text-left"
            }, "DATA"), React.createElement("th", {
                className: "px-2 py-2 text-center"
            }, "A√á√ÉO"))), React.createElement("tbody", null, (p.restricoesList || []).map((e, t) => React.createElement("tr", {
                key: e.id,
                className: `border-b ${t%2==0?"bg-white":"bg-red-50"} hover:bg-red-100`
            }, React.createElement("td", {
                className: "px-2 py-2 font-mono font-bold text-red-700"
            }, e.cod_profissional), React.createElement("td", {
                className: "px-2 py-2 font-semibold"
            }, e.nome_profissional || "-"), React.createElement("td", {
                className: "px-2 py-2"
            }, e.todas_lojas ? React.createElement("span", {
                className: "px-2 py-0.5 bg-red-600 text-white rounded text-[10px] font-bold"
            }, "üö´ TODAS") : e.loja_nome ? React.createElement("span", null, e.loja_codigo, " - ", e.loja_nome) : "-"), React.createElement("td", {
                className: "px-2 py-2 max-w-[200px] truncate",
                title: e.motivo
            }, e.motivo), React.createElement("td", {
                className: "px-2 py-2 text-gray-600"
            }, e.criado_por || "-"), React.createElement("td", {
                className: "px-2 py-2 text-gray-600"
            }, new Date(e.created_at).toLocaleDateString("pt-BR")), React.createElement("td", {
                className: "px-2 py-2 text-center"
            }, React.createElement("button", {
                onClick: async () => {
                    if (confirm(`Remover restri√ß√£o de ${e.cod_profissional} - ${e.nome_profissional||"N/A"}?`)) try {
                        await fetch(`${API_URL}/disponibilidade/restricoes/${e.id}`, {
                            method: "DELETE"
                        }), ja("‚úÖ Restri√ß√£o removida!", "success");
                        const t = await fetch(`${API_URL}/disponibilidade/restricoes`),
                            a = await t.json();
                        x(e => ({
                            ...e,
                            restricoesList: a
                        }))
                    } catch (e) {
                        ja("Erro ao remover restri√ß√£o", "error")
                    }
                },
                className: "px-2 py-1 bg-green-600 text-white rounded text-[10px] font-bold hover:bg-green-700"
            }, "‚úÖ Liberar"))))))))), "config" === t && React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üîó Link P√∫blico (Somente Leitura)"), React.createElement("p", {
                className: "text-sm text-gray-600 mb-3"
            }, "Compartilhe este link com gestores para visualizar o panorama em tempo real, sem precisar de login. A p√°gina atualiza automaticamente a cada 2 minutos."), React.createElement("div", {
                className: "flex gap-2 flex-wrap"
            }, React.createElement("input", {
                type: "text",
                readOnly: !0,
                value: `${API_URL}/disponibilidade/publico`,
                className: "flex-1 px-3 py-2 bg-gray-100 border rounded-lg text-sm font-mono"
            }), React.createElement("button", {
                onClick: () => {
                    navigator.clipboard.writeText(`${API_URL}/disponibilidade/publico`), ja("‚úÖ Link copiado!", "success")
                },
                className: "px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700"
            }, "üìã Copiar Link"), React.createElement("button", {
                onClick: () => window.open(`${API_URL}/disponibilidade/publico`, "_blank"),
                className: "px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700"
            }, "üîó Abrir"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üåç Regi√µes"), React.createElement("div", {
                className: "flex gap-2 mb-4"
            }, React.createElement("input", {
                type: "text",
                placeholder: "Nome da regi√£o (ex: GOI√ÇNIA)",
                value: p.novaRegiao || "",
                onChange: e => x({
                    ...p,
                    novaRegiao: e.target.value.toUpperCase()
                }),
                className: "flex-1 px-3 py-2 border rounded-lg",
                onKeyPress: e => "Enter" === e.key && o()
            }), React.createElement("button", {
                onClick: o,
                className: "px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "+ Adicionar")), React.createElement("div", {
                className: "space-y-2"
            }, (e.regioes || []).map(t => React.createElement("div", {
                key: t.id,
                className: "flex items-center gap-2 p-2 bg-purple-50 rounded-lg"
            }, React.createElement("span", {
                className: "font-semibold text-purple-800 min-w-[150px]"
            }, t.nome), React.createElement("input", {
                type: "text",
                placeholder: "Gestores (ex: LIS / LEO / ERICK)",
                value: t.gestores || "",
                onChange: async a => {
                    const l = a.target.value,
                        r = e.regioes.map(e => e.id === t.id ? {
                            ...e,
                            gestores: l
                        } : e);
                    x(t => ({
                        ...t,
                        dispData: {
                            ...e,
                            regioes: r
                        }
                    })), clearTimeout(window.gestoresDebounce), window.gestoresDebounce = setTimeout(async () => {
                        try {
                            await fetch(`${API_URL}/disponibilidade/regioes/${t.id}`, {
                                method: "PUT",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    gestores: l
                                })
                            })
                        } catch (e) {
                            console.error("Erro ao salvar gestores:", e)
                        }
                    }, 500)
                },
                className: "flex-1 px-2 py-1 border border-purple-200 rounded text-sm"
            }), React.createElement("button", {
                onClick: () => (async (e, t) => {
                    if (window.confirm(`Remover regi√£o "${t}" e todas suas lojas?`)) try {
                        await fetch(`${API_URL}/disponibilidade/regioes/${e}`, {
                            method: "DELETE"
                        }), ja(`üóëÔ∏è Regi√£o "${t}" removida!`, "success"), r()
                    } catch (e) {
                        ja("Erro ao remover regi√£o", "error")
                    }
                })(t.id, t.nome),
                className: "text-red-600 hover:text-red-800 font-bold px-2",
                title: "Remover regi√£o"
            }, "√ó"))), 0 === (e.regioes || []).length && React.createElement("p", {
                className: "text-gray-500 text-sm"
            }, "Nenhuma regi√£o cadastrada"))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üè™ Adicionar Loja"), React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-6 gap-3"
            }, React.createElement("select", {
                value: p.novaLojaRegiaoId || "",
                onChange: e => x({
                    ...p,
                    novaLojaRegiaoId: e.target.value
                }),
                className: "px-3 py-2 border rounded-lg"
            }, React.createElement("option", {
                value: ""
            }, "Selecione a Regi√£o"), (e.regioes || []).map(e => React.createElement("option", {
                key: e.id,
                value: e.id
            }, e.nome))), React.createElement("input", {
                type: "text",
                placeholder: "C√≥digo (ex: 249)",
                value: p.novaCodLoja || "",
                onChange: e => x({
                    ...p,
                    novaCodLoja: e.target.value
                }),
                className: "px-3 py-2 border rounded-lg"
            }), React.createElement("input", {
                type: "text",
                placeholder: "Nome da Loja",
                value: p.novaNomeLoja || "",
                onChange: e => x({
                    ...p,
                    novaNomeLoja: e.target.value.toUpperCase()
                }),
                className: "px-3 py-2 border rounded-lg"
            }), React.createElement("input", {
                type: "number",
                placeholder: "Titulares",
                min: "0",
                value: p.novaQtdTitulares || "",
                onChange: e => x({
                    ...p,
                    novaQtdTitulares: e.target.value
                }),
                className: "px-3 py-2 border rounded-lg",
                title: "Quantidade de linhas titulares"
            }), React.createElement("input", {
                type: "number",
                placeholder: "Excedentes",
                min: "0",
                value: p.novaQtdExcedentes || "",
                onChange: e => x({
                    ...p,
                    novaQtdExcedentes: e.target.value
                }),
                className: "px-3 py-2 border rounded-lg bg-red-50",
                title: "Quantidade de linhas excedentes"
            }), React.createElement("button", {
                onClick: async () => {
                    const e = p.novaCodLoja?.trim(),
                        t = p.novaNomeLoja?.trim(),
                        a = p.novaLojaRegiaoId,
                        l = parseInt(p.novaQtdTitulares) || 0,
                        o = parseInt(p.novaQtdExcedentes) || 0;
                    if (e && t && a)
                        if (0 !== l || 0 !== o) try {
                            if (!(await fetch(`${API_URL}/disponibilidade/lojas`, {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        regiao_id: a,
                                        codigo: e,
                                        nome: t,
                                        qtd_titulares: l,
                                        qtd_excedentes: o
                                    })
                                })).ok) throw new Error("Erro ao criar loja");
                            x(e => ({
                                ...e,
                                novaCodLoja: "",
                                novaNomeLoja: "",
                                novaQtdTitulares: "",
                                novaQtdExcedentes: "",
                                novaLojaRegiaoId: ""
                            })), ja(`‚úÖ Loja "${t}" adicionada com ${l} titular(es) e ${o} excedente(s)!`, "success"), r()
                        } catch (e) {
                            ja("Erro ao criar loja", "error")
                        } else ja("Adicione pelo menos 1 linha", "error");
                        else ja("Preencha todos os campos", "error")
                },
                className: "px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700"
            }, "+ Adicionar Loja")), React.createElement("p", {
                className: "text-xs text-gray-500 mt-2"
            }, "üí° Titulares = linhas principais | Excedentes = linhas extras (aparecem em vermelho claro)")), (e.regioes || []).map(t => {
                const a = (e.lojas || []).filter(e => e.regiao_id === t.id);
                return 0 === a.length ? null : React.createElement("div", {
                    key: t.id,
                    className: "bg-white rounded-xl shadow p-4"
                }, React.createElement("h3", {
                    className: "font-bold text-gray-800 mb-3"
                }, "üìç ", t.nome, " ", t.gestores && React.createElement("span", {
                    className: "font-normal text-gray-500"
                }, "(", t.gestores, ")")), React.createElement("div", {
                    className: "overflow-x-auto"
                }, React.createElement("table", {
                    className: "w-full text-sm"
                }, React.createElement("thead", {
                    className: "bg-gray-100"
                }, React.createElement("tr", null, React.createElement("th", {
                    className: "px-3 py-2 text-left"
                }, "C√≥digo"), React.createElement("th", {
                    className: "px-3 py-2 text-left"
                }, "Nome da Loja"), React.createElement("th", {
                    className: "px-3 py-2 text-center"
                }, "Titulares"), React.createElement("th", {
                    className: "px-3 py-2 text-center"
                }, "Excedentes"), React.createElement("th", {
                    className: "px-3 py-2 text-center"
                }, "Total"), React.createElement("th", {
                    className: "px-3 py-2 text-center"
                }, "A√ß√µes"))), React.createElement("tbody", null, a.map(t => {
                    const a = (e.linhas || []).filter(e => e.loja_id === t.id),
                        l = a.filter(e => !e.is_excedente).length,
                        o = a.filter(e => e.is_excedente).length,
                        c = p.editandoLoja === t.id;
                    return React.createElement("tr", {
                        key: t.id,
                        className: "border-t"
                    }, React.createElement("td", {
                        className: "px-3 py-2"
                    }, c ? React.createElement("input", {
                        type: "text",
                        value: p.editLojaCodigo || "",
                        onChange: e => x({
                            ...p,
                            editLojaCodigo: e.target.value
                        }),
                        className: "w-20 px-2 py-1 border rounded text-xs"
                    }) : React.createElement("span", {
                        className: "font-mono font-bold"
                    }, t.codigo)), React.createElement("td", {
                        className: "px-3 py-2"
                    }, c ? React.createElement("input", {
                        type: "text",
                        value: p.editLojaNome || "",
                        onChange: e => x({
                            ...p,
                            editLojaNome: e.target.value.toUpperCase()
                        }),
                        className: "w-full px-2 py-1 border rounded text-xs"
                    }) : t.nome), React.createElement("td", {
                        className: "px-3 py-2 text-center"
                    }, React.createElement("span", {
                        className: "px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs"
                    }, l)), React.createElement("td", {
                        className: "px-3 py-2 text-center"
                    }, React.createElement("span", {
                        className: "px-2 py-0.5 bg-red-100 text-red-700 rounded text-xs"
                    }, o)), React.createElement("td", {
                        className: "px-3 py-2 text-center font-semibold"
                    }, a.length), React.createElement("td", {
                        className: "px-3 py-2 text-center"
                    }, c ? React.createElement(React.Fragment, null, React.createElement("button", {
                        onClick: async () => {
                            try {
                                await fetch(`${API_URL}/disponibilidade/lojas/${t.id}`, {
                                    method: "PUT",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        codigo: p.editLojaCodigo,
                                        nome: p.editLojaNome
                                    })
                                }), x({
                                    ...p,
                                    editandoLoja: null
                                }), ja("‚úÖ Loja atualizada!", "success"), r()
                            } catch (e) {
                                ja("Erro ao atualizar", "error")
                            }
                        },
                        className: "px-2 py-1 bg-green-100 text-green-700 rounded text-xs mr-1"
                    }, "‚úì"), React.createElement("button", {
                        onClick: () => x({
                            ...p,
                            editandoLoja: null
                        }),
                        className: "px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs"
                    }, "‚úï")) : React.createElement(React.Fragment, null, React.createElement("button", {
                        onClick: () => x({
                            ...p,
                            editandoLoja: t.id,
                            editLojaCodigo: t.codigo,
                            editLojaNome: t.nome
                        }),
                        className: "px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs mr-1",
                        title: "Editar loja"
                    }, "‚úèÔ∏è"), React.createElement("button", {
                        onClick: () => s(t.id, 1, !1),
                        className: "px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs mr-1",
                        title: "Adicionar titular"
                    }, "+T"), React.createElement("button", {
                        onClick: () => s(t.id, 1, !0),
                        className: "px-2 py-1 bg-red-100 text-red-700 rounded text-xs mr-1",
                        title: "Adicionar excedente"
                    }, "+E"), React.createElement("button", {
                        onClick: () => (async (e, t) => {
                            if (window.confirm(`Remover loja "${t}"?`)) try {
                                await fetch(`${API_URL}/disponibilidade/lojas/${e}`, {
                                    method: "DELETE"
                                }), ja("üóëÔ∏è Loja removida!", "success"), r()
                            } catch (e) {
                                ja("Erro ao remover loja", "error")
                            }
                        })(t.id, t.nome),
                        className: "px-2 py-1 bg-red-100 text-red-700 rounded text-xs",
                        title: "Remover loja"
                    }, "üóëÔ∏è"))))
                })))))
            }), (e.linhas || []).length > 0 && React.createElement("div", {
                className: "bg-red-50 border border-red-200 rounded-xl p-4"
            }, React.createElement("div", {
                className: "flex items-center justify-between"
            }, React.createElement("div", null, React.createElement("h4", {
                className: "font-semibold text-red-800"
            }, "üßπ Limpar Todas as Linhas"), React.createElement("p", {
                className: "text-sm text-red-600"
            }, "Reseta todos os entregadores, mant√©m a estrutura de regi√µes e lojas.")), React.createElement("button", {
                onClick: async () => {
                    if (window.confirm("Limpar TODAS as linhas? (mant√©m a estrutura de regi√µes e lojas)")) try {
                        await fetch(`${API_URL}/disponibilidade/limpar-linhas`, {
                            method: "DELETE"
                        }), ja("‚úÖ Todas as linhas foram resetadas!", "success"), r()
                    } catch (e) {
                        ja("Erro ao limpar linhas", "error")
                    }
                },
                className: "px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700"
            }, "Limpar Linhas")))), "principal" === t && React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-3"
            }, React.createElement("div", {
                className: "flex justify-between items-center flex-wrap gap-3"
            }, React.createElement("div", {
                className: "flex items-center gap-3"
            }, React.createElement("h2", {
                className: "text-lg font-bold text-gray-800"
            }, "üìÖ Disponibilidade"), React.createElement("div", {
                className: "flex items-center gap-2 bg-purple-50 px-3 py-1.5 rounded-lg border border-purple-200"
            }, React.createElement("span", {
                className: "text-sm font-semibold text-purple-700"
            }, "Data:"), React.createElement("input", {
                type: "date",
                value: p.dispDataPlanilha || (new Date).toISOString().split("T")[0],
                onChange: e => x({
                    ...p,
                    dispDataPlanilha: e.target.value
                }),
                className: "px-2 py-1 border border-purple-300 rounded text-sm font-semibold text-purple-800 bg-white"
            })), React.createElement("div", {
                className: "flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200"
            }, React.createElement("span", {
                className: "text-blue-500"
            }, "üîç"), React.createElement("input", {
                type: "text",
                placeholder: "Buscar c√≥digo ou nome...",
                value: p.buscaEntregador || "",
                onChange: e => x({
                    ...p,
                    buscaEntregador: e.target.value
                }),
                className: "px-2 py-1 border border-blue-300 rounded text-sm bg-white w-48"
            }), p.buscaEntregador && React.createElement("button", {
                onClick: () => x({
                    ...p,
                    buscaEntregador: ""
                }),
                className: "text-blue-400 hover:text-blue-600"
            }, "√ó"))), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("button", {
                onClick: r,
                className: "px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 flex items-center gap-1 text-sm"
            }, "üîÑ Atualizar"), React.createElement("button", {
                onClick: async () => {
                    const e = p.dispDataPlanilha || (new Date).toISOString().split("T")[0],
                        t = new Date(e + "T12:00:00").toLocaleDateString("pt-BR");
                    if (window.confirm(`‚ö†Ô∏è ATEN√á√ÉO!\n\nüìÖ Data da planilha: ${t}\n\nIsso ir√°:\n‚Ä¢ Salvar a planilha atual no Espelho (${t})\n‚Ä¢ Registrar motoboys EM LOJA e SEM CONTATO\n‚Ä¢ Remover motoboys com 3+ dias SEM CONTATO\n‚Ä¢ Resetar todos os status para "A CONFIRMAR"\n‚Ä¢ Limpar todas as observa√ß√µes\n‚Ä¢ Converter linhas de reposi√ß√£o em excedentes\n\n‚úÖ Os c√≥digos e nomes ser√£o MANTIDOS!\n\nDeseja continuar?`)) try {
                        x(e => ({
                            ...e,
                            dispLoading: !0
                        }));
                        const a = await fetch(`${API_URL}/disponibilidade/resetar`, {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    data_planilha: e
                                })
                            }),
                            l = await a.json();
                        if (l.success) {
                            let e = `‚úÖ Status resetado! Espelho salvo em ${t}`;
                            l.em_loja_registrados > 0 && (e += `\nüè™ ${l.em_loja_registrados} motoboy(s) EM LOJA registrado(s)`), l.sem_contato_registrados > 0 && (e += `\nüìµ ${l.sem_contato_registrados} motoboy(s) SEM CONTATO registrado(s)`), l.removidos_por_sem_contato && l.removidos_por_sem_contato.length > 0 && (e += "\n\nüö´ REMOVIDOS POR 3 DIAS SEM CONTATO:", l.removidos_por_sem_contato.forEach(t => {
                                e += `\n‚Ä¢ ${t.cod} - ${t.nome}`
                            })), ja(e, "success"), l.removidos_por_sem_contato && l.removidos_por_sem_contato.length > 0 && setTimeout(() => {
                                alert(`üö´ MOTOBOYS REMOVIDOS POR 3 DIAS SEM CONTATO:\n\n${l.removidos_por_sem_contato.map(e=>`${e.cod} - ${e.nome}`).join("\n")}`)
                            }, 500)
                        } else ja("Erro ao resetar", "error");
                        r()
                    } catch (e) {
                        console.error("Erro ao resetar:", e), ja("Erro ao resetar", "error"), x(e => ({
                            ...e,
                            dispLoading: !1
                        }))
                    }
                },
                className: "px-3 py-1.5 bg-orange-100 text-orange-700 rounded-lg font-semibold hover:bg-orange-200 flex items-center gap-1 text-sm"
            }, "üîÑ Resetar Status"))), p.buscaEntregador && p.buscaEntregador.length >= 2 && React.createElement("div", {
                className: "mt-3 p-3 bg-blue-50 rounded-lg"
            }, React.createElement("p", {
                className: "text-xs font-semibold text-blue-700 mb-2"
            }, 'Resultados para "', p.buscaEntregador, '":'), React.createElement("div", {
                className: "space-y-1 max-h-40 overflow-y-auto"
            }, (() => {
                const t = p.buscaEntregador.toLowerCase(),
                    a = (e.linhas || []).filter(e => e.cod_profissional && e.cod_profissional.toLowerCase().includes(t) || e.nome_profissional && e.nome_profissional.toLowerCase().includes(t));
                return 0 === a.length ? React.createElement("p", {
                    className: "text-gray-500 text-sm"
                }, "Nenhum resultado encontrado") : a.slice(0, 10).map(t => {
                    const a = (e.lojas || []).find(e => e.id === t.loja_id);
                    return React.createElement("div", {
                        key: t.id,
                        className: "flex items-center justify-between p-2 bg-white rounded text-xs"
                    }, React.createElement("div", {
                        className: "flex items-center gap-2"
                    }, React.createElement("span", {
                        className: "font-mono font-bold"
                    }, t.cod_profissional || "-"), React.createElement("span", null, t.nome_profissional || "Sem nome")), React.createElement("div", {
                        className: "flex items-center gap-2"
                    }, React.createElement("span", {
                        className: "text-gray-500"
                    }, a?.nome || ""), React.createElement("span", {
                        className: "px-2 py-0.5 rounded text-[10px] font-bold " + ("EM LOJA" === t.status ? "bg-blue-100 text-blue-700" : "CONFIRMADO" === t.status ? "bg-green-100 text-green-700" : "A CAMINHO" === t.status ? "bg-orange-100 text-orange-700" : "FALTANDO" === t.status ? "bg-red-100 text-red-700" : "bg-gray-100 text-gray-700")
                    }, t.status)))
                })
            })()))), p.modalFaltando && React.createElement("div", {
                className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow-xl p-6 w-full max-w-md mx-4"
            }, React.createElement("h3", {
                className: "text-lg font-bold text-red-600 mb-4"
            }, "‚ö†Ô∏è Registrar Falta"), React.createElement("div", {
                className: "mb-4"
            }, React.createElement("p", {
                className: "text-sm text-gray-600 mb-2"
            }, React.createElement("strong", null, "Profissional:"), " ", p.faltandoLinha?.nome_profissional || p.faltandoLinha?.cod_profissional || "N√£o identificado"), React.createElement("label", {
                className: "text-sm font-semibold text-gray-700"
            }, "Motivo da falta *"), React.createElement("textarea", {
                value: p.faltandoMotivo || "",
                onChange: e => x({
                    ...p,
                    faltandoMotivo: e.target.value
                }),
                placeholder: "Digite o motivo da falta...",
                className: "w-full px-3 py-2 border rounded-lg mt-1 text-sm",
                rows: 3,
                autoFocus: !0
            })), React.createElement("div", {
                className: "flex gap-2"
            }, React.createElement("button", {
                onClick: () => x({
                    ...p,
                    modalFaltando: !1,
                    faltandoLinha: null,
                    faltandoMotivo: ""
                }),
                className: "flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200"
            }, "Cancelar"), React.createElement("button", {
                onClick: async () => {
                    const t = p.faltandoLinha,
                        a = p.faltandoMotivo?.trim();
                    if (!a) return void ja("Digite o motivo da falta", "error");
                    const l = p.dispDataPlanilha || (new Date).toISOString().split("T")[0];
                    try {
                        await fetch(`${API_URL}/disponibilidade/linhas/${t.id}`, {
                            method: "PUT",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                cod_profissional: t.cod_profissional,
                                nome_profissional: t.nome_profissional,
                                status: "FALTANDO",
                                observacao: a
                            })
                        }), await fetch(`${API_URL}/disponibilidade/faltosos`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                loja_id: t.loja_id,
                                cod_profissional: t.cod_profissional,
                                nome_profissional: t.nome_profissional,
                                motivo: a,
                                data_falta: l
                            })
                        });
                        const r = await fetch(`${API_URL}/disponibilidade/linha-reposicao`, {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify({
                                    loja_id: t.loja_id,
                                    after_linha_id: t.id
                                })
                            }),
                            o = await r.json(),
                            c = [...e.linhas || []],
                            s = c.findIndex(e => e.id === t.id); - 1 !== s && (c[s] = {
                            ...c[s],
                            status: "FALTANDO",
                            observacao: a
                        }), c.push(o), x(t => ({
                            ...t,
                            modalFaltando: !1,
                            faltandoLinha: null,
                            faltandoMotivo: "",
                            dispData: {
                                ...e,
                                linhas: c
                            }
                        })), ja("‚ö†Ô∏è Falta registrada e linha de reposi√ß√£o criada!", "success")
                    } catch (e) {
                        console.error("Erro ao registrar falta:", e), ja("Erro ao registrar falta", "error")
                    }
                },
                className: "flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700"
            }, "‚úì Confirmar Falta")))), 0 === (e.regioes || []).length ? React.createElement("div", {
                className: "bg-white rounded-xl shadow p-8 text-center"
            }, React.createElement("p", {
                className: "text-gray-500 text-lg"
            }, "Nenhuma estrutura configurada."), React.createElement("button", {
                onClick: () => x({
                    ...p,
                    dispSubTab: "config"
                }),
                className: "mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold"
            }, "‚öôÔ∏è Configurar Estrutura")) : React.createElement(React.Fragment, null, React.createElement("div", {
                className: "flex flex-wrap gap-2"
            }, (e.regioes || []).map(t => {
                const a = (e.lojas || []).filter(e => e.regiao_id === t.id),
                    l = (e.linhas || []).filter(e => a.some(t => t.id === e.loja_id)),
                    r = l.filter(e => "EM LOJA" === e.status).length,
                    o = l.filter(e => !e.is_excedente && !e.is_reposicao).length;
                return React.createElement("button", {
                    key: t.id,
                    onClick: () => x({
                        ...p,
                        dispRegiaoAtiva: p.dispRegiaoAtiva === t.id ? null : t.id
                    }),
                    className: "px-3 py-1.5 rounded-lg font-semibold transition-all flex items-center gap-2 text-sm " + (p.dispRegiaoAtiva === t.id ? "bg-purple-600 text-white shadow-lg" : "bg-white text-gray-700 border hover:bg-purple-50 hover:border-purple-300")
                }, "üìç ", t.nome, React.createElement("span", {
                    className: "text-xs px-2 py-0.5 rounded-full font-bold " + (p.dispRegiaoAtiva === t.id ? "bg-white/20 text-white" : r >= o && o > 0 ? "bg-green-100 text-green-700" : "bg-gray-100 text-gray-600")
                }, r, "/", o))
            })), p.dispRegiaoAtiva && (() => {
                const t = (e.regioes || []).find(e => e.id === p.dispRegiaoAtiva);
                if (!t) return null;
                const a = (e.lojas || []).filter(e => e.regiao_id === t.id);
                return React.createElement("div", {
                    className: "space-y-2"
                }, a.map(t => {
                    const a = (e.linhas || []).filter(e => e.loja_id === t.id),
                        l = (p.dispLojasAbertas || []).includes(t.id),
                        o = a.filter(e => "EM LOJA" === e.status).length,
                        totalTitulares = a.filter(e => !e.is_excedente && !e.is_reposicao).length,
                        i = a.filter(e => "FALTANDO" === e.status).length;
                    a.filter(e => e.is_reposicao).length;
                    let d = "bg-gray-100 hover:bg-gray-200";
                    return i > 0 ? d = "bg-red-100 hover:bg-red-200" : o >= totalTitulares && totalTitulares > 0 ? d = "bg-green-100 hover:bg-green-200" : o > 0 && (d = "bg-yellow-100 hover:bg-yellow-200"), React.createElement("div", {
                        key: t.id,
                        className: "bg-white rounded-lg shadow overflow-hidden"
                    }, React.createElement("button", {
                        onClick: () => {
                            const e = p.dispLojasAbertas || [];
                            x(l ? {
                                ...p,
                                dispLojasAbertas: e.filter(e => e !== t.id)
                            } : {
                                ...p,
                                dispLojasAbertas: [...e, t.id]
                            })
                        },
                        className: `w-full px-3 py-2 flex items-center justify-between ${d} transition-colors`
                    }, React.createElement("div", {
                        className: "flex items-center gap-2"
                    }, React.createElement("span", {
                        className: "transform transition-transform text-xs " + (l ? "rotate-90" : "")
                    }, "‚ñ∂"), React.createElement("span", {
                        className: "font-mono font-bold text-purple-700 text-sm"
                    }, t.codigo), React.createElement("span", {
                        className: "font-semibold text-gray-800 text-sm"
                    }, t.nome)), React.createElement("div", {
                        className: "flex items-center gap-2"
                    }, i > 0 && React.createElement("span", {
                        className: "px-2 py-0.5 bg-red-500 text-white text-xs rounded-full font-semibold"
                    }, i, " faltando"), React.createElement("span", {
                        className: "text-xs font-semibold px-2 py-0.5 rounded " + (o >= totalTitulares ? "bg-green-200 text-green-800" : "bg-gray-200 text-gray-700")
                    }, o, "/", totalTitulares, " em loja"), React.createElement("button", {
                        onClick: ev => { ev.stopPropagation(); s(t.id, 1, false); },
                        className: "px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded font-semibold hover:bg-purple-200 transition-colors",
                        title: "Adicionar 1 titular"
                    }, "‚ûï Titular"), React.createElement("button", {
                        onClick: ev => { ev.stopPropagation(); s(t.id, 1, true); },
                        className: "px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded font-semibold hover:bg-red-200 transition-colors",
                        title: "Adicionar 1 excedente"
                    }, "‚ûï Excedente"))), l && React.createElement("div", {
                        className: "border-t",
                        "data-loja-id": t.id
                    }, React.createElement("table", {
                        className: "w-full text-xs"
                    }, React.createElement("thead", {
                        className: "bg-gray-50"
                    }, React.createElement("tr", null, React.createElement("th", {
                        className: "w-1"
                    }), React.createElement("th", {
                        className: "px-2 py-1 text-center w-20"
                    }, "COD"), React.createElement("th", {
                        className: "px-2 py-1 text-left"
                    }, "ENTREGADOR"), React.createElement("th", {
                        className: "px-2 py-1 text-center w-36"
                    }, "STATUS"), React.createElement("th", {
                        className: "px-2 py-1 text-left"
                    }, "OBS"), React.createElement("th", {
                        className: "px-1 py-1 text-center w-6"
                    }))), React.createElement("tbody", null, [...a].sort((e, t) => e.is_reposicao && !t.is_reposicao ? -1 : !e.is_reposicao && t.is_reposicao || e.is_excedente && !t.is_excedente ? 1 : !e.is_excedente && t.is_excedente ? -1 : 0).map((e, a) => React.createElement("tr", {
                        key: e.id,
                        className: `border-t ${e.is_reposicao?"bg-blue-50/50":e.is_excedente?"bg-red-50/50":""} ${e.is_excedente||e.is_reposicao||!m[e.status]?"":m[e.status]} hover:bg-gray-50`
                    }, React.createElement("td", {
                        className: "w-1 " + (e.is_reposicao ? "bg-blue-400" : e.is_excedente ? "bg-red-400" : "")
                    }), React.createElement("td", {
                        className: "px-1 py-0.5"
                    }, React.createElement("input", {
                        type: "text",
                        value: e.cod_profissional || "",
                        onChange: t => c(e.id, "cod_profissional", t.target.value),
                        onKeyDown: e => {
                            if ("ArrowDown" === e.key || "ArrowUp" === e.key) {
                                e.preventDefault();
                                const a = document.querySelectorAll(`[data-loja-id="${t.id}"] input[data-cod-input]`),
                                    l = Array.from(a).findIndex(t => t === e.target);
                                let r = "ArrowDown" === e.key ? l + 1 : l - 1;
                                r >= 0 && r < a.length && (a[r].focus(), a[r].select())
                            }
                            if ("Enter" === e.key) {
                                e.preventDefault();
                                const a = document.querySelectorAll(`[data-loja-id="${t.id}"] input[data-cod-input]`),
                                    l = Array.from(a).findIndex(t => t === e.target);
                                l + 1 < a.length && (a[l + 1].focus(), a[l + 1].select())
                            }
                        },
                        "data-cod-input": e.id,
                        placeholder: "...",
                        className: "w-full px-1 py-0.5 border border-gray-200 rounded text-center font-mono text-xs " + (e.is_reposicao ? "bg-blue-50/50" : e.is_excedente ? "bg-red-50/50" : "bg-white")
                    })), React.createElement("td", {
                        className: "px-1 py-0.5"
                    }, React.createElement("div", {
                        className: "flex items-center gap-1"
                    }, e.is_reposicao && React.createElement("span", {
                        className: "text-[9px] text-blue-400 italic"
                    }, "reposi√ß√£o"), e.is_excedente && React.createElement("span", {
                        className: "text-[9px] text-red-400 italic"
                    }, "excedente"), React.createElement("span", {
                        className: "text-xs " + (e.nome_profissional ? "text-gray-800" : "text-gray-400 italic")
                    }, e.nome_profissional || (e.is_reposicao || e.is_excedente ? "" : "-")))), React.createElement("td", {
                        className: "px-1 py-0.5"
                    }, React.createElement("select", {
                        value: e.status || "A CONFIRMAR",
                        onChange: t => {
                            "FALTANDO" === t.target.value ? (e => {
                                x(t => ({
                                    ...t,
                                    modalFaltando: !0,
                                    faltandoLinha: e,
                                    faltandoMotivo: ""
                                }))
                            })(e) : c(e.id, "status", t.target.value)
                        },
                        className: `w-full px-1 py-0.5 border border-gray-200 rounded text-xs font-semibold ${n[e.status]||""}`
                    }, React.createElement("option", {
                        value: "A CONFIRMAR"
                    }, "A CONFIRMAR"), React.createElement("option", {
                        value: "CONFIRMADO"
                    }, "CONFIRMADO"), React.createElement("option", {
                        value: "A CAMINHO"
                    }, "A CAMINHO"), React.createElement("option", {
                        value: "EM LOJA"
                    }, "EM LOJA"), React.createElement("option", {
                        value: "FALTANDO"
                    }, "FALTANDO"), React.createElement("option", {
                        value: "SEM CONTATO"
                    }, "SEM CONTATO"))), React.createElement("td", {
                        className: "px-1 py-0.5"
                    }, React.createElement("div", {
                        className: "relative"
                    }, React.createElement("input", {
                        type: "text",
                        value: e.observacao || "",
                        onChange: t => c(e.id, "observacao", t.target.value),
                        placeholder: "...",
                        title: e.observacao_criada_por ? `üìù ${e.observacao_criada_por} - ${e.observacao_criada_em ? new Date(e.observacao_criada_em).toLocaleString("pt-BR") : ""}` : "Adicionar observa√ß√£o",
                        className: "w-full px-1 py-0.5 border border-gray-200 rounded text-xs " + (e.is_excedente ? "bg-red-50/50" : e.is_reposicao ? "bg-blue-50/50" : "bg-white") + (e.observacao_criada_por ? " border-purple-300" : "")
                    }), e.observacao && e.observacao_criada_por && React.createElement("span", {
                        className: "absolute -top-1 -right-1 w-2 h-2 bg-purple-500 rounded-full",
                        title: `Por: ${e.observacao_criada_por}`
                    }))), React.createElement("td", {
                        className: "px-1 py-0.5 text-center"
                    }, React.createElement("button", {
                        onClick: () => (async e => {
                            try {
                                await fetch(`${API_URL}/disponibilidade/linhas/${e}`, {
                                    method: "DELETE"
                                }), r()
                            } catch (e) {
                                ja("Erro ao remover linha", "error")
                            }
                        })(e.id),
                        className: "text-red-400 hover:text-red-600 text-xs",
                        title: "Remover"
                    }, "√ó"))))))))
                }), React.createElement("div", {
                    className: "flex gap-2 pt-2"
                }, React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        dispLojasAbertas: a.map(e => e.id)
                    }),
                    className: "px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200"
                }, "üìÇ Expandir Todas"), React.createElement("button", {
                    onClick: () => x({
                        ...p,
                        dispLojasAbertas: []
                    }),
                    className: "px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200"
                }, "üìÅ Recolher Todas")))
            })(), !p.dispRegiaoAtiva && React.createElement("div", {
                className: "bg-white rounded-xl shadow p-8 text-center"
            }, React.createElement("p", {
                className: "text-gray-500"
            }, "üëÜ Selecione uma regi√£o acima para ver as lojas"))), (e.regioes || []).length > 0 && React.createElement("div", {
                className: "bg-white rounded-xl shadow p-3"
            }, React.createElement("h4", {
                className: "font-semibold text-gray-700 mb-2 text-sm"
            }, "üìä Legenda"), React.createElement("div", {
                className: "flex flex-wrap gap-2 text-xs"
            }, React.createElement("span", {
                className: "px-2 py-1 bg-yellow-100 text-yellow-800 rounded font-semibold"
            }, "A CONFIRMAR"), React.createElement("span", {
                className: "px-2 py-1 bg-green-100 text-green-800 rounded font-semibold"
            }, "CONFIRMADO"), React.createElement("span", {
                className: "px-2 py-1 bg-blue-100 text-blue-800 rounded font-semibold"
            }, "EM LOJA"), React.createElement("span", {
                className: "px-2 py-1 bg-red-100 text-red-800 rounded font-semibold"
            }, "FALTANDO"), React.createElement("span", {
                className: "px-2 py-1 bg-red-50 text-red-700 rounded font-semibold border-l-4 border-red-400"
            }, "EXCEDENTE"), React.createElement("span", {
                className: "px-2 py-1 bg-blue-50 text-blue-700 rounded font-semibold border-l-4 border-blue-400"
            }, "REPOSI√á√ÉO")))), "faltosos" === t && React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "üîç Filtros"), React.createElement("div", {
                className: "grid grid-cols-1 md:grid-cols-4 gap-3"
            }, React.createElement("div", null, React.createElement("label", {
                className: "text-xs text-gray-600"
            }, "Data In√≠cio"), React.createElement("input", {
                type: "date",
                value: p.faltososDataInicio || "",
                onChange: e => x({
                    ...p,
                    faltososDataInicio: e.target.value
                }),
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            })), React.createElement("div", null, React.createElement("label", {
                className: "text-xs text-gray-600"
            }, "Data Fim"), React.createElement("input", {
                type: "date",
                value: p.faltososDataFim || "",
                onChange: e => x({
                    ...p,
                    faltososDataFim: e.target.value
                }),
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            })), React.createElement("div", null, React.createElement("label", {
                className: "text-xs text-gray-600"
            }, "Loja"), React.createElement("select", {
                value: p.faltososLojaId || "",
                onChange: e => x({
                    ...p,
                    faltososLojaId: e.target.value
                }),
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Todas as lojas"), (e.lojas || []).map(e => React.createElement("option", {
                key: e.id,
                value: e.id
            }, e.codigo, " - ", e.nome)))), React.createElement("div", {
                className: "flex items-end gap-2"
            }, React.createElement("button", {
                onClick: async () => {
                    try {
                        let e = `${API_URL}/disponibilidade/faltosos?`;
                        p.faltososDataInicio && (e += `data_inicio=${p.faltososDataInicio}&`), p.faltososDataFim && (e += `data_fim=${p.faltososDataFim}&`), p.faltososLojaId && (e += `loja_id=${p.faltososLojaId}`);
                        const t = await fetch(e),
                            a = await t.json();
                        x(e => ({
                            ...e,
                            faltososLista: a
                        }))
                    } catch (e) {
                        ja("Erro ao buscar faltosos", "error")
                    }
                },
                className: "flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
            }, "üîç Buscar"), React.createElement("button", {
                onClick: async () => {
                    x(e => ({
                        ...e,
                        faltososDataInicio: "",
                        faltososDataFim: "",
                        faltososLojaId: ""
                    }));
                    try {
                        const e = await fetch(`${API_URL}/disponibilidade/faltosos`),
                            t = await e.json();
                        x(e => ({
                            ...e,
                            faltososLista: t
                        }))
                    } catch (e) {
                        ja("Erro ao buscar faltosos", "error")
                    }
                },
                className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
            }, "üîÑ Limpar")))), React.createElement("div", {
                className: "bg-white rounded-xl shadow overflow-hidden"
            }, React.createElement("div", {
                className: "px-4 py-3 bg-gray-50 border-b flex justify-between items-center"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800"
            }, "üìã Registro de Faltas (", (p.faltososLista || []).length, ")")), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-xs"
            }, React.createElement("thead", {
                className: "bg-gray-100"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-3 py-2 text-left"
            }, "DATA"), React.createElement("th", {
                className: "px-3 py-2 text-left"
            }, "REGI√ÉO"), React.createElement("th", {
                className: "px-3 py-2 text-left"
            }, "LOJA"), React.createElement("th", {
                className: "px-3 py-2 text-left"
            }, "COD"), React.createElement("th", {
                className: "px-3 py-2 text-left"
            }, "PROFISSIONAL"), React.createElement("th", {
                className: "px-3 py-2 text-left"
            }, "MOTIVO"), React.createElement("th", {
                className: "px-3 py-2 text-center w-16"
            }, "A√á√ÉO"))), React.createElement("tbody", null, 0 === (p.faltososLista || []).length ? React.createElement("tr", null, React.createElement("td", {
                colSpan: "7",
                className: "px-3 py-8 text-center text-gray-500"
            }, "Nenhum registro de falta encontrado.")) : (p.faltososLista || []).map(e => React.createElement("tr", {
                key: e.id,
                className: "border-t hover:bg-gray-50"
            }, React.createElement("td", {
                className: "px-3 py-2"
            }, new Date(e.data_falta).toLocaleDateString("pt-BR")), React.createElement("td", {
                className: "px-3 py-2"
            }, e.regiao_nome), React.createElement("td", {
                className: "px-3 py-2 font-mono"
            }, e.loja_codigo, " - ", e.loja_nome), React.createElement("td", {
                className: "px-3 py-2 font-mono"
            }, e.cod_profissional || "-"), React.createElement("td", {
                className: "px-3 py-2"
            }, e.nome_profissional || "-"), React.createElement("td", {
                className: "px-3 py-2 text-red-600"
            }, e.motivo), React.createElement("td", {
                className: "px-3 py-2 text-center"
            }, React.createElement("button", {
                onClick: async () => {
                    if (window.confirm(`Excluir registro de falta de ${e.nome_profissional||e.cod_profissional}?`)) try {
                        await fetch(`${API_URL}/disponibilidade/faltosos/${e.id}`, {
                            method: "DELETE"
                        }), x(t => ({
                            ...t,
                            faltososLista: t.faltososLista.filter(t => t.id !== e.id)
                        })), ja("‚úÖ Falta exclu√≠da", "success")
                    } catch (e) {
                        ja("Erro ao excluir", "error")
                    }
                },
                className: "text-red-500 hover:text-red-700 hover:bg-red-50 px-2 py-1 rounded",
                title: "Excluir falta"
            }, "üóëÔ∏è"))))))))), "espelho" === t && React.createElement("div", {
                className: "space-y-4"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4"
            }, React.createElement("h3", {
                className: "font-bold text-gray-800 mb-3"
            }, "ü™û Hist√≥rico de Planilhas"), React.createElement("div", {
                className: "flex gap-3 items-end"
            }, React.createElement("div", {
                className: "flex-1"
            }, React.createElement("label", {
                className: "text-xs text-gray-600"
            }, "Selecione a data"), React.createElement("select", {
                value: p.espelhoDataSelecionada || "",
                onChange: async e => {
                    const t = e.target.value;
                    if (x(e => ({
                            ...e,
                            espelhoDataSelecionada: t,
                            espelhoCarregando: !0
                        })), t) try {
                        const e = await fetch(`${API_URL}/disponibilidade/espelho/${t}`),
                            a = await e.json();
                        console.log("Espelho carregado:", a), x(e => ({
                            ...e,
                            espelhoDados: a.dados,
                            espelhoCarregando: !1
                        }))
                    } catch (e) {
                        console.error("Erro ao carregar espelho:", e), ja("Erro ao carregar espelho", "error"), x(e => ({
                            ...e,
                            espelhoCarregando: !1
                        }))
                    } else x(e => ({
                        ...e,
                        espelhoDados: null,
                        espelhoCarregando: !1
                    }))
                },
                className: "w-full px-3 py-2 border rounded-lg text-sm"
            }, React.createElement("option", {
                value: ""
            }, "Selecione uma data..."), (p.espelhoDatas || []).map(e => {
                const t = e.data_registro?.split("T")[0] || e.data_registro,
                    [a, l, r] = (t || "").split("-"),
                    o = a && l && r ? `${r}/${l}/${a}` : t;
                return React.createElement("option", {
                    key: e.id,
                    value: t
                }, o)
            }))), React.createElement("button", {
                onClick: async () => {
                    try {
                        const e = await fetch(`${API_URL}/disponibilidade/espelho`),
                            t = await e.json();
                        console.log("Datas espelho:", t), x(e => ({
                            ...e,
                            espelhoDatas: t
                        })), ja(`${t.length} data(s) encontrada(s)!`, "success")
                    } catch (e) {
                        ja("Erro ao carregar datas", "error")
                    }
                },
                className: "px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200"
            }, "üîÑ Atualizar"), p.espelhoDataSelecionada && React.createElement("button", {
                onClick: async () => {
                    const e = (p.espelhoDatas || []).find(e => (e.data_registro?.split("T")[0] || e.data_registro) === p.espelhoDataSelecionada);
                    if (!e) return;
                    const t = p.espelhoDataSelecionada.split("-").reverse().join("/");
                    if (window.confirm(`‚ö†Ô∏è Excluir espelho de ${t}?\n\nEssa a√ß√£o n√£o pode ser desfeita.`)) try {
                        await fetch(`${API_URL}/disponibilidade/espelho/${e.id}`, {
                            method: "DELETE"
                        });
                        const a = await fetch(`${API_URL}/disponibilidade/espelho`),
                            l = await a.json();
                        x(e => ({
                            ...e,
                            espelhoDatas: l,
                            espelhoDataSelecionada: "",
                            espelhoDados: null
                        })), ja(`‚úÖ Espelho de ${t} exclu√≠do`, "success")
                    } catch (e) {
                        ja("Erro ao excluir espelho", "error")
                    }
                },
                className: "px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold hover:bg-red-200"
            }, "üóëÔ∏è Excluir")), React.createElement("p", {
                className: "text-xs text-gray-500 mt-2"
            }, 0 === (p.espelhoDatas || []).length ? 'Nenhum espelho salvo ainda. Use "Resetar Status" para criar o primeiro.' : `${(p.espelhoDatas||[]).length} espelho(s) dispon√≠vel(is)`)), p.espelhoCarregando ? React.createElement("div", {
                className: "bg-white rounded-xl shadow p-8 text-center"
            }, React.createElement("div", {
                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"
            }), React.createElement("p", {
                className: "mt-2 text-gray-500"
            }, "Carregando...")) : p.espelhoDados ? React.createElement("div", {
                className: "space-y-4"
            }, (() => {
                const e = "string" == typeof p.espelhoDados ? JSON.parse(p.espelhoDados) : p.espelhoDados;
                return console.log("Dados do espelho:", e), e && e.regioes && 0 !== e.regioes.length ? (e.regioes || []).map(t => {
                    const a = (e.lojas || []).filter(e => e.regiao_id === t.id);
                    return 0 === a.length ? null : React.createElement("div", {
                        key: t.id,
                        className: "bg-white rounded-xl shadow overflow-hidden"
                    }, React.createElement("div", {
                        className: "bg-gradient-to-r from-purple-600 to-indigo-600 px-4 py-2"
                    }, React.createElement("h3", {
                        className: "font-bold text-white text-sm"
                    }, "üìç ", t.nome)), a.map(t => {
                        const a = (e.linhas || []).filter(e => e.loja_id === t.id);
                        return React.createElement("div", {
                            key: t.id,
                            className: "border-t"
                        }, React.createElement("div", {
                            className: "px-3 py-2 bg-gray-50 font-semibold text-sm"
                        }, t.codigo, " - ", t.nome), React.createElement("table", {
                            className: "w-full text-xs"
                        }, React.createElement("tbody", null, [...a].sort((e, t) => e.is_reposicao && !t.is_reposicao ? -1 : !e.is_reposicao && t.is_reposicao || e.is_excedente && !t.is_excedente ? 1 : !e.is_excedente && t.is_excedente ? -1 : 0).map(e => React.createElement("tr", {
                            key: e.id,
                            className: `border-t ${e.is_excedente?"bg-red-50":""} ${e.is_reposicao?"bg-blue-50":""}`
                        }, React.createElement("td", {
                            className: `w-1 ${e.is_excedente?"bg-red-400":""} ${e.is_reposicao?"bg-blue-400":""}`
                        }), React.createElement("td", {
                            className: "px-2 py-1 font-mono w-20"
                        }, e.cod_profissional || "-"), React.createElement("td", {
                            className: "px-2 py-1"
                        }, React.createElement("div", {
                            className: "flex items-center gap-1"
                        }, e.is_reposicao && React.createElement("span", {
                            className: "text-[9px] text-blue-400 italic"
                        }, "reposi√ß√£o"), e.is_excedente && React.createElement("span", {
                            className: "text-[9px] text-red-400 italic"
                        }, "excedente"), React.createElement("span", null, e.nome_profissional || (e.is_reposicao || e.is_excedente ? "" : "-")))), React.createElement("td", {
                            className: "px-2 py-1 w-28"
                        }, React.createElement("span", {
                            className: "px-1 py-0.5 rounded text-xs " + ("EM LOJA" === e.status ? "bg-blue-100 text-blue-800" : "CONFIRMADO" === e.status ? "bg-green-100 text-green-800" : "FALTANDO" === e.status ? "bg-red-100 text-red-800" : "bg-yellow-100 text-yellow-800")
                        }, e.status)), React.createElement("td", {
                            className: "px-2 py-1 text-gray-500"
                        }, e.observacao || ""))))))
                    }))
                }) : React.createElement("div", {
                    className: "bg-white rounded-xl shadow p-8 text-center"
                }, React.createElement("p", {
                    className: "text-gray-500"
                }, "Espelho vazio ou sem dados"))
            })()) : React.createElement("div", {
                className: "bg-white rounded-xl shadow p-8 text-center"
            }, React.createElement("p", {
                className: "text-gray-500"
            }, "Selecione uma data para visualizar o hist√≥rico"))))
        })()), "relatorios" === p.adminTab && (() => {
            const e = void 0 !== p.relMes ? parseInt(p.relMes) : (new Date).getMonth(),
                t = void 0 !== p.relAno ? parseInt(p.relAno) : (new Date).getFullYear(),
                a = j.filter(a => {
                    const l = new Date(a.created_at);
                    return l.getMonth() === e && l.getFullYear() === t
                }),
                l = a.filter(e => "aprovada" === e.status),
                r = a.filter(e => "rejeitada" === e.status),
                o = a.filter(e => "pendente" === e.status),
                c = a.length > 0 ? (l.length / a.length * 100).toFixed(1) : 0,
                s = a.length > 0 ? (r.length / a.length * 100).toFixed(1) : 0,
                n = {};
            a.forEach(e => {
                const t = e.motivo || "Outros";
                n[t] || (n[t] = {
                    total: 0,
                    aprovadas: 0,
                    rejeitadas: 0,
                    pendentes: 0
                }), n[t].total++, "aprovada" === e.status && n[t].aprovadas++, "rejeitada" === e.status && n[t].rejeitadas++, "pendente" === e.status && n[t].pendentes++
            });
            const m = {};
            a.forEach(e => {
                const t = e.user_name || e.cod_profissional || "Desconhecido";
                m[t] || (m[t] = {
                    total: 0,
                    aprovadas: 0,
                    rejeitadas: 0,
                    cod: e.cod_profissional
                }), m[t].total++, "aprovada" === e.status && m[t].aprovadas++, "rejeitada" === e.status && m[t].rejeitadas++
            });
            const i = Object.entries(m).map(([e, t]) => ({
                    nome: e,
                    ...t,
                    taxa: t.total > 0 ? (t.aprovadas / t.total * 100).toFixed(0) : 0
                })).sort((e, t) => t.total - e.total).slice(0, 10),
                d = [{
                    label: "Semana 1",
                    dias: [1, 7],
                    total: 0,
                    aprovadas: 0
                }, {
                    label: "Semana 2",
                    dias: [8, 14],
                    total: 0,
                    aprovadas: 0
                }, {
                    label: "Semana 3",
                    dias: [15, 21],
                    total: 0,
                    aprovadas: 0
                }, {
                    label: "Semana 4",
                    dias: [22, 31],
                    total: 0,
                    aprovadas: 0
                }];
            a.forEach(e => {
                const t = new Date(e.created_at).getDate(),
                    a = d.find(e => t >= e.dias[0] && t <= e.dias[1]);
                a && (a.total++, "aprovada" === e.status && a.aprovadas++)
            });
            const u = Math.max(...d.map(e => e.total), 1),
                g = [];
            for (let a = 5; a >= 0; a--) {
                const l = new Date(t, e - a, 1),
                    r = l.getMonth(),
                    o = l.getFullYear(),
                    c = j.filter(e => {
                        const t = new Date(e.created_at);
                        return t.getMonth() === r && t.getFullYear() === o
                    });
                g.push({
                    label: l.toLocaleDateString("pt-BR", {
                        month: "short"
                    }),
                    total: c.length,
                    aprovadas: c.filter(e => "aprovada" === e.status).length
                })
            }
            const b = Math.max(...g.map(e => e.total), 1),
                R = new Date(t, e - 1, 1),
                E = j.filter(e => {
                    const t = new Date(e.created_at);
                    return t.getMonth() === R.getMonth() && t.getFullYear() === R.getFullYear()
                }),
                h = E.length > 0 ? ((a.length - E.length) / E.length * 100).toFixed(1) : 0,
                f = ["Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
            return React.createElement(React.Fragment, null, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4 mb-6 flex flex-wrap items-center gap-4"
            }, React.createElement("div", {
                className: "flex items-center gap-2"
            }, React.createElement("label", {
                className: "font-semibold"
            }, "üìÖ Per√≠odo:"), React.createElement("select", {
                value: e,
                onChange: e => x({
                    ...p,
                    relMes: e.target.value
                }),
                className: "px-3 py-2 border rounded-lg"
            }, f.map((e, t) => React.createElement("option", {
                key: t,
                value: t
            }, e))), React.createElement("select", {
                value: t,
                onChange: e => x({
                    ...p,
                    relAno: e.target.value
                }),
                className: "px-3 py-2 border rounded-lg"
            }, [2024, 2025, 2026].map(e => React.createElement("option", {
                key: e,
                value: e
            }, e)))), React.createElement("button", {
                onClick: () => {
                    const m = `\n                  <html>\n                  <head>\n                    <title>Relat√≥rio Tutts - ${f[e]}/${t}</title>\n                    <style>\n                      body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }\n                      h1 { color: #581c87; border-bottom: 2px solid #581c87; padding-bottom: 10px; }\n                      h2 { color: #7c3aed; margin-top: 30px; }\n                      .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }\n                      .cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0; }\n                      .card { background: #f3f4f6; padding: 15px; border-radius: 8px; text-align: center; }\n                      .card-value { font-size: 28px; font-weight: bold; }\n                      .green { color: #16a34a; }\n                      .red { color: #dc2626; }\n                      .yellow { color: #ca8a04; }\n                      .purple { color: #7c3aed; }\n                      table { width: 100%; border-collapse: collapse; margin: 15px 0; }\n                      th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }\n                      th { background: #f3f4f6; }\n                      .footer { margin-top: 40px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #ddd; padding-top: 20px; }\n                      .comparativo { background: ${parseFloat(h)>=0?"#dcfce7":"#fee2e2"}; padding: 15px; border-radius: 8px; margin: 20px 0; }\n                    </style>\n                  </head>\n                  <body>\n                    <div class="header">\n                      <h1>üìä Relat√≥rio Tutts</h1>\n                      <div>\n                        <strong>${f[e]} / ${t}</strong><br>\n                        <small>Gerado em: ${(new Date).toLocaleString("pt-BR")}</small>\n                      </div>\n                    </div>\n                    \n                    <h2>üìã Resumo Geral</h2>\n                    <div class="cards">\n                      <div class="card"><div class="card-value purple">${a.length}</div><div>Total</div></div>\n                      <div class="card"><div class="card-value green">${l.length}</div><div>Aprovadas</div></div>\n                      <div class="card"><div class="card-value red">${r.length}</div><div>Rejeitadas</div></div>\n                      <div class="card"><div class="card-value yellow">${o.length}</div><div>Pendentes</div></div>\n                    </div>\n                    \n                    <div class="cards">\n                      <div class="card"><div class="card-value green">${c}%</div><div>Taxa Aprova√ß√£o</div></div>\n                      <div class="card"><div class="card-value red">${s}%</div><div>Taxa Rejei√ß√£o</div></div>\n                      <div class="card"><div class="card-value purple">${A.length}</div><div>Profissionais</div></div>\n                      <div class="card"><div class="card-value purple">${A.length>0?(a.length/A.length).toFixed(1):0}</div><div>M√©dia/Profissional</div></div>\n                    </div>\n                    \n                    <div class="comparativo">\n                      <strong>üìä Comparativo com M√™s Anterior:</strong> \n                      ${parseFloat(h)>=0?"üìà":"üìâ"} ${parseFloat(h)>=0?"+":""}${h}% \n                      (${E.length} ‚Üí ${a.length} solicita√ß√µes)\n                    </div>\n                    \n                    <h2>üìÅ Por Motivo</h2>\n                    <table>\n                      <thead><tr><th>Motivo</th><th>Total</th><th>Aprovadas</th><th>Rejeitadas</th><th>Pendentes</th><th>Taxa</th></tr></thead>\n                      <tbody>\n                        ${Object.entries(n).map(([e,t])=>`\n                          <tr>\n                            <td>${e}</td>\n                            <td>${t.total}</td>\n                            <td class="green">${t.aprovadas}</td>\n                            <td class="red">${t.rejeitadas}</td>\n                            <td class="yellow">${t.pendentes}</td>\n                            <td>${t.total>0?(t.aprovadas/t.total*100).toFixed(0):0}%</td>\n                          </tr>\n                        `).join("")}\n                      </tbody>\n                    </table>\n                    \n                    <h2>üë∑ Top 10 Profissionais</h2>\n                    <table>\n                      <thead><tr><th>#</th><th>Profissional</th><th>C√≥digo</th><th>Total</th><th>Aprovadas</th><th>Rejeitadas</th><th>Taxa</th></tr></thead>\n                      <tbody>\n                        ${i.map((e,t)=>`\n                          <tr>\n                            <td>${t+1}</td>\n                            <td>${e.nome}</td>\n                            <td>${e.cod||"-"}</td>\n                            <td>${e.total}</td>\n                            <td class="green">${e.aprovadas}</td>\n                            <td class="red">${e.rejeitadas}</td>\n                            <td>${e.taxa}%</td>\n                          </tr>\n                        `).join("")}\n                      </tbody>\n                    </table>\n                    \n                    <h2>üìÖ Por Semana</h2>\n                    <table>\n                      <thead><tr><th>Semana</th><th>Total</th><th>Aprovadas</th><th>Taxa</th></tr></thead>\n                      <tbody>\n                        ${d.map(e=>`\n                          <tr>\n                            <td>${e.label} (dias ${e.dias[0]}-${e.dias[1]})</td>\n                            <td>${e.total}</td>\n                            <td class="green">${e.aprovadas}</td>\n                            <td>${e.total>0?(e.aprovadas/e.total*100).toFixed(0):0}%</td>\n                          </tr>\n                        `).join("")}\n                      </tbody>\n                    </table>\n                    \n                    <div class="footer">\n                      <strong>Central do Entregador Tutts</strong> - Relat√≥rio Gerado Automaticamente<br>\n                      ${(new Date).toLocaleString("pt-BR")}\n                    </div>\n                  </body>\n                  </html>\n                `,
                        p = window.open("", "_blank");
                    p.document.write(m), p.document.close(), p.print()
                },
                className: "ml-auto px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 flex items-center gap-2"
            }, "üìÑ Gerar PDF")), React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4 border-l-4 border-purple-500"
            }, React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "üìã Total Solicita√ß√µes"), React.createElement("p", {
                className: "text-3xl font-bold text-purple-600"
            }, a.length)), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4 border-l-4 border-green-500"
            }, React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "‚úÖ Aprovadas"), React.createElement("p", {
                className: "text-3xl font-bold text-green-600"
            }, l.length)), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4 border-l-4 border-red-500"
            }, React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "‚ùå Rejeitadas"), React.createElement("p", {
                className: "text-3xl font-bold text-red-600"
            }, r.length)), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-4 border-l-4 border-yellow-500"
            }, React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "‚è≥ Pendentes"), React.createElement("p", {
                className: "text-3xl font-bold text-yellow-600"
            }, o.length))), React.createElement("div", {
                className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
            }, React.createElement("div", {
                className: "bg-green-50 rounded-xl p-4 text-center border border-green-200"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-green-600"
            }, c, "%"), React.createElement("p", {
                className: "text-xs text-green-700"
            }, "Taxa de Aprova√ß√£o")), React.createElement("div", {
                className: "bg-red-50 rounded-xl p-4 text-center border border-red-200"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-red-600"
            }, s, "%"), React.createElement("p", {
                className: "text-xs text-red-700"
            }, "Taxa de Rejei√ß√£o")), React.createElement("div", {
                className: "bg-purple-50 rounded-xl p-4 text-center border border-purple-200"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-purple-600"
            }, A.length), React.createElement("p", {
                className: "text-xs text-purple-700"
            }, "Total Profissionais")), React.createElement("div", {
                className: "bg-blue-50 rounded-xl p-4 text-center border border-blue-200"
            }, React.createElement("p", {
                className: "text-3xl font-bold text-blue-600"
            }, A.length > 0 ? (a.length / A.length).toFixed(1) : 0), React.createElement("p", {
                className: "text-xs text-blue-700"
            }, "M√©dia por Profissional"))), React.createElement("div", {
                className: "rounded-xl p-4 mb-6 " + (parseFloat(h) >= 0 ? "bg-green-50 border border-green-200" : "bg-red-50 border border-red-200")
            }, React.createElement("h3", {
                className: "font-semibold mb-2"
            }, "üìä Comparativo com M√™s Anterior"), React.createElement("div", {
                className: "flex items-center gap-6"
            }, React.createElement("div", null, React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "M√™s anterior: ", React.createElement("strong", null, E.length), " solicita√ß√µes"), React.createElement("p", {
                className: "text-sm text-gray-600"
            }, "M√™s atual: ", React.createElement("strong", null, a.length), " solicita√ß√µes")), React.createElement("div", {
                className: "text-3xl font-bold " + (parseFloat(h) >= 0 ? "text-green-600" : "text-red-600")
            }, parseFloat(h) >= 0 ? "üìà" : "üìâ", " ", parseFloat(h) >= 0 ? "+" : "", h, "%"))), React.createElement("div", {
                className: "grid md:grid-cols-2 gap-6 mb-6"
            }, React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üìà Evolu√ß√£o (√öltimos 6 meses)"), React.createElement("div", {
                className: "flex items-end justify-between h-40 gap-2"
            }, g.map((e, t) => React.createElement("div", {
                key: t,
                className: "flex-1 flex flex-col items-center"
            }, React.createElement("div", {
                className: "w-full bg-gray-100 rounded-t relative",
                style: {
                    height: e.total / b * 100 + "%",
                    minHeight: "20px"
                }
            }, React.createElement("div", {
                className: "absolute inset-0 bg-gradient-to-t from-purple-600 to-purple-400 rounded-t"
            })), React.createElement("p", {
                className: "text-xs font-bold mt-1"
            }, e.total), React.createElement("p", {
                className: "text-xs text-gray-500"
            }, e.label))))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üìÖ Por Semana (", f[e], ")"), React.createElement("div", {
                className: "flex items-end justify-between h-40 gap-2"
            }, d.map((e, t) => React.createElement("div", {
                key: t,
                className: "flex-1 flex flex-col items-center"
            }, React.createElement("div", {
                className: "w-full bg-gray-100 rounded-t relative",
                style: {
                    height: e.total / u * 100 + "%",
                    minHeight: "20px"
                }
            }, React.createElement("div", {
                className: "absolute inset-0 bg-gradient-to-t from-blue-600 to-blue-400 rounded-t"
            })), React.createElement("p", {
                className: "text-xs font-bold mt-1"
            }, e.total), React.createElement("p", {
                className: "text-xs text-gray-500"
            }, "Sem ", t + 1)))))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6 mb-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üìÅ Por Motivo"), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Motivo"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Total"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "‚úÖ Aprovadas"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "‚ùå Rejeitadas"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "‚è≥ Pendentes"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Taxa"))), React.createElement("tbody", null, Object.entries(n).sort((e, t) => t[1].total - e[1].total).map(([e, t]) => React.createElement("tr", {
                key: e,
                className: "border-t hover:bg-gray-50"
            }, React.createElement("td", {
                className: "px-4 py-3 font-semibold"
            }, e), React.createElement("td", {
                className: "px-4 py-3 text-center font-bold"
            }, t.total), React.createElement("td", {
                className: "px-4 py-3 text-center text-green-600 font-semibold"
            }, t.aprovadas), React.createElement("td", {
                className: "px-4 py-3 text-center text-red-600 font-semibold"
            }, t.rejeitadas), React.createElement("td", {
                className: "px-4 py-3 text-center text-yellow-600 font-semibold"
            }, t.pendentes), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, React.createElement("span", {
                className: "px-2 py-1 rounded text-xs font-bold " + (t.total > 0 && t.aprovadas / t.total >= .7 ? "bg-green-100 text-green-700" : t.total > 0 && t.aprovadas / t.total >= .4 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")
            }, t.total > 0 ? (t.aprovadas / t.total * 100).toFixed(0) : 0, "%")))))))), React.createElement("div", {
                className: "bg-white rounded-xl shadow p-6"
            }, React.createElement("h3", {
                className: "font-semibold mb-4"
            }, "üë∑ Top 10 Profissionais do M√™s"), React.createElement("div", {
                className: "overflow-x-auto"
            }, React.createElement("table", {
                className: "w-full text-sm"
            }, React.createElement("thead", {
                className: "bg-gray-50"
            }, React.createElement("tr", null, React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "#"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "Profissional"), React.createElement("th", {
                className: "px-4 py-3 text-left"
            }, "C√≥digo"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Total"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "‚úÖ"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "‚ùå"), React.createElement("th", {
                className: "px-4 py-3 text-center"
            }, "Taxa"))), React.createElement("tbody", null, i.map((e, t) => React.createElement("tr", {
                key: t,
                className: "border-t hover:bg-gray-50 " + (t < 3 ? "bg-yellow-50" : "")
            }, React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, 0 === t ? "ü•á" : 1 === t ? "ü•à" : 2 === t ? "ü•â" : t + 1), React.createElement("td", {
                className: "px-4 py-3 font-semibold"
            }, e.nome), React.createElement("td", {
                className: "px-4 py-3 font-mono text-gray-600"
            }, e.cod || "-"), React.createElement("td", {
                className: "px-4 py-3 text-center font-bold"
            }, e.total), React.createElement("td", {
                className: "px-4 py-3 text-center text-green-600 font-semibold"
            }, e.aprovadas), React.createElement("td", {
                className: "px-4 py-3 text-center text-red-600 font-semibold"
            }, e.rejeitadas), React.createElement("td", {
                className: "px-4 py-3 text-center"
            }, React.createElement("span", {
                className: "px-2 py-1 rounded text-xs font-bold " + (parseInt(e.taxa) >= 70 ? "bg-green-100 text-green-700" : parseInt(e.taxa) >= 40 ? "bg-yellow-100 text-yellow-700" : "bg-red-100 text-red-700")
            }, e.taxa, "%")))))))))
        })(), "users" === p.adminTab && React.createElement("div", {
            className: "bg-white rounded-xl shadow p-6"
        }, React.createElement("h2", {
            className: "text-lg font-semibold mb-4"
        }, "üë• Gerenciar Usu√°rios"), React.createElement("div", {
            className: "bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6"
        }, React.createElement("h3", {
            className: "font-semibold mb-3"
        }, "‚ûï Criar Usu√°rio"), React.createElement("div", {
            className: "space-y-4"
        }, React.createElement("div", {
            className: "grid md:grid-cols-2 gap-4"
        }, React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "Nome"), React.createElement("input", {
            type: "text",
            value: p.newName || "",
            onChange: e => x({
                ...p,
                newName: e.target.value
            }),
            className: "w-full px-3 py-2 border rounded"
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "C√≥digo"), React.createElement("input", {
            type: "text",
            value: p.newCod || "",
            onChange: e => x({
                ...p,
                newCod: e.target.value
            }),
            className: "w-full px-3 py-2 border rounded"
        }))), React.createElement("div", {
            className: "grid md:grid-cols-2 gap-4"
        }, React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "Senha"), React.createElement("input", {
            type: "password",
            value: p.newPass || "",
            onChange: e => x({
                ...p,
                newPass: e.target.value
            }),
            className: "w-full px-3 py-2 border rounded"
        })), React.createElement("div", null, React.createElement("label", {
            className: "block text-sm font-semibold mb-1"
        }, "Tipo"), React.createElement("select", {
            value: p.newRole || "user",
            onChange: e => x({
                ...p,
                newRole: e.target.value
            }),
            className: "w-full px-3 py-2 border rounded bg-white"
        }, React.createElement("option", {
            value: "user"
        }, "üë§ Usu√°rio"), React.createElement("option", {
            value: "admin"
        }, "üëë Admin"), React.createElement("option", {
            value: "admin_financeiro"
        }, "üí∞ Admin Financeiro")))), React.createElement("button", {
            onClick: async () => {
                if (p.newName && p.newCod && p.newPass) {
                    s(!0);
                    try {
                        await fetch(`${API_URL}/users/register`, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                fullName: p.newName,
                                codProfissional: p.newCod,
                                password: p.newPass,
                                role: p.newRole || "user"
                            })
                        }), ja("‚úÖ Criado!", "success"), x({
                            ...p,
                            newName: "",
                            newCod: "",
                            newPass: "",
                            newRole: "user"
                        }), Ia()
                    } catch {
                        ja("Erro", "error")
                    }
                    s(!1)
                } else ja("Preencha todos", "error")
            },
            className: "w-full px-6 py-2 bg-purple-600 text-white rounded font-semibold"
        }, "‚ûï Criar Usu√°rio"))), React.createElement("h3", {
            className: "font-semibold mb-3"
        }, "üìã Usu√°rios Cadastrados (", A.length, ")"), React.createElement("div", {
            className: "space-y-2"
        }, A.map(e => React.createElement("div", {
            key: e.codProfissional,
            className: "border rounded-lg p-4 flex items-center justify-between hover:bg-gray-50"
        }, React.createElement("div", {
            className: "flex-1"
        }, React.createElement("p", {
            className: "font-semibold"
        }, e.fullName), React.createElement("p", {
            className: "text-sm text-gray-600"
        }, "COD: ", e.codProfissional, " ‚Ä¢ ", e.role), React.createElement("p", {
            className: "text-xs text-gray-400"
        }, e.createdAt)), React.createElement("div", {
            className: "flex gap-2 items-center"
        }, React.createElement("input", {
            type: "password",
            placeholder: "Nova senha",
            value: p[`newpass_${e.codProfissional}`] || "",
            onChange: t => x({
                ...p,
                [`newpass_${e.codProfissional}`]: t.target.value
            }),
            className: "px-3 py-2 border rounded text-sm w-32"
        }), React.createElement("button", {
            onClick: async () => {
                const t = p[`newpass_${e.codProfissional}`];
                !t || t.length < 6 ? ja("Senha muito curta (m√≠n. 6)", "error") : (await fetchAuth(`${API_URL}/users/reset-password`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        codProfissional: e.codProfissional,
                        newPassword: t
                    })
                }), ja("‚úÖ Senha alterada!", "success"), x({
                    ...p,
                    [`newpass_${e.codProfissional}`]: ""
                }))
            },
            className: "px-4 py-2 bg-purple-600 text-white rounded text-sm font-semibold"
        }, "üîë Resetar"), React.createElement("button", {
            onClick: async () => {
                const t = `‚ö†Ô∏è ATEN√á√ÉO!\n\nExcluir ${e.fullName} (${e.codProfissional})?\n\nTODOS os dados associados ser√£o exclu√≠dos:\n‚Ä¢ Solicita√ß√µes de saque\n‚Ä¢ Hist√≥rico de saques\n‚Ä¢ Gratuidades\n‚Ä¢ Indica√ß√µes\n‚Ä¢ Inscri√ß√µes em promo√ß√µes\n‚Ä¢ Respostas do quiz\n\nEsta a√ß√£o N√ÉO pode ser desfeita!`;
                if (confirm(t)) {
                    try {
                        const t = await fetchAuth(`${API_URL}/users/${e.codProfissional}`, {
                                method: "DELETE"
                            }),
                            a = await t.json();
                        if (!t.ok) throw new Error(a.error);
                        {
                            const e = a.deleted;
                            ja(`üóëÔ∏è Exclu√≠do! (${e.submissions} solicita√ß√µes, ${e.withdrawals} saques, ${e.gratuities} gratuidades, ${e.indicacoes} indica√ß√µes)`, "success")
                        }
                    } catch (e) {
                        ja("‚ùå Erro ao excluir: " + e.message, "error")
                    }
                    Ia()
                }
            },
            className: "px-4 py-2 bg-red-600 text-white rounded text-sm font-semibold"
        }, "üóëÔ∏è"))))))))
    };

// =====================================================
// COMPONENTE: ScoreEntregador
// Visualiza√ß√£o completa do score para o profissional
// =====================================================
function ScoreEntregador({ user, apiUrl, showToast }) {
  const [loading, setLoading] = React.useState(true);
  const [dados, setDados] = React.useState(null);
  const [filtroData, setFiltroData] = React.useState({ inicio: '', fim: '' });
  const [abaAtiva, setAbaAtiva] = React.useState('clube');

  const carregarDados = React.useCallback(async () => {
    try {
      setLoading(true);
      let url = `${apiUrl}/score/profissional/${user.codProfissional || user.cod_profissional}`;
      const params = new URLSearchParams();
      if (filtroData.inicio) params.append('data_inicio', filtroData.inicio);
      if (filtroData.fim) params.append('data_fim', filtroData.fim);
      if (params.toString()) url += `?${params.toString()}`;
      const response = await fetch(url);
      const data = await response.json();
      setDados(data);
    } catch (error) {
      console.error('Erro ao carregar score:', error);
      showToast && showToast('Erro ao carregar seus pontos', 'error');
    } finally {
      setLoading(false);
    }
  }, [user, apiUrl, filtroData, showToast]);

  React.useEffect(() => { carregarDados(); }, [carregarDados]);

  const formatarData = (data) => {
    if (!data) return '-';
    // Evitar problema de fuso hor√°rio: pegar apenas a parte da data (YYYY-MM-DD)
    const dataStr = typeof data === 'string' ? data.split('T')[0] : data;
    const [ano, mes, dia] = dataStr.split('-');
    return `${dia}/${mes}/${ano}`;
  };
  const formatarHora = (hora) => hora ? (typeof hora === 'string' ? hora.substring(0, 5) : hora) : '-';

  if (loading && !dados) {
    return React.createElement('div', { className: 'flex items-center justify-center min-h-[400px]' },
      React.createElement('div', { className: 'text-center' },
        React.createElement('div', { className: 'w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4' }),
        React.createElement('p', { className: 'text-gray-600' }, 'Carregando seus pontos...')
      )
    );
  }

  if (!dados) {
    return React.createElement('div', { className: 'text-center py-12' },
      React.createElement('p', { className: 'text-gray-500' }, 'N√£o foi poss√≠vel carregar seus dados de pontua√ß√£o.'),
      React.createElement('button', { onClick: carregarDados, className: 'mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg' }, 'üîÑ Tentar novamente')
    );
  }

  const { profissional, score, extrato, milestones, proximo_milestone } = dados;

  return React.createElement('div', { className: 'space-y-6 pb-20' },
    // Header com Score Total
    React.createElement('div', { className: 'bg-gradient-to-br from-purple-600 via-purple-700 to-indigo-800 rounded-2xl p-6 text-white shadow-xl' },
      React.createElement('div', { className: 'flex items-center justify-between mb-4' },
        React.createElement('div', null,
          React.createElement('h2', { className: 'text-lg opacity-90' }, 'Meu Score'),
          React.createElement('p', { className: 'text-sm opacity-70' }, profissional?.nome || 'Entregador')
        ),
        React.createElement('div', { className: 'text-5xl' }, '‚≠ê')
      ),
      React.createElement('div', { className: 'text-center py-4' },
        React.createElement('div', { className: 'text-6xl font-bold mb-2' }, 
          (score?.total || 0).toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })
        ),
        React.createElement('p', { className: 'text-purple-200' }, 'pontos acumulados')
      ),
      React.createElement('div', { className: 'grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-purple-500/30' },
        React.createElement('div', { className: 'text-center' },
          React.createElement('div', { className: 'text-2xl font-bold' }, score?.total_os || 0),
          React.createElement('div', { className: 'text-xs opacity-70' }, 'Entregas')
        ),
        React.createElement('div', { className: 'text-center' },
          React.createElement('div', { className: 'text-2xl font-bold text-green-300' }, `${score?.taxa_no_prazo || 0}%`),
          React.createElement('div', { className: 'text-xs opacity-70' }, 'No Prazo')
        ),
        React.createElement('div', { className: 'text-center' },
          React.createElement('div', { className: 'text-2xl font-bold text-yellow-300' }, `+${(score?.bonus_janela_total || 0).toFixed(1)}`),
          React.createElement('div', { className: 'text-xs opacity-70' }, 'B√¥nus Pico')
        )
      )
    ),
    // Pr√≥ximo Milestone
    proximo_milestone && React.createElement('div', { className: 'bg-white rounded-xl p-4 shadow-lg border-l-4 border-purple-500' },
      React.createElement('div', { className: 'flex items-center gap-3 mb-3' },
        React.createElement('span', { className: 'text-3xl' }, proximo_milestone.milestone?.icone || 'üèÜ'),
        React.createElement('div', { className: 'flex-1' },
          React.createElement('h3', { className: 'font-bold text-gray-800' }, `Pr√≥ximo: ${proximo_milestone.milestone?.nome || 'Meta'}`),
          React.createElement('p', { className: 'text-sm text-gray-500' }, `Faltam ${(proximo_milestone.pontos_faltam || 0).toFixed(1)} pontos`)
        )
      ),
      React.createElement('div', { className: 'w-full bg-gray-200 rounded-full h-3 overflow-hidden' },
        React.createElement('div', { 
          className: 'h-full rounded-full transition-all duration-500',
          style: { width: `${proximo_milestone.progresso_percentual || 0}%`, background: `linear-gradient(90deg, ${proximo_milestone.milestone?.cor || '#7c3aed'}, #7c3aed)` }
        })
      ),
      React.createElement('p', { className: 'text-xs text-gray-500 mt-2 text-center' }, `${(proximo_milestone.progresso_percentual || 0).toFixed(0)}% conclu√≠do`)
    ),
    // Abas
    React.createElement('div', { className: 'flex bg-gray-100 rounded-xl p-1' },
      ['resumo', 'extrato', 'clube'].map(aba => 
        React.createElement('button', {
          key: aba,
          onClick: () => setAbaAtiva(aba),
          className: `flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${abaAtiva === aba ? 'bg-white text-purple-700 shadow' : 'text-gray-500 hover:text-gray-700'}`
        }, aba === 'resumo' ? 'üìä Resumo' : aba === 'extrato' ? 'üìã Extrato' : 'üéÅ Clube')
      )
    ),
    // Aba Resumo
    abaAtiva === 'resumo' && React.createElement('div', { className: 'space-y-4' },
      React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
        React.createElement('div', { className: 'bg-green-50 rounded-xl p-4 border border-green-200' },
          React.createElement('div', { className: 'flex items-center gap-2 mb-2' },
            React.createElement('span', { className: 'text-green-500 text-xl' }, '‚úì'),
            React.createElement('span', { className: 'text-green-700 font-medium' }, 'No Prazo')
          ),
          React.createElement('div', { className: 'text-2xl font-bold text-green-700' }, score?.os_no_prazo || 0),
          React.createElement('div', { className: 'text-xs text-green-600' }, `+${((score?.os_no_prazo || 0) * 0.75).toFixed(2)} pts`)
        ),
        React.createElement('div', { className: 'bg-red-50 rounded-xl p-4 border border-red-200' },
          React.createElement('div', { className: 'flex items-center gap-2 mb-2' },
            React.createElement('span', { className: 'text-red-500 text-xl' }, '‚úó'),
            React.createElement('span', { className: 'text-red-700 font-medium' }, 'Fora do Prazo')
          ),
          React.createElement('div', { className: 'text-2xl font-bold text-red-700' }, score?.os_fora_prazo || 0),
          React.createElement('div', { className: 'text-xs text-red-600' }, `${((score?.os_fora_prazo || 0) * -1).toFixed(2)} pts`)
        )
      ),
      React.createElement('div', { className: 'bg-blue-50 rounded-xl p-4 border border-blue-200' },
        React.createElement('h4', { className: 'font-bold text-blue-800 mb-3 flex items-center gap-2' },
          React.createElement('span', null, 'üí°'), 'Como ganhar mais pontos?'
        ),
        React.createElement('div', { className: 'space-y-2 text-sm text-blue-700' },
          React.createElement('div', { className: 'flex items-center gap-2' }, React.createElement('span', { className: 'text-green-500' }, '‚úì'), 'Entrega no prazo: +0,75 pts'),
          React.createElement('div', { className: 'flex items-center gap-2' }, React.createElement('span', { className: 'text-yellow-500' }, '‚è∞'), 'B√¥nus 10h-12h: +0,50 pts extra'),
          React.createElement('div', { className: 'flex items-center gap-2' }, React.createElement('span', { className: 'text-orange-500' }, 'üî•'), 'B√¥nus 16h-18h: +0,75 pts extra'),
          React.createElement('div', { className: 'flex items-center gap-2 text-red-600' }, React.createElement('span', null, '‚ö†Ô∏è'), 'Fora do prazo: -1,00 pt')
        )
      ),
      // Tabela de Prazos por KM
      React.createElement('div', { className: 'bg-gray-50 rounded-xl p-4 border border-gray-200' },
        React.createElement('h4', { className: 'font-bold text-gray-800 mb-3 flex items-center gap-2' },
          React.createElement('span', null, 'üìè'), 'Prazo por Dist√¢ncia'
        ),
        React.createElement('div', { className: 'grid grid-cols-2 gap-2 text-sm' },
          [
            { km: '0 - 10', tempo: '50 min' },
            { km: '10 - 15', tempo: '60 min' },
            { km: '15 - 20', tempo: '70 min' },
            { km: '20 - 25', tempo: '80 min' },
            { km: '25 - 30', tempo: '90 min' },
            { km: '30 - 35', tempo: '100 min' },
            { km: '35 - 40', tempo: '110 min' },
            { km: '40 - 45', tempo: '120 min' },
            { km: '45 - 50', tempo: '130 min' },
            { km: '50 - 55', tempo: '140 min' },
            { km: '55 - 60', tempo: '150 min' },
            { km: '60 - 65', tempo: '160 min' },
            { km: '65 - 70', tempo: '170 min' },
            { km: '70 - 75', tempo: '180 min' },
            { km: '75 - 80', tempo: '190 min' },
            { km: '80 - 85', tempo: '200 min' }
          ].map((faixa, idx) => 
            React.createElement('div', { key: idx, className: 'flex justify-between items-center bg-white rounded-lg px-3 py-2 border border-gray-100' },
              React.createElement('span', { className: 'text-gray-600' }, `${faixa.km} km`),
              React.createElement('span', { className: 'font-medium text-purple-600' }, faixa.tempo)
            )
          )
        )
      )
    ),
    // Aba Extrato
    abaAtiva === 'extrato' && React.createElement('div', { className: 'space-y-4' },
      React.createElement('div', { className: 'flex gap-2' },
        React.createElement('input', { type: 'date', value: filtroData.inicio, onChange: (e) => setFiltroData(prev => ({ ...prev, inicio: e.target.value })), className: 'flex-1 px-3 py-2 border rounded-lg text-sm' }),
        React.createElement('input', { type: 'date', value: filtroData.fim, onChange: (e) => setFiltroData(prev => ({ ...prev, fim: e.target.value })), className: 'flex-1 px-3 py-2 border rounded-lg text-sm' }),
        React.createElement('button', { onClick: carregarDados, className: 'px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium' }, 'üîç')
      ),
      React.createElement('div', { className: 'space-y-2' },
        extrato && extrato.length > 0 
          ? extrato.map((item, idx) => {
              const pontoTotal = parseFloat(item.ponto_total) || 0;
              const pontoPrazo = parseFloat(item.ponto_prazo) || 0;
              const pontoBonus = parseFloat(item.ponto_bonus_janela) || 0;
              const tempoEntrega = parseFloat(item.tempo_entrega_minutos) || 0;
              const prazoMinutos = parseFloat(item.prazo_minutos) || 0;
              const distanciaKm = parseFloat(item.distancia_km) || 0;
              return React.createElement('div', { key: idx, className: `bg-white rounded-xl p-4 shadow border-l-4 ${item.dentro_prazo ? 'border-green-500' : 'border-red-500'}` },
                // Linha 1: OS, Data e Pontua√ß√£o Total
                React.createElement('div', { className: 'flex justify-between items-start mb-2' },
                  React.createElement('div', null,
                    React.createElement('span', { className: 'font-bold text-gray-800' }, `OS ${item.os}`),
                    React.createElement('span', { className: 'text-gray-400 text-sm ml-2' }, formatarData(item.data_os))
                  ),
                  React.createElement('span', { className: `text-lg font-bold ${pontoTotal >= 0 ? 'text-green-600' : 'text-red-600'}` }, 
                    `${pontoTotal >= 0 ? '+' : ''}${pontoTotal.toFixed(2)}`
                  )
                ),
                // Linha 2: Hor√°rio, KM e Tempo
                React.createElement('div', { className: 'flex flex-wrap gap-3 text-sm text-gray-600 mb-2' },
                  React.createElement('span', { className: 'flex items-center gap-1' }, 
                    React.createElement('span', { className: 'text-purple-500' }, '‚è∞'),
                    `${formatarHora(item.hora_solicitacao)}`
                  ),
                  React.createElement('span', { className: 'flex items-center gap-1' },
                    React.createElement('span', { className: 'text-blue-500' }, 'üìç'),
                    `${distanciaKm.toFixed(1)} km`
                  ),
                  React.createElement('span', { className: 'flex items-center gap-1' },
                    React.createElement('span', { className: item.dentro_prazo ? 'text-green-500' : 'text-red-500' }, 'üöÄ'),
                    `${tempoEntrega.toFixed(0)}/${prazoMinutos.toFixed(0)} min`
                  )
                ),
                // Linha 3: Detalhamento dos pontos
                React.createElement('div', { className: 'flex flex-wrap gap-2 text-xs' },
                  React.createElement('span', { className: `px-2 py-1 rounded-full ${item.dentro_prazo ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}` },
                    item.dentro_prazo ? `‚úì No prazo (+${pontoPrazo.toFixed(2)})` : `‚úó Fora do prazo (${pontoPrazo.toFixed(2)})`
                  ),
                  pontoBonus > 0 && React.createElement('span', { className: 'px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full' },
                    `üéØ B√¥nus ${item.janela_bonus} (+${pontoBonus.toFixed(2)})`
                  )
                )
              );
            })
          : React.createElement('div', { className: 'text-center py-8 text-gray-500' },
              React.createElement('span', { className: 'text-4xl block mb-2' }, 'üì≠'), 'Nenhuma entrega registrada no per√≠odo'
            )
      )
    ),
    // Aba Clube
    abaAtiva === 'clube' && React.createElement('div', { className: 'space-y-4' },
      React.createElement('div', { className: 'text-center mb-4' },
        React.createElement('h3', { className: 'text-xl font-bold text-gray-800' }, 'üéÅ Clube de Benef√≠cios'),
        React.createElement('p', { className: 'text-gray-500 text-sm' }, 'Alcance marcos e desbloqueie pr√™mios!')
      ),
      milestones && milestones.map((milestone, idx) => {
        const isPremioFisico = milestone.pontos_necessarios === 250 || milestone.pontos_necessarios === 300;
        const premioRecebido = milestone.premio_recebido || milestone.premio_status === 'entregue';
        
        return React.createElement('div', { key: idx, className: `rounded-xl p-4 border-2 transition-all ${milestone.conquistado ? 'bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-300 shadow-lg' : 'bg-gray-50 border-gray-200 opacity-70'}` },
          React.createElement('div', { className: 'flex items-center gap-4' },
            React.createElement('span', { className: `text-4xl ${milestone.conquistado ? '' : 'grayscale opacity-50'}` }, milestone.icone),
            React.createElement('div', { className: 'flex-1' },
              React.createElement('div', { className: 'flex items-center gap-2 flex-wrap' },
                React.createElement('h4', { className: `font-bold ${milestone.conquistado ? 'text-purple-800' : 'text-gray-500'}` }, milestone.nome),
                milestone.conquistado && !isPremioFisico && React.createElement('span', { className: 'text-xs px-2 py-0.5 bg-green-500 text-white rounded-full' }, '‚úì Conquistado!'),
                milestone.conquistado && isPremioFisico && premioRecebido && React.createElement('span', { className: 'text-xs px-2 py-0.5 bg-green-500 text-white rounded-full' }, '‚úì Pr√™mio Recebido'),
                milestone.conquistado && isPremioFisico && !premioRecebido && React.createElement('span', { className: 'text-xs px-2 py-0.5 bg-yellow-500 text-white rounded-full animate-pulse' }, 'üéÅ Dispon√≠vel para retirada!')
              ),
              React.createElement('p', { className: 'text-sm text-gray-600' }, milestone.descricao),
              React.createElement('p', { className: `text-xs mt-1 ${milestone.conquistado ? 'text-purple-600' : 'text-gray-400'}` }, `${milestone.pontos_necessarios} pontos necess√°rios`)
            )
          ),
          milestone.beneficio && React.createElement('div', { className: 'mt-3 pt-3 border-t border-gray-200 text-sm' },
            React.createElement('span', { className: 'text-gray-500' }, 'üéÅ Benef√≠cio: '),
            React.createElement('span', { className: milestone.conquistado ? 'text-purple-700 font-medium' : 'text-gray-400' }, milestone.beneficio),
            isPremioFisico && milestone.conquistado && !premioRecebido && React.createElement('p', { className: 'text-xs text-yellow-600 mt-1' }, '‚ö†Ô∏è Procure o escrit√≥rio para retirar seu pr√™mio!')
          )
        );
      })
    )
  );
}

// =====================================================
// COMPONENTE: ScoreAdmin
// Dashboard administrativo para gestores
// =====================================================
function ScoreAdmin({ apiUrl, showToast }) {
  const [loading, setLoading] = React.useState(true);
  const [estatisticas, setEstatisticas] = React.useState(null);
  const [ranking, setRanking] = React.useState([]);
  const [milestones, setMilestones] = React.useState([]);
  const [filtros, setFiltros] = React.useState({ data_inicio: '', data_fim: '', limite: 10000 });
  const [buscaProfissional, setBuscaProfissional] = React.useState('');
  const [profissionalSelecionado, setProfissionalSelecionado] = React.useState(null);
  const [recalculando, setRecalculando] = React.useState(false);
  const [abaAtiva, setAbaAtiva] = React.useState('ranking');
  const [dadosCarregados, setDadosCarregados] = React.useState(false);
  const [premiosPendentes, setPremiosPendentes] = React.useState([]);

  const carregarDados = async () => {
    try {
      setLoading(true);
      let rankingUrl = `${apiUrl}/score/ranking?limite=${filtros.limite}`;
      if (filtros.data_inicio) rankingUrl += `&data_inicio=${filtros.data_inicio}`;
      if (filtros.data_fim) rankingUrl += `&data_fim=${filtros.data_fim}`;
      
      const [rankingRes, estatRes, milestonesRes] = await Promise.all([
        fetch(rankingUrl).then(r => r.json()),
        fetch(`${apiUrl}/score/estatisticas${filtros.data_inicio ? `?data_inicio=${filtros.data_inicio}&data_fim=${filtros.data_fim}` : ''}`).then(r => r.json()),
        fetch(`${apiUrl}/score/milestones`).then(r => r.json())
      ]);
      
      setRanking(rankingRes.ranking || []);
      setEstatisticas(estatRes);
      setMilestones(milestonesRes);
      setDadosCarregados(true);
    } catch (error) {
      console.error('Erro ao carregar dados:', error);
      showToast && showToast('Erro ao carregar dados', 'error');
    } finally {
      setLoading(false);
    }
  };

  const carregarPremios = async () => {
    try {
      const res = await fetch(`${apiUrl}/score/premios-pendentes`);
      const data = await res.json();
      setPremiosPendentes(data || []);
    } catch (error) {
      console.error('Erro ao carregar pr√™mios:', error);
    }
  };

  React.useEffect(() => { 
    if (!dadosCarregados) carregarDados(); 
  }, []);

  const recalcularScores = async () => {
    if (!window.confirm('Recalcular todos os scores? Isso pode levar alguns minutos.')) return;
    try {
      setRecalculando(true);
      const response = await fetch(`${apiUrl}/score/recalcular`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ data_inicio: filtros.data_inicio || null, data_fim: filtros.data_fim || null })
      });
      const result = await response.json();
      if (result.success) {
        showToast && showToast(`Score recalculado: ${result.processadas} OS processadas`, 'success');
        carregarDados();
      }
    } catch (error) {
      showToast && showToast('Erro ao recalcular scores', 'error');
    } finally {
      setRecalculando(false);
    }
  };

  const buscarProfissional = async () => {
    if (!buscaProfissional) return;
    try {
      const response = await fetch(`${apiUrl}/score/profissional/${buscaProfissional}`);
      const data = await response.json();
      setProfissionalSelecionado(data);
    } catch (error) {
      showToast && showToast('Profissional n√£o encontrado', 'error');
    }
  };

  if (loading && !estatisticas) {
    return React.createElement('div', { className: 'flex items-center justify-center min-h-[400px]' },
      React.createElement('div', { className: 'w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin' })
    );
  }

  return React.createElement('div', { className: 'space-y-6' },
    React.createElement('div', { className: 'flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4' },
      React.createElement('div', null,
        React.createElement('h2', { className: 'text-2xl font-bold text-gray-800' }, '‚≠ê Score Prof'),
        React.createElement('p', { className: 'text-gray-500' }, 'Gest√£o de pontua√ß√£o dos profissionais')
      ),
      React.createElement('button', {
        onClick: recalcularScores, disabled: recalculando,
        className: `px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${recalculando ? 'bg-gray-300 text-gray-500' : 'bg-teal-600 text-white hover:bg-teal-700'}`
      }, recalculando ? '‚è≥ Processando...' : 'üîÑ Recalcular Scores')
    ),
    React.createElement('div', { className: 'bg-white rounded-xl p-4 shadow flex flex-wrap gap-4 items-end' },
      React.createElement('div', { className: 'flex-1 min-w-[150px]' },
        React.createElement('label', { className: 'block text-sm text-gray-600 mb-1' }, 'Data In√≠cio'),
        React.createElement('input', { type: 'date', value: filtros.data_inicio, onChange: (e) => setFiltros(prev => ({ ...prev, data_inicio: e.target.value })), className: 'w-full px-3 py-2 border rounded-lg' })
      ),
      React.createElement('div', { className: 'flex-1 min-w-[150px]' },
        React.createElement('label', { className: 'block text-sm text-gray-600 mb-1' }, 'Data Fim'),
        React.createElement('input', { type: 'date', value: filtros.data_fim, onChange: (e) => setFiltros(prev => ({ ...prev, data_fim: e.target.value })), className: 'w-full px-3 py-2 border rounded-lg' })
      ),
      React.createElement('div', { className: 'flex-1 min-w-[200px]' },
        React.createElement('label', { className: 'block text-sm text-gray-600 mb-1' }, 'Buscar Profissional'),
        React.createElement('div', { className: 'flex gap-2' },
          React.createElement('input', { type: 'text', value: buscaProfissional, onChange: (e) => setBuscaProfissional(e.target.value), placeholder: 'C√≥digo', className: 'flex-1 px-3 py-2 border rounded-lg' }),
          React.createElement('button', { onClick: buscarProfissional, className: 'px-4 py-2 bg-gray-600 text-white rounded-lg' }, 'üîç')
        )
      ),
      React.createElement('button', { onClick: carregarDados, className: 'px-4 py-2 bg-purple-600 text-white rounded-lg font-medium' }, 'Filtrar')
    ),
    estatisticas?.resumo && React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4' },
      React.createElement('div', { className: 'bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white' },
        React.createElement('div', { className: 'text-3xl mb-1' }, 'üë•'),
        React.createElement('div', { className: 'text-2xl font-bold' }, estatisticas.resumo.total_profissionais),
        React.createElement('div', { className: 'text-sm opacity-80' }, 'Profissionais')
      ),
      React.createElement('div', { className: 'bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white' },
        React.createElement('div', { className: 'text-3xl mb-1' }, 'üì¶'),
        React.createElement('div', { className: 'text-2xl font-bold' }, estatisticas.resumo.total_os),
        React.createElement('div', { className: 'text-sm opacity-80' }, 'Entregas')
      ),
      React.createElement('div', { className: 'bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white' },
        React.createElement('div', { className: 'text-3xl mb-1' }, '‚≠ê'),
        React.createElement('div', { className: 'text-2xl font-bold' }, (estatisticas.resumo.pontos_distribuidos || 0).toLocaleString('pt-BR', { maximumFractionDigits: 0 })),
        React.createElement('div', { className: 'text-sm opacity-80' }, 'Pontos Distribu√≠dos')
      ),
      React.createElement('div', { className: 'bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-4 text-white' },
        React.createElement('div', { className: 'text-3xl mb-1' }, 'üéØ'),
        React.createElement('div', { className: 'text-2xl font-bold' }, `${estatisticas.resumo.taxa_prazo}%`),
        React.createElement('div', { className: 'text-sm opacity-80' }, 'Taxa No Prazo')
      )
    ),
    profissionalSelecionado && React.createElement('div', { className: 'fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4', onClick: () => setProfissionalSelecionado(null) },
      React.createElement('div', { className: 'bg-white rounded-2xl max-w-lg w-full max-h-[80vh] overflow-y-auto p-6', onClick: (e) => e.stopPropagation() },
        React.createElement('div', { className: 'flex justify-between items-center mb-4' },
          React.createElement('h3', { className: 'text-xl font-bold' }, profissionalSelecionado.profissional?.nome),
          React.createElement('button', { onClick: () => setProfissionalSelecionado(null), className: 'text-gray-400 hover:text-gray-600 text-2xl' }, '√ó')
        ),
        React.createElement('div', { className: 'bg-purple-50 rounded-xl p-4 text-center mb-4' },
          React.createElement('div', { className: 'text-4xl font-bold text-purple-700' }, (profissionalSelecionado.score?.total || 0).toFixed(2)),
          React.createElement('div', { className: 'text-purple-600' }, 'pontos totais')
        ),
        React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
          React.createElement('div', { className: 'text-center p-3 bg-green-50 rounded-lg' },
            React.createElement('div', { className: 'text-2xl font-bold text-green-700' }, profissionalSelecionado.score?.os_no_prazo || 0),
            React.createElement('div', { className: 'text-sm text-green-600' }, 'No Prazo')
          ),
          React.createElement('div', { className: 'text-center p-3 bg-red-50 rounded-lg' },
            React.createElement('div', { className: 'text-2xl font-bold text-red-700' }, profissionalSelecionado.score?.os_fora_prazo || 0),
            React.createElement('div', { className: 'text-sm text-red-600' }, 'Fora Prazo')
          )
        )
      )
    ),
    React.createElement('div', { className: 'flex bg-gray-100 rounded-xl p-1' },
      [{ id: 'ranking', label: 'üèÖ Ranking' }, { id: 'premios', label: 'üéÅ Pr√™mios' }, { id: 'estatisticas', label: 'üìä Estat√≠sticas' }].map(aba => 
        React.createElement('button', { key: aba.id, onClick: () => { setAbaAtiva(aba.id); if (aba.id === 'premios') carregarPremios(); },
          className: `flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${abaAtiva === aba.id ? 'bg-white text-teal-700 shadow' : 'text-gray-500 hover:text-gray-700'}`
        }, aba.label)
      )
    ),
    abaAtiva === 'ranking' && React.createElement('div', { className: 'bg-white rounded-xl shadow overflow-hidden' },
      React.createElement('div', { className: 'overflow-x-auto' },
        React.createElement('table', { className: 'w-full' },
          React.createElement('thead', { className: 'bg-gray-50' },
            React.createElement('tr', null,
              React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, '#'),
              React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, 'Profissional'),
              React.createElement('th', { className: 'px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase' }, 'Score'),
              React.createElement('th', { className: 'px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase' }, 'Entregas'),
              React.createElement('th', { className: 'px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase' }, 'Taxa Prazo'),
              React.createElement('th', { className: 'px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase' }, 'N√≠vel')
            )
          ),
          React.createElement('tbody', { className: 'divide-y divide-gray-200' },
            ranking.map((prof, idx) => {
              const score = parseFloat(prof.score_total) || 0;
              let nivel = { icone: '‚ö™', nome: 'Sem n√≠vel', cor: 'bg-gray-100 text-gray-600' };
              if (score >= 500) nivel = { icone: 'üëë', nome: 'Diamante', cor: 'bg-cyan-100 text-cyan-700' };
              else if (score >= 300) nivel = { icone: 'üíé', nome: 'Platina', cor: 'bg-purple-100 text-purple-700' };
              else if (score >= 250) nivel = { icone: 'ü•á', nome: 'Ouro', cor: 'bg-yellow-100 text-yellow-700' };
              else if (score >= 100) nivel = { icone: 'ü•à', nome: 'Prata', cor: 'bg-gray-200 text-gray-700' };
              else if (score >= 80) nivel = { icone: 'ü•â', nome: 'Bronze', cor: 'bg-orange-100 text-orange-700' };
              
              return React.createElement('tr', { key: idx, className: 'hover:bg-gray-50 cursor-pointer',
                onClick: async () => { const res = await fetch(`${apiUrl}/score/profissional/${prof.cod_prof}`); setProfissionalSelecionado(await res.json()); }
              },
                React.createElement('td', { className: 'px-4 py-3' },
                  React.createElement('span', { className: `inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold ${prof.posicao === 1 ? 'bg-yellow-100 text-yellow-700' : prof.posicao === 2 ? 'bg-gray-200 text-gray-700' : prof.posicao === 3 ? 'bg-orange-100 text-orange-700' : 'bg-gray-100 text-gray-600'}` }, 
                    prof.posicao <= 3 ? ['ü•á', 'ü•à', 'ü•â'][prof.posicao - 1] : prof.posicao)
                ),
                React.createElement('td', { className: 'px-4 py-3' },
                  React.createElement('div', { className: 'font-medium text-gray-800' }, prof.nome),
                  React.createElement('div', { className: 'text-xs text-gray-400' }, `#${prof.cod_prof}`)
                ),
                React.createElement('td', { className: 'px-4 py-3 text-right font-bold text-purple-600' }, prof.score_total.toFixed(2)),
                React.createElement('td', { className: 'px-4 py-3 text-right text-gray-600' }, prof.total_os),
                React.createElement('td', { className: 'px-4 py-3 text-right' },
                  React.createElement('span', { className: `px-2 py-1 rounded-full text-xs font-medium ${prof.taxa_prazo >= 90 ? 'bg-green-100 text-green-700' : prof.taxa_prazo >= 70 ? 'bg-yellow-100 text-yellow-700' : 'bg-red-100 text-red-700'}` }, `${prof.taxa_prazo}%`)
                ),
                React.createElement('td', { className: 'px-4 py-3 text-center' },
                  React.createElement('span', { className: `px-2 py-1 rounded-full text-xs font-medium ${nivel.cor}` }, `${nivel.icone} ${nivel.nome}`)
                )
              );
            })
          )
        )
      )
    ),
    abaAtiva === 'premios' && React.createElement('div', { className: 'space-y-6' },
      React.createElement('div', { className: 'bg-white rounded-xl p-6 shadow' },
        React.createElement('div', { className: 'flex justify-between items-center mb-4' },
          React.createElement('h3', { className: 'font-bold text-lg' }, 'üéÅ Pr√™mios F√≠sicos Pendentes'),
          React.createElement('button', { onClick: carregarPremios, className: 'px-3 py-1 bg-teal-100 text-teal-700 rounded-lg text-sm font-medium hover:bg-teal-200' }, 'üîÑ Atualizar')
        ),
        premiosPendentes.length === 0 
          ? React.createElement('div', { className: 'text-center py-8 text-gray-500' },
              React.createElement('span', { className: 'text-4xl block mb-2' }, 'üéØ'),
              React.createElement('p', null, 'Nenhum profissional atingiu n√≠vel Ouro (250pts) ou Platina (300pts) ainda')
            )
          : React.createElement('div', { className: 'space-y-4' },
              premiosPendentes.map((prof, idx) =>
                React.createElement('div', { key: idx, className: 'border rounded-xl p-4 bg-gray-50' },
                  React.createElement('div', { className: 'flex justify-between items-start mb-3' },
                    React.createElement('div', null,
                      React.createElement('div', { className: 'font-bold text-gray-800' }, prof.nome_prof),
                      React.createElement('div', { className: 'text-sm text-gray-500' }, `#${prof.cod_prof} ‚Ä¢ ${prof.score_total.toFixed(2)} pontos`)
                    )
                  ),
                  React.createElement('div', { className: 'space-y-2' },
                    prof.premios.map((premio, pIdx) =>
                      React.createElement('div', { key: pIdx, className: `flex items-center justify-between p-3 rounded-lg ${premio.status === 'entregue' ? 'bg-green-50 border border-green-200' : 'bg-white border border-gray-200'}` },
                        React.createElement('div', { className: 'flex items-center gap-3' },
                          React.createElement('span', { className: 'text-2xl' }, premio.icone),
                          React.createElement('div', null,
                            React.createElement('div', { className: 'font-medium' }, premio.milestone_nome),
                            React.createElement('div', { className: 'text-sm text-gray-500' }, premio.beneficio)
                          )
                        ),
                        premio.status === 'entregue'
                          ? React.createElement('span', { className: 'px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium' }, '‚úÖ Entregue')
                          : React.createElement('button', { 
                              onClick: async () => {
                                if (!window.confirm(`Confirmar entrega de "${premio.beneficio}" para ${prof.nome_prof}?`)) return;
                                try {
                                  const res = await fetch(`${apiUrl}/score/premios-fisicos/confirmar`, {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify({ cod_prof: prof.cod_prof, milestone_id: premio.milestone_id, confirmado_por: 'Admin' })
                                  });
                                  const data = await res.json();
                                  if (data.success) {
                                    showToast && showToast('Pr√™mio confirmado!', 'success');
                                    carregarPremios();
                                  }
                                } catch (err) {
                                  showToast && showToast('Erro ao confirmar', 'error');
                                }
                              },
                              className: 'px-4 py-2 bg-teal-600 text-white rounded-lg text-sm font-medium hover:bg-teal-700'
                            }, '‚úì Confirmar Entrega')
                      )
                    )
                  )
                )
              )
            )
      ),
      // Progresso geral dos milestones
      React.createElement('div', { className: 'bg-white rounded-xl p-6 shadow' },
        React.createElement('h3', { className: 'font-bold text-lg mb-4' }, 'üìä Progresso dos Milestones'),
        React.createElement('div', { className: 'space-y-4' },
          milestones.map((m, idx) => {
            const total = ranking.length;
            const alcancaram = ranking.filter(p => parseFloat(p.score_total) >= m.pontos_necessarios).length;
            const percentual = total > 0 ? (alcancaram / total * 100).toFixed(1) : 0;
            return React.createElement('div', { key: idx, className: 'border rounded-lg p-4' },
              React.createElement('div', { className: 'flex justify-between items-center mb-2' },
                React.createElement('div', { className: 'flex items-center gap-2' },
                  React.createElement('span', { className: 'text-2xl' }, m.icone),
                  React.createElement('div', null,
                    React.createElement('div', { className: 'font-medium' }, m.nome),
                    React.createElement('div', { className: 'text-sm text-gray-500' }, `${m.pontos_necessarios} pts - ${m.beneficio}`)
                  )
                ),
                React.createElement('div', { className: 'text-right' },
                  React.createElement('div', { className: 'font-bold text-teal-600' }, `${alcancaram}/${total}`),
                  React.createElement('div', { className: 'text-xs text-gray-500' }, `${percentual}%`)
                )
              ),
              React.createElement('div', { className: 'w-full bg-gray-200 rounded-full h-2' },
                React.createElement('div', { className: 'bg-teal-500 h-2 rounded-full transition-all', style: { width: `${percentual}%` } })
              )
            );
          })
        )
      )
    ),
    abaAtiva === 'estatisticas' && estatisticas && React.createElement('div', { className: 'space-y-6' },
      React.createElement('div', { className: 'bg-white rounded-xl p-6 shadow' },
        React.createElement('h3', { className: 'font-bold text-lg mb-4' }, 'üèÜ Top 10 do Per√≠odo'),
        React.createElement('div', { className: 'space-y-3' },
          estatisticas.top_10?.map((prof, idx) => 
            React.createElement('div', { key: idx, className: 'flex items-center gap-4 p-3 bg-gray-50 rounded-lg' },
              React.createElement('span', { className: 'text-2xl' }, idx < 3 ? ['ü•á', 'ü•à', 'ü•â'][idx] : `${idx + 1}¬∫`),
              React.createElement('div', { className: 'flex-1' },
                React.createElement('div', { className: 'font-medium' }, prof.nome),
                React.createElement('div', { className: 'text-sm text-gray-500' }, `${prof.total_os} entregas`)
              ),
              React.createElement('div', { className: 'text-xl font-bold text-purple-600' }, prof.score_total.toFixed(1))
            )
          )
        )
      )
    )
  );
}

// =====================================================
// COMPONENTE: AuditLogs
// Visualiza√ß√£o de logs de auditoria para administradores
// =====================================================
function AuditLogs({ apiUrl, showToast }) {
  const [logs, setLogs] = React.useState([]);
  const [stats, setStats] = React.useState(null);
  const [loading, setLoading] = React.useState(true);
  const [filtros, setFiltros] = React.useState({
    page: 1,
    limit: 30,
    category: '',
    action: '',
    user_cod: '',
    data_inicio: '',
    data_fim: '',
    search: ''
  });
  const [abaAtiva, setAbaAtiva] = React.useState('logs');

  const carregarLogs = async () => {
    try {
      setLoading(true);
      const params = new URLSearchParams();
      Object.entries(filtros).forEach(([key, value]) => {
        if (value) params.append(key, value);
      });
      
      const response = await fetchAuth(`${apiUrl}/audit/logs?${params}`);
      if (response.ok) {
        const data = await response.json();
        setLogs(data.logs || []);
        setFiltros(prev => ({ ...prev, totalPages: data.pagination?.totalPages || 1, total: data.pagination?.total || 0 }));
      }
    } catch (error) {
      console.error('Erro ao carregar logs:', error);
    } finally {
      setLoading(false);
    }
  };

  const carregarStats = async () => {
    try {
      const response = await fetchAuth(`${apiUrl}/audit/stats?dias=7`);
      if (response.ok) {
        const data = await response.json();
        setStats(data);
      }
    } catch (error) {
      console.error('Erro ao carregar stats:', error);
    }
  };

  const exportarCSV = async () => {
    try {
      const params = new URLSearchParams();
      if (filtros.data_inicio) params.append('data_inicio', filtros.data_inicio);
      if (filtros.data_fim) params.append('data_fim', filtros.data_fim);
      if (filtros.category) params.append('category', filtros.category);
      
      const response = await fetchAuth(`${apiUrl}/audit/export?${params}`);
      if (response.ok) {
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `audit_logs_${new Date().toISOString().split('T')[0]}.csv`;
        a.click();
        showToast && showToast('Exporta√ß√£o conclu√≠da!', 'success');
      }
    } catch (error) {
      showToast && showToast('Erro ao exportar', 'error');
    }
  };

  React.useEffect(() => {
    carregarLogs();
    carregarStats();
  }, []);

  React.useEffect(() => {
    carregarLogs();
  }, [filtros.page, filtros.category]);

  const getCategoryColor = (cat) => {
    const colors = {
      auth: 'bg-blue-100 text-blue-700',
      user: 'bg-purple-100 text-purple-700',
      financial: 'bg-green-100 text-green-700',
      data: 'bg-yellow-100 text-yellow-700',
      config: 'bg-gray-100 text-gray-700',
      score: 'bg-orange-100 text-orange-700',
      admin: 'bg-red-100 text-red-700'
    };
    return colors[cat] || 'bg-gray-100 text-gray-700';
  };

  const getActionIcon = (action) => {
    if (action.includes('LOGIN')) return 'üîê';
    if (action.includes('DELETE')) return 'üóëÔ∏è';
    if (action.includes('CREATE')) return '‚ûï';
    if (action.includes('WITHDRAWAL')) return 'üí∞';
    if (action.includes('EXPORT')) return 'üì§';
    return 'üìã';
  };

  const formatDate = (dateStr) => {
    if (!dateStr) return '-';
    const date = new Date(dateStr);
    return date.toLocaleString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
  };

  return React.createElement('div', { className: 'space-y-6' },
    // Header
    React.createElement('div', { className: 'flex justify-between items-center' },
      React.createElement('div', null,
        React.createElement('h2', { className: 'text-2xl font-bold text-gray-800' }, 'üìã Logs de Auditoria'),
        React.createElement('p', { className: 'text-gray-500' }, 'Registro de todas as a√ß√µes do sistema')
      ),
      React.createElement('button', {
        onClick: exportarCSV,
        className: 'px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 flex items-center gap-2'
      }, 'üì• Exportar CSV')
    ),

    // Abas
    React.createElement('div', { className: 'flex bg-gray-100 rounded-xl p-1' },
      [{ id: 'logs', label: 'üìã Logs' }, { id: 'stats', label: 'üìä Estat√≠sticas' }].map(aba =>
        React.createElement('button', {
          key: aba.id,
          onClick: () => setAbaAtiva(aba.id),
          className: `flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${abaAtiva === aba.id ? 'bg-white text-gray-700 shadow' : 'text-gray-500 hover:text-gray-700'}`
        }, aba.label)
      )
    ),

    // Aba Estat√≠sticas
    abaAtiva === 'stats' && stats && React.createElement('div', { className: 'space-y-6' },
      // Cards de resumo
      React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4' },
        React.createElement('div', { className: 'bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white' },
          React.createElement('div', { className: 'text-3xl mb-1' }, 'üìä'),
          React.createElement('div', { className: 'text-2xl font-bold' }, stats.total_acoes),
          React.createElement('div', { className: 'text-sm opacity-80' }, `A√ß√µes (${stats.periodo_dias} dias)`)
        ),
        React.createElement('div', { className: 'bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-4 text-white' },
          React.createElement('div', { className: 'text-3xl mb-1' }, '‚ö†Ô∏è'),
          React.createElement('div', { className: 'text-2xl font-bold' }, stats.falhas_login),
          React.createElement('div', { className: 'text-sm opacity-80' }, 'Falhas de Login')
        ),
        React.createElement('div', { className: 'bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white' },
          React.createElement('div', { className: 'text-3xl mb-1' }, 'üë•'),
          React.createElement('div', { className: 'text-2xl font-bold' }, stats.usuarios_ativos?.length || 0),
          React.createElement('div', { className: 'text-sm opacity-80' }, 'Usu√°rios Ativos')
        ),
        React.createElement('div', { className: 'bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white' },
          React.createElement('div', { className: 'text-3xl mb-1' }, '‚úÖ'),
          React.createElement('div', { className: 'text-2xl font-bold' }, stats.por_categoria?.length || 0),
          React.createElement('div', { className: 'text-sm opacity-80' }, 'Categorias')
        )
      ),

      // Top a√ß√µes e usu√°rios
      React.createElement('div', { className: 'grid md:grid-cols-2 gap-6' },
        React.createElement('div', { className: 'bg-white rounded-xl p-6 shadow' },
          React.createElement('h3', { className: 'font-bold text-lg mb-4' }, 'üî• Top A√ß√µes'),
          React.createElement('div', { className: 'space-y-2' },
            stats.top_acoes?.map((item, idx) =>
              React.createElement('div', { key: idx, className: 'flex justify-between items-center p-2 bg-gray-50 rounded-lg' },
                React.createElement('span', { className: 'text-sm' }, item.action),
                React.createElement('span', { className: 'font-bold text-purple-600' }, item.total)
              )
            )
          )
        ),
        React.createElement('div', { className: 'bg-white rounded-xl p-6 shadow' },
          React.createElement('h3', { className: 'font-bold text-lg mb-4' }, 'üë• Usu√°rios Mais Ativos'),
          React.createElement('div', { className: 'space-y-2' },
            stats.usuarios_ativos?.map((item, idx) =>
              React.createElement('div', { key: idx, className: 'flex justify-between items-center p-2 bg-gray-50 rounded-lg' },
                React.createElement('div', null,
                  React.createElement('span', { className: 'text-sm font-medium' }, item.user_name),
                  React.createElement('span', { className: 'text-xs text-gray-500 ml-2' }, `#${item.user_cod}`)
                ),
                React.createElement('span', { className: 'font-bold text-purple-600' }, item.total)
              )
            )
          )
        )
      )
    ),

    // Aba Logs
    abaAtiva === 'logs' && React.createElement('div', { className: 'space-y-4' },
      // Filtros
      React.createElement('div', { className: 'bg-white rounded-xl p-4 shadow flex flex-wrap gap-4 items-end' },
        React.createElement('div', { className: 'flex-1 min-w-[150px]' },
          React.createElement('label', { className: 'block text-sm text-gray-600 mb-1' }, 'Categoria'),
          React.createElement('select', {
            value: filtros.category,
            onChange: (e) => setFiltros(prev => ({ ...prev, category: e.target.value, page: 1 })),
            className: 'w-full px-3 py-2 border rounded-lg'
          },
            React.createElement('option', { value: '' }, 'Todas'),
            React.createElement('option', { value: 'auth' }, 'üîê Autentica√ß√£o'),
            React.createElement('option', { value: 'user' }, 'üë• Usu√°rios'),
            React.createElement('option', { value: 'financial' }, 'üí∞ Financeiro'),
            React.createElement('option', { value: 'data' }, 'üìä Dados'),
            React.createElement('option', { value: 'admin' }, '‚öôÔ∏è Admin')
          )
        ),
        React.createElement('div', { className: 'flex-1 min-w-[150px]' },
          React.createElement('label', { className: 'block text-sm text-gray-600 mb-1' }, 'Data In√≠cio'),
          React.createElement('input', { type: 'date', value: filtros.data_inicio, onChange: (e) => setFiltros(prev => ({ ...prev, data_inicio: e.target.value })), className: 'w-full px-3 py-2 border rounded-lg' })
        ),
        React.createElement('div', { className: 'flex-1 min-w-[150px]' },
          React.createElement('label', { className: 'block text-sm text-gray-600 mb-1' }, 'Data Fim'),
          React.createElement('input', { type: 'date', value: filtros.data_fim, onChange: (e) => setFiltros(prev => ({ ...prev, data_fim: e.target.value })), className: 'w-full px-3 py-2 border rounded-lg' })
        ),
        React.createElement('div', { className: 'flex-1 min-w-[200px]' },
          React.createElement('label', { className: 'block text-sm text-gray-600 mb-1' }, 'Buscar'),
          React.createElement('input', {
            type: 'text',
            value: filtros.search,
            onChange: (e) => setFiltros(prev => ({ ...prev, search: e.target.value })),
            placeholder: 'Usu√°rio, a√ß√£o...',
            className: 'w-full px-3 py-2 border rounded-lg'
          })
        ),
        React.createElement('button', {
          onClick: () => { setFiltros(prev => ({ ...prev, page: 1 })); carregarLogs(); },
          className: 'px-4 py-2 bg-purple-600 text-white rounded-lg font-medium'
        }, 'üîç Filtrar')
      ),

      // Tabela de logs
      loading
        ? React.createElement('div', { className: 'flex items-center justify-center py-12' },
            React.createElement('div', { className: 'w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin' })
          )
        : React.createElement('div', { className: 'bg-white rounded-xl shadow overflow-hidden' },
            React.createElement('div', { className: 'overflow-x-auto' },
              React.createElement('table', { className: 'w-full' },
                React.createElement('thead', { className: 'bg-gray-50' },
                  React.createElement('tr', null,
                    React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, 'Data/Hora'),
                    React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, 'Usu√°rio'),
                    React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, 'A√ß√£o'),
                    React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, 'Categoria'),
                    React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, 'Recurso'),
                    React.createElement('th', { className: 'px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase' }, 'Status')
                  )
                ),
                React.createElement('tbody', { className: 'divide-y divide-gray-200' },
                  logs.length === 0
                    ? React.createElement('tr', null,
                        React.createElement('td', { colSpan: 6, className: 'px-4 py-8 text-center text-gray-500' }, 'Nenhum log encontrado')
                      )
                    : logs.map((log, idx) =>
                        React.createElement('tr', { key: idx, className: 'hover:bg-gray-50' },
                          React.createElement('td', { className: 'px-4 py-3 text-sm text-gray-600' }, formatDate(log.created_at)),
                          React.createElement('td', { className: 'px-4 py-3' },
                            React.createElement('div', { className: 'font-medium text-gray-800 text-sm' }, log.user_name || 'An√¥nimo'),
                            React.createElement('div', { className: 'text-xs text-gray-400' }, log.user_cod || '-')
                          ),
                          React.createElement('td', { className: 'px-4 py-3 text-sm' },
                            React.createElement('span', { className: 'flex items-center gap-1' },
                              React.createElement('span', null, getActionIcon(log.action)),
                              log.action
                            )
                          ),
                          React.createElement('td', { className: 'px-4 py-3' },
                            React.createElement('span', { className: `px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(log.category)}` }, log.category)
                          ),
                          React.createElement('td', { className: 'px-4 py-3 text-sm text-gray-600' }, log.resource || '-'),
                          React.createElement('td', { className: 'px-4 py-3' },
                            React.createElement('span', { className: `px-2 py-1 rounded-full text-xs font-medium ${log.status === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}` },
                              log.status === 'success' ? '‚úì OK' : '‚úó Falha'
                            )
                          )
                        )
                      )
                )
              )
            ),
            // Pagina√ß√£o
            React.createElement('div', { className: 'px-4 py-3 bg-gray-50 flex justify-between items-center' },
              React.createElement('span', { className: 'text-sm text-gray-500' }, `${filtros.total || 0} registros`),
              React.createElement('div', { className: 'flex gap-2' },
                React.createElement('button', {
                  onClick: () => setFiltros(prev => ({ ...prev, page: Math.max(1, prev.page - 1) })),
                  disabled: filtros.page <= 1,
                  className: 'px-3 py-1 border rounded text-sm disabled:opacity-50'
                }, '‚Üê Anterior'),
                React.createElement('span', { className: 'px-3 py-1 text-sm' }, `P√°gina ${filtros.page} de ${filtros.totalPages || 1}`),
                React.createElement('button', {
                  onClick: () => setFiltros(prev => ({ ...prev, page: prev.page + 1 })),
                  disabled: filtros.page >= (filtros.totalPages || 1),
                  className: 'px-3 py-1 border rounded text-sm disabled:opacity-50'
                }, 'Pr√≥xima ‚Üí')
              )
            )
          )
    )
    // Modal do Roteirizador √© renderizado via useEffect/portal
  );
}

ReactDOM.render(React.createElement(App, null), document.getElementById("root"), hideLoadingScreen);
